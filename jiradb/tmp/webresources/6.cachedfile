;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.help', location = 'aui.chunk.97b0b8778b1dab612048--03b806a46f5014eb639d.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.help"],{EoRc:function(i,u,n){},H4sa:function(i,u,n){"use strict";n("FStl"),n("Q0fs"),n("nqD9"),n("0FWE"),n("VtiI"),n("EoRc")}},[["H4sa","runtime","aui.splitchunk.vendors--7da3927366","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.d925afe2c0","aui.splitchunk.d727dd207f","aui.splitchunk.7da3927366"]]]);
//# sourceMappingURL=aui.chunk.97b0b8778b1dab612048--03b806a46f5014eb639d.js.map;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('Learn more')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('Next')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('Close')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events', location = 'util/Events.js' */
define("jira/components/util/events",["require"],function(c){var a=c("jira/util/events/types");var b=c("jira/components/libs/underscore");return b.extend({},a,{LAYOUT_RENDERED:"layoutRendered"})});AJS.namespace("JIRA.Events",null,require("jira/util/events/types"));;
;
/* module-key = 'jira.webresources:jquery-easing', location = '/includes/jquery/plugins/easing/jquery.easing.1.3.js' */
jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,e,t,u,a){return jQuery.easing[jQuery.easing.def](n,e,t,u,a)},easeInQuad:function(n,e,t,u,a){return u*(e/=a)*e+t},easeOutQuad:function(n,e,t,u,a){return-u*(e/=a)*(e-2)+t},easeInOutQuad:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e+t:-u/2*(--e*(e-2)-1)+t},easeInCubic:function(n,e,t,u,a){return u*(e/=a)*e*e+t},easeOutCubic:function(n,e,t,u,a){return u*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e+t:u/2*((e-=2)*e*e+2)+t},easeInQuart:function(n,e,t,u,a){return u*(e/=a)*e*e*e+t},easeOutQuart:function(n,e,t,u,a){return-u*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e*e+t:-u/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(n,e,t,u,a){return u*(e/=a)*e*e*e*e+t},easeOutQuint:function(n,e,t,u,a){return u*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e*e*e+t:u/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(n,e,t,u,a){return-u*Math.cos(e/a*(Math.PI/2))+u+t},easeOutSine:function(n,e,t,u,a){return u*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(n,e,t,u,a){return-u/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(n,e,t,u,a){return 0==e?t:u*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(n,e,t,u,a){return e==a?t+u:u*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(n,e,t,u,a){return 0==e?t:e==a?t+u:(e/=a/2)<1?u/2*Math.pow(2,10*(e-1))+t:u/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(n,e,t,u,a){return-u*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(n,e,t,u,a){return u*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(n,e,t,u,a){return(e/=a/2)<1?-u/2*(Math.sqrt(1-e*e)-1)+t:u/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(1==(e/=a))return t+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)+t},easeOutElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(1==(e/=a))return t+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return s*Math.pow(2,-10*e)*Math.sin((e*a-r)*(2*Math.PI)/i)+u+t},easeInOutElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(2==(e/=a/2))return t+u;if(i||(i=a*(.3*1.5)),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)*-.5+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)*.5+u+t},easeInBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),u*(e/=a)*e*((r+1)*e-r)+t},easeOutBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),u*((e=e/a-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),(e/=a/2)<1?u/2*(e*e*((1+(r*=1.525))*e-r))+t:u/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:function(n,e,t,u,a){return u-jQuery.easing.easeOutBounce(n,a-e,0,u,a)+t},easeOutBounce:function(n,e,t,u,a){return(e/=a)<1/2.75?u*(7.5625*e*e)+t:e<2/2.75?u*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?u*(7.5625*(e-=2.25/2.75)*e+.9375)+t:u*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(n,e,t,u,a){return e<a/2?.5*jQuery.easing.easeInBounce(n,2*e,0,u,a)+t:.5*jQuery.easing.easeOutBounce(n,2*e-a,0,u,a)+.5*u+t}});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox-1.3.4.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e,i,n,a,o,d,c,r,s,h,l,f,p,g=0,b={},y=[],u=0,w={},v=[],m=null,x=new Image,I=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,C=/[^\.]\.(swf)\s*$/i,k=1,O=0,j="",S=!1,T=t.extend(t("<div/>")[0],{prop:0}),D=t.browser.msie&&t.browser.version<7&&!window.XMLHttpRequest,A=function(){i.hide(),x.onerror=x.onload=null,m&&m.abort(),e.empty()},F=function(){if(!1===b.onError(y,g,b))return i.hide(),void(S=!1);b.titleShow=!1,b.width="auto",b.height="auto",e.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),N()},E=function(){var n,a,o,c,r,s,h=y[g];if(A(),b=t.extend({},t.fn.fancybox.defaults,void 0===t(h).data("fancybox")?b:t(h).data("fancybox")),!1===(s=b.onStart(y,g,b)))return void(S=!1);if("object"==(void 0===s?"undefined":_typeof(s))&&(b=t.extend(b,s)),o=b.title||(h.nodeName?t(h).attr("title"):h.title)||"",h.nodeName&&!b.orig&&(b.orig=t(h).children("img:first").length?t(h).children("img:first"):t(h)),""===o&&b.orig&&b.titleFromAlt&&(o=b.orig.attr("alt")),n=b.href||(h.nodeName?t(h).attr("href"):h.href)||null,(/^(?:javascript)/i.test(n)||"#"==n)&&(n=null),b.type?(a=b.type,n||(n=b.content)):b.content?a="html":n&&(a=n.match(I)?"image":n.match(C)?"swf":t(h).hasClass("iframe")?"iframe":0===n.indexOf("#")?"inline":"ajax"),!a)return void F();switch("inline"==a&&(h=n.substr(n.indexOf("#")),a=t(h).length>0?"inline":"ajax"),b.type=a,b.href=n,b.title=o,b.autoDimensions&&("html"==b.type||"inline"==b.type||"ajax"==b.type?(b.width="auto",b.height="auto"):b.autoDimensions=!1),b.modal&&(b.overlayShow=!0,b.hideOnOverlayClick=!1,b.hideOnContentClick=!1,b.enableEscapeButton=!1,b.showCloseButton=!1),b.padding=parseInt(b.padding,10),b.margin=parseInt(b.margin,10),e.css("padding",b.padding+b.margin),t(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){t(this).replaceWith(d.children())}),a){case"html":e.html(b.content),N();break;case"inline":if(!0===t(h).parent().is("#fancybox-content"))return void(S=!1);t('<div class="fancybox-inline-tmp" />').hide().insertBefore(t(h)).bind("fancybox-cleanup",function(){t(this).replaceWith(d.children())}).bind("fancybox-cancel",function(){t(this).replaceWith(e.children())}),t(h).appendTo(e),N();break;case"image":S=!1,t.fancybox.showActivity(),x=new Image,x.onerror=function(){F()},x.onload=function(){S=!0,x.onerror=x.onload=null,P()},x.src=n;break;case"swf":b.scrolling="no",c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+b.width+'" height="'+b.height+'"><param name="movie" value="'+n+'"></param>',r="",t.each(b.swf,function(t,e){c+='<param name="'+t+'" value="'+e+'"></param>',r+=" "+t+'="'+e+'"'}),c+='<embed src="'+n+'" type="application/x-shockwave-flash" width="'+b.width+'" height="'+b.height+'"'+r+"></embed></object>",e.html(c),N();break;case"ajax":S=!1,t.fancybox.showActivity(),b.ajax.win=b.ajax.success,m=t.ajax(t.extend({},b.ajax,{url:n,data:b.ajax.data||{},error:function(t,e,i){t.status>0&&F()},success:function(t,a,o){if(200==("object"==(void 0===o?"undefined":_typeof(o))?o:m).status){if("function"==typeof b.ajax.win){if(!1===(s=b.ajax.win(n,t,a,o)))return void i.hide();"string"!=typeof s&&"object"!=(void 0===s?"undefined":_typeof(s))||(t=s)}e.html(t),N()}}}));break;case"iframe":B()}},N=function(){var i=b.width,n=b.height;i=i.toString().indexOf("%")>-1?parseInt((t(window).width()-2*b.margin)*parseFloat(i)/100,10)+"px":"auto"==i?"auto":i+"px",n=n.toString().indexOf("%")>-1?parseInt((t(window).height()-2*b.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",e.wrapInner('<div style="width:'+i+";height:"+n+";overflow: "+("auto"==b.scrolling?"auto":"yes"==b.scrolling?"scroll":"hidden")+';position:relative;"></div>'),b.width=e.width(),b.height=e.height(),B()},P=function(){b.width=x.width,b.height=x.height,t("<img />").attr({id:"fancybox-img",src:x.src,alt:b.title}).appendTo(e),B()},B=function(){var o,l;return i.hide(),a.is(":visible")&&!1===w.onCleanup(v,u,w)?(t.event.trigger("fancybox-cancel"),void(S=!1)):(S=!0,t(d.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),a.is(":visible")&&"outside"!==w.titlePosition&&a.css("height",a.height()),v=y,u=g,w=b,w.overlayShow?(n.css({"background-color":w.overlayColor,opacity:w.overlayOpacity,cursor:w.hideOnOverlayClick?"pointer":"auto",height:t(document).height()}),n.is(":visible")||(D&&t("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),n.show())):n.hide(),p=W(),M(),a.is(":visible")?(t(c.add(s).add(h)).hide(),o=a.position(),f={top:o.top,left:o.left,width:a.width(),height:a.height()},l=f.width==p.width&&f.height==p.height,void d.fadeTo(w.changeFade,.3,function(){var i=function(){d.html(e.contents()).fadeTo(w.changeFade,1,z)};t.event.trigger("fancybox-change"),d.empty().removeAttr("filter").css({"border-width":w.padding,width:p.width-2*w.padding,height:b.autoDimensions?"auto":p.height-O-2*w.padding}),l?i():(T.prop=0,t(T).animate({prop:1},{duration:w.changeSpeed,easing:w.easingChange,step:R,complete:i}))})):(a.removeAttr("style"),d.css("border-width",w.padding),"elastic"==w.transitionIn?(f=Q(),d.html(e.contents()),a.show(),w.opacity&&(p.opacity=0),T.prop=0,void t(T).animate({prop:1},{duration:w.speedIn,easing:w.easingIn,step:R,complete:z})):("inside"==w.titlePosition&&O>0&&r.show(),d.css({width:p.width-2*w.padding,height:b.autoDimensions?"auto":p.height-O-2*w.padding}).html(e.contents()),void a.css(p).fadeIn("none"==w.transitionIn?0:w.speedIn,z))))},L=function(t){return!(!t||!t.length)&&("float"==w.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+w.titlePosition+'">'+t+"</div>")},M=function(){if(j=w.title||"",O=0,r.empty().removeAttr("style").removeClass(),!1===w.titleShow)return void r.hide();if(!(j=t.isFunction(w.titleFormat)?w.titleFormat(j,v,u,w):L(j))||""===j)return void r.hide();switch(r.addClass("fancybox-title-"+w.titlePosition).html(j).appendTo("body").show(),w.titlePosition){case"inside":r.css({width:p.width-2*w.padding,marginLeft:w.padding,marginRight:w.padding}),O=r.outerHeight(!0),r.appendTo(o),p.height+=O;break;case"over":r.css({marginLeft:w.padding,width:p.width-2*w.padding,bottom:w.padding}).appendTo(o);break;case"float":r.css("left",-1*parseInt((r.width()-p.width-40)/2,10)).appendTo(a);break;default:r.css({width:p.width-2*w.padding,paddingLeft:w.padding,paddingRight:w.padding}).appendTo(a)}r.hide()},_=function(){if((w.enableEscapeButton||w.enableKeyboardNav)&&t(document).bind("keydown.fb",function(e){27==e.keyCode&&w.enableEscapeButton?(e.preventDefault(),t.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!w.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),t.fancybox[37==e.keyCode?"prev":"next"]())}),!w.showNavArrows)return s.hide(),void h.hide();(w.cyclic&&v.length>1||0!==u)&&s.show(),(w.cyclic&&v.length>1||u!=v.length-1)&&h.show()},z=function(){t.support.opacity||(d.get(0).style.removeProperty("filter"),a.get(0).style.removeProperty("filter")),b.autoDimensions&&d.css("height","auto"),a.css("height","auto"),j&&j.length&&r.show(),w.showCloseButton&&c.show(),_(),w.hideOnContentClick&&d.bind("click",t.fancybox.close),w.hideOnOverlayClick&&n.bind("click",t.fancybox.close),t(window).bind("resize.fb",t.fancybox.resize),w.centerOnScroll&&t(window).bind("scroll.fb",t.fancybox.center),"iframe"==w.type&&t('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(t.browser.msie?'allowtransparency="true""':"")+' scrolling="'+b.scrolling+'" src="'+w.href+'"></iframe>').appendTo(d),a.show(),S=!1,t.fancybox.center(),w.onComplete(v,u,w),H()},H=function(){var t,e;v.length-1>u&&void 0!==(t=v[u+1].href)&&t.match(I)&&(e=new Image,e.src=t),u>0&&void 0!==(t=v[u-1].href)&&t.match(I)&&(e=new Image,e.src=t)},R=function(t){var e={width:parseInt(f.width+(p.width-f.width)*t,10),height:parseInt(f.height+(p.height-f.height)*t,10),top:parseInt(f.top+(p.top-f.top)*t,10),left:parseInt(f.left+(p.left-f.left)*t,10)};void 0!==p.opacity&&(e.opacity=t<.5?.5:t),a.css(e),d.css({width:e.width-2*w.padding,height:e.height-O*t-2*w.padding})},K=function(){return[t(window).width()-2*w.margin,t(window).height()-2*w.margin,t(document).scrollLeft()+w.margin,t(document).scrollTop()+w.margin]},W=function(){var t,e=K(),i={},n=w.autoScale,a=2*w.padding;return w.width.toString().indexOf("%")>-1?i.width=parseInt(e[0]*parseFloat(w.width)/100,10):i.width=w.width+a,w.height.toString().indexOf("%")>-1?i.height=parseInt(e[1]*parseFloat(w.height)/100,10):i.height=w.height+a,n&&(i.width>e[0]||i.height>e[1])&&("image"==b.type||"swf"==b.type?(t=w.width/w.height,i.width>e[0]&&(i.width=e[0],i.height=parseInt((i.width-a)/t+a,10)),i.height>e[1]&&(i.height=e[1],i.width=parseInt((i.height-a)*t+a,10))):(i.width=Math.min(i.width,e[0]),i.height=Math.min(i.height,e[1]))),i.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-i.height-40)),10),i.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-i.width-40)),10),i},q=function(t){var e=t.offset();return e.top+=parseInt(t.css("paddingTop"),10)||0,e.left+=parseInt(t.css("paddingLeft"),10)||0,e.top+=parseInt(t.css("border-top-width"),10)||0,e.left+=parseInt(t.css("border-left-width"),10)||0,e.width=t.width(),e.height=t.height(),e},Q=function(){var e,i,n=!!b.orig&&t(b.orig),a={};return n&&n.length?(e=q(n),a={width:e.width+2*w.padding,height:e.height+2*w.padding,top:e.top-w.padding-20,left:e.left-w.padding-20}):(i=K(),a={width:2*w.padding,height:2*w.padding,top:parseInt(i[3]+.5*i[1],10),left:parseInt(i[2]+.5*i[0],10)}),a},X=function(){if(!i.is(":visible"))return void clearInterval(l);t("div",i).css("top",-40*k+"px"),k=(k+1)%12};t.fn.fancybox=function(e){return t(this).length?(t(this).data("fancybox",t.extend({},e,t.metadata?t(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){if(e.preventDefault(),!S){S=!0,t(this).blur(),y=[],g=0;var i=t(this).attr("rel")||"";i&&""!=i&&"nofollow"!==i?(y=t("a[rel="+i+"], area[rel="+i+"]"),g=y.index(this)):y.push(this),E()}}),this):this},t.fancybox=function(e){var i;if(!S){if(S=!0,i=void 0!==arguments[1]?arguments[1]:{},y=[],g=parseInt(i.index,10)||0,t.isArray(e)){for(var n=0,a=e.length;n<a;n++)"object"==_typeof(e[n])?t(e[n]).data("fancybox",t.extend({},i,e[n])):e[n]=t({}).data("fancybox",t.extend({content:e[n]},i));y=jQuery.merge(y,e)}else"object"==(void 0===e?"undefined":_typeof(e))?t(e).data("fancybox",t.extend({},i,e)):e=t({}).data("fancybox",t.extend({content:e},i)),y.push(e);(g>y.length||g<0)&&(g=0),E()}},t.fancybox.showActivity=function(){clearInterval(l),i.show(),l=setInterval(X,66)},t.fancybox.hideActivity=function(){i.hide()},t.fancybox.next=function(){return t.fancybox.pos(u+1)},t.fancybox.prev=function(){return t.fancybox.pos(u-1)},t.fancybox.pos=function(t){S||(t=parseInt(t),y=v,t>-1&&t<v.length?(g=t,E()):w.cyclic&&v.length>1&&(g=t>=v.length?0:v.length-1,E()))},t.fancybox.cancel=function(){S||(S=!0,t.event.trigger("fancybox-cancel"),A(),b.onCancel(y,g,b),S=!1)},t.fancybox.close=function(){function e(){n.fadeOut("fast"),r.empty().hide(),a.hide(),t.event.trigger("fancybox-cleanup"),d.empty(),w.onClosed(v,u,w),v=b=[],u=g=0,w=b={},S=!1}if(!S&&!a.is(":hidden")){if(S=!0,w&&!1===w.onCleanup(v,u,w))return void(S=!1);if(A(),t(c.add(s).add(h)).hide(),t(d.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),d.find("iframe").attr("src",D&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==w.titlePosition&&r.empty(),a.stop(),"elastic"==w.transitionOut){f=Q();var i=a.position();p={top:i.top,left:i.left,width:a.width(),height:a.height()},w.opacity&&(p.opacity=1),r.empty().hide(),T.prop=1,t(T).animate({prop:0},{duration:w.speedOut,easing:w.easingOut,step:R,complete:e})}else a.fadeOut("none"==w.transitionOut?0:w.speedOut,e)}},t.fancybox.resize=function(){n.is(":visible")&&n.css("height",t(document).height()),t.fancybox.center(!0)},t.fancybox.center=function(){var t,e;S||(e=!0===arguments[0]?1:0,t=K(),!e&&(a.width()>t[0]||a.height()>t[1])||a.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-d.height()-40)-w.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-d.width()-40)-w.padding))},"number"==typeof arguments[0]?arguments[0]:200))},t.fancybox.init=function(){t("#fancybox-wrap").length||(t("body").append(e=t('<div id="fancybox-tmp"></div>'),i=t('<div id="fancybox-loading"><div></div></div>'),n=t('<div id="fancybox-overlay"></div>'),a=t('<div id="fancybox-wrap"></div>')),o=t('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(a),o.append(d=t('<div id="fancybox-content"></div>'),c=t('<a id="fancybox-close"></a>'),r=t('<div id="fancybox-title"></div>'),s=t('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),h=t('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),c.click(t.fancybox.close),i.click(t.fancybox.cancel),s.click(function(e){e.preventDefault(),t.fancybox.prev()}),h.click(function(e){e.preventDefault(),t.fancybox.next()}),t.fn.mousewheel&&a.bind("mousewheel.fb",function(e,i){S?e.preventDefault():0!=t(e.target).get(0).clientHeight&&t(e.target).get(0).scrollHeight!==t(e.target).get(0).clientHeight||(e.preventDefault(),t.fancybox[i>0?"prev":"next"]())}),t.support.opacity||a.addClass("fancybox-ie"),D&&(i.addClass("fancybox-ie6"),a.addClass("fancybox-ie6"),t('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(o)))},t.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},t(document).ready(function(){t.fancybox.init()})}(jQuery);;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
AJS.$.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"==this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"};;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.22.2', location = 'libs/moment/2.22.2/moment-2.22.2.js' */
(function(h){define("atlassian/libs/moment-2.22.2",function(){var z={};h.call(z);return z.moment})})(function(){var h=function(){return gb.apply(null,arguments)},z=function(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)},ga=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},x=function(a){return void 0===a},aa=function(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)},qa=function(a){return a instanceof
Date||"[object Date]"===Object.prototype.toString.call(a)},hb=function(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c},s=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},Q=function(a,b){for(var c in b)s(b,c)&&(a[c]=b[c]);s(b,"toString")&&(a.toString=b.toString);s(b,"valueOf")&&(a.valueOf=b.valueOf);return a},H=function(a,b,c,d){return ib(a,b,c,d,!0).utc()},l=function(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,
invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf},Ia=function(a){if(null==a._isValid){var b=l(a),c=jb.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===
b.bigHour);if(null==Object.isFrozen||!Object.isFrozen(a))a._isValid=c;else return c}return a._isValid},ra=function(a){var b=H(NaN);null!=a?Q(l(b),a):l(b).userInvalidated=!0;return b},Ka=function(a,b){var c,d,e;x(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);x(b._i)||(a._i=b._i);x(b._f)||(a._f=b._f);x(b._l)||(a._l=b._l);x(b._strict)||(a._strict=b._strict);x(b._tzm)||(a._tzm=b._tzm);x(b._isUTC)||(a._isUTC=b._isUTC);x(b._offset)||(a._offset=b._offset);x(b._pf)||(a._pf=l(b));x(b._locale)||
(a._locale=b._locale);if(0<Ja.length)for(c=0;c<Ja.length;c++)d=Ja[c],e=b[d],x(e)||(a[d]=e);return a},ha=function(a){Ka(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===La&&(La=!0,h.updateOffset(this),La=!1)},R=function(a){return a instanceof ha||null!=a&&null!=a._isAMomentObject},B=function(a){return 0>a?Math.ceil(a)||0:Math.floor(a)},n=function(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=B(a));return b},kb=function(a,b,c){var d=Math.min(a.length,b.length),
e=Math.abs(a.length-b.length),k=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&n(a[g])!==n(b[g]))&&k++;return k+e},lb=function(a){!1===h.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+a)},C=function(a,b){var c=!0;return Q(function(){null!=h.deprecationHandler&&h.deprecationHandler(null,a);if(c){for(var d=[],e,k=0;k<arguments.length;k++){e="";if("object"===typeof arguments[k]){e+="\n["+k+"] ";for(var g in arguments[0])e+=g+": "+arguments[0][g]+
", ";e=e.slice(0,-2)}else e=arguments[k];d.push(e)}lb(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)},nb=function(a,b){null!=h.deprecationHandler&&h.deprecationHandler(a,b);mb[a]||(lb(b),mb[a]=!0)},I=function(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)},ob=function(a,b){var c=Q({},a),d;for(d in b)s(b,d)&&(ga(a[d])&&ga(b[d])?(c[d]={},Q(c[d],a[d]),Q(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);
for(d in a)s(a,d)&&(!s(b,d)&&ga(a[d]))&&(c[d]=Q({},c[d]));return c},Ma=function(a){null!=a&&this.set(a)},y=function(a,b){var c=a.toLowerCase();ia[c]=ia[c+"s"]=ia[b]=a},D=function(a){return"string"===typeof a?ia[a]||ia[a.toLowerCase()]:void 0},Na=function(a){var b={},c,d;for(d in a)s(a,d)&&(c=D(d))&&(b[c]=a[d]);return b},M=function(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d},j=function(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});
a&&(ba[a]=e);b&&(ba[b[0]]=function(){return M(e.apply(this,arguments),b[1],b[2])});c&&(ba[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})},sa=function(a,b){if(!a.isValid())return a.localeData().invalidDate();var b=pb(b,a.localeData()),c=Oa,d=b,e;if(!(e=Oa[b])){var k=b,g=k.match(qb),f;e=0;for(f=g.length;e<f;e++)g[e]=ba[g[e]]?ba[g[e]]:g[e].match(/\[[\s\S]/)?g[e].replace(/^\[|\]$/g,""):g[e].replace(/\\/g,"");e=function(a){var b="",c;for(c=0;c<f;c++)b+=I(g[c])?g[c].call(a,
k):g[c];return b}}c[d]=e;return Oa[b](a)},pb=function(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(ta.lastIndex=0;0<=d&&ta.test(a);)a=a.replace(ta,c),ta.lastIndex=0,d-=1;return a},i=function(a,b,c){Pa[a]=I(b)?b:function(a){return a&&c?c:b}},Zb=function(a,b){return!s(Pa,a)?RegExp(W(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,e,k,g){return b||e||k||g}))):Pa[a](b._strict,b._locale)},W=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},p=function(a,
b){var c,d=b;"string"===typeof a&&(a=[a]);aa(b)&&(d=function(a,c){c[b]=n(a)});for(c=0;c<a.length;c++)Qa[a[c]]=d},ja=function(a,b){p(a,function(a,d,e,k){e._w=e._w||{};b(a,e._w,e,k)})},S=function(a){return 0===a%4&&0!==a%100||0===a%400},ca=function(a,b){return function(c){return null!=c?(rb(this,a,c),h.updateOffset(this,b),this):ua(this,a)}},ua=function(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN},rb=function(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&S(a.year())&&1===a.month()&&
29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),va(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)},va=function(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?S(a+(b-c)/12)?29:28:31-c%7%2},sb=function(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=n(b);else if(b=a.localeData().monthsParse(b),!aa(b))return a;c=Math.min(a.date(),va(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a},tb=function(a){return null!=
a?(sb(this,a),h.updateOffset(this,!0),this):ua(this,"Month")},ub=function(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e,k;for(e=0;12>e;e++)k=H([2E3,e]),b.push(this.monthsShort(k,"")),c.push(this.months(k,"")),d.push(this.months(k,"")),d.push(this.monthsShort(k,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=W(b[e]),c[e]=W(c[e]);for(e=0;24>e;e++)d[e]=W(d[e]);this._monthsShortRegex=this._monthsRegex=RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=RegExp("^("+c.join("|")+
")","i");this._monthsShortStrictRegex=RegExp("^("+b.join("|")+")","i")},$b=function(a,b,c,d,e,k,g){b=new Date(a,b,c,d,e,k,g);100>a&&(0<=a&&isFinite(b.getFullYear()))&&b.setFullYear(a);return b},ka=function(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&(0<=a&&isFinite(b.getUTCFullYear()))&&b.setUTCFullYear(a);return b},wa=function(a,b,c){c=7+b-c;return-((7+ka(a,0,c).getUTCDay()-b)%7)+c-1},vb=function(a,b,c,d,e){c=(7+c-d)%7;d=wa(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(S(b)?366:365)+d):d>(S(a)?
366:365)?(b=a+1,a=d-(S(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}},la=function(a,b,c){var d=wa(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+X(a,b,c)):d>X(a.year(),b,c)?(b=d-X(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}},X=function(a,b,c){var d=wa(a,b,c),b=wa(a+1,b,c);return((S(a)?366:365)-d+b)/7},ac=function(a,b,c){var d,e,a=a.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=
[];for(d=0;7>d;++d)e=H([2E3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(e,"").toLocaleLowerCase()}if(c)b="dddd"===b?t.call(this._weekdaysParse,a):"ddd"===b?t.call(this._shortWeekdaysParse,a):t.call(this._minWeekdaysParse,a);else if("dddd"===b){b=t.call(this._weekdaysParse,a);if(-1!==b)return b;b=t.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=t.call(this._minWeekdaysParse,
a)}else if("ddd"===b){b=t.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=t.call(this._weekdaysParse,a);if(-1!==b)return b;b=t.call(this._minWeekdaysParse,a)}else{b=t.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=t.call(this._weekdaysParse,a);if(-1!==b)return b;b=t.call(this._shortWeekdaysParse,a)}return-1!==b?b:null},Ra=function(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e=[],k,g,f,h;for(k=0;7>k;k++)g=H([2E3,1]).day(k),f=this.weekdaysMin(g,""),h=this.weekdaysShort(g,
""),g=this.weekdays(g,""),b.push(f),c.push(h),d.push(g),e.push(f),e.push(h),e.push(g);b.sort(a);c.sort(a);d.sort(a);e.sort(a);for(k=0;7>k;k++)c[k]=W(c[k]),d[k]=W(d[k]),e[k]=W(e[k]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=RegExp("^("+e.join("|")+")","i");this._weekdaysStrictRegex=RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=RegExp("^("+b.join("|")+")","i")},Sa=function(){return this.hours()%
12||12},wb=function(a,b){j(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})},xb=function(a,b){return b._meridiemParse},xa=function(a){var b=null;if(!u[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=ma._abbr,require("./locale/"+a),da(b)}catch(c){}return u[a]},da=function(a,b){var c;a&&((c=x(b)?T(a):Ta(a,b))?ma=c:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return ma._abbr},Ta=function(a,
b){if(null!==b){var c;c=yb;b.abbr=a;if(null!=u[a])nb("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=u[a]._config;else if(null!=b.parentLocale)if(null!=u[b.parentLocale])c=u[b.parentLocale]._config;else if(c=xa(b.parentLocale),null!=c)c=c._config;else return na[b.parentLocale]||(na[b.parentLocale]=
[]),na[b.parentLocale].push({name:a,config:b}),null;u[a]=new Ma(ob(c,b));na[a]&&na[a].forEach(function(a){Ta(a.name,a.config)});da(a);return u[a]}delete u[a];return null},T=function(a){var b;a&&(a._locale&&a._locale._abbr)&&(a=a._locale._abbr);if(!a)return ma;if(!z(a)){if(b=xa(a))return b;a=[a]}a:{b=0;for(var c,d,e,k;b<a.length;){k=(a[b]?a[b].toLowerCase().replace("_","-"):a[b]).split("-");c=k.length;for(d=(d=a[b+1]?a[b+1].toLowerCase().replace("_","-"):a[b+1])?d.split("-"):null;0<c;){if(e=xa(k.slice(0,
c).join("-"))){a=e;break a}if(d&&d.length>=c&&kb(k,d,!0)>=c-1)break;c--}b++}a=ma}return a},Ua=function(a){var b;if((b=a._a)&&-2===l(a).overflow){b=0>b[N]||11<b[N]?N:1>b[J]||b[J]>va(b[E],b[N])?J:0>b[v]||24<b[v]||24===b[v]&&(0!==b[F]||0!==b[O]||0!==b[Y])?v:0>b[F]||59<b[F]?F:0>b[O]||59<b[O]?O:0>b[Y]||999<b[Y]?Y:-1;if(l(a)._overflowDayOfYear&&(b<E||b>J))b=J;l(a)._overflowWeeks&&-1===b&&(b=bc);l(a)._overflowWeekday&&-1===b&&(b=cc);l(a).overflow=b}return a},ea=function(a,b,c){return null!=a?a:null!=b?b:
c},Va=function(a){var b,c=[],d;if(!a._d){d=new Date(h.now());d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];if(a._w&&null==a._a[J]&&null==a._a[N]){var e,k,g,f,i,j;e=a._w;if(null!=e.GG||null!=e.W||null!=e.E){if(i=1,j=4,k=ea(e.GG,a._a[E],la(r(),1,4).year),g=ea(e.W,1),f=ea(e.E,1),1>f||7<f)b=!0}else if(i=a._locale._week.dow,j=a._locale._week.doy,g=la(r(),i,j),k=ea(e.gg,a._a[E],g.year),g=ea(e.w,g.week),null!=e.d){if(f=e.d,0>f||6<f)b=!0}else if(null!=
e.e){if(f=e.e+i,0>e.e||6<e.e)b=!0}else f=i;1>g||g>X(k,i,j)?l(a)._overflowWeeks=!0:null!=b?l(a)._overflowWeekday=!0:(b=vb(k,g,f,i,j),a._a[E]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=ea(a._a[E],d[E]);if(a._dayOfYear>(S(b)?366:365)||0===a._dayOfYear)l(a)._overflowDayOfYear=!0;b=ka(b,0,a._dayOfYear);a._a[N]=b.getUTCMonth();a._a[J]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[v]&&(0===a._a[F]&&0===a._a[O]&&
0===a._a[Y])&&(a._nextDay=!0,a._a[v]=0);a._d=(a._useUTC?ka:$b).apply(null,c);c=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[v]=24);a._w&&("undefined"!==typeof a._w.d&&a._w.d!==c)&&(l(a).weekdayMismatch=!0)}},zb=function(a){var b,c;b=a._i;var d=dc.exec(b)||ec.exec(b),e,f,g,h;if(d){l(a).iso=!0;b=0;for(c=ya.length;b<c;b++)if(ya[b][1].exec(d[1])){f=ya[b][0];e=!1!==ya[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=
Wa.length;b<c;b++)if(Wa[b][1].exec(d[3])){g=(d[2]||" ")+Wa[b][0];break}if(null==g){a._isValid=!1;return}}if(!e&&null!=g)a._isValid=!1;else{if(d[4])if(fc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=f+(g||"")+(h||"");Xa(a)}}}else a._isValid=!1},Cb=function(a){var b=gc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(b){var c=b[3],d=b[2],e=b[5],f=b[6],g=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,Ab.indexOf(c),parseInt(d,
10),parseInt(e,10),parseInt(f,10)];g&&c.push(parseInt(g,10));a:{if(g=b[1])if(g=Bb.indexOf(g),d=(new Date(c[0],c[1],c[2])).getDay(),g!==d){l(a).weekdayMismatch=!0;g=a._isValid=!1;break a}g=!0}g&&(a._a=c,(g=b[8])?b=hc[g]:b[9]?b=0:(b=parseInt(b[10],10),g=b%100,b=60*((b-g)/100)+g),a._tzm=b,a._d=ka.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),l(a).rfc2822=!0)}else a._isValid=!1},Xa=function(a){if(a._f===h.ISO_8601)zb(a);else if(a._f===h.RFC_2822)Cb(a);else{a._a=[];l(a).empty=!0;var b=
""+a._i,c,d,e,f,g,i=b.length,j=0;e=pb(a._f,a._locale).match(qb)||[];for(c=0;c<e.length;c++){f=e[c];if(d=(b.match(Zb(f,a))||[])[0])g=b.substr(0,b.indexOf(d)),0<g.length&&l(a).unusedInput.push(g),b=b.slice(b.indexOf(d)+d.length),j+=d.length;if(ba[f]){if(d?l(a).empty=!1:l(a).unusedTokens.push(f),g=a,null!=d&&s(Qa,f))Qa[f](d,g._a,g,f)}else a._strict&&!d&&l(a).unusedTokens.push(f)}l(a).charsLeftOver=i-j;0<b.length&&l(a).unusedInput.push(b);12>=a._a[v]&&(!0===l(a).bigHour&&0<a._a[v])&&(l(a).bigHour=void 0);
l(a).parsedDateParts=a._a.slice(0);l(a).meridiem=a._meridiem;b=a._a;c=v;i=a._locale;e=a._a[v];j=a._meridiem;null!=j&&(null!=i.meridiemHour?e=i.meridiemHour(e,j):null!=i.isPM&&((i=i.isPM(j))&&12>e&&(e+=12),!i&&12===e&&(e=0)));b[c]=e;Va(a);Ua(a)}},Db=function(a){var b=a._i,c=a._f;a._locale=a._locale||T(a._l);if(null===b||void 0===c&&""===b)return ra({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(R(b))return new ha(Ua(b));if(qa(b))a._d=b;else if(z(c)){var d,e,f;if(0===a._f.length)l(a).invalidFormat=
!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++)if(c=0,d=Ka({},a),null!=a._useUTC&&(d._useUTC=a._useUTC),d._f=a._f[b],Xa(d),Ia(d))if(c+=l(d).charsLeftOver,c+=10*l(d).unusedTokens.length,l(d).score=c,null==f||c<f)f=c,e=d;Q(a,e||d)}}else c?Xa(a):(d=a._i,x(d)?a._d=new Date(h.now()):qa(d)?a._d=new Date(d.valueOf()):"string"===typeof d?(d=ic.exec(a._i),null!==d?a._d=new Date(+d[1]):(zb(a),!1===a._isValid&&(delete a._isValid,Cb(a),!1===a._isValid&&(delete a._isValid,h.createFromInputFallback(a))))):
z(d)?(a._a=hb(d.slice(0),function(a){return parseInt(a,10)}),Va(a)):ga(d)?a._d||(d=Na(a._i),a._a=hb([d.year,d.month,d.day||d.date,d.hour,d.minute,d.second,d.millisecond],function(a){return a&&parseInt(a,10)}),Va(a)):aa(d)?a._d=new Date(d):h.createFromInputFallback(a));Ia(a)||(a._d=null);return a},ib=function(a,b,c,d,e){var f={};if(!0===c||!1===c)d=c,c=void 0;var g;if(g=ga(a))a:if(g=a,Object.getOwnPropertyNames)g=0===Object.getOwnPropertyNames(g).length;else{for(var h in g)if(g.hasOwnProperty(h)){g=
!1;break a}g=!0}if(g||z(a)&&0===a.length)a=void 0;f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new ha(Ua(Db(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a},r=function(a,b,c,d){return ib(a,b,c,d,!1)},Eb=function(a,b){var c,d;1===b.length&&z(b[0])&&(b=b[0]);if(!b.length)return r();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c},za=function(a){var b=Na(a),a=b.year||0,c=b.quarter||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||
0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;a:{for(var l in b)if(!(-1!==t.call(oa,l)&&(null==b[l]||!isNaN(b[l])))){b=!1;break a}l=!1;for(var m=0;m<oa.length;++m)if(b[oa[m]]){if(l){b=!1;break a}parseFloat(b[oa[m]])!==n(b[oa[m]])&&(l=!0)}b=!0}this._isValid=b;this._milliseconds=+j+1E3*i+6E4*h+36E5*g;this._days=+f+7*e;this._months=+d+3*c+12*a;this._data={};this._locale=T();this._bubble()},Ya=function(a){return a instanceof za},Za=function(a){return 0>a?-1*Math.round(-1*a):Math.round(a)},Fb=function(a,
b){j(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+M(~~(a/60),2)+b+M(~~a%60,2)})},$a=function(a,b){var c=(b||"").match(a);if(null===c)return null;var c=((c[c.length-1]||[])+"").match(jc)||["-",0,0],d=+(60*c[1])+n(c[2]);return 0===d?0:"+"===c[0]?d:-d},ab=function(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(R(a)||qa(a)?a.valueOf():r(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+d),h.updateOffset(c,!1),c):r(a).local()},Gb=function(){return this.isValid()?this._isUTC&&
0===this._offset:!1},G=function(a,b){var c=a,d=null;if(Ya(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if(aa(a))c={},b?c[b]=a:c.milliseconds=a;else if(d=kc.exec(a))c="-"===d[1]?-1:1,c={y:0,d:n(d[J])*c,h:n(d[v])*c,m:n(d[F])*c,s:n(d[O])*c,ms:n(Za(1E3*d[Y]))*c};else if(d=lc.exec(a))c="-"===d[1]?-1:1,c={y:Z(d[2],c),M:Z(d[3],c),w:Z(d[4],c),d:Z(d[5],c),h:Z(d[6],c),m:Z(d[7],c),s:Z(d[8],c)};else if(null==c)c={};else if("object"===typeof c&&("from"in c||"to"in c))d=r(c.from),c=r(c.to),!d.isValid()||
!c.isValid()?d={milliseconds:0,months:0}:(c=ab(c,d),d.isBefore(c)?c=Hb(d,c):(c=Hb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c),c={},c.ms=d.milliseconds,c.M=d.months;c=new za(c);Ya(a)&&s(a,"_locale")&&(c._locale=a._locale);return c},Z=function(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b},Hb=function(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c},Jb=function(a,b){return function(c,d){var e;null!==d&&!isNaN(+d)&&(nb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);e=G("string"===typeof c?+c:c,d);Ib(this,e,a);return this}},Ib=function(a,b,c,d){var e=b._milliseconds,f=Za(b._days),b=Za(b._months);a.isValid()&&(d=null==d?!0:d,b&&sb(a,ua(a,"Month")+b*c),f&&rb(a,"Date",ua(a,"Date")+f*c),e&&a._d.setTime(a._d.valueOf()+
e*c),d&&h.updateOffset(a,f||b))},bb=function(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months"),e;0>b-d?(e=a.clone().add(c-1,"months"),d=(b-d)/(d-e)):(e=a.clone().add(c+1,"months"),d=(b-d)/(e-d));return-(c+d)||0},Kb=function(a){if(void 0===a)return this._locale._abbr;a=T(a);null!=a&&(this._locale=a);return this},Lb=function(){return this._locale},Aa=function(a,b){j(0,[a,a.length],0,b)},Mb=function(a,b,c,d,e){var f;if(null==a)return la(this,d,e).year;f=X(a,d,e);b>f&&
(b=f);a=vb(a,b,c,d,e);a=ka(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this},mc=function(a,b){b[Y]=n(1E3*("0."+a))},Nb=function(a){return a},Ba=function(a,b,c,d){var e=T(),b=H().set(d,b);return e[c](b,a)},Ob=function(a,b,c){aa(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return Ba(a,b,c,"month");for(var d=[],b=0;12>b;b++)d[b]=Ba(a,b,c,"month");return d},cb=function(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);aa(b)&&(c=b,b=void 0);var b=
b||"",e=T(),a=a?e._week.dow:0;if(null!=c)return Ba(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=Ba(b,(c+a)%7,d,"day");return e},Pb=function(a,b,c,d){b=G(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()},U=function(a){return function(){return this.as(a)}},$=function(a){return function(){return this.isValid()?this._data[a]:NaN}},nc=function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)},fa=function(a){return(0<a)-(0>a)||+a},Ca=function(){if(!this.isValid())return this.localeData().invalidDate();
var a=db(this._milliseconds)/1E3,b=db(this._days),c=db(this._months),d,e,f;d=B(a/60);e=B(d/60);a%=60;d%=60;f=B(c/12);var c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",g=this.asSeconds();if(!g)return"P0D";var h=0>g?"-":"",i=fa(this._months)!==fa(g)?"-":"",j=fa(this._days)!==fa(g)?"-":"",g=fa(this._milliseconds)!==fa(g)?"-":"";return h+"P"+(f?i+f+"Y":"")+(c?i+c+"M":"")+(b?j+b+"D":"")+(e||d||a?"T":"")+(e?g+e+"H":"")+(d?g+d+"M":"")+(a?g+a+"S":"")},gb,jb;jb=Array.prototype.some?Array.prototype.some:
function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Ja=h.momentProperties=[],La=!1,mb={};h.suppressDeprecationWarnings=!1;h.deprecationHandler=null;var Qb;Qb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)s(a,b)&&c.push(b);return c};var ia={},w={},qb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
ta=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Oa={},ba={},Rb=/\d/,A=/\d\d/,Sb=/\d{3}/,eb=/\d{4}/,Da=/[+-]?\d{6}/,q=/\d\d?/,Tb=/\d\d\d\d?/,Ub=/\d\d\d\d\d\d?/,Ea=/\d{1,3}/,fb=/\d{1,4}/,Fa=/[+-]?\d{1,6}/,oc=/\d+/,Ga=/[+-]?\d+/,pc=/Z|[+-]\d\d:?\d\d/gi,Ha=/Z|[+-]\d\d(?::?\d\d)?/gi,pa=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Pa={},Qa={},E=0,N=1,J=2,v=3,F=4,O=5,Y=6,bc=7,cc=8;j("Y",0,0,function(){var a=
this.year();return 9999>=a?""+a:"+"+a});j(0,["YY",2],0,function(){return this.year()%100});j(0,["YYYY",4],0,"year");j(0,["YYYYY",5],0,"year");j(0,["YYYYYY",6,!0],0,"year");y("year","y");w.year=1;i("Y",Ga);i("YY",q,A);i("YYYY",fb,eb);i("YYYYY",Fa,Da);i("YYYYYY",Fa,Da);p(["YYYYY","YYYYYY"],E);p("YYYY",function(a,b){b[E]=2===a.length?h.parseTwoDigitYear(a):n(a)});p("YY",function(a,b){b[E]=h.parseTwoDigitYear(a)});p("Y",function(a,b){b[E]=parseInt(a,10)});h.parseTwoDigitYear=function(a){return n(a)+(68<
n(a)?1900:2E3)};var Vb=ca("FullYear",!0),t;t=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};j("M",["MM",2],"Mo",function(){return this.month()+1});j("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});j("MMMM",0,0,function(a){return this.localeData().months(this,a)});y("month","M");w.month=8;i("M",q);i("MM",q,A);i("MMM",function(a,b){return b.monthsShortRegex(a)});i("MMMM",function(a,b){return b.monthsRegex(a)});
p(["M","MM"],function(a,b){b[N]=n(a)-1});p(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[N]=d:l(c).invalidMonth=a});var Wb=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ab="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");j("w",["ww",2],"wo","week");j("W",["WW",2],"Wo","isoWeek");y("week","w");y("isoWeek","W");w.week=5;w.isoWeek=5;i("w",q);i("ww",q,A);i("W",q);i("WW",q,A);ja(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=n(a)});j("d",0,"do","day");j("dd",0,
0,function(a){return this.localeData().weekdaysMin(this,a)});j("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});j("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});j("e",0,0,"weekday");j("E",0,0,"isoWeekday");y("day","d");y("weekday","e");y("isoWeekday","E");w.day=11;w.weekday=11;w.isoWeekday=11;i("d",q);i("e",q);i("E",q);i("dd",function(a,b){return b.weekdaysMinRegex(a)});i("ddd",function(a,b){return b.weekdaysShortRegex(a)});i("dddd",function(a,b){return b.weekdaysRegex(a)});
ja(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:l(c).invalidWeekday=a});ja(["d","e","E"],function(a,b,c,d){b[d]=n(a)});var Bb="Sun Mon Tue Wed Thu Fri Sat".split(" ");j("H",["HH",2],0,"hour");j("h",["hh",2],0,Sa);j("k",["kk",2],0,function(){return this.hours()||24});j("hmm",0,0,function(){return""+Sa.apply(this)+M(this.minutes(),2)});j("hmmss",0,0,function(){return""+Sa.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)});j("Hmm",0,0,function(){return""+
this.hours()+M(this.minutes(),2)});j("Hmmss",0,0,function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)});wb("a",!0);wb("A",!1);y("hour","h");w.hour=13;i("a",xb);i("A",xb);i("H",q);i("h",q);i("k",q);i("HH",q,A);i("hh",q,A);i("kk",q,A);i("hmm",Tb);i("hmmss",Ub);i("Hmm",Tb);i("Hmmss",Ub);p(["H","HH"],v);p(["k","kk"],function(a,b){var c=n(a);b[v]=24===c?0:c});p(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});p(["h","hh"],function(a,b,c){b[v]=n(a);l(c).bigHour=!0});
p("hmm",function(a,b,c){var d=a.length-2;b[v]=n(a.substr(0,d));b[F]=n(a.substr(d));l(c).bigHour=!0});p("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[v]=n(a.substr(0,d));b[F]=n(a.substr(d,2));b[O]=n(a.substr(e));l(c).bigHour=!0});p("Hmm",function(a,b){var c=a.length-2;b[v]=n(a.substr(0,c));b[F]=n(a.substr(c))});p("Hmmss",function(a,b){var c=a.length-4,d=a.length-2;b[v]=n(a.substr(0,c));b[F]=n(a.substr(c,2));b[O]=n(a.substr(d))});var qc=ca("Hours",!0),yb={calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",
MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Ab,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Bb,meridiemParse:/[ap]\.?m?\.?/i},u={},na={},ma,dc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
ec=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fc=/Z|[+-]\d\d(?::?\d\d)?/,ya=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wa=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ic=/^\/?Date\((\-?\d+)/i,gc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,hc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};h.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});h.ISO_8601=function(){};
h.RFC_2822=function(){};var rc=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=r.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:ra()}),sc=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=r.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:ra()}),oa="year quarter month week day hour minute second millisecond".split(" ");
Fb("Z",":");Fb("ZZ","");i("Z",Ha);i("ZZ",Ha);p(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=$a(Ha,a)});var jc=/([\+\-]|\d\d)/gi;h.updateOffset=function(){};var kc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,lc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;G.fn=za.prototype;G.invalid=function(){return G(NaN)};var tc=Jb(1,"add"),uc=Jb(-1,"subtract");h.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xb=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});j(0,["gg",2],0,function(){return this.weekYear()%100});j(0,["GG",2],0,function(){return this.isoWeekYear()%100});Aa("gggg","weekYear");Aa("ggggg","weekYear");Aa("GGGG","isoWeekYear");Aa("GGGGG","isoWeekYear");y("weekYear",
"gg");y("isoWeekYear","GG");w.weekYear=1;w.isoWeekYear=1;i("G",Ga);i("g",Ga);i("GG",q,A);i("gg",q,A);i("GGGG",fb,eb);i("gggg",fb,eb);i("GGGGG",Fa,Da);i("ggggg",Fa,Da);ja(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=n(a)});ja(["gg","GG"],function(a,b,c,d){b[d]=h.parseTwoDigitYear(a)});j("Q",0,"Qo","quarter");y("quarter","Q");w.quarter=7;i("Q",Rb);p("Q",function(a,b){b[N]=3*(n(a)-1)});j("D",["DD",2],"Do","date");y("date","D");w.date=9;i("D",q);i("DD",q,A);i("Do",function(a,b){return a?
b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});p(["D","DD"],J);p("Do",function(a,b){b[J]=n(a.match(q)[0])});var Yb=ca("Date",!0);j("DDD",["DDDD",3],"DDDo","dayOfYear");y("dayOfYear","DDD");w.dayOfYear=4;i("DDD",Ea);i("DDDD",Sb);p(["DDD","DDDD"],function(a,b,c){c._dayOfYear=n(a)});j("m",["mm",2],0,"minute");y("minute","m");w.minute=14;i("m",q);i("mm",q,A);p(["m","mm"],F);var vc=ca("Minutes",!1);j("s",["ss",2],0,"second");y("second","s");w.second=15;i("s",q);i("ss",q,
A);p(["s","ss"],O);var wc=ca("Seconds",!1);j("S",0,0,function(){return~~(this.millisecond()/100)});j(0,["SS",2],0,function(){return~~(this.millisecond()/10)});j(0,["SSS",3],0,"millisecond");j(0,["SSSS",4],0,function(){return 10*this.millisecond()});j(0,["SSSSS",5],0,function(){return 100*this.millisecond()});j(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});j(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});j(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});j(0,
["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});y("millisecond","ms");w.millisecond=16;i("S",Ea,Rb);i("SS",Ea,A);i("SSS",Ea,Sb);var K;for(K="SSSS";9>=K.length;K+="S")i(K,oc);for(K="S";9>=K.length;K+="S")p(K,mc);var xc=ca("Milliseconds",!1);j("z",0,0,"zoneAbbr");j("zz",0,0,"zoneName");var f=ha.prototype;f.add=tc;f.calendar=function(a,b){var c=a||r(),d=ab(c,this).startOf("day"),d=h.calendarFormat(this,d)||"sameElse",e=b&&(I(b[d])?b[d].call(this,c):b[d]);return this.format(e||this.localeData().calendar(d,
this,r(c)))};f.clone=function(){return new ha(this)};f.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=ab(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=D(b);switch(b){case "year":b=bb(this,a)/12;break;case "month":b=bb(this,a);break;case "quarter":b=bb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-
a}return c?b:B(b)};f.endOf=function(a){a=D(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};f.format=function(a){a||(a=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);a=sa(this,a);return this.localeData().postformat(a)};f.from=function(a,b){return this.isValid()&&(R(a)&&a.isValid()||r(a).isValid())?G({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};f.fromNow=function(a){return this.from(r(),
a)};f.to=function(a,b){return this.isValid()&&(R(a)&&a.isValid()||r(a).isValid())?G({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};f.toNow=function(a){return this.to(r(),a)};f.get=function(a){a=D(a);return I(this[a])?this[a]():this};f.invalidAt=function(){return l(this).overflow};f.isAfter=function(a,b){var c=R(a)?a:r(a);if(!this.isValid()||!c.isValid())return!1;b=D(!x(b)?b:"millisecond");return"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()};
f.isBefore=function(a,b){var c=R(a)?a:r(a);if(!this.isValid()||!c.isValid())return!1;b=D(!x(b)?b:"millisecond");return"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()};f.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};f.isSame=function(a,b){var c=R(a)?a:r(a);if(!this.isValid()||!c.isValid())return!1;b=D(b||"millisecond");if("millisecond"===b)return this.valueOf()===
c.valueOf();c=c.valueOf();return this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()};f.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};f.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};f.isValid=function(){return Ia(this)};f.lang=Xb;f.locale=Kb;f.localeData=Lb;f.max=sc;f.min=rc;f.parsingFlags=function(){return Q({},l(this))};f.set=function(a,b){if("object"===typeof a){var c=a=Na(a),d=[],e;for(e in c)d.push({unit:e,priority:w[e]});
d.sort(function(a,b){return a.priority-b.priority});for(c=0;c<d.length;c++)this[d[c].unit](a[d[c].unit])}else if(a=D(a),I(this[a]))return this[a](b);return this};f.startOf=function(a){a=D(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&
this.month(3*Math.floor(this.month()/3));return this};f.subtract=uc;f.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};f.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};f.toDate=function(){return new Date(this.valueOf())};f.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==
a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?sa(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",sa(b,"Z")):sa(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};f.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":
"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};f.toJSON=function(){return this.isValid()?this.toISOString():null};f.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};f.unix=function(){return Math.floor(this.valueOf()/1E3)};f.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};f.creationData=function(){return{input:this._i,format:this._f,
locale:this._locale,isUTC:this._isUTC,strict:this._strict}};f.year=Vb;f.isLeapYear=function(){return S(this.year())};f.weekYear=function(a){return Mb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};f.isoWeekYear=function(a){return Mb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};f.quarter=f.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};f.month=tb;f.daysInMonth=function(){return va(this.year(),
this.month())};f.week=f.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};f.isoWeek=f.isoWeeks=function(a){var b=la(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};f.weeksInYear=function(){var a=this.localeData()._week;return X(this.year(),a.dow,a.doy)};f.isoWeeksInYear=function(){return X(this.year(),1,4)};f.date=Yb;f.day=f.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=
a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};f.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};f.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData(),a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%
7?a:a-7)}return this.day()||7};f.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};f.hour=f.hours=qc;f.minute=f.minutes=vc;f.second=f.seconds=wc;f.millisecond=f.milliseconds=xc;f.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=$a(Ha,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/
15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Ib(this,G(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};f.utc=function(a){return this.utcOffset(0,a)};f.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};
f.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=$a(pc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};f.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?r(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};f.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};f.isLocal=function(){return this.isValid()?!this._isUTC:!1};
f.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};f.isUtc=Gb;f.isUTC=Gb;f.zoneAbbr=function(){return this._isUTC?"UTC":""};f.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};f.dates=C("dates accessor is deprecated. Use date instead.",Yb);f.months=C("months accessor is deprecated. Use month instead",tb);f.years=C("years accessor is deprecated. Use year instead",Vb);f.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});f.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!x(this._isDSTShifted))return this._isDSTShifted;var a={};Ka(a,this);a=Db(a);if(a._a){var b=a._isUTC?H(a._a):r(a._a);this._isDSTShifted=this.isValid()&&0<kb(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var o=Ma.prototype;o.calendar=
function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return I(a)?a.call(b,c):a};o.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};o.invalidDate=function(){return this._invalidDate};o.ordinal=function(a){return this._ordinal.replace("%d",a)};o.preparse=Nb;o.postformat=Nb;o.relativeTime=function(a,b,c,d){var e=
this._relativeTime[c];return I(e)?e(a,b,c,d):e.replace(/%d/i,a)};o.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return I(c)?c(b):c.replace(/%s/i,b)};o.set=function(a){var b,c;for(c in a)b=a[c],I(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};o.months=function(a,b){return!a?z(this._months)?this._months:this._months.standalone:z(this._months)?this._months[a.month()]:
this._months[(this._months.isFormat||Wb).test(b)?"format":"standalone"][a.month()]};o.monthsShort=function(a,b){return!a?z(this._monthsShort)?this._monthsShort:this._monthsShort.standalone:z(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Wb.test(b)?"format":"standalone"][a.month()]};o.monthsParse=function(a,b,c){var d,e;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(d=0;12>
d;++d)e=H([2E3,d]),this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase()}if(c)b="MMM"===b?t.call(this._shortMonthsParse,a):t.call(this._longMonthsParse,a);else if("MMM"===b){b=t.call(this._shortMonthsParse,a);if(-1!==b)break a;b=t.call(this._longMonthsParse,a)}else{b=t.call(this._longMonthsParse,a);if(-1!==b)break a;b=t.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=
[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=H([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),!c&&!this._monthsParse[d]&&(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};
o.monthsRegex=function(a){if(this._monthsParseExact)return s(this,"_monthsRegex")||ub.call(this),a?this._monthsStrictRegex:this._monthsRegex;s(this,"_monthsRegex")||(this._monthsRegex=pa);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};o.monthsShortRegex=function(a){if(this._monthsParseExact)return s(this,"_monthsRegex")||ub.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;s(this,"_monthsShortRegex")||(this._monthsShortRegex=pa);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};o.week=function(a){return la(a,this._week.dow,this._week.doy).week};o.firstDayOfYear=function(){return this._week.doy};o.firstDayOfWeek=function(){return this._week.dow};o.weekdays=function(a,b){return!a?z(this._weekdays)?this._weekdays:this._weekdays.standalone:z(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]};o.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};o.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};o.weekdaysParse=function(a,b,c){var d,e;if(this._weekdaysParseExact)return ac.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=H([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=
RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};
o.weekdaysRegex=function(a){if(this._weekdaysParseExact)return s(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;s(this,"_weekdaysRegex")||(this._weekdaysRegex=pa);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};o.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return s(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
pa);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};o.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return s(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pa);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};o.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};o.meridiem=function(a,b,c){return 11<
a?c?"pm":"PM":c?"am":"AM"};da("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===n(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});h.lang=C("moment.lang is deprecated. Use moment.locale instead.",da);h.langData=C("moment.langData is deprecated. Use moment.localeData instead.",T);var P=Math.abs,yc=U("ms"),zc=U("s"),Ac=U("m"),Bc=U("h"),Cc=U("d"),Dc=U("w"),Ec=U("M"),Fc=U("y"),Gc=$("milliseconds"),Hc=$("seconds"),Ic=$("minutes"),Jc=$("hours"),Kc=
$("days"),Lc=$("months"),Mc=$("years"),V=Math.round,L={ss:44,s:45,m:45,h:22,d:26,M:11},db=Math.abs,m=za.prototype;m.isValid=function(){return this._isValid};m.abs=function(){var a=this._data;this._milliseconds=P(this._milliseconds);this._days=P(this._days);this._months=P(this._months);a.milliseconds=P(a.milliseconds);a.seconds=P(a.seconds);a.minutes=P(a.minutes);a.hours=P(a.hours);a.months=P(a.months);a.years=P(a.years);return this};m.add=function(a,b){return Pb(this,a,b,1)};m.subtract=function(a,
b){return Pb(this,a,b,-1)};m.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds,a=D(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+
a);}};m.asMilliseconds=yc;m.asSeconds=zc;m.asMinutes=Ac;m.asHours=Bc;m.asDays=Cc;m.asWeeks=Dc;m.asMonths=Ec;m.asYears=Fc;m.valueOf=function(){return!this.isValid()?NaN:this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*n(this._months/12)};m._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*(0>146097*c/4800+b?Math.floor(146097*c/4800+b):Math.ceil(146097*c/4800+b)),c=b=0);d.milliseconds=a%1E3;a=B(a/1E3);
d.seconds=a%60;a=B(a/60);d.minutes=a%60;a=B(a/60);d.hours=a%24;b+=B(a/24);a=B(4800*b/146097);c+=a;b-=0>146097*a/4800?Math.floor(146097*a/4800):Math.ceil(146097*a/4800);a=B(c/12);d.days=b;d.months=c%12;d.years=a;return this};m.clone=function(){return G(this)};m.get=function(a){a=D(a);return this.isValid()?this[a+"s"]():NaN};m.milliseconds=Gc;m.seconds=Hc;m.minutes=Ic;m.hours=Jc;m.days=Kc;m.weeks=function(){return B(this.days()/7)};m.months=Lc;m.years=Mc;m.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();
var b=this.localeData(),c;c=!a;var d=G(this).abs(),e=V(d.as("s")),f=V(d.as("m")),g=V(d.as("h")),h=V(d.as("d")),i=V(d.as("M")),d=V(d.as("y")),e=e<=L.ss&&["s",e]||e<L.s&&["ss",e]||1>=f&&["m"]||f<L.m&&["mm",f]||1>=g&&["h"]||g<L.h&&["hh",g]||1>=h&&["d"]||h<L.d&&["dd",h]||1>=i&&["M"]||i<L.M&&["MM",i]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=nc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};m.toISOString=Ca;m.toString=Ca;m.toJSON=Ca;m.locale=Kb;m.localeData=Lb;m.toIsoString=
C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ca);m.lang=Xb;j("X",0,0,"unix");j("x",0,0,"valueOf");i("x",Ga);i("X",/[+-]?\d+(\.\d{1,3})?/);p("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});p("x",function(a,b,c){c._d=new Date(n(a))});h.version="2.22.2";gb=r;h.fn=f;h.min=function(){var a=[].slice.call(arguments,0);return Eb("isBefore",a)};h.max=function(){var a=[].slice.call(arguments,0);return Eb("isAfter",a)};h.now=function(){return Date.now?Date.now():
+new Date};h.utc=H;h.unix=function(a){return r(1E3*a)};h.months=function(a,b){return Ob(a,b,"months")};h.isDate=qa;h.locale=da;h.invalid=ra;h.duration=G;h.isMoment=R;h.weekdays=function(a,b,c){return cb(a,b,c,"weekdays")};h.parseZone=function(){return r.apply(null,arguments).parseZone()};h.localeData=T;h.isDuration=Ya;h.monthsShort=function(a,b){return Ob(a,b,"monthsShort")};h.weekdaysMin=function(a,b,c){return cb(a,b,c,"weekdaysMin")};h.defineLocale=Ta;h.updateLocale=function(a,b){if(null!=b){var c,
d=yb;c=xa(a);null!=c&&(d=c._config);b=ob(d,b);c=new Ma(b);c.parentLocale=u[a];u[a]=c;da(a)}else null!=u[a]&&(null!=u[a].parentLocale?u[a]=u[a].parentLocale:null!=u[a]&&delete u[a]);return u[a]};h.locales=function(){return Qb(u)};h.weekdaysShort=function(a,b,c){return cb(a,b,c,"weekdaysShort")};h.normalizeUnits=D;h.relativeTimeRounding=function(a){return void 0===a?V:"function"===typeof a?(V=a,!0):!1};h.relativeTimeThreshold=function(a,b){if(void 0===L[a])return!1;if(void 0===b)return L[a];L[a]=b;
"s"===a&&(L.ss=b-1);return!0};h.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"};h.prototype=f;h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};this.moment=h});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.22.2"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
!function(){"use strict";var e;define("jira/moment/moment.jira.datetime-formats",["wrm/data"],function(t){return e||(e=t.claim("jira.core:dateFormatProvider.allFormats")),e})}(),define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.datetime-formats","jira/moment/moment.jira.formatter","jira/util/formatter"],function(e,t,m,a){"use strict";var o=t.dateFormats,r=t.lookAndFeelFormats;return e.locale("jira",{months:o.months,monthsShort:o.monthsShort,weekdays:o.weekdays,weekdaysShort:o.weekdaysShort,weekdaysMin:o.weekdaysShort,longDateFormat:{LT:m.translateSimpleDateFormat(r.time),L:m.translateSimpleDateFormat(r.day),LL:m.translateSimpleDateFormat(r.dmy),LLL:m.translateSimpleDateFormat(r.complete)},meridiem:function(e){return o.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}}),e});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.jira.i18n"],function(t){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jquery","jira/moment","jira/util/data/meta"],function(e,t,n,o){"use strict";function r(e,t){this.key=e,this.isAge=t}function a(t,n,o){return t in I?e.format(I[t],o):null}function i(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":case"timestamp":return"LLL";default:return null}}function u(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function l(e,t){var n=u(e);return n.clone().subtract("d",1)<=t&&t<n}function m(e,t){var n=u(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function s(e,t){return Math.floor(t.diff(e,"minutes",!0))}function c(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function d(e,t){return Math.floor(t.diff(e,"days",!0))}function g(e,t){var n=i(t);return e.format(n)}function f(e,t,o){if(o=o||n(),e<=o){if(e>o.clone().subtract("m",1))return a("aMomentAgo",t);if(e>o.clone().subtract("m",2))return a("oneMinuteAgo",t);if(e>o.clone().subtract("m",50))return a("xMinutesAgo",t,s(e,o));if(e>o.clone().subtract("m",90))return a("oneHourAgo",t);if(l(o,e)&&e<o.clone().subtract("h",5))return a("oneDayAgo",t);if(e>o.clone().subtract("d",1))return a("xHoursAgo",t,c(e,o));if(e>o.clone().subtract("d",7))return a("xDaysAgo",t,Math.max(d(e,o),2));if(e>o.clone().subtract("d",8))return a("oneWeekAgo",t)}else{if(e<o.clone().add("m",1))return a("inAMoment",t);if(e<o.clone().add("m",2))return a("inOneMinute",t);if(e<o.clone().add("m",50))return a("inXMinutes",t,s(o,e));if(e<o.clone().add("m",90))return a("inOneHour",t);if(m(o,e)&&e>o.clone().add("h",5))return a("inOneDay",t);if(e<o.clone().add("d",1))return a("inXHours",t,c(o,e));if(e<o.clone().add("d",7))return a("inXDays",t,Math.max(d(o,e),2));if(e<o.clone().add("d",8))return a("inOneWeek",t)}return g(e,t)}var v={},x=o.getBoolean("date-relativize");r.types={};for(var A,h=["shortAge","longAge","fullAge","short","long","full","timestamp"],T=0,y=h.length;T<y;T++)A=h[T],r.types[A]=new r(A,-1!==A.toLowerCase().indexOf("age"));var I={};return v.FormatType=r,v.formatDate=function(e,t,n){return e&&t?(x||n)&&t.isAge?f(e,t):g(e,t):null},v.setRelativeTranslations=function(e){for(var t in e)I[t]=e[t]},v.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},v.restoreDefaultRelativeTranslations(),v.formatDateWithRelativeAge=f,v.formatDateWithFormatString=g,v}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,a,i){"use strict";var r,n=a.getBoolean("date-relativize"),u=[],s=function(t,e){t.data("livestampdata",e),u.push(t)},l=function t(){clearTimeout(r),m(),r=setTimeout(t,6e3)},m=function(){u=t.grep(u,function(t){var a,r,u=t.data("livestampdata"),s=t.data("relativize");if(e.isMoment(u)&&t.closest("html").length){a=t.text();var l=t.data("datetime-format");l=l||"fullAge",n||s||(l=l.replace("Age","")),r=i.formatDate(u,i.FormatType.types[l],s),a!==r&&t.text(r)}else t.removeData("livestampdata");return!!t.data("livestampdata")})},o=function(a){return a.each(function(){var a=t(this),i=a.attr("datetime");if(i){var r=isNaN(i)?e(i).utcOffset(i):e(parseInt(i,10));s(a,r)}}),l(),a};return t.fn.livestamp=function(){return o(this)},o}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,void 0===Calendar._SDN){void 0===Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,void 0===Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=e.currentTarget;1!==t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=e.target;1!==t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),void 0!==t&&t.appendChild(a),a},Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),is_ie&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return void 0!==e.month?e:void 0!==e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return void 0!==e.year?e:void 0!==e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;void 0===l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var o=n.style;if(o.display="block",a.navtype<0)o.left=a.offsetLeft+"px";else{var d=n.offsetWidth;void 0===d&&(d=50),o.left=a.offsetLeft+a.offsetWidth-d+"px"}o.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event),Calendar.removeClass(el,"active"),target!=el&&target.parentNode!=el||Calendar.cellClick(el,ev);var mon=Calendar.findMonth(target),date=null;if(mon)date=new Date(cal.date),mon.month!=date.getMonth()&&(date.setMonth(mon.month),cal.setDate(date),cal.dateClicked=!1,cal.callHandler());else{var year=Calendar.findYear(target);year&&(date=new Date(cal.date),year.year!=date.getFullYear()&&(date.setFullYear(year.year),cal.setDate(date),cal.dateClicked=!1,cal.callHandler()))}with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):((void 0===a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,o=!0;s>l.x+i?(r=s-l.x-i,o=!1):r=l.x-s,r<0&&(r=0);for(var d=a._range,h=a._current,u=Math.floor(r/10)%d.length,c=d.length;--c>=0&&d[c]!=h;);for(;u-- >0;)o?--c<0&&(c=d.length-1):++c>=d.length&&(c=0);var m=d[c];a.innerHTML=m,t.onUpdateTime()}var C=Calendar.findMonth(n);if(C)C.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(C,"hilite"),t.hilitedMonth=C):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var p=Calendar.findYear(n);p&&p.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),t.hilitedYear=p):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal)return!1;with(cal.dragging=!1,Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev)},Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled)return!1;var cal=el.calendar;if(cal.activeDiv=el,Calendar._C=cal,300!=el.navtype)with(Calendar)50==el.navtype?(el._current=el.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(el,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else cal.isPopup&&cal._dragStart(ev);return-1==el.navtype||1==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==el.navtype||2==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):cal.timeout=null,Calendar.stopEvent(ev)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return!(isRelated(el,ev)||_C||el.disabled)&&(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar&&(el.calendar.tooltips.innerHTML=_TT.SEL_DATE),stopEvent(ev))}},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if(void 0===e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),(r=n.currentDateEl==e)||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var o=i.getFullYear(),d=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var h=Calendar._TT.ABOUT;return void 0!==h?h+=n.showsTime?Calendar._TT.ABOUT_TIME:"":h='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(h);case-2:o>n.minYear&&i.setFullYear(o-1);break;case-1:d>0?a(d-1):o-- >n.minYear&&(i.setFullYear(o),a(11));break;case 1:d<11?a(d+1):o<n.maxYear&&(i.setFullYear(o+1),a(0));break;case 2:o<n.maxYear&&i.setFullYear(o+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var u=e._range,c=e.innerHTML,m=u.length;--m>=0&&u[m]!=c;);t&&t.shiftKey?--m<0&&(m=u.length-1):++m>=u.length&&(m=0);var C=u[m];return e.innerHTML=C,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,o=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var d=6;this.isPopup&&--d,this.weekNumbers&&++d,o("?",1,400).ttip=Calendar._TT.INFO,this.title=o("",d,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",o("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=o("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=o("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=o(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=o("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=o("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var h=7;h>0;--h)l=Calendar.createElement("td",i),h||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var u=Calendar.createElement("tbody",a);for(this.tbody=u,h=6;h>0;--h){i=Calendar.createElement("tr",u),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var c=7;c>0;--c)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",u),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var o;o=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=o}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var o=e("hour",t,n?1:0,n?12:23),d=Calendar.createElement("span",l);d.innerHTML=":",d.className="colon";var h=e("minute",a,0,59),u=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?u=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),u.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),o.innerHTML=t<10?"0"+t:t,h.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(o.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(u.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(u.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(h.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var m=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",m),i.className="footrow",l=o(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",h=0;h<Calendar._MN.length;++h){var C=Calendar.createElement("div");C.className=Calendar.is_ie?"label-IEfix":"label",C.month=h,C.innerHTML=Calendar._SMN[h],n.appendChild(C)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",h=12;h>0;--h){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(p)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;if(!e||e.multiple)return!1;e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){u=r.currentDateEl;var e=u.pos;o=15&e,d=e>>4,h=r.ar_days[d][o]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-c),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+c),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,o,d,h,u,c;for(s=37==i||38==i,c=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--o>=0)){o=6,i=38;continue}h=r.ar_days[d][o];break;case 38:--d>=0?h=r.ar_days[d][o]:(a(),t());break;case 39:if(!(++o<7)){o=0,i=40;continue}h=r.ar_days[d][o];break;case 40:++d<r.ar_days.length?h=r.ar_days[d][o]:(n(),t())}break}h&&(h.disabled?s?a():n():Calendar.cellClick(h))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var o=a.getMonth(),d=a.getDate();a.getMonthDays();a.setDate(1);var h=(a.getDay()-this.firstDayOfWeek)%7;h<0&&(h+=7),a.setDate(-h),a.setDate(a.getDate()+1);for(var u=this.tbody.firstChild,c=(Calendar._SMN[o],this.ar_days=new Array),m=Calendar._TT.WEEKEND,C=this.multiple?this.datesCells={}:null,p=0;p<6;++p,u=u.nextSibling){var v=u.firstChild;if(this.weekNumbers){v.className="day wn";var f=a;0==o&&0==p&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,o,1)),v.innerHTML=f.getWeekNumber(this.firstDayOfWeek),v=v.nextSibling}u.className="daysrow";for(var y,g=!1,_=c[p]=[],D=0;D<7;++D,v=v.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();v.className="day day-"+y,v.pos=p<<4|D,_[D]=v;var T=a.getMonth()==o;if(T)v.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){v.className="emptycell",v.innerHTML="&nbsp;",v.disabled=!0;continue}v.className+=" othermonth",v.otherMonth=!0}if(v.disabled=!1,v.innerHTML=this.getDateText?this.getDateText(a,y):y,C&&(C[a.print("%Y%m%d")]=v),this.getDateStatus){var w=this.getDateStatus(a,s,o,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,o,y);M&&(v.title=M)}!0===w?(v.className+=" disabled",v.disabled=!0):(/disabled/i.test(w)&&(v.disabled=!0),v.className+=" "+w)}v.disabled||(v.caldate=new Date(a),v.ttip="_",!this.multiple&&T&&y==d&&this.hiliteToday&&(v.className+=" selected",this.currentDateEl=v),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(v.className+=" today",v.ttip+=Calendar._TT.PART_TODAY),-1!=m.indexOf(b.toString())&&(v.className+=v.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(u.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[o]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&(t&&(t.className+=" selected"))}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){this.multiple[t]?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),(r=e.y+e.height-n.y)>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);if(!t||"string"!=typeof t)return this.showAt(r.x,r.y+e.offsetHeight),!0;this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),o="l";switch(t.length>1&&(o=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i}switch(o){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},Calendar.continuation_for_the_khtml_browser()},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),-1!=a.indexOf(r.toString())&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(ev){if(!this.dragging){this.dragging=!0;var posX,posY;Calendar.is_ie?(posY=window.event.clientY+document.body.scrollTop,posX=window.event.clientX+document.body.scrollLeft):(posY=ev.clientY+window.scrollY,posX=ev.clientX+window.scrollX);var st=this.element.style;with(this.xOffs=posX-parseInt(st.left),this.yOffs=posY-parseInt(st.top),Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);-1==t.indexOf(s)?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="",a=e.length;for(i=0;i<a;i++){var n=e.charAt(i);if("%"==n){var r="";if(i+1<a&&(r=e.charAt(i+1)),i+=1,r.length>0&&-1!="aAbBCdeHIJklmMnpPRSstUWVuwyY%".indexOf(r))continue;-1==t.indexOf(n)&&(t+=n),r.length>0&&-1==t.indexOf(r)&&(t+=r)}else-1==t.indexOf(n)&&(t+=n)}return t},Date.splitDate=function(e,t){var a=(new Date,0),n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),o=0,d=0,h=0,u=0;for(o=0;o<i.length;++o)if(i[o])switch(s[o]){case"%d":case"%e":r=Number(i[o]);break;case"%m":n=Number(i[o])-1;break;case"%Y":case"%y":a=Number(i[o]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var c=i[o].toLowerCase(),m=!1;if("%b"==s[o])for(d=0;d<12;++d)if(Calendar._SMN[d].substr(0,c.length).toLowerCase()==c){n=d,m=!0;break}if(!m)for(d=0;d<12;++d)if(Calendar._MN[d].substr(0,c.length).toLowerCase()==c){n=d;break}break;case"%H":case"%I":case"%k":case"%l":h=Number(i[o]);break;case"%P":case"%p":/pm/i.test(i[o])&&h<12?h+=12:/am/i.test(i[o])&&h>=12&&(h-=12);break;case"%M":u=Number(i[o]);break;case"%R":var C=i[o],p=C.indexOf(":"),v=C.substring(0,p),f=-1==p?0:C.substring(p+1);h=Number(v),u=Number(f)}return{parts:i,year:a,month:n,day:r,hour:h,minute:u}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,o=n.hour,d=n.minute,h=0,u=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(o)&&(o=a.getHours()),isNaN(d)&&(d=a.getMinutes()),0!=l&&-1!=i&&0!=s)return new Date(l,i,s,o,d,0);for(l=0,i=-1,s=0,h=0;h<r.length;++h)if(-1!=r[h].search(/[a-zA-Z]+/)){var c=-1;for(u=0;u<12;++u)if(Calendar._MN[u].substr(0,r[h].length).toLowerCase()==r[h].toLowerCase()){c=u;break}-1!=c&&(-1!=i&&(s=i+1),i=c)}else Number(r[h])<=12&&-1==i?i=r[h]-1:Number(r[h])>31&&0==l?(l=Number(r[h]))<100&&(l+=l>29?1900:2e3):0==s&&(s=r[h]);return 0==l&&(l=a.getFullYear()),-1!=i&&0!=s?new Date(l,i,s,o,d,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return void 0===e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}return function(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}(this)},Date.prototype.getSimpleWeekNumber=function(e){return function(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}(this,e||6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),o=s>=12,d=o?s-12:s,h=this.getDayOfYear();0==d&&(d=12);var u=this.getMinutes(),c=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=d<10?"0"+d:d,i["%j"]=h<100?h<10?"00"+h:"0"+h:h,i["%k"]=s,i["%l"]=d,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=u<10?"0"+u:u,i["%n"]="\n",i["%p"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=c<10?"0"+c:c,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var m=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(m,function(e){return i[e]||e});for(var C=e.match(m),p=0;p<C.length;p++){var v=i[C[p]];v&&(m=new RegExp(C[p],"g"),e=e.replace(m,v))}return e},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(){var e=new Date(this);e.__msh_oldSetFullYear.apply(this,arguments),e.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear.apply(this,arguments)},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.setup.js' */
!function(e,t){Calendar.setup=function(a){function n(e,t){void 0===a[e]&&(a[e]=t)}function l(t){var a=t.params,n=t.dateClicked||a.electric;n&&a.inputField&&(a.inputField.value=t.date.print(a.ifFormat),e(a.inputField).change()),n&&a.displayArea&&(a.displayArea.innerHTML=t.date.print(a.daFormat)),n&&"function"==typeof a.onUpdate&&a.onUpdate(t),n&&a.flat&&"function"==typeof a.flatCallback&&a.flatCallback(t),"true"===a.singleClick?a.singleClick=!0:"false"===a.singleClick&&(a.singleClick=!1),n&&a.singleClick&&t.dateClicked&&t.callCloseHandler()}function i(){if(!0===Calendar._UNSUPPORTED)return void alert("The JIRA Calendar does not currently support your language.");var e=a.inputField||a.displayArea,t=a.inputField?a.ifFormat:a.daFormat,n=!1,i=window.calendar;if(i&&i.hide(),e&&(e.value||e.innerHTML)&&(a.date=Date.parseDate(e.value||e.innerHTML,t)),i&&a.cache?(a.date&&i.setDate(a.date),i.hide()):(window.calendar=i=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l,a.onClose||function(e){e.hide()}),i.showsTime=a.showsTime,i.time24="24"==a.timeFormat,i.weekNumbers=a.weekNumbers,Date.useISO8601WeekNumbers=a.useISO8601WeekNumbers,a.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),n=!0),a.multiple){i.multiple={};for(var r=a.multiple.length;--r>=0;){var u=a.multiple[r],o=u.print("%Y%m%d");i.multiple[o]=u}}return i.showsOtherMonths=a.showOthers,i.yearStep=a.step,i.setRange(a.range[0],a.range[1]),i.params=a,i.setDateStatusHandler(a.dateStatusFunc),i.getDateText=a.dateText,i.setDateFormat(t),n&&i.create(),i.refresh(),a.position?i.showAt(a.position[0],a.position[1]):i.showAtElement(a.button||a.displayArea||a.inputField,a.align),!1}a=a||{},n("inputField",null),n("context",null),n("displayArea",null),n("button",null),n("eventName","click"),n("ifFormat","%Y/%m/%d"),n("daFormat","%Y/%m/%d"),n("singleClick",!0),n("disableFunc",null),n("dateStatusFunc",a.disableFunc),n("dateText",null),n("firstDay",null),n("align","Br"),n("range",[1900,2999]),n("weekNumbers",!0),n("useISO8601WeekNumbers",!1),n("flat",null),n("flatCallback",null),n("onSelect",null),n("onClose",null),n("onUpdate",null),n("date",null),n("todayDate",null),n("showsTime",!1),n("timeFormat","24"),n("electric",!0),n("step",1),n("position",null),n("cache",!1),n("showOthers",!1),n("multiple",null);var r,u,o=["context","inputField","button","displayArea"];for(r in o)u=o[r],a[u]instanceof e&&(a[u]=a[u][0]);var s=["inputField","displayArea","button"];for(r in s)if(u=s[r],"string"==typeof a[u]){var d="#"+e.escapeSelector(a[u]),p=e(a.context||document.body).find(d);a[u]=p[0]}if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button))return t.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.firstDay&&null!==a.firstDay&&(a.firstDay=+a.firstDay),null!=a.flat){if("string"==typeof a.flat&&(a.flat=document.getElementById(a.flat)),!a.flat)return t.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var c=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l);return c.showsOtherMonths=a.showOthers,c.showsTime=a.showsTime,c.time24="24"==a.timeFormat,c.params=a,c.weekNumbers=a.weekNumbers,c.setRange(a.range[0],a.range[1]),c.setDateStatusHandler(a.dateStatusFunc),c.getDateText=a.dateText,a.ifFormat&&c.setDateFormat(a.ifFormat),a.inputField&&"string"==typeof a.inputField.value&&c.parseDate(a.inputField.value),c.create(a.flat),c.show(),!1}var f=a.button||a.displayArea||a.inputField;return e(f).bind(a.eventName,function(e){e.preventDefault(),i()}),a.inputField&&function(){var t=e(a.inputField);a.button&&e(a.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){i()},1))})}(),c}}(require("jquery"),require("jira/util/logger"));;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-layerable.js' */
define("jira/libs/calendar-layerable-mixin",["jira/ajs/layer/layer-interactions","jira/ajs/layer/inline-layer","jira/util/events"],function(e,n,i){"use strict";function r(r){e.preventDialogHide(r),e.preventInputBlur(r),e.preventInlineEditCancel(r),i.bind(n.EVENTS.beforeHide,function(e){r.current&&e.preventDefault()})}return{layerableExtensions:r}});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-amd.js' */
define("jira/libs/calendar",["require"],function(a){"use strict";var e=window.Calendar;return a("jira/libs/calendar-layerable-mixin").layerableExtensions(e),e}),function(){"use strict";var a=require("jira/libs/calendar");AJS.namespace("window.Calendar",window,a)}();;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,o,a,s){"use strict";var n=a(),l=function(t){function a(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:n+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(a(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=s("<ul/>").appendTo(this.responseContainer),s(e.users).each(function(){o.push([s("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(s("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),s(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return l.init=function(e){s("fieldset.user-picker-params",e).each(function(){var i=t(s(this)),r=i.fieldId||i.fieldName,o=s("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,a=n;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),i.actionToOpen?a+=i.actionToOpen:a+="/secure/popups/UserPickerBrowser.jspa",a+="?formName="+i.formName+"&",a+="multiSelect="+i.multiSelect+"&",a+="decorator=popup&",a+="element="+r,i.fieldConfigId&&(a+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(s.isArray(i.projectId))for(var l in i.projectId)a+="&projectId="+l;else a+="&projectId="+i.projectId;t=window.open(a,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),!0===i.userPickerEnabled&&l({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:!1===i.multiSelect?void 0:",",ajaxData:{fieldName:i.fieldName}})})},l}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.soy' */
// This file was automatically generated from group-label-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.groupLabelLozenge = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge({text: opt_data.label.text, title: opt_data.label.title, isSubtle: true, extraClasses: 'group-label-lozenge'});
};
if (goog.DEBUG) {
  JIRA.Templates.groupLabelLozenge.soyTemplateName = 'JIRA.Templates.groupLabelLozenge';
}
;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){var t=function(t,a){var n=[],s=a?JIRA.Templates.GroupPickerUtil.formatResponseWithLabels:JIRA.Templates.GroupPickerUtil.formatResponse;return r(t).each(function(t,a){var u=new i({weight:t,label:a.header});r(a.groups).each(function(){u.addItem(new e({value:this.name,label:this.name,title:this.name,html:s(this),highlighted:!0}))}),n.push(u)}),n};return{formatResponseWithLabels:function(e){return t(e,!0)},formatResponse:function(e,i){return t(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/groupPickerUtil.soy' */
// This file was automatically generated from groupPickerUtil.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.GroupPickerUtil.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.GroupPickerUtil == 'undefined') { JIRA.Templates.GroupPickerUtil = {}; }


JIRA.Templates.GroupPickerUtil.formatResponseWithLabels = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(opt_data, {showLabels: true}));
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponseWithLabels.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponseWithLabels';
}


JIRA.Templates.GroupPickerUtil.formatResponse = function(opt_data, opt_ignored) {
  var output = '<div class="group-suggestion-item"><span class="group-suggestion-item__name">' + soy.$$filterNoAutoescape(opt_data.html) + '</span>';
  if (opt_data.showLabels) {
    output += '<span class="group-suggestion-item__labels group-labels-lozenges">';
    var labelList13 = opt_data.labels;
    var labelListLen13 = labelList13.length;
    for (var labelIndex13 = 0; labelIndex13 < labelListLen13; labelIndex13++) {
      var labelData13 = labelList13[labelIndex13];
      output += JIRA.Templates.groupLabelLozenge({label: labelData13}) + ' ';
    }
    output += '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponse.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponse';
}
;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,r,a,s,n){"use strict";function u(t){t.find(".js-default-multi-group-picker").each(function(){var t=e(this),r=!0===t.data("show-labels"),a=t.data("user-name");new i({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:a,query:e,exclude:t.val()}},url:l+"/rest/api/2/groups/picker",query:!0,formatResponse:r?n.formatResponseWithLabels:n.formatResponse}})})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","wrm/context-path","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s,l){"use strict";function u(i){i.find(".js-default-single-group-picker").each(function(){var i=t(this),n=i.find("option[data-empty]"),r=!0===i.data("show-labels"),s=i.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:s,query:e,exclude:i.val()}},url:o+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=l.formatResponse(e,r);return n.length&&""!==i.val()&&t.unshift(new a({value:"",label:n.text(),highlighted:!0})),t}}})})}var o=i();s.bind(r.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0,userKey:this.key}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,r,a,s,n,u){"use strict";function o(t){e(".js-default-user-picker",t).each(function(){var t=e(this);if(!t.data("aui-ss")){var r={showAvatar:!0},a=t.data("inputValue");new i({element:t,submitInputVal:!0,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:l+"/rest/api/2/user/picker",query:!0,data:r,formatResponse:n.formatResponse},inputText:a})}})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a,u){function l(t){t.find(".js-default-multi-user-picker").each(function(){var t=e(this);AJS.params.currentUserCanBrowseUsers?new r({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:t.val()}},formatResponse:u.formatResponse}}):new a({element:this})})}var o=t();s.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForScheme:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForScheme(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,i,s,n,l,r){function c(s){var n=s||t("body");n.find(".issuetype-field").each(function(s){var l=n.find(".project-field, .project-field-readonly"),c=t(this),d=n.find("#"+c.attr("id")+"-projects"),o=n.find("#"+c.attr("id")+"-defaults"),a=new i({element:c,revertOnInvalid:!0,model:e});a.model.remove(""),l.length>0&&new r({project:l.eq(s),issueTypeSelect:a,projectIssueTypesSchemes:d,issueTypeSchemeIssueDefaults:o})})}l.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==s.panelRefreshed&&c(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/field-templates.soy' */
// This file was automatically generated from field-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }


JIRA.Templates.Fields.username = function(opt_data, opt_ignored) {
  return '' + ((opt_data.escape) ? soy.$$escapeHtml(opt_data.displayName) : soy.$$filterNoAutoescape(opt_data.displayName));
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.username.soyTemplateName = 'JIRA.Templates.Fields.username';
}


JIRA.Templates.Fields.recipientUsername = function(opt_data, opt_ignored) {
  return '<li data-username="' + soy.$$escapeHtml(opt_data.username) + '" title=' + soy.$$escapeHtml(opt_data.username) + '><span><span class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '"><img alt="" src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + JIRA.Templates.Fields.username(opt_data) + '"><span title="' + JIRA.Templates.Fields.username(opt_data) + '">' + JIRA.Templates.Fields.username(opt_data) + '</span></span>' + ((! opt_data.readOnly) ? '<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml(AJS.format('Remove watcher: {0}',opt_data.username)) + '</span></button>' : '') + '</span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientUsername.soyTemplateName = 'JIRA.Templates.Fields.recipientUsername';
}


JIRA.Templates.Fields.recipientEmail = function(opt_data, opt_ignored) {
  return '<li data-email="' + soy.$$escapeHtml(opt_data.email) + '" title=' + soy.$$escapeHtml(opt_data.email) + '><span><img src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + soy.$$escapeHtml(opt_data.email) + '"><span title="' + soy.$$escapeHtml(opt_data.email) + '">' + soy.$$escapeHtml(opt_data.email) + '</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientEmail.soyTemplateName = 'JIRA.Templates.Fields.recipientEmail';
}
;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","wrm/context-path","jquery","exports"],function(e,t,i,a,r){"use strict";r.createPicker=function(r,s){var d=t(r),l=a("#"+d.id,s),c=d.issueId,o={};/customfield_\d/.test(d.id)&&(o.customFieldId=parseInt(d.id.replace("customfield_",""),10)),new e({element:l,ajaxOptions:{url:i()+"/rest/api/1.0/labels"+(c?"/"+c:"")+"/suggest",data:o}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/util/strings","jira/ajs/control","jquery"],function(e,t,i,n){"use strict";return i.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var i,s=this.options.descriptor;return!0!==s.noExactMatch()?(i={escape:!1,username:s.value(),icon:s.icon(),displayName:t.escapeHtml(s.label())},n(JIRA.Templates.Fields.recipientUsername(i))):(i={email:s.value(),icon:e.get("default-avatar-url")},n(JIRA.Templates.Fields.recipientEmail(i)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","wrm/context-path","jquery"],function(e,t,i,r,s,n,a,l,u){"use strict";var o=l();return r.extend({init:function(r){function l(e){var t=[];return u(e).each(function(e,i){var r=new n({weight:e,label:i.footer});u(i.users).each(function(){r.addItem(new s({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}u.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:{showAvatar:!0},formatResponse:l},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:u.noop,_renders:{selectedItemsWrapper:function(){return u('<div class="recipients" />')},selectedItemsContainer:function(){return u("<ol />")},description:function(e){return u("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");i.find(s,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n=o(e);return n.is("select")?n:n.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i=e(t);return i.is("select")?i:i.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/libs/calendar"],function(e,i,t,d,a,n){"use strict";function r(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){r.prop("disabled",s.is(":checked"))}var a=e(this),r=a.find("input:text"),s=a.find("#useCurrentDate"),c=i(a.find("fieldset.datepicker-params"));c.context=t,n.setup(c),s.length&&(d(),s.click(d))})}a.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&r(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i=a(e);return i.is(c)?i:i.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");n.find(i,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i=s(e);return i.is("select")?i:i.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/jquery/plugins/attachment/inline-attach"],function(i,n,t){"use strict";function e(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}i.bind(n.NEW_CONTENT_ADDED,function(i,n,a){a!==t.panelRefreshed&&e(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-inline-attach");;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/issuecomponents.soy' */
// This file was automatically generated from issuecomponents.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }


JIRA.Templates.Issue.watchersWithBrowse = function(opt_data, opt_ignored) {
  var output = '<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a><fieldset><label class="js-add-watchers-label">' + soy.$$escapeHtml('Add Watchers') + '</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="' + soy.$$escapeHtml('Start Typing for Users') + '" class="watchers-user-picker hidden" multiple="multiple">';
  var watcherList10 = opt_data.watchers;
  var watcherListLen10 = watcherList10.length;
  for (var watcherIndex10 = 0; watcherIndex10 < watcherListLen10; watcherIndex10++) {
    var watcherData10 = watcherList10[watcherIndex10];
    output += '<option style="background-image:url(\'' + soy.$$escapeHtml(watcherData10.avatarUrls['16x16']) + '\')" selected="selected" value="' + soy.$$escapeHtml(watcherData10.name) + '">' + soy.$$escapeHtml(watcherData10.displayName) + '</option>';
  }
  output += '</select></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.watchersWithBrowse.soyTemplateName = 'JIRA.Templates.Issue.watchersWithBrowse';
}


JIRA.Templates.Issue.watchersNoBrowse = function(opt_data, opt_ignored) {
  var output = '<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a><fieldset><label for="watchers-multi-select">' + soy.$$escapeHtml('Add Watchers') + '</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">' + soy.$$escapeHtml('Type username and press enter.') + '</div></div><div class="recipients"><ol class="watchers">';
  var watcherList28 = opt_data.watchers;
  var watcherListLen28 = watcherList28.length;
  for (var watcherIndex28 = 0; watcherIndex28 < watcherListLen28; watcherIndex28++) {
    var watcherData28 = watcherList28[watcherIndex28];
    output += JIRA.Templates.Fields.recipientUsername({username: watcherData28.name, icon: watcherData28.avatarUrls['16x16'], displayName: watcherData28.displayName, escape: true});
  }
  output += '</ol></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.watchersNoBrowse.soyTemplateName = 'JIRA.Templates.Issue.watchersNoBrowse';
}


JIRA.Templates.Issue.error = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(opt_data.msg) + '</p><ul>';
  var messageList40 = opt_data.errors;
  var messageListLen40 = messageList40.length;
  for (var messageIndex40 = 0; messageIndex40 < messageListLen40; messageIndex40++) {
    var messageData40 = messageList40[messageIndex40];
    output += '<li>' + soy.$$escapeHtml(messageData40) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.error.soyTemplateName = 'JIRA.Templates.Issue.error';
}


JIRA.Templates.Issue.usersListReadOnly = function(opt_data, opt_ignored) {
  var output = '<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a><fieldset><div class="recipients"><ol class="voters">';
  var voterList50 = opt_data.users;
  var voterListLen50 = voterList50.length;
  for (var voterIndex50 = 0; voterIndex50 < voterListLen50; voterIndex50++) {
    var voterData50 = voterList50[voterIndex50];
    output += JIRA.Templates.Fields.recipientUsername({username: voterData50.name, icon: voterData50.avatarUrls['16x16'], displayName: voterData50.displayName, readOnly: true, escape: true});
  }
  output += '</ol></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.usersListReadOnly.soyTemplateName = 'JIRA.Templates.Issue.usersListReadOnly';
}
;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var s={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[s])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?username="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=e("underscore"),s=(e("jquery"),e("jira/jquery/deferred")),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(r.bind(function(){this.$el.html(o.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),e.resolve(this.$el)},this)),e.promise()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=r,i=e("jira/util/data/meta"),a=e("underscore"),s=e("jira/util/logger"),r=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new r({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(a.bind(function(){this._incrementWatcherCount(),t.value()===i.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(a.bind(function(){this._decrementWatcherCount(),t.value()===i.get("remote-user")&&(this.unwatch(),s.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var t=e("backbone"),i=e("jira/skate"),n=t.View.prototype.setElement;return t.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof t.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),i.init(this.el),this},contents:function(e){this.$el.find(".aui-inline-dialog-contents").html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return g||(g=new a({el:h("#inline-dialog-watchers").get(0)})),g}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),d=e("aui/inline-dialog"),v=e("jira/util/key-code"),h=e("jquery"),g=null;h(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=h("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading"),new(s(r))({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),h(document).on("keydown",function(e){g&&e.keyCode===v.ESCAPE&&d.current!==g.el&&g.isVisible()&&(d.current&&d.current.hide(),g.hide())}),h(document).on("click",function(e){if(g){0===h(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length&&g.isVisible()&&g.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jira/util/key-code"),c=e("jquery"),u=s("#view-voter-list","voters",function(e,n,s){var o=c("#vote-toggle").next(".icon"),l=new i(t.getIssueKey());o.addClass("loading"),new r({collection:l}).render().done(function(i){e.html(i),e.find(".cancel").click(function(e){u.hide(),e.preventDefault()}),o.removeClass("loading"),s()}),l.on("errorOccurred",function(){u.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});c(document).bind("keydown",function(e){e.keyCode===o.ESCAPE&&s.current!==u&&u.is(":visible")&&(s.current&&s.current.hide(),u.hide())}),c(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(c(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/ajs/ajax/smart-ajax"),a=t("jira/flag"),o=t("jquery"),n=t("wrm/context-path"),i=t("jira/util/formatter"),s=function(t,a,i,s,l){var c,u=a+"-on",g=a+"-off",f="/voters",d=t.next(".icon"),x="POST";t.hasClass(u)&&(x="DELETE"),-1!==a.indexOf("watch")&&(f="/watchers"),t.removeClass(u).removeClass(g),"POST"===x&&(c={dummy:!0}),o(e.makeRequest({url:n()+"/rest/api/1.0/issues/"+t.attr("rel")+f,type:x,dataType:"json",data:c,contentType:"application/json",complete:function(e,a,o){var n="POST"===x;o.successful?(n?(t.addClass(u),t.text(l.titleOn),s.attr("title",l.titleOn).text(l.textOn)):(t.addClass(g),t.text(l.titleOff),s.attr("title",l.titleOff).text(l.textOff)),i.text(o.data.count),i.toggleClass("jira-badge__primary",n)):(o.aborted||r(o),n?(t.addClass(g),t.text(l.titleOff),s.attr("title",l.titleOff).text(l.textOff)):(t.addClass(u),t.text(l.titleOn),s.attr("title",l.titleOn).text(l.textOn)))}})).throbber({target:d})},r=function(t){var o=e.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(o=n.errorMessages[0])}a.showErrorMsg(o,{closeable:!0})};o(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),o("#vote-toggle").click()}),o(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),o("#watching-toggle").click()});var l=function(t){o("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};o(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=o(this),n=o(document.querySelectorAll("#vote-data")),r=o(document.querySelectorAll("#toggle-vote-issue .trigger-label"));l(e),s(a,"vote-state",n,r,e)}),o(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=o(this),n=o(document.querySelectorAll("#watcher-data")),r=o(document.querySelectorAll("#toggle-watch-issue .trigger-label"));l(e),s(a,"watch-state",n,r,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(featureManager,$){var selectors={image:["a[file-preview-type=image]"],document:[]};if(!featureManager.isFeatureEnabled("jira.fileviewer.disable.pdf")){selectors.document.push("a[file-preview-type=document]")}function getPreviewableFileSelector(){return Object.keys(selectors).map(function(k){return selectors[k].join(", ")}).filter(Boolean).join(", ")}function trim(value){return String(value).trim()}function pushSingleOrArray(target,toPush){if(Array.isArray(toPush)){target.push.apply(target,toPush.map(trim).filter(Boolean))}else{var sel=trim(toPush);if(sel){target.push(sel)}}}return{findFiles:function findPreviewableFiles(context){return $(context||document.body).find(getPreviewableFileSelector())},getFileSelector:getPreviewableFileSelector,getImageSelector:function getPreviewableImageSelector(){return selectors.image.join(", ")},addImageSelector:function addImageSelector(sel){pushSingleOrArray(selectors.image,sel)},getDocumentSelector:function getPreviewableDocumentSelector(){return selectors.document.join(", ")},addDocumentSelector:function addDocumentSelector(sel){pushSingleOrArray(selectors.document,sel)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery","underscore"],function(wrmRequire,fileService,Loading,KeyboardShortcuts,$,_){var viewerReady;var viewer;function getDownloadUrl($fileElement){return $fileElement.data("download-url")||$fileElement.attr("href")}function hideSpinner(){$(".cp-spinner-layer .cp-spinner").spinStop()}function initViewer(){if(!viewerReady){viewerReady=wrmRequire(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]);viewerReady.done(function(){viewer=new FileViewer({enableMiniMode:true,viewers:["image","document"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")});viewer.on("fv.open",KeyboardShortcuts.disable);viewer.on("fv.close",KeyboardShortcuts.enable);viewer.on("fv.showFile",hideSpinner);viewer.on("fv.showFileError",hideSpinner)})}return viewerReady}function closeViewer(){if(viewer){viewer.close()}}function updateFiles(){var files=[];var imageSelector=fileService.getImageSelector();var documentSelector=fileService.getDocumentSelector();var $files=$(fileService.getFileSelector());$files.each(function(){var $el=$(this).closest("a");if($el.is(imageSelector)){files.push({type:"image/png",id:$el.attr("file-preview-id"),src:getDownloadUrl($el),title:$el.attr("file-preview-title"),thumbnail:$el.attr("file-preview-url")||$el.attr("data-download-url")||$el.find("img").attr("src")})}if($el.is(documentSelector)){files.push({type:"application/pdf",id:$el.attr("file-preview-id"),src:getDownloadUrl($el),title:$el.attr("file-preview-title")})}});var uniqFiles=_.uniq(files,false,function(el){return el.id});viewer.setFiles(uniqFiles);$files.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault();viewer.open({id:$(this).attr("file-preview-id")})})}function initializePreviews(searchContext){if(!viewer){var $files=fileService.findFiles(searchContext);$files.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var $file=$(this);Loading.showLoadingIndicator();AJS.dim();initViewer().done(function(){updateFiles();viewer.open({id:$file.attr("file-preview-id")})}).fail(function(){window.location=getDownloadUrl($file)}).always(function(){$files.off("simpleClick.fvInit");AJS.undim();Loading.hideLoadingIndicator()})})}else{updateFiles()}}return{attachToElements:initializePreviews,closeViewer:closeViewer,addImageSelector:function(sel){fileService.addImageSelector(sel)},addDocumentSelector:function(sel){fileService.addDocumentSelector(sel)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable};return t.extend({},i,{transitionIn:"elastic",transitionOut:"elastic"})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){i.isFeatureEnabled("jira.fileviewer.disabled")||a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shorten.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,n){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=n.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=n(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!n.browser.msie||n.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return n("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br>")},collapseButton:function(){return n("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(n("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&++t>this.options.numRows)return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var s=this.$items.length-e;i.text("("+s+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,s)),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})}),define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(t,e){e.fn.shorten=function(e){var i=[];return e=e||{},this.each(function(){e.element=this,i.push(new t(e))}),i}}),AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener")),function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,o){new o({blockSelector:".toggle-wrap",triggerSelector:"#issue-content .mod-header .toggle-title, #ghx-detail-contents .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/CommentForm.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,o,r,s,a,m){var u=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm();return t.length&&t.is(":visible")?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){return{type:e.split(":")[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),c=o.getIssueId(),l=o.getIssueKey(),f=u+"/rest/api/2/issue/"+l+"/comment",g={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(g.visibility=h);var v=a(),p=m.ajax({url:f,type:"POST",contentType:"application/json",data:JSON.stringify(g),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[c,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200}),m("#issue_actions_container > .issue-data-block.focused").removeClass("focused"),m("#"+t).addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){var i,o=JSON.parse(t.responseText);i=o&&o.errors&&o.errors.comment?function(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message aui-message-error">'+t+"</div></div>";return m(i)}(o.errors.comment):n.buildDialogErrorContent(t),new r({content:i}).show(),s.remove(),d.enable(),v.reject()}}),b=this.getForm().find("input[type=submit]").parent();return b.is(".wiki-button-bar-content")?s.css("margin-right","10px").prependTo(b):s.appendTo(b),m.when(p,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d}),define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initJiraFooterComment.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),m=e("jira/libs/parse-uri"),r=window.onbeforeunload,a={};a.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){a.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(r)&&(e=r.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===m(window.location.href).anchor&&a.openFooterComment()})}),define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var t=e(".add-issue-comment");if(0!==t.length){var n=t.filter(".toolbar-trigger");n.length>0?n.click():t.click()}}}),function(){var e=require("jira/viewissue/comment/comment-form");AJS.namespace("JIRA.Issue.CommentForm",null,e),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,e.handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"))}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.soy' */
// This file was automatically generated from ViewIssueTabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.Tabs.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }
if (typeof JIRA.Templates.Issue.Tabs == 'undefined') { JIRA.Templates.Issue.Tabs = {}; }


JIRA.Templates.Issue.Tabs.label = function(opt_data, opt_ignored) {
  return '<a tabindex="0">' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.Tabs.label.soyTemplateName = 'JIRA.Templates.Issue.Tabs.label';
}


JIRA.Templates.Issue.Tabs.tab = function(opt_data, opt_ignored) {
  return '<a id="' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" class="' + soy.$$escapeHtml(opt_data.linkClass) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.Tabs.tab.soyTemplateName = 'JIRA.Templates.Issue.Tabs.tab';
}
;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","underscore"],function(a,t,e,i,s){function n(a){return o.indexOf(a)>-1?a:e.hashCode(a)}function r(a){return{tab:n(a.attr("data-key")),tabPosition:a.index()}}function l(a,t){return{inNewWindow:a,keyboard:t,context:i.context()}}var o=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(a,e,i){var n=a.parent(),o=s.extend({},l(e,i),r(n));t.send({name:"jira.viewissue.tab.clicked",properties:o})},buttonClicked:function(a,e,i){if(a.is("[data-tab-sort]")){var n=a.data("order"),o=a.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",properties:s.extend({},l(e,i),r(o),{order:n})})}}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,a,i,n,r,s,o,u){function c(t){t=t||document,a.each(_,function(e,a){a(t)})}function l(t){var e=a(t).find(".issuePanelWrapper"),i=a(t).find("#issue_actions_container");k=i.length?i:k,C=e.length?e:C}function f(t,e){var a=new r({id:"issue-tab-error-dialog",widthClass:"small",content:s.buildDialogErrorContent(t,!1)});d(e),k.show(),a.show()}function d(t){a("#issue-tabs li").each(function(){var e=a(this),i=e.data("key"),n=e.data("label");if(i==t)e.addClass("active"),e.html(T.label({text:n}));else{e.removeClass("active");var r=e.data("id"),s=e.data("href");e.html(T.tab({id:r,href:s,linkClass:I,text:n}))}}),p(a("#issue-tabs"))}function h(t){d(t)}function v(t,e){var a=t.pageX,i=t.pageY,n=e.offset(),r=e.outerWidth(),s=e.outerHeight();return 0==a&&0==i||!(a>=n.left&&a<=n.left+r&&i>=n.top&&i<=n.top+s)}function p(t){var e=a(t).find("li.active").data("key");a(t).find(S).click(function(t){var i=a(this),n=v(t,i),r=i.parent().data("key"),s=t.metaKey;r?u.tabClicked(i,s,n):u.buttonClicked(i,s,n),s||(t.preventDefault(),r&&h(r),m(e,i.attr("href")).done(function(t){n&&(r?t.find("#"+i.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(c))})}function m(e,n){var r=i();q&&q.abort();var o=s.makeRequest({jqueryAjaxFn:R?a.pjax:a.ajax,headers:{"X-PJAX":!0},container:J,url:n,timeout:null,complete:function(i,n,s){if("abort"!=n){if(q=null,!s.successful)return void((s.status<300||s.status>=400)&&f(s,e));var o=a(this.container),u=document.createElement("div");u.innerHTML=s.data;var c=document.createDocumentFragment().appendChild(u);R||b(o,c),t.trace("jira.issue.tab.loaded"),r.resolve(o)}}});return a(o).throbber({target:C}),q=o,r}function b(t,e){var i=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=a(e.querySelectorAll("#issue_actions_container")).contents(),s=k.contents();if(i.length&&n.length&&r.length&&s.length){n.replaceWith(i),k.stop(!0,!0);var o=k.height();k.append(r);var u=k.height()-o,c=o-u;c>0?(k.css("height",u+c),s.remove(),g(u,c)):k.empty().append(r),a(e.querySelectorAll("script")).each(function(){a.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function g(t,e){var a=Math.min(e/800*1e3,1e3);setTimeout(function(){k.animate({height:t+1},a,"easeOutQuart",function(){k.css("height","auto")})},150)}function j(t){a(t).find(S).each(function(){var t=a(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function y(t){!R||a.support.pjax?p(t):j(t)}function w(t){a(t).bind("moveToFinished",function(t,e){a("a.twixi:visible",e).focus()})}function x(t){t.find("time.livestamp").livestamp()}function A(t){a.inArray(t,_)<0&&_.push(t)}var C,k,q,T=JIRA.Templates.Issue.Tabs,R=!1!==n.get("viewissue-use-history-api"),I="ajax-activity-content",J="#activitymodule div.mod-content",S=e.format("a.{0}",I),_=[];return A(l),A(y),A(w),A(o),A(x),{onTabReady:A,domReady:c}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:underscore', location = 'libs/underscore.js' */
define("jira/components/libs/underscore",["underscore"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'libs/backbone.js' */
define("jira/components/libs/backbone",["jquery","jira/components/libs/underscore","atlassian/libs/factories/backbone-1.0.0","jira/backbone-queryparams"],function(e,b,a,c){var d=a(b,e);c(d);return d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:ajs-helper', location = 'util/ajshelper.js' */
define("jira/components/utils/ajshelper",[],function(){var a=window.AJS;return{escapeHtml:a.escapeHtml.bind(a),LEFT:a.LEFT,Templates:a.Templates,HIDE_REASON:a.HIDE_REASON,trigger:a.trigger.bind(a),log:a.log.bind(a),extractBodyFromResponse:a.extractBodyFromResponse,whenIType:function(){return a.whenIType},activeShortcuts:function(){return a.activeShortcuts}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(b){var c=b("atlassian/libs/factories/marionette-1.4.1");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(b){var a=b("jira/components/libs/underscore");return{listenAndRethrow:function(d,c){c=[].concat(c);a.each(c,function(e){this.listenTo(d,e,function(){this.trigger.apply(this,[e].concat(a.toArray(arguments)))},this)},this)},triggerPreventable:function(d,c){var e=a.defaults({},c||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true}});this.trigger(d,e);return e}}});AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.Region.extend({open:function(c){this.$el.append(c.$el.children());c.setElement(this.$el)}})});AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.Region.extend({open:function(c){this.$el.replaceWith(c.el)}})});AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/libs/marionette-1.4.1");var a=c("jira/components/libs/marionette-1.4.1/mixins");var d=e.Controller.extend({});b.extend(d.prototype,a);return d});AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var d=this.getTemplate();var c=b.Renderer.render(d,e);return b.$(c)},applyToDom:function(){this.delegateEvents();this.bindUIElements();this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var c=this.$el.children();this.$el.replaceWith(c);this.setElement(c)}else{this.setElement(this.$el.children())}}})});AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(a){var c=a("jira/components/libs/marionette-1.4.1");var b=a("jira/components/libs/marionette-1.4.1/itemview");return c.CollectionView.extend({_appendHtmlWithIndex:function(d,g,e){var f=d.children();var h=f.length;if(e<=0){d.prepend(g.$el)}else{if(!h||e>=h){d.append(g.$el)}else{g.$el.insertBefore(f.eq(e))}}},appendHtml:function(d,f,e){this._appendHtmlWithIndex(d.$el,f,e)},unwrapTemplate:function(){b.prototype.unwrapTemplate.call(this)}})});AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(a){var d=a("jira/components/libs/marionette-1.4.1");var b=a("jira/components/libs/marionette-1.4.1/collectionview");var c=a("jira/components/libs/marionette-1.4.1/itemview");return d.CompositeView.extend({appendHtml:function(e,g,f){b.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),g,f)},unwrapTemplate:function(){c.prototype.unwrapTemplate.call(this)}})});AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/libs/marionette-1.4.1");var a=c("jira/components/libs/marionette-1.4.1/mixins");var d=e.Layout.extend({applyToDom:function(){this.delegateEvents();this.bindUIElements();this._reInitializeRegions();this.triggerMethod("applyToDom")}});b.extend(d.prototype,a);return d});AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/marionette-1.4.1");return c.Application.extend({constructor:function(d){c.Application.call(this,d)},start:function(d){if(!d||d.forceStop!==false){this.stop()}c.Application.prototype.start.call(this,d)},stop:function(){a.invoke(this.submodules,"stop")}})});AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(d){var c=d("jira/components/libs/underscore");var e=d("jira/components/libs/marionette-1.4.1");var a=d("jira/components/libs/marionette-1.4.1/mixins");var b=function(){this.definition=c.bind(this.definition,this)};b.extend=e.extend;c.extend(b.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:false,name:"",commands:{},requests:{},events:[],definition:function(g,i){var h=this.name;var f=this;if(!h){throw new Error("'name' must be defined by AppModules")}g.addInitializer(function(){var k=f.create.apply(f,c.toArray(arguments));function m(o){if(c.isFunction(o)){o=o(k)}var p={};c.each(o,function(r,q){if(r===true){r=c.bind(k[q],k)}if(q&&h){q=h+":"+q}else{q=h}p[q]=r});return p}function l(p,o){if(c.isFunction(o)){o=o(k)}c.each(o,function(r){var q=h+":"+r;p.listenTo(k,r,function(){this.trigger.apply(this,[q].concat(c.toArray(arguments)))})})}var j=m(f.commands);var n=m(f.requests);if(f.generateMasterRequest){c.extend(n,m({"":function(){return k}}))}i.commands.setHandlers(j);i.reqres.setHandlers(n);l(i,f.events)})}});c.extend(b.prototype,a);return b});AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(e){var i=e("jira/components/libs/underscore");var h=e("jira/components/libs/marionette-1.4.1");var g=e("jira/components/libs/marionette-1.4.1/itemview");var b=e("aui/message");var d=e("jira/dialog/form-dialog");var j=e("jquery");var a=e("jira/ajs/ajax/smart-ajax");var f=e("jira/dialog/dialog");var c=e("jira/components/utils/ajshelper");return g.extend({dialog:null,template:j.noop,_generateDialog:function(){var m=this.serializeData();var l=this.getTemplate();var n={id:this.id,content:function(o){o(l(m))},submitHandler:i.bind(this._generateSubmissionXHR,this)};var k=h.getOption(this,"dialogOptions");if(i.isFunction(k)){k=k.apply(this)}return new d(i.extend(n,k))},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.dialog=this._generateDialog();this.dialog.show();this.$el=this.dialog.get$popup();j(this.dialog).on("Dialog.hide",i.bind(function(m,k,l){if(l===f.HIDE_REASON.cancel||l===f.HIDE_REASON.escape){this.close()}},this));this.triggerMethod("render",this);return this},close:function(){if(this.isClosed){return}var k=this.triggerMethod("before:close");if(k===false){return}j(this.dialog).off("Dialog.hide");this.dialog.hide(true);this.dialog.destroy();this.isClosed=true;this.triggerMethod("close");this.remove()},_generateSubmissionXHR:function(o,k){o.preventDefault();var m=this.dialog.$form;var n=h.getOption(this,"formToRequestData");if(i.isFunction(n)){n=n.call(this,m)}var l=a.makeRequest({type:m.attr("method"),url:m.attr("action"),contentType:"application/json",dataType:"json",processData:false,data:JSON.stringify(n)}).done(k).done(i.bind(this._onSubmitSuccess,this)).fail(i.bind(this._onSubmitError,this));return l},_onSubmitSuccess:function(k){this.triggerMethod("submit:success",k);this.close()},_onSubmitError:function(k){this.dialog.getButtonsContainer().find("input").removeAttr("disabled");this.dialog.hideFooterLoadingIndicator();this.dialog.$form.removeClass("submitting");this._showErrorFromXHR(k);this.triggerMethod("submit:error")},_displayFieldErrors:function(l){var k=this.dialog.$popup;i.each(l,function(m,n){k.find("#"+n).after("<div class='error'>"+c.escapeHtml(m)+"</div>")})},_displayGenericErrors:function(l){var k=this.dialog.$popup.find(".aui-messages");i.each(l,function(n){var m={closeable:true,timeout:5};m.body=c.escapeHtml(n);m.shadowed=false;b.error(k,m)})},_displayXHRErrors:function(l){var k=this.dialog.$popup.find(".aui-messages");k.append(a.buildDialogErrorContent(l,true))},_showErrorFromXHR:function(l){this._removeErrorMessages();var m;try{m=JSON.parse(l.responseText)}catch(k){m=null}if(m){this._displayFieldErrors(m.errors);this._displayGenericErrors(m.errorMessages)}else{this._displayXHRErrors(l)}},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove();this.dialog.$popup.find(".aui-messages").empty()}})});AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(b){var a=b("jira/components/libs/underscore");var f=b("jira/components/libs/marionette-1.4.1");var d=b("jira/components/libs/marionette-1.4.1/itemview");var e=b("jquery");var c=b("aui/inline-dialog");return d.extend({dialog:null,template:e.noop,_getDialogOptions:function(){var h={noBind:true};var g=f.getOption(this,"dialogOptions")||{};if(a.isFunction(g)){g=g.apply(this)}g=a.extend({},h,g);g.hideCallback=a.bind(function(){this.close()},this);return g},_getTrigger:function(){var g=f.getOption(this,"trigger");if(a.isFunction(g)){g=g.apply(this)}return g},_generateDialog:function(){var j=this.serializeData();var i=this.getTemplate();var h=this._getDialogOptions();var g=this._getTrigger();return new c(g,this.id,function(l,k,m){l.html(i(j));m()},h)},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.dialog=this._generateDialog();this.$el=this.dialog;this.id=this.dialog.id;this.dialog.show();this.triggerMethod("render",this);return this},close:function(){if(this.isClosed){return}var g=this.triggerMethod("before:close");if(g===false){return}this.dialog.hide();this.isClosed=true;this.triggerMethod("close");this.remove()}})});AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'namespaces.js' */
JIRA.Components=JIRA.Components||{};JIRA.Issues=JIRA.Issues||{};JIRA.Events=JIRA.Events||{};;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'libs/brace.js' */
define("jira/components/libs/brace",["require"],function(b){var c=b("atlassian/libs/factories/brace-2014.09.03");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var e=b("jquery");if(!e.fn.tooltip){e.fn.tooltip=e.noop;e.fn.tipsy=e.noop}var d=c.View.extend({events:{click:"hide"},initialize:function(f){if(a.isFunction(f.showCondition)){this.shouldShow=f.showCondition}else{if(f.showCondition){this.shouldShow=a.bind(function(){return this.$el.filter(f.showCondition).length>0},this)}else{this.shouldShow=function(){return true}}}this.tipsy=this.$el.tooltip(a.extend({trigger:"manual"},f.tipsy));this.hoverIntent(f.intents)},hoverIntent:function(f){if(this.tipsy){this.tipsy.hoverIntent(a.extend({interval:200,over:a.bind(this.show,this),out:a.bind(this.hide,this)},f))}return this},show:function(){if(this.shouldShow()&&this.tipsy){this.$el.tipsy("show")}},hide:function(){if(this.tipsy){this.$el.tipsy("hide")}},remove:function(){this.hide();this.$el.removeData("tipsy")}});d.revalidate=function(){return e.fn.tipsy.revalidate()};d.autoBounds=function(){return e.fn.tipsy.autoBounds.apply(e.fn.tipsy,arguments)};return d});AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/CatchExceptions.js' */
(function(b){var a=function(c){return function(){try{c.apply(this,arguments)}catch(d){}return this}};b.fn.htmlCatchExceptions=a(b.fn.html);b.fn.appendCatchExceptions=a(b.fn.append);b.fn.prependCatchExceptions=a(b.fn.prepend);b.catchExceptions=function(c){return b("<div>").htmlCatchExceptions(c).children()}})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/RecurringPromise.js' */
(function(){jQuery.RecurringPromise=function(a){if(!(this instanceof jQuery.RecurringPromise)){return new jQuery.RecurringPromise()}this._parent=a;this._doneCallbacks=new jQuery.Callbacks();this._failCallbacks=new jQuery.Callbacks();this._alwaysCallbacks=new jQuery.Callbacks()};jQuery.RecurringPromise.prototype={add:function(b){var a=new jQuery.Deferred();a.original=b;var c=this._getPending();this._abortIfPending(c);this._setPending(a);b.done(_.bind(function(){if(a===this._getPending()){a.resolveWith(this,arguments);this._doneCallbacks.fireWith(this,arguments)}},this));b.fail(_.bind(function(){if(a===this._getPending()){a.rejectWith(this,arguments);this._failCallbacks.fireWith(this,arguments)}},this));b.always(_.bind(function(){if(a===this._getPending()){this._alwaysCallbacks.fireWith(this,arguments)}},this));return a.promise()},done:function(a){this._doneCallbacks.add(a);return this},fail:function(a){this._failCallbacks.add(a);return this},always:function(a){this._alwaysCallbacks.add(a);return this},reset:function(){this._abortIfPending(this._getPending());this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(a){if(this._parent){this._parent._setPending(a)}else{this._pending=a}},_abortIfPending:function(a){if(a&&a.state()==="pending"){a.reject("abort");if(jQuery.isFunction(a.original.abort)){a.original.abort()}}}}}());;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(c){var b=new jQuery.Deferred();var d;var a=function(e){d=e;e.done(function(){if(d===e){b.resolve.apply(b,arguments)}}).fail(function(){if(d===e){b.reject.apply(b,arguments)}})};a(c);jQuery.extend(b,{update:function(e){if(!this.isPending()){throw"Cannot update non-pending ConcurrentDeferred"}var f=d;a(e);if(jQuery.isFunction(f.abort)){f.abort()}return this},isPending:function(){return this.state()==="pending"}});return b};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ScrollLock.js' */
(function(b){var a=30;b.fn.scrollLock=function(c,d){if(typeof c!=="string"){d=c;c=null}if(!d){d=a}this.on("DOMMouseScroll mousewheel",c,function(f){f.preventDefault();var g;if(f.originalEvent.wheelDelta){g=f.originalEvent.wheelDelta/120}if(f.originalEvent.detail){g=-f.originalEvent.detail/3}if(b.isNumeric(g)){this.scrollTop-=g*d}})}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'libs/uri.js' */
define("jira/components/libs/uri",["require"],function(a){return a("atlassian/libs/uri-1.14.1")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'lib/scrollintoview-1.8.js' */
/*!
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(f){var c={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var b={duration:0,direction:"y"};var e=/^(?:html)$/i;var g=function(k,j){j=j||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var i=document.defaultView&&document.defaultView.getComputedStyle?true:false;var h={top:(parseFloat(i?j.borderTopWidth:f.css(k,"borderTopWidth"))||0),left:(parseFloat(i?j.borderLeftWidth:f.css(k,"borderLeftWidth"))||0),bottom:(parseFloat(i?j.borderBottomWidth:f.css(k,"borderBottomWidth"))||0),right:(parseFloat(i?j.borderRightWidth:f.css(k,"borderRightWidth"))||0)};return{top:h.top,left:h.left,bottom:h.bottom,right:h.right,vertical:h.top+h.bottom,horizontal:h.left+h.right}};var d=function(h){var j=f(window);var i=e.test(h[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:g(h[0]),scroll:{top:(i?j:h).scrollTop(),left:(i?j:h).scrollLeft()},scrollbar:{right:i?0:h.innerWidth()-h[0].clientWidth,bottom:i?0:h.innerHeight()-h[0].clientHeight},rect:(function(){var k=h[0].getBoundingClientRect();return{top:i?0:k.top,left:i?0:k.left,bottom:i?h[0].clientHeight:k.bottom,right:i?h[0].clientWidth:k.right}})()}};f.fn.extend({scrollIntoViewForAuto:function(j){j=f.extend({},b,j);j.direction=c[typeof(j.direction)==="string"&&j.direction.toLowerCase()]||c.both;var n="";if(j.direction.x===true){n="horizontal"}if(j.direction.y===true){n=n?"both":"vertical"}var l=this.eq(0);var i=l.closest(":scrollable("+n+")");if(i.length>0){i=i.eq(0);var m={e:d(l),s:d(i)};var h={top:m.e.rect.top-(m.s.rect.top+m.s.border.top),bottom:m.s.rect.bottom-m.s.border.bottom-m.s.scrollbar.bottom-m.e.rect.bottom,left:m.e.rect.left-(m.s.rect.left+m.s.border.left),right:m.s.rect.right-m.s.border.right-m.s.scrollbar.right-m.e.rect.right};var k={};if(j.direction.y===true){if(h.top<0){k.scrollTop=m.s.scroll.top+h.top-30}else{if(h.top>0&&h.bottom<0){k.scrollTop=m.s.scroll.top+Math.min(h.top,-h.bottom)+30}}}if(j.direction.x===true){if(h.left<0){k.scrollLeft=m.s.scroll.left+h.left}else{if(h.left>0&&h.right<0){k.scrollLeft=m.s.scroll.left+Math.min(h.left,-h.right)}}}if(!f.isEmptyObject(k)){if(e.test(i[0].nodeName)){i=f("html,body")}i.animate(k,j.duration).eq(0).queue(function(o){f.isFunction(j.complete)&&j.complete.call(i[0]);o()})}else{f.isFunction(j.complete)&&j.complete.call(i[0])}}return this}});var a={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[":"],{scrollable:function(k,i,n,h){var m=c[typeof(n[3])==="string"&&n[3].toLowerCase()]||c.both;var l=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var o={x:a[l.overflowX.toLowerCase()]||false,y:a[l.overflowY.toLowerCase()]||false,isRoot:e.test(k.nodeName)};if(!o.x&&!o.y&&!o.isRoot){return false}var j={height:{scroll:k.scrollHeight,client:k.clientHeight},width:{scroll:k.scrollWidth,client:k.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'util/Browser.js' */
define("jira/components/util/browser",function(){return{locationReload:function(a){window.location.reload(a)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events-issueactions', location = 'util/IssueActionsEvents.js' */
define("jira/components/util/events/issue-actions",function(){var a={};a.DELETE="delete";a.UPDATE="update";a.INLINE_EDIT="inlineEdit";a.ROW_UPDATE="rowUpdate";return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/libs/brace");var a=c("jira/util/events");var e=c("jira/components/issueviewer/eventtypes");return d.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){a.bind(e.LOCK_PANEL_REFRESHING,b.bind(function(f,g){if(g===this.getEntity().id){this.set("updateLocked",true)}},this));a.bind(e.UNLOCK_PANEL_REFRESHING,b.bind(function(f,g){if(g===this.getEntity().id){this.set("updateLocked",false)}},this))},update:function(h,f,g){if(!this.getUpdateLocked()){this.set("entity",h);this.trigger("updated",f,g)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var d=b("jira/components/issueviewer/entities/panel");return c.Collection.extend({model:d,update:function(f,e){this.each(function(g){var h=g.id;var i=a.any(f,function(j){return j.id===h});if(!i){this.remove(g)}},this);a.each(f,function(h,i){var g=this.get(h.id);if(g){g.update(h,e.fieldsInProgress,e.fieldsSaved)}else{this.add({id:h.id,entity:h},{at:i})}},this)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(b){var c=b("jira/components/libs/brace");var a=b("jira/components/issueviewer/entities/panels");return c.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new a([]),rightPanels:new a([]),infoPanels:new a([])}},update:function(e,d){this.get("leftPanels").update(e.leftPanels,d);this.get("rightPanels").update(e.rightPanels,d);this.get("infoPanels").update(e.infoPanels,d)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(a){var b=a("jira/components/libs/brace");var c=a("jira/components/issueviewer/entities/panelsgroup");return b.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new c()}},update:function(f,e){var d=false;if(f.issue){this.updateFromEntity(f.issue);d=true}if(f.panels){this.getPanels().update(f.panels,e);d=true}if(d){this.trigger("updated",e)}},resetToDefault:function(){this.clear();this.set(this.defaults())},updateFromEntity:function(d){this.set({id:d.id,key:d.key,entity:d,projectKey:d.project?d.project.key:null,projectType:d.project?d.project.projectType:null,projectId:d.project?d.project.id:null})},isCurrentIssue:function(d){return this.get("id")===d},hasIssue:function(){return this.has("id")},updateIssueQuery:function(d){if(!this.hasIssue()){return}this.getEntity().viewIssueQuery=d},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(c){var b=c("jira/components/libs/underscore");var g=c("jira/components/issueviewer/legacy/issuefieldutil");var e=c("jquery");var f=c("jira/components/libs/marionette-1.4.1/itemview");var d=c("jira/components/issueviewer/templates");var a=c("internal/util/navigator");return f.extend({template:d.Body.issuePanel,modelEvents:{updated:"update"},update:function(h,p){var i=this.renderTemplate();var k=this.$el;var o=this;if(i.html()===k.html()){return}function m(){return b.any(h,function(q){return k.find(g.getFieldSelector(q)).length===1})}function j(){var q=k.find(document.activeElement).length>0;var t=a.isIE()&&a.majorVersion()<=8;if(!t){k.replaceWith(i)}else{var s=k[0].nextSibling;var r=k[0].parentNode;k.remove();if(s){e(s).before(i)}else{e(r).append(i)}}if(q){o.trigger("replacedFocusedPanel")}o.setElement(i)}function l(r){var s=o.model.id;var q=o.$el;o.trigger("panelRendered",s,q,k);b.each(r,function(t){o.trigger("individualPanelRendered",t)})}if(!m()){j();l([o.$el])}else{var n=[];b.each(p,function(s){var r=k.find(g.getFieldSelector(s));if(r.length===1){var q=i.find(g.getFieldSelector(s));if(q.length===1){r.replaceWith(q);n.push(q)}else{r.closest("li, dl").remove()}}});l(n)}this.bindUIElements()},onRender:function(){this.setElement(this.$el.children());var h=this.model.getEntity().styleClass;if(h){this.$el.addClass(h)}this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(c){var d=c("jira/components/libs/marionette-1.4.1/collectionview");var a=c("jira/components/issueviewer/views/issuepanel");var b=c("jira/components/issueviewer/entities/panel");return d.extend({itemView:a,_updatingFromDom:false,appendHtml:function(e,h,f){var g=e.$el.children();var i=g.length;if(f<=0){e.$el.prepend(h.$el)}else{if(!i||f>=i){e.$el.append(h.$el)}else{h.$el.insertBefore(g.eq(f))}}},applyToDom:function(){var e=this;this._updatingFromDom=true;this.$el.children().filter(".module").each(function(){var f=this.id;if(f==="addcomment"){f="addcommentmodule"}e.collection.add(new b({id:f,entity:{id:f}}))});this._updatingFromDom=false},renderItemView:function(e){if(!this._updatingFromDom){d.prototype.renderItemView.apply(this,arguments)}else{e.applyToDom()}},buildItemView:function(f){var e=d.prototype.buildItemView.apply(this,arguments);if(this._updatingFromDom){e.setElement(document.getElementById(f.id))}return e}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(a){var c=a("jira/components/libs/marionette-1.4.1/layout");var d=a("jira/components/libs/marionette-1.4.1/linkregion");var b=a("jira/components/issueviewer/templates");return c.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:d},rightPanels:{selector:".issue-side-column",regionType:d},infoPanels:{selector:".issue-body",regionType:d}},template:b.Body.issueBody})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(c){var e=c("jira/components/libs/marionette-1.4.1/itemview");var d=c("jira/components/issueviewer/templates");var b=c("jira/issues/tipsy");var a=c("jira/components/issueviewer/analytics/issueopsbar");return e.extend({template:d.Header.opsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new a(this);this.ui.loginButton.hide();this.ui.commentButton.addClass("inline-comment");new b({el:this.ui.shareButton,showCondition:":not(.active)"});new b({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(c){var h=c("jira/components/libs/marionette-1.4.1/layout");var d=c("jira/components/issueviewer/templates");var b=c("jira/components/issueviewer/services/darkfeatures");var a=c("jira/components/libs/underscore");var f=c("jira/components/issueviewer/views/issueopsbar");var e=c("jira/util/data/meta");var g=c("jquery");return h.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:d.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},serializeData:function(){return{issue:this.model.getEntity()}},update:function(i){if(i.initialize){this._updateWindowTitle()}else{var j=a.include(i.fieldsInProgress,"summary");if(j){this.renderOpsBar()}else{this.render()}}this.trigger("updated")},onApplyToDom:function(){var i=new f({model:this.model});i.setElement(this.opsbar.el);this.opsbar.attachView(i);this.opsbar.currentView.applyToDom();this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar();this._updateWindowTitle();this.trigger("panelRendered","header",this.$el,this.previousElement||g(""))},renderOpsBar:function(){this.opsbar.show(new f({model:this.model}));this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var i=this.model.getEntity();var k=i.key;var j=i.summary;var l=e.get("app-title");if(l&&j&&k){document.title="["+k+"] "+j+" - "+l}},focus:function(){this.$el.find("a").eq(0).focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(a){var e=a("jira/components/libs/marionette-1.4.1/layout");var b=a("jira/components/issueviewer/templates");var f=a("jira/components/libs/marionette-1.4.1/replaceregion");var c=a("jira/components/issueviewer/actions");var d=a("jquery");return e.extend({template:b.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:f},body:{selector:".issue-body-container",regionType:f}},modelEvents:{updated:"update"},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(g){this.$("#activitymodule .focused").removeClass("focused");this.$("#comment-"+g).addClass("focused");this.$(".js-stalker").trigger("refresh")},update:function(g){this._closeDropdowns();if(g.initialize){this.render()}if(g.reason&&g.reason.action===c.EDIT_COMMENT){this.focusComment(g.reason.meta.commentId)}this._bringViewIssueElementIntoView()},remove:function(){this.stopListening();this.$el.empty();return this},onRender:function(){this.$el.addClass(this.className);this.$el.attr("tabindex","-1");this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView();this.trigger("render")},_bringViewIssueElementIntoView:function(){var g=this.model.get("entity").viewIssueQuery;if(g){var h;if(g.focusedCommentId){h="#comment-"+g.focusedCommentId}else{if(g.attachmentSortBy||g.attachmentOrder||g.attachmentViewMode){h="#attachmentmodule"}}if(h){d(h).scrollIntoView({marginBottom:200,marginTop:200})}}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1/layout");return b.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){this.stopListening();this.$el.empty();return this},onRender:function(){this.$el.addClass(this.className);this.$el.attr("tabindex","-1")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(b){var a=b("jira/components/issueviewer/views/error");var c=b("jira/components/issueviewer/templates");var d=b("jira/components/util/browser");return a.extend({template:c.Error.Generic,events:{"click #issue-error-reload-button":function(){d.locationReload()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(c){var a=c("jira/components/issueviewer/views/error");var d=c("jira/components/issueviewer/templates");var b=c("jira/components/libs/underscore");return a.extend({template:d.Error.DoesNotExist,initialize:function(e){e=e||{};this.showReturnToSearchOnError=e.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var e=this.showReturnToSearchOnError;if(b.isFunction(e)){e=e()}return{hideReturnToSearch:!e}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(a){var g=a("jira/issue");var c=a("jira/components/issueviewer/views/issuebody");var b=a("jira/components/issueviewer/views/issueheader");var d=a("jira/components/issueviewer/views/issuepanels");var f=a("jira/components/issueviewer/views/issue");var h=a("jira/components/libs/marionette-1.4.1/controller");var i=a("jira/components/libs/underscore");var e=g.CommentForm;return h.extend({initialize:function(j){this.model=j.model},_createViews:function(){this.view=this._createMainView();this.bodyView=this._createBodyView();this.headerView=this._createHeaderView();this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels());this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels());this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var j=new f({model:this.model,el:this.$el});this.listenTo(j,{render:function(){this.trigger("renderMainView",j.$el)}});return j},_createBodyView:function(){return new c({model:this.model})},_createHeaderView:function(){var j=new b({model:this.model});this.listenAndRethrow(j,"panelRendered");this.listenTo(j,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo())},individualPanelRendered:function(k){this.trigger("individualPanelRendered",k)}});return j},_createPanelsView:function(k){var j=new d({collection:k});this.listenTo(j,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(l,o,n,m){this.trigger("panelRendered",o,n,m)},"itemview:individualPanelRendered":function(l,m){this.trigger("individualPanelRendered",m)}});return j},createView:function(){this._createViews();this.listenTo(this.view,"render",function(){this.view.header.show(this.headerView);this.view.body.show(this.bodyView);this.bodyView.leftPanels.show(this.leftPanelsView);this.bodyView.rightPanels.show(this.rightPanelsView);this.bodyView.infoPanels.show(this.infoPanelsView);this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:false}))})},createViewFromDom:function(){this._createViews();this.listenTo(this.view,"applyToDom",function(){function j(m,k,l){k.setElement(l);k.applyToDom();m.attachView(k)}j(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content"));j(this.view.body,this.headerView,this.view.$el.find("#stalker"));j(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el));j(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el));j(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el));this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:true}))})},setElement:function(j){this.$el=j;if(this.view){this.view.setElement(j)}},applyToDom:function(j){j.id=+j.id;this.model.updateFromEntity(j);this.createViewFromDom();this.view.applyToDom()},show:function(){if(!this.view){this.createView();this.view.render()}else{this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:false}))}this.view.hideLoading()},close:function(){if(this.view){this.view.close()}this.hideLoading();delete this.view},hideLoading:function(){if(this.view){this.view.hideLoading()}},showLoading:function(){if(this.view){this.view.showLoading()}},canDismissComment:function(){var k;var j=e;if(!j.getForm().data("dismissed")){k=j.handleBrowseAway();if(k){if(!confirm(k)){j.focus();return false}else{j.getForm().data("dismissed",true)}}}return true},applyResponsiveDesign:function(){if(!this.$el){return}var j=this.$el.width();this.$el.toggleClass("skinny",j<900);this.$el.toggleClass("very-skinny",j<600)},focus:function(){if(this.view){this.headerView.focus()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(d){var c=d("jira/components/issueviewer/views/errorgeneric");var b=d("jira/components/issueviewer/views/errornotfound");var a=d("jira/components/libs/marionette-1.4.1/controller");var e=d("jira/components/issueviewer/utils");return a.extend({initialize:function(f){this.contextPath=f.contextPath;this.showReturnToSearchOnError=f.showReturnToSearchOnError},render:function(g,f){switch(g){case"auth":this._renderErrorAuth(f);break;case"forbidden":case"notfound":this._renderErrorView(new b({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new c());break}},applyToDom:function(g,f){switch(g){case"auth":this._renderErrorAuth(f);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new b({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new c());break}},close:function(){if(this.view){this.view.close();delete this.view}},setElement:function(f){this._$el=f;if(this.view){this.view.setElement(f)}},_renderErrorAuth:function(g){var f=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+g);window.location.replace(f)},_renderErrorView:function(f){this.trigger("before:render");e.hideDropdown();this.view=f;this.view.setElement(this._$el);this.view.render();this.listenAndRethrow(this.view,"returnToSearch");this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:true},{loadedFromDom:false,issueId:null})},_renderErrorViewFromDom:function(f){this.trigger("before:render");e.hideDropdown();this.view=f;this.view.setElement(this._$el);this.view.applyToDom();this.listenAndRethrow(this.view,"returnToSearch");this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:true},{loadedFromDom:true,issueId:null})},isRendered:function(){return Boolean(this.view)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(c){var a=c("jira/components/libs/marionette-1.4.1/controller");var b=c("jira/components/libs/underscore");var d=c("jquery");var e=c("jira/components/issueviewer/legacy/issuefieldutil");return a.extend({initialize:function(){this._promiseManager=new d.RecurringPromise();this._updatingPromise=this._promiseManager.sub();this._updatingPromise.done(b.bind(this._onUpdatingDone,this)).fail(b.bind(this._onUpdatingError,this));this._loadingPromise=this._promiseManager.sub();this._loadingPromise.done(b.bind(this._onLoadingDone,this)).fail(b.bind(this._onLoadingError,this))},cancel:function(){this._promiseManager.reset()},update:function(k){var i=k.issueEntity;var h=k.mergeIntoCurrent;var m=k.viewIssueData;var l=!!k.detailView;var j=new d.Deferred();var g;function f(n){return function(){return{taskKey:n,data:arguments,startIssueLoad:new Date()}}}g=this._updatingPromise.add(m.get(i.key,true,{issueEntity:i,loadingDeferred:j,mergeIntoCurrent:h,startIssueLoad:new Date(),detailView:l}).pipe(f("issue"),f("issue")));g.fail(function(){j.reject.apply(j,arguments)});return j.promise()},load:function(h){var f=h.issueEntity;var j=h.viewIssueData;var i=!!f.detailView;this._currentlyLoading=true;var g=new d.Deferred();this._loadingPromise.add(j.get(f.key,false,{issueEntity:f,loadFields:false,loadingDeferred:g,startIssueLoad:new Date(),detailView:i}));return g.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(h,i,g){var f=g.issueEntity;f.id=h.issue.id;f.key=h.issue.key;if(!h.pager){h.pager=f.pager}e.transformFieldHtml(h);this._currentlyLoading=false;i.loadDuration=new Date()-g.startIssueLoad;this.trigger("issueLoaded",h,i,g);g.loadingDeferred.resolve(h,i,g)},_onUpdatingDone:function(f){var g=f.data[1];if(g){g.isUpdate=true}this._onLoadingDone.apply(this,f.data)},_onLoadingError:function(i,k,g){var f=g.issueEntity;var h={issueId:f.id,issueKey:f.key,response:i};this._currentlyLoading=false;var j;switch(i.status){case 401:j="auth";break;case 403:j="forbidden";break;case 404:j="notfound";break;default:j="generic";break}this.trigger("error",j,h);g.loadingDeferred.reject()},_onUpdatingError:function(f){this._onLoadingError.apply(this,f.data)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(b){var c=b("jira/util/data/meta");var a=b("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var d=e.getEntity();if(d.metadata){a.each(d.metadata,function(g,f){c.set(f,null)})}else{if(c.get("issue-key")){c.set("issue-key",null)}}},addIssueMetadata:function(e){var d=e.getEntity();a.each(d.metadata,function(g,f){c.set(f,g)})}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/DarkFeatures.js' */
define("jira/components/issueviewer/services/darkfeatures",["require"],function(c){var a=c("jira/lib/class");var b=c("jira/ajs/dark-features");var e=c("wrm/data");var d=e.claim("com.atlassian.jira.jira-issue-nav-components:issueviewer.features");return(function(){var g=a.extend({init:function(i,h){this.featureKey=i;this.featureOffKey=h},enabled:function(){return(!this.featureKey||b.isEnabled(this.featureKey))&&!(this.featureOffKey&&b.isEnabled(this.featureOffKey))}});var f=g.extend({enabled:function(){return d[this.featureKey]}});return{NO_PREFETCH:new g("ka.NO_PREFETCH"),REDIRECT_FROM_GLOBAL_TO_PROJECT:new g(null,"ka.REDIRECT_FROM_GLOBAL_TO_PROJECT_OFF"),HTTP_SESSIONS_DISABLED:new g("ka.HTTP_SESSIONS_DISABLED"),RTE_ENABLED:new f("rteEnabled")}})()});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require"],function(d){var g=d("jira/components/libs/underscore");var h=d("jira/util/events");var b=d("jira/ajs/layer/inline-layer");var i=d("jquery");var f=d("jira/components/libs/marionette-1.4.1/controller");var c=d("jira/message");var a=d("jira/ajs/ajax/smart-ajax");var e=d("jira/components/libs/uri");return f.extend({initialize:function(){g.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(j){if(j===this.el){return}this.el=j;this.linksToOtherIssues();this.linksToReorderSubtasks();this.viewOptionsForCurrentIssue()},linksToOtherIssues:function(){i(this.el).on("simpleClick","a.issue-link[data-issue-key]",g.bind(function(k){k.preventDefault();var j=i(k.target).closest("a").data("issue-key");this.trigger("linkToIssue",{issueKey:j})},this))},linksToReorderSubtasks:function(){i(this.el).on("simpleClick",".subtask-reorder a",g.bind(function(j){if(!j.target.href){return}j.preventDefault();i.ajax({type:"GET",data:{disableRedirect:true},url:j.target.href}).done(g.bind(function(){this.trigger("reorderSubtasks")},this)).fail(function(k){c.showErrorMsg(a.buildSimpleErrorContent(k),{closeable:true})})},this))},_handleReviewViewEvents:function(m){var l=m.currentTarget;i(l).parents("ul").find("a.aui-checked").removeClass("aui-checked");i(l).addClass("aui-checked");var k=new e(l.href).query(true);var j=this.triggerPreventable("refineViewer",{query:k});if(j.isPrevented){m.preventDefault()}},_onRefineViewEvents:function(k,j){i(j).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(k,j){i(j).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},viewOptionsForCurrentIssue:function(){h.bind(b.EVENTS.show,this._onRefineViewEvents);h.bind(b.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){h.unbind(b.EVENTS.show,this._onRefineViewEvents);h.unbind(b.EVENTS.hide,this._offRefineViewEvents)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(a){var b=a("jira/components/libs/brace");return b.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(b){var c=b("jira/components/libs/brace");var a=b("jira/components/libs/underscore");var d=b("jquery");return c.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={};this.pendings={};this.accessIndex=0;if(e){this.disableCache=e.disableCache;this.maxCacheSize=e.maxCacheSize}},get:function(f,e,m){var k=new d.Deferred();var h=this.disableCache?{}:this.data;var j=a.bind(function(q,p){var o=this._set(h,f,a.defaults(q,{accessIndex:this.accessIndex++}),true,m);var n=a.defaults({changed:o},p,h[f]);if(m&&m.mergeIntoCurrent){n.mergeIntoCurrent=true}if(h[f]&&!h[f].error){k.resolve(h[f].value,n,m)}else{k.reject(h[f]&&h[f].value,n,m)}},this);var g=a.bind(function(n){var o=this.fetch(f,m);this.setPending(f,o,function(p){j({value:p,error:false,updated:new Date()},{initialLoad:n})},function(p){var q={error:true,updated:new Date()};if(p!==undefined){q.value=p}j(q,{initialLoad:n,error:true})})},this);var i=function(){j({},{fromCache:true})};var l=a.bind(function(){this.pendings[f].always(a.bind(j,this,{},{initialLoad:true}))},this);if(e||this.disableCache){g(false)}else{if(this.hasCached(f)){i()}else{if(this.hasPending(f)){l()}else{g(true)}}}return k.promise()},setPending:function(h,f,e,g){if(this.hasPending(h)){this.pendings[h].update(f)}else{this.pendings[h]=new d.ConcurrentDeferred(f)}return this.pendings[h].done(function(i){e(i)}).fail(function(i){g(i)})},getIdByValue:function(e){var f;for(f in this.data){if(this.data[f].value===e){return f}}return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};a.each(this.data,function(f,g){e[g]=f.value});return e},hasCached:function(f){var e=this.getMeta(f);return e.value!==undefined||e.error===true},hasError:function(f){var e=this.getMeta(f);return e.error===true},hasPending:function(f){var e=this.pendings[f];return e?e.isPending():false},set:function(f,e){return this._set(this.data,f,{value:e,updated:new Date()},true)},remove:function(e){if(this.data[e]){delete this.data[e];this.triggerChange();return true}return false},setError:function(g,e){var f={error:true,updated:new Date()};if(e!==undefined){f.value=e}return this._set(this.data,g,f,true)},setMultiple:function(f){var e=new Date();var g=false;a.each(f,a.bind(function(h,i){h=a.pick(h,"value","error");h.updated=e;if(this._set(this.data,i,h,false)){g=true}},this));if(g){this.triggerChange()}return g},reset:function(e){this.data={};this.pendings={};this.accessIndex=0;if(e){this.setMultiple(e)}else{this.triggerChange()}},_set:function(i,k,j,g,f){if(this.disableCache&&i===this.data){i={}}var h=i[k]?a.clone(i[k]):{};var e=this.mergeFetchedAndCached(h,j,f?f:{},i[k]);if(g&&(!i[k]||e||i[k].error!==h.error)&&i===this.data){this.triggerChange()}if(!i[k]&&this.maxCacheSize&&a.keys(i).length===this.maxCacheSize){if(j.accessIndex){this._dropItem(i);i[k]=h}}else{i[k]=h}return e},_dropItem:function(g){var e=null;for(var f in g){if(!g[f].accessIndex){e=f;break}else{if(e===null||g[f].accessIndex<g[e].accessIndex){e=f}}}if(e!==null){delete g[e]}},fetch:function(g){var f=this.getMeta(g);var e=new d.Deferred();if(!this.hasCached(g)||f.error){e.reject(f.value)}else{e.resolve(f.value)}return e.promise()},mergeFetchedAndCached:function(f,h,e,g){a.extend(f,h);return !g||g.value!==f.value||g.error!==f.error}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require"],function(d){var c=d("jira/components/libs/underscore");var g=d("jira/components/issueviewer/legacy/asyncdata");var b=d("jira/components/issueviewer/services/darkfeatures");var e=d("jira/util/data/meta");var f=d("jquery");var a=window.AJS.contextPath();return g.extend({initialize:function(h){g.prototype.initialize.call(this,c.defaults(h||{},{disableCache:b.NO_PREFETCH.enabled(),maxCacheSize:e.get("viewissue-max-cache-size")}))},fetch:function(l,k){var o={issueKey:l,decorator:"none",prefetch:!!k.prefetch};o.shouldUpdateCurrentProject=!k.detailView;if(k.mergeIntoCurrent){if(this.data&&this.data[l]&&this.data[l].value&&this.data[l].value.issue){o.lastReadTime=this.data[l].value.readTime;o.fields=[];c.each(this.data[l].value.fields,function(p){o.fields.push(p.id+":"+p.contentId)});o.issue=["summary:"+this.data[l].value.issue.summaryContentId];o.links=[];var n=function(p){c.each(p.links,function(q){o.links.push(q.id+":"+q.contentId)});c.each(p.groups,function(q){n(q)})};c.each(this.data[l].value.issue.operations.linkGroups,function(p){n(p)});o.panels=[];var h=this;var i=function(p){c.each(h.data[l].value.panels[p],function(q){o.panels.push(q.completeKey+":"+q.contentId)})};i("leftPanels");i("rightPanels");i("infoPanels")}}if("loadFields" in k){o.loadFields=k.loadFields}if(k.issueEntity){c.defaults(o,k.issueEntity.viewIssueQuery)}var m=f.ajax({url:a+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":true},data:o,type:k.mergeIntoCurrent?"POST":"GET"});var j=m.pipe(function(p){return p},function(p){return c.pick(p,"status","responseText","statusText")});j.abort=function(){m.abort.apply(m,arguments)};return j},mergeFetchedAndCached:function(l,t,u){if(this._skipMerging(l,t,u)){c.extend(l,t);return null}c.each(c.pairs(t),function(v){if(v[0]!=="value"){l[v[0]]=v[1]}});var m=t.value;var s=[];var k=[];var r=[];c.each(m.removedContentIds,function(x,w){var v;if(w==="fields"){v=s}else{if(w==="panels"){v=k}else{if(w==="links"){v=r}}}if(v){c.each(x,function(y){v.push(y)})}});var o=m.fields;var n=m.issue.operations.linkGroups;var q=m.panels;var p=m.issue.summary;if(this._nothingChanged(s,k,r,o,q,n,p)){return null}var i={updated:{},added:{},deleted:{}};var j=l.value;var h=this._comparator;if(s.length>0||o.length>0){this._mergeFields(o,j,i,s)}if(k.length>0||q.leftPanels.length>0||q.rightPanels.length>0||q.infoPanels.length>0){this._mergePanels(q,j,i,k,h)}if(r.length>0||n.length>0){this._mergeLinks(n,j,i,r,h)}if(p){this._mergeSummary(m,j,i)}return i},_skipMerging:function(j,i,h){return c.isEmpty(j)||!h.mergeIntoCurrent||!j.value||!j.value.issue||i.error===true},_nothingChanged:function(l,h,n,i,k,j,m){return l.length===0&&h.length===0&&n.length===0&&i.length===0&&j.length===0&&k.leftPanels.length===0&&k.rightPanels.length===0&&k.infoPanels.length===0&&!m},_mergeFields:function(j,l,k,h){k.added.fields=[];k.updated.fields=[];k.deleted.fields=[];c.each(j,function(m){var n=c.find(l.fields,function(o){return o.id===m.id});if(n){k.updated.fields.push(m.id)}else{k.added.fields.push(m.id)}});var i=j;c.each(l.fields,function(m){if(c.contains(h,m.id)){k.deleted.fields.push(m.id)}else{if(!c.contains(k.updated.fields,m.id)){i.push(m)}}});l.fields=i},_mergeSummary:function(j,i,h){h.updated.issue=["summary"];i.issue.summary=j.issue.summary;i.issue.summaryContentId=j.issue.summaryContentId},_mergePanels:function(l,k,j,h,i){j.added.panels={};j.updated.panels={};j.deleted.panels={};var m=function(n){j.added.panels[n]=[];j.updated.panels[n]=[];j.deleted.panels[n]=[];c.each(l[n],function(p){var q=c.find(k.panels[n],function(r){return r.id===p.id});if(q){j.updated.panels[n].push(p.id)}else{j.added.panels[n].push(p.id)}});var o=l[n];c.each(k.panels[n],function(p){if(c.contains(h,p.completeKey)){j.deleted.panels[n].push(p.id)}else{if(!c.contains(j.updated.panels[n],p.id)){o.push(p)}}});o.sort(i);k.panels[n]=o};m("leftPanels");m("rightPanels");m("infoPanels")},_mergeLinks:function(l,k,j,h,i){j.added.groups={};j.updated.groups={};j.deleted.groups={};var m=[];this._mergeOperationsLinks(l,k,m,j,h,i);this._mergeToolsLinks(l,k,m,j,h,i);k.issue.operations.linkGroups=m},_mergeOperationsLinks:function(q,k,j,h,r,i){h.added.groups["view.issue.opsbar"]=[];h.updated.groups["view.issue.opsbar"]=[];h.deleted.groups["view.issue.opsbar"]=[];var p=c.find(k.issue.operations.linkGroups,function(s){return"view.issue.opsbar"===s.id});var o=c.find(q,function(s){return"view.issue.opsbar"===s.id});var n={};var l={};if(o){c.each(o.groups,function(s){var t=c.find(p.groups,function(v){return s.id===v.id});if(t){h.updated.groups["view.issue.opsbar"].push(s.id)}else{h.added.groups["view.issue.opsbar"].push(s.id)}c.each(s.links,function(v){n[v.id]=v;l[v.id]=s.id});if(s.groups&&s.groups.length>0){var u=s.groups[0];c.each(u.groups,function(v){c.each(v.links,function(w){n[w.id]=w;l[w.id]=v.id})})}})}if(p){var m=[];if(o){c.each(o.groups,function(s){if(c.contains(h.added.groups["view.issue.opsbar"],s.id)){m.push(s)}})}c.each(p.groups,function(x){var w=[];var t=null;if(o){t=c.find(o.groups,function(A){return x.id===A.id});if(t){c.each(t.links,function(A){var B=c.find(x.links,function(C){return A.id===C.id});if(!B){w.push(A)}})}}var u=false;var s=function(B,A){c.each(B.links,function(C){var D=l[C.id];if(D&&D!==B.id){u=true}else{if(n[C.id]){A.push(n[C.id])}else{if(!c.contains(r,C.id)){A.push(C)}else{u=true}}}})};s(x,w);w.sort(i);x.links=w;var v=null;if(t&&t.groups&&t.groups.length>0){v=t.groups[0]}var z=null;if(x.groups&&x.groups.length>0){z=x.groups[0];var y=[];if(v){c.each(v.groups,function(A){var B=c.find(z.groups,function(C){return A.id===C.id});if(!B){y.push(A)}})}c.each(z.groups,function(C){var B=[];if(v){var A=c.find(v.groups,function(D){return D.id===C.id});if(A){c.each(A.links,function(D){var E=c.find(C.links,function(F){return D.id===F.id});if(!E){B.push(D)}})}}s(C,B);if(B.length>0){B.sort(i);C.links=B;y.push(C)}});if(y.length>0){y.sort(i);z.groups=y}else{z=null;u=true}}else{if(v){z=t.groups[0]}}x.groups=[];if(z){x.groups[0]=z}if(w.length>0||z){m.push(x);if(u&&!c.contains(h.updated.groups["view.issue.opsbar"],x.id)){h.updated.groups["view.issue.opsbar"].push(x.id)}}else{h.deleted.groups["view.issue.opsbar"].push(x.id)}});if(m.length>0){m.sort(i);p.groups=m;j.push(p)}}else{if(o){j.push(o)}}h.added.groups["view.issue.opsbar"].sort();h.deleted.groups["view.issue.opsbar"].sort();h.updated.groups["view.issue.opsbar"].sort()},_mergeToolsLinks:function(q,n,m,h,r,i){h.updated.groups["jira.issue.tools"]=false;var t=c.find(n.issue.operations.linkGroups,function(u){return"jira.issue.tools"===u.id});var s=c.find(q,function(u){return"jira.issue.tools"===u.id});var o={};if(s){h.updated.groups["jira.issue.tools"]=true;c.each(s.links,function(u){o[u.id]=u});if(s.groups&&s.groups.length>0){c.each(s.groups[0].links,function(u){o[u.id]=u})}}if(t){var j=[];if(s){c.each(s.links,function(u){var v=c.find(t.links,function(w){return u.id===w.id});if(!v){j.push(u)}})}c.each(t.links,function(u){if(o[u.id]){j.push(o[u.id])}else{if(!c.contains(r,u.id)){j.push(u)}}});j.sort(i);t.links=j;var p=null;if(s&&s.groups&&s.groups.length>0){p=s.groups[0]}if(t.groups&&t.groups.length>0){var l=t.groups[0];var k=[];if(p){c.each(p.links,function(u){var v=c.find(l.links,function(w){return u.id===w.id});if(!v){k.push(u)}})}c.each(l.links,function(u){if(o[u.id]){k.push(o[u.id])}else{if(!c.contains(r,u.id)){k.push(u)}}});t.groups=[];if(k.length>0){k.sort(i);l.links=k;t.groups[0]=l}}else{if(p){t.groups=[p]}}m.push(t)}else{if(s){m.push(s)}}},_comparator:function(i,h){if(i.weight&&h.weight){if(i.weight>h.weight){return 1}if(i.weight<h.weight){return -1}return 0}if(i.weight&&!h.weight){return 1}if(!i.weight&&h.weight){return -1}return 0},updateIssue:function(h,j){var i=this.getMeta(h);if(i&&i.value){i.value.fields=j.fields||{}}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(b){var a=b("jira/components/libs/underscore");var d=b("jquery");var c={getFieldSelector:function(e){if(e==="issuetype"){return"#type-val"}else{if(e==="fixVersions"){return"#fixfor-val"}else{if(e==="summary"){return"#summary-val"}else{if(e==="labels"){return"#wrap-labels .value"}else{if(e==="duedate"){return"#due-date"}else{return"#"+e+"-val"}}}}}},matchesFieldSelector:function(e){return d(c.getFieldSelector(e)).length===1},transformFieldHtml:function(e){e.fields=a.map(e.fields,function(g){var f=d("<div />").htmlCatchExceptions(g.editHtml);if(f.find("input.radio,input.checkbox").length!==0){f.find("legend").eq(0).remove()}else{f.find("label").eq(0).remove()}return{id:g.id,label:g.label,editHtml:f.html(),required:g.required,contentId:g.contentId}});return e},getAccessKeyModifier:function(){var f=d("#home_link_drop").attr("title");var e=/\(([\w\+]+)\+\w\)/i;if(e.test(f)){return e.exec(f)[1]}else{return"Alt"}},isWikifield:function(g){try{var f=new DOMParser().parseFromString(g,"text/html");return f.body.querySelector(".jira-wikifield")}catch(h){return false}}};return c});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(b){var c=b("aui/inline-dialog");var a=b("jira/ajs/layer/inline-layer");var d=b("jquery");return{hideLightbox:function(){d.fancybox.close()},hideDropdown:function(){if(c.current&&c.current.id!=="column-picker-dialog"){c.current.hide()}if(a.current){var e=a.current.options.offsetTarget();if(e instanceof d){if(!e.is(":visible")){a.current.hide()}}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/util/events/issue-actions");return b.extend({},a,{EDIT_COMMENT:"editComment"})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(a){var b=a("jira/util/events/types");b.ISSUE_REFRESHED="issueRefreshed";b.PANEL_REFRESHED="panelRefreshed";return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(d){var c=d("jira/components/libs/underscore");var f=d("jquery");var e=d("jira/viewissue/analytics-utils");var a=d("jira/components/utils/ajshelper");var b=function(g){this.issueId=g.model.get("id");this.$el=g.$el;this.bindEventsToOpsbar()};b.prototype.triggerEvent=function(g){a.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:g})};b.prototype._getParamsButtonMain=function(i,h,g){return c.extend(this._getParamsCommon(i),{issueId:this.issueId,id:h.attr("id"),idx:g})};b.prototype._getParamsButtonSubmenu=function(h,k,g,j,i){return c.extend(this._getParamsCommon(h),{issueId:this.issueId,id:k.attr("id"),idx:g,parentId:j.attr("id"),parentIdx:i})};b.prototype._getParamsCommon=function(){return{context:e.context()}};b.prototype.bindEventsToOpsbar=function(){var g=this.$el.find("div.ops-menus .aui-button");g.each(function(l,h){var n=f(h);if(n.hasClass("toolbar-dropdown")){var m=n.find("a.toolbar-trigger");m.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,m,l))}.bind(this));var j=n.find(".aui-list a");j.each(function(o,i){var p=f(i);p.click(function(q){this.triggerEvent(this._getParamsButtonSubmenu(q,p,o,m,l))}.bind(this))}.bind(this))}else{var k=n.find("a");k.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,k,l))}.bind(this))}}.bind(this))};return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(h){var v=h("jira/components/libs/underscore");var w=h("jira/components/issueviewer/actions");var u=h("jira/components/issueviewer/services/darkfeatures");var r=h("jira/components/issueviewer/controllers/error");var m=h("jira/util/events");var s=h("jira/components/issueviewer/controllers/issue");var f=h("jira/components/issueviewer/legacy/issueeventbus");var k=h("jira/components/issueviewer/services/issueloader");var q=h("jira/components/issueviewer/entities/issue");var j=h("jquery");var d=h("jira/components/issueviewer/linkscapturer");var g=h("jira/components/libs/marionette-1.4.1/controller");var p=h("jira/util/data/meta");var e=h("jira/components/issueviewer/services/metadataservice");var i=h("jira/util/events/reasons");var b=window.JIRA;var n=h("jira/components/issueviewer/eventtypes");var c=h("jira/components/issueviewer/utils");var t=h("jira/components/issueviewer/legacy/viewissuedata");var a=h("wrm/data");var l=window.AJS.contextPath();var o=function(){b.trace.apply(b,arguments)};return g.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(x){x=x||{};x.useJIRAEvents=x.useJIRAEvents!==false;this.model=new q();this.eventBus=new f();this.viewIssueData=new t();this._buildIssueLoader();this._buildLinksCapturer();this._buildErrorController({showReturnToSearchOnError:x.showReturnToSearchOnError});this._buildIssueController();m.bind(n.REFRESH_ISSUE_PAGE,v.bind(function(z,A,y){if(this.model.isCurrentIssue(A)){this.refreshIssue(y)}},this))},_buildIssueLoader:function(){this.issueLoader=new k();this.listenTo(this.issueLoader,"error",function(y,x){this.trigger("loadError",x);this.errorController.render(y,x.issueKey);this.removeIssueMetadata();o("jira.issue.refreshed",{id:x.issueId});if(this.options.useJIRAEvents){m.trigger(n.ISSUE_REFRESHED,[x.issueId])}});this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new d();this.listenTo(this.linksCapturer,{linkToIssue:function(x){this.trigger("linkToIssue",x)},refineViewer:function(x){this.trigger("refineViewer",x)},reorderSubtasks:function(){this.issueController.showLoading();this.refreshIssue({reason:w.UPDATE}).always(v.bind(function(){this.issueController.hideLoading()},this))}})},_buildErrorController:function(x){x=x||{};this.errorController=new r({contextPath:l,showReturnToSearchOnError:x.showReturnToSearchOnError});this.listenTo(this.errorController,"before:render",function(){this.issueController.close()});this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")});this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new s({model:this.model});this.listenAndRethrow(this.issueController,"replacedFocusedPanel");this.listenTo(this.issueController,{render:function(y,x){c.hideDropdown();this.errorController.close();this.trigger("render",y,x);o("jira.psycho.issue.refreshed",{id:this.model.getId()})},renderMainView:function(x){if(this.options.useJIRAEvents){m.trigger(n.NEW_CONTENT_ADDED,[x,i.pageLoad]);m.trigger(n.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])}this.trigger("renderMainView",x,this.model.getId())},panelRendered:function(z,y,x){this.eventBus.triggerPanelRendered(z,y);if(this.options.useJIRAEvents){m.trigger(n.PANEL_REFRESHED,[z,y,x])}this.trigger("panelRendered",z,y,x)},close:function(){c.hideDropdown()},individualPanelRendered:function(x){if(this.options.useJIRAEvents){m.trigger(n.NEW_CONTENT_ADDED,[x,i.panelRefreshed])}this.trigger("individualPanelRendered",x)}})},_updateModel:function(y,x){this.model.update(y,x)},_onIssueLoaded:function(x,E,F){var D=!u.NO_PREFETCH.enabled();var B=F.issueEntity;var y=!E.mergeIntoCurrent&&F.initialize!==false;var C=!this.model.isCurrentIssue(B.id);var z=!!B.detailView;if(!E.isUpdate||y){this.model.resetToDefault();this.errorController.close()}this._updateModel(x,{initialize:y,changed:E.changed,mergeIntoCurrent:E.mergeIntoCurrent});if(!E.isUpdate||y){this.issueController.close()}this.issueController.show();if(D&&E.fromCache){this.refreshIssue(B,{fromCache:true,mergeIntoCurrent:!E.error,detailView:z})}e.addIssueMetadata(this.model);if(B.bringToFocus){B.bringToFocus()}this._triggerLoadComplete(C,E,B);var A={id:B.id};if(E.fromCache){o("jira.issue.loadFromCache",A)}else{o("jira.issue.loadFromServer",A)}o("jira.issue.refreshed",A);if(this.options.useJIRAEvents){m.trigger(n.ISSUE_REFRESHED,[B.id])}},_triggerLoadComplete:function(x,z,y){this.trigger("loadComplete",this.model,{isNewIssue:x,issueId:y.id,issueKey:y.key,duration:z.loadDuration,loadReason:z.fromCache?"issues-cache-refresh":undefined,fromCache:z.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){c.hideLightbox();c.hideDropdown();this.abortPending();this.removeIssueMetadata()},beforeShow:function(){e.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(x){if(!x.id||x.id===-1){this.errorController.applyToDom("notfound",x.key);this.trigger("loadError")}else{this.issueController.applyToDom(v.extend({id:-1},x))}p.set("serverRenderedViewIssue",null);var y={id:this.getIssueId()};o("jira.issue.refreshed",y)},loadIssue:function(x){var y=p.get("serverRenderedViewIssue");if(y){x.project={id:a.claim("projectId"),key:a.claim("projectKey"),projectType:a.claim("projectType")};return this.loadIssueRenderedByTheServer(x)}else{if(!this.canDismissComment()||!x.key){return new j.Deferred().reject()}this.issueController.showLoading();return this.issueLoader.load({issueEntity:x,viewIssueData:this.viewIssueData})}},loadIssueRenderedByTheServer:function(y){var x=j("#key-val");var z=j("#summary-val");y.id=x.attr("rel")||-1;y.summary=z.text();this._loadIssueFromDom(y);this.trigger("loadComplete",this.model,{isNewIssue:false,issueId:y.id,issueKey:y.key,duration:0,loadReason:undefined,fromCache:false});return new j.Deferred().resolve().promise()},refreshIssue:function(x){var y;x=v.defaults({},x,{mergeIntoCurrent:true});if(this.model.hasIssue()){y=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:x.mergeIntoCurrent,detailView:x.detailView});if(x.complete){y=y.done(x.complete).fail(x.complete)}this.issueController.showLoading()}else{y=new j.Deferred().resolve().promise()}return y},removeIssueMetadata:function(){e.removeIssueMetadata(this.model)},setContainer:function(x){this.linksCapturer.capture(x);this.errorController.setElement(x);this.issueController.setElement(x)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(x){this.issueController.showLoading();this.model.updateIssueQuery(x);this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:true})},dismiss:function(){this.model.resetToDefault();this.errorController.close();this.issueController.close();this.linksCapturer.destroy()},close:function(){if(this.canDismissComment()){this.dismiss();this.trigger("close")}},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(d){var c=d("jira/components/libs/underscore");var a=d("jira/components/issueviewer");var b=d("jira/components/libs/marionette-1.4.1/appmodule");return b.extend({name:"issueViewer",generateMasterRequest:true,create:function(e){e=c.defaults({},e,{showReturnToSearchOnError:function(){return false}});return new a({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:true,beforeHide:true,beforeShow:true,removeIssueMetadata:true,updateIssueWithQuery:true,close:true,setContainer:true,dismiss:true}},requests:function(){return{loadIssue:true,canDismissComment:true,getIssueId:true,getIssueKey:true,refreshIssue:true,isCurrentlyLoading:true}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/Issue.soy' */
// This file was automatically generated from Issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }


JIRA.Components.IssueViewer.Templates.layout = function(opt_data, opt_ignored) {
  return '<div id="issue-content" class="issue-edit-form">' + ((opt_data.serverRenderedViewIssue) ? '<header id="stalker" class="issue-header js-stalker">' + JIRA.Components.IssueViewer.Templates.Header.issueHeader(opt_data) + '</header><div class="issue-body-content">' + JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(opt_data) + '</div>' : '<div class="issue-header-container"></div><div class="issue-body-container"></div>') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.layout.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.layout';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueHeader.soy' */
// This file was automatically generated from IssueHeader.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Header.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Header == 'undefined') { JIRA.Components.IssueViewer.Templates.Header = {}; }


JIRA.Components.IssueViewer.Templates.Header.opsbar = function(opt_data, opt_ignored) {
  var output = '<div class="ops-cont"><div class="ops-menus aui-toolbar2"><div class="aui-toolbar2-inner">';
  if (opt_data.issue.operations) {
    var linkGroupList6 = opt_data.issue.operations.linkGroups;
    var linkGroupListLen6 = linkGroupList6.length;
    for (var linkGroupIndex6 = 0; linkGroupIndex6 < linkGroupListLen6; linkGroupIndex6++) {
      var linkGroupData6 = linkGroupList6[linkGroupIndex6];
      if (linkGroupData6.id && linkGroupData6.id == 'view.issue.opsbar') {
        output += '<div class="aui-toolbar2-primary">';
        var subGroupList10 = linkGroupData6.groups;
        var subGroupListLen10 = subGroupList10.length;
        for (var subGroupIndex10 = 0; subGroupIndex10 < subGroupListLen10; subGroupIndex10++) {
          var subGroupData10 = subGroupList10[subGroupIndex10];
          output += JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: subGroupData10});
        }
        output += '</div>';
      } else if (linkGroupData6.id && linkGroupData6.id == 'jira.issue.tools') {
        output += '<div class="aui-toolbar2-secondary">' + JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: linkGroupData6}) + '</div>';
      }
    }
  }
  output += '</div></div>';
  if (opt_data.issue.operations) {
    var linkGroupList24 = opt_data.issue.operations.linkGroups;
    var linkGroupListLen24 = linkGroupList24.length;
    for (var linkGroupIndex24 = 0; linkGroupIndex24 < linkGroupListLen24; linkGroupIndex24++) {
      var linkGroupData24 = linkGroupList24[linkGroupIndex24];
      if (linkGroupData24.id && linkGroupData24.id == 'view.issue.opsbar') {
        var subGroupList27 = linkGroupData24.groups;
        var subGroupListLen27 = subGroupList27.length;
        for (var subGroupIndex27 = 0; subGroupIndex27 < subGroupListLen27; subGroupIndex27++) {
          var subGroupData27 = subGroupList27[subGroupIndex27];
          output += JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown({group: subGroupData27});
        }
      } else if (linkGroupData24.id && linkGroupData24.id == 'jira.issue.tools') {
        output += JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown({group: linkGroupData24});
      }
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.opsbar.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.opsbar';
}


JIRA.Components.IssueViewer.Templates.Header.issueHeader = function(opt_data, opt_ignored) {
  return '<div class="issue-header-content">' + aui.page.pageHeader({content: '' + ((opt_data.issue.project) ? aui.page.pageHeaderImage({content: '' + JIRA.Templates.Headers.projectAvatar({id: '' + soy.$$escapeHtml(opt_data.issue.project.id), projectKey: '' + soy.$$escapeHtml(opt_data.issue.project.key), projectName: '' + soy.$$escapeHtml(opt_data.issue.project.name), avatarUrl: '' + soy.$$escapeHtml(opt_data.issue.project.avatarUrls['48x48']), avatarAlt: '' + soy.$$escapeHtml(opt_data.issue.project.name), isSystemAvatar: opt_data.issue.project.systemAvatar})}) + aui.page.pageHeaderMain({content: '<ol class="aui-nav aui-nav-breadcrumbs">' + ((opt_data.issue.project.archived) ? '<li><span id="project-name-val">' + soy.$$escapeHtml(opt_data.issue.project.name) + '</span></li>' : '<li><a id="project-name-val" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.project.key) + '">' + soy.$$escapeHtml(opt_data.issue.project.name) + '</a></li>') + ((opt_data.issue.parent && opt_data.issue.parent.id) ? '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" id="parent_issue_summary" title="' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '">' + soy.$$escapeHtml(opt_data.issue.parent.key) + ' ' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '</a></li>' : '') + '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" id="key-val" rel="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a></li></ol><h1 id="summary-val">' + soy.$$escapeHtml(opt_data.issue.summary) + '</h1>'}) : '') + aui.page.pageHeaderActions({content: '<div id="issue-header-pager">' + ((opt_data.pager) ? JIRA.Components.IssueViewer.Templates.Header.pager(opt_data.pager) : '') + '</div>'})}) + ((opt_data.issue.project && opt_data.issue.project.archived) ? aui.message.info({content: '<p><b>' + soy.$$escapeHtml('This issue belongs to an archived project.') + '</b> ' + soy.$$escapeHtml('You can view it, but you can\x27t modify it.') + ' <a target=\'_blank\' href=\'' + soy.$$escapeHtml(opt_data.archivingHelpUrl) + '\'>' + soy.$$escapeHtml('Learn more') + '</a>', id: 'issue-header-archived'}) : '') + '<div class="command-bar">' + ((opt_data.serverRenderedViewIssue) ? JIRA.Components.IssueViewer.Templates.Header.opsbar(opt_data) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.issueHeader.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.issueHeader';
}


JIRA.Components.IssueViewer.Templates.Header.linkGroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.group.header && opt_data.group.header.label) {
    output += (opt_data.group.links.length > 0 || opt_data.group.groups.length > 0) ? JIRA.Components.IssueViewer.Templates.Header.dropdownTrigger(opt_data.group) : '';
  } else {
    output += '<div ' + ((opt_data.group.id) ? 'id="opsbar-' + soy.$$escapeHtml(opt_data.group.id) + '" ' : '') + 'class="aui-buttons pluggable-ops">';
    var linkList141 = opt_data.group.links;
    var linkListLen141 = linkList141.length;
    for (var linkIndex141 = 0; linkIndex141 < linkListLen141; linkIndex141++) {
      var linkData141 = linkList141[linkIndex141];
      output += JIRA.Components.IssueViewer.Templates.Header.toolbarItem({link: linkData141});
    }
    if (opt_data.group.groups.length == 1 && opt_data.group.groups[0].links.length == 0 && opt_data.group.groups[0].groups.length == 1 && opt_data.group.groups[0].groups[0].links.length == 1) {
      output += JIRA.Components.IssueViewer.Templates.Header.toolbarItem({link: opt_data.group.groups[0].groups[0].links[0]});
    } else {
      var subGroupList150 = opt_data.group.groups;
      var subGroupListLen150 = subGroupList150.length;
      for (var subGroupIndex150 = 0; subGroupIndex150 < subGroupListLen150; subGroupIndex150++) {
        var subGroupData150 = subGroupList150[subGroupIndex150];
        output += JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: subGroupData150});
      }
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.linkGroup.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.linkGroup';
}


JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.group.header && opt_data.group.header.label) {
    output += (opt_data.group.links.length > 0 || opt_data.group.groups.length > 0) ? JIRA.Components.IssueViewer.Templates.Header.dropdownMenu(opt_data.group) : '';
  } else {
    if (! (opt_data.group.groups.length == 1 && opt_data.group.groups[0].links.length == 0 && opt_data.group.groups[0].groups.length == 1 && opt_data.group.groups[0].groups[0].links.length == 1)) {
      var subGroupList164 = opt_data.group.groups;
      var subGroupListLen164 = subGroupList164.length;
      for (var subGroupIndex164 = 0; subGroupIndex164 < subGroupListLen164; subGroupIndex164++) {
        var subGroupData164 = subGroupList164[subGroupIndex164];
        output += JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown({group: subGroupData164});
      }
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.linkGroupDropdown';
}


JIRA.Components.IssueViewer.Templates.Header.dropdownTrigger = function(opt_data, opt_ignored) {
  return '<a href="#"' + ((opt_data.header.id) ? 'id="' + soy.$$escapeHtml(opt_data.header.id) + '"' : '') + ((opt_data.header.id) ? 'aria-owns="' + soy.$$escapeHtml(opt_data.header.id) + '_drop"' : '') + 'aria-haspopup="true"' + JIRA.Components.IssueViewer.Templates.Header.titleAttr({title: opt_data.header.title, label: opt_data.header.label}) + 'class="aui-button ' + ((opt_data.links.length > 0 || opt_data.groups.length > 0) ? ' aui-dropdown2-trigger' : '') + ((opt_data.header.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.header.styleClass) : '') + '">' + ((opt_data.header.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.header.iconClass) + '"></span> ' : '') + '<span class="dropdown-text">' + soy.$$truncate(soy.$$escapeHtml(opt_data.header.label), 25, true) + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.dropdownTrigger.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.dropdownTrigger';
}


JIRA.Components.IssueViewer.Templates.Header.dropdownMenu = function(opt_data, opt_ignored) {
  var output = '<aui-dropdown-menu ' + ((opt_data.header.id) ? 'id="' + soy.$$escapeHtml(opt_data.header.id) + '_drop"' : '') + '>';
  if (opt_data.links.length > 0) {
    output += '<ul>';
    var linkList213 = opt_data.links;
    var linkListLen213 = linkList213.length;
    for (var linkIndex213 = 0; linkIndex213 < linkListLen213; linkIndex213++) {
      var linkData213 = linkList213[linkIndex213];
      output += JIRA.Components.IssueViewer.Templates.Header.dropdownItem(linkData213);
    }
    output += '</ul>';
  }
  var groupList217 = opt_data.groups;
  var groupListLen217 = groupList217.length;
  for (var groupIndex217 = 0; groupIndex217 < groupListLen217; groupIndex217++) {
    var groupData217 = groupList217[groupIndex217];
    output += '<aui-section>';
    var linkList219 = groupData217.links;
    var linkListLen219 = linkList219.length;
    for (var linkIndex219 = 0; linkIndex219 < linkListLen219; linkIndex219++) {
      var linkData219 = linkList219[linkIndex219];
      output += JIRA.Components.IssueViewer.Templates.Header.dropdownItem(linkData219);
    }
    output += '</aui-section>';
  }
  output += '</aui-dropdown-menu>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.dropdownMenu.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.dropdownMenu';
}


JIRA.Components.IssueViewer.Templates.Header.dropdownItem = function(opt_data, opt_ignored) {
  return '<aui-item-link href="' + ((opt_data.href) ? soy.$$escapeHtml(opt_data.href) : '#') + '"' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.styleClass) ? 'class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + JIRA.Components.IssueViewer.Templates.Header.titleAttr(opt_data) + '><span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.label), 25, true) + '</span></aui-item-link>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.dropdownItem.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.dropdownItem';
}


JIRA.Components.IssueViewer.Templates.Header.toolbarItem = function(opt_data, opt_ignored) {
  return '<a id="' + soy.$$escapeHtml(opt_data.link.id) + '"' + JIRA.Components.IssueViewer.Templates.Header.titleAttr({title: opt_data.link.title, label: opt_data.link.label}) + 'class="aui-button toolbar-trigger' + ((opt_data.link.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.link.styleClass) : '') + '" href="' + ((opt_data.link.href) ? soy.$$escapeHtml(opt_data.link.href) : '#') + '">' + ((opt_data.link.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.link.iconClass) + '"></span> <span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.link.label), 25, true) + '</span>' : '<span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.link.label), 25, true) + '</span>') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.toolbarItem.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.toolbarItem';
}


JIRA.Components.IssueViewer.Templates.Header.titleAttr = function(opt_data, opt_ignored) {
  return '' + ((opt_data.title) ? 'title="' + soy.$$escapeHtml(opt_data.title) + '"' : (opt_data.label && opt_data.label.length && opt_data.label.length > 25) ? 'title="' + soy.$$escapeHtml(opt_data.label) + '"' : '');
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.titleAttr.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.titleAttr';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueBody.soy' */
// This file was automatically generated from IssueBody.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Body.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Body == 'undefined') { JIRA.Components.IssueViewer.Templates.Body = {}; }


JIRA.Components.IssueViewer.Templates.Body.issueBody = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels: false, serverRenderedViewIssue: false});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issueBody.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issueBody';
}


JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group issue-body"><div class="aui-item issue-main-column">';
  if (opt_data.serverRenderedViewIssue) {
    var panelList10 = opt_data.panels.leftPanels;
    var panelListLen10 = panelList10.length;
    for (var panelIndex10 = 0; panelIndex10 < panelListLen10; panelIndex10++) {
      var panelData10 = panelList10[panelIndex10];
      output += JIRA.Components.IssueViewer.Templates.Body.issuePanel(panelData10);
    }
  }
  output += '</div><div id="viewissuesidebar" class="aui-item issue-side-column">';
  if (opt_data.serverRenderedViewIssue) {
    var panelList16 = opt_data.panels.rightPanels;
    var panelListLen16 = panelList16.length;
    for (var panelIndex16 = 0; panelIndex16 < panelListLen16; panelIndex16++) {
      var panelData16 = panelList16[panelIndex16];
      output += JIRA.Components.IssueViewer.Templates.Body.issuePanel(panelData16);
    }
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels';
}


JIRA.Components.IssueViewer.Templates.Body.issuePanel = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.renderHeader) {
    output += '<div id=' + soy.$$escapeHtml(opt_data.id) + ' class="module toggle-wrap"><div id="' + soy.$$escapeHtml(opt_data.id) + '_heading" class="mod-header"><ul class="ops">';
    var linkList28 = opt_data.headerLinks.links;
    var linkListLen28 = linkList28.length;
    for (var linkIndex28 = 0; linkIndex28 < linkListLen28; linkIndex28++) {
      var linkData28 = linkList28[linkIndex28];
      output += '<li>' + JIRA.Components.IssueViewer.Templates.Body.simpleLink({link: linkData28}) + '</li>';
    }
    if (opt_data.headerLinks.groups.length > 0) {
      output += '<li class="drop"><div class="aui-dd-parent">' + ((require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<div class="aui-button aui-button-compact aui-button-subtle js-default-dropdown" title="' + soy.$$escapeHtml('Options') + '"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml('Options') + '</span></div>' : '<a href="#" class="icon drop-menu js-default-dropdown" title="' + soy.$$escapeHtml('Options') + '"><span>' + soy.$$escapeHtml('Options') + '</span></a>') + '<div class="aui-dropdown-content aui-list">';
      var groupList51 = opt_data.headerLinks.groups;
      var groupListLen51 = groupList51.length;
      for (var groupIndex51 = 0; groupIndex51 < groupListLen51; groupIndex51++) {
        var groupData51 = groupList51[groupIndex51];
        output += ((groupData51.header && groupData51.header.label) ? '<h5>' + soy.$$escapeHtml(groupData51.header.label) + '</h5>' : '') + '<ul ' + ((groupData51.header && groupData51.header.id) ? 'id="' + soy.$$escapeHtml(groupData51.header.id) + '"' : '') + 'class="aui-list-section' + ((groupData51.header && groupData51.header.styleClass) ? ' ' + soy.$$escapeHtml(groupData51.header.styleClass) : '') + ((groupIndex51 == 0) ? ' aui-first' : '') + ((groupIndex51 == groupListLen51 - 1) ? ' aui-last' : '') + '">';
        var linkList75 = groupData51.links;
        var linkListLen75 = linkList75.length;
        for (var linkIndex75 = 0; linkIndex75 < linkListLen75; linkIndex75++) {
          var linkData75 = linkList75[linkIndex75];
          output += '<li class="aui-list-item">' + JIRA.Components.IssueViewer.Templates.Body.simpleLink({link: linkData75, additionalStyleClass: 'aui-list-item-link'}) + '</li>';
        }
        output += '</ul>';
      }
      output += '</div></div></li>';
    }
    output += '</ul>';
    if (opt_data.subpanelHtmls.length > 0) {
      output += '<div class="mod-header-panels">';
      var subPanelList89 = opt_data.subpanelHtmls;
      var subPanelListLen89 = subPanelList89.length;
      for (var subPanelIndex89 = 0; subPanelIndex89 < subPanelListLen89; subPanelIndex89++) {
        var subPanelData89 = subPanelList89[subPanelIndex89];
        output += '<div class="mod-header-panel">' + soy.$$filterNoAutoescape(subPanelData89) + '</div>';
      }
      output += '</div>';
    }
    output += ((require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<a href="#" class="aui-button toggle-title"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" fill-rule="evenodd"><path d="M3.29175 4.793c-.389.392-.389 1.027 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955c.388-.392.388-1.027 0-1.419-.389-.392-1.018-.392-1.406 0l-2.298 2.317-2.307-2.327c-.194-.195-.449-.293-.703-.293-.255 0-.51.098-.703.293z" fill="#344563"/></g></svg></a><h4 class="toggle-title">' + soy.$$escapeHtml(opt_data.label) + '</h4>' : '<h2 class="toggle-title">' + soy.$$escapeHtml(opt_data.label) + '</h2>') + '</div><div class="mod-content">' + soy.$$filterNoAutoescape(opt_data.html) + '</div></div>';
  } else {
    output += soy.$$filterNoAutoescape(opt_data.html);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issuePanel.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issuePanel';
}


JIRA.Components.IssueViewer.Templates.Body.errorsLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '' + ((opt_data.isTimeout) ? soy.$$escapeHtml('The Jira server could not be contacted. This may be a temporary glitch or the server may be down.') : soy.$$escapeHtml('There were errors loading the issue.'));
  if (opt_data.errorMessages) {
    output += '<ul>';
    var msgList121 = opt_data.errorMessages;
    var msgListLen121 = msgList121.length;
    for (var msgIndex121 = 0; msgIndex121 < msgListLen121; msgIndex121++) {
      var msgData121 = msgList121[msgIndex121];
      output += '<li>' + soy.$$escapeHtml(msgData121) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.errorsLoading.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.errorsLoading';
}


JIRA.Components.IssueViewer.Templates.Body.focusShifter = function(opt_data, opt_ignored) {
  return '<div class="aui-message closeable" id="focus-shifter"><label><span>' + soy.$$escapeHtml('viewissue.focusshifter') + '</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.focusShifter.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.focusShifter';
}


JIRA.Components.IssueViewer.Templates.Body.simpleLink = function(opt_data, opt_ignored) {
  return '<a' + ((opt_data.link.id) ? ' id="' + soy.$$escapeHtml(opt_data.link.id) + '"' : '') + 'href="' + ((opt_data.link.href) ? soy.$$escapeHtml(opt_data.link.href) : '#') + '"' + ((opt_data.link.styleClass || opt_data.additionalStyleClass) ? 'class="' + soy.$$escapeHtml(opt_data.link.styleClass) + ((opt_data.additionalStyleClass) ? ' ' + soy.$$escapeHtml(opt_data.additionalStyleClass) : '') + '"' : '') + ((opt_data.link.title) ? 'title="' + soy.$$escapeHtml(opt_data.link.title) + '"' : '') + '><span>' + soy.$$escapeHtml(opt_data.link.label) + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.simpleLink.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.simpleLink';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueError.soy' */
// This file was automatically generated from IssueError.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Error.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Error == 'undefined') { JIRA.Components.IssueViewer.Templates.Error = {}; }


JIRA.Components.IssueViewer.Templates.Error.NoPermission = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.Generic(null);
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.NoPermission.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.NoPermission';
}


JIRA.Components.IssueViewer.Templates.Error.DoesNotExist = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title: 'You can\x27t view this issue', body: 'It may have been deleted or you don\x27t have permission to view it.', error: 'canNotBeViewed', showReloadButton: false});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.DoesNotExist.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.DoesNotExist';
}


JIRA.Components.IssueViewer.Templates.Error.Generic = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title: 'This issue can\x27t be displayed right now', body: 'It could be for a variety of reasons, like a network or application error.', bodyAfter: 'Try reloading the page.', error: 'genericError', showReloadButton: true});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.Generic.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.Generic';
}


JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header: '<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>', body: '<div class="issue-error"><span class="error-image error-image-' + soy.$$escapeHtml(opt_data.error) + '"></span><h1>' + soy.$$escapeHtml(opt_data.title) + '</h1><p>' + soy.$$escapeHtml(opt_data.body) + ' ' + ((opt_data.bodyAfter) ? ' <br/>' + soy.$$escapeHtml(opt_data.bodyAfter) : '') + '</p>' + ((opt_data.showReloadButton) ? '<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>' : '') + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError';
}


JIRA.Components.IssueViewer.Templates.Error.viewIssueError = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header: '<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>' + soy.$$escapeHtml(opt_data.title) + '</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>', body: '<div class="aui-message ' + ((opt_data.error) ? 'aui-message-' + soy.$$escapeHtml(opt_data.error) : '') + '"><span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.error) + '"></span><p>' + soy.$$escapeHtml(opt_data.body) + '</p><p>' + soy.$$escapeHtml('If you think this message is wrong, please contact your') + ' <a href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">' + soy.$$escapeHtml('Jira administrators') + '</a>.</p>' + ((opt_data.returnToSearch) ? '<p><a id="return-to-search" class="push-state" href="' + soy.$$escapeHtml("") + '/issues/" title="' + soy.$$escapeHtml('Return to search') + '">' + soy.$$escapeHtml('Return to search') + '</a></p>' : '') + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.viewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.viewIssueError';
}


JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError = function(opt_data, opt_ignored) {
  return '<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">' + soy.$$filterNoAutoescape(opt_data.header) + '</div></header><div class="issue-body-content issue-error-content">' + soy.$$filterNoAutoescape(opt_data.body) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){return JIRA.Components.IssueViewer.Templates});AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer"));AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule"));AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils"));AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error"));AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue"));AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue"));AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel"));AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels"));AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata"));AJS.namespace("JIRA.Components.IssueViewer.Services.DarkFeatures",null,require("jira/components/issueviewer/services/darkfeatures"));AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader"));AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice"));AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric"));AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound"));AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel"));AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue"));AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(g){var r=g("jira/components/libs/underscore");var q=g("jira/components/issueviewer/services/darkfeatures");var p=g("jira/components/issueeditor/controllers/editissue");var j=g("jira/util/events");var o=g("jira/components/issueeditor/eventtypes");var h=g("jira/components/issueeditor/controllers/fields");var k=g("jira/components/issueeditor/services/fieldsloader");var f=g("jira/components/issueeditor/services/issuesaver");var c=g("jira/components/issueviewer");var m=g("jira/util/data/meta");var d=g("jira/components/issueeditor/views/modalfield");var n=g("jira/components/issueeditor/views/saveerror");var e=g("jira/components/issueeditor/services/saveinprogressmanager");var a=window.JIRA;var b=g("jira/components/issueeditor/services/unloadinterceptor");var i=window.AJS.contextPath();var l=function(){a.trace.apply(a,arguments)};return c.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(s){c.prototype.initialize.call(this,s);this._buildFieldsLoader();this._buildIssueSaver();this._buildEditIssueController();this._buildFieldsController();this._handleUnload();this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new k({contextPath:i});this.listenTo(this.fieldsLoader,"fieldsLoaded",function(s){this.viewIssueData.updateIssue(s.issueKey,s);s.issueId=Number(s.issueId);var t=s.fields&&s.fields.length;if(t){this.editIssueController.update(s)}else{this.editIssueController.reset()}this.trigger("fieldsLoaded");l("jira.issue.fields.loaded",{id:s.issueId})});this.listenTo(this.fieldsLoader,"fieldsError",function(s){this.fieldsController.showError(s.errorCollection,s.isTimeout);l("jira.issue.fields.loaded",{id:s.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new e();this.issueSaver=new f({saveInProgressManager:this.saveInProgressManager,model:this.model});this.listenTo(this.issueSaver,"error",function(v){var x=v.issueId;var u=v.attemptedSavedIds;var t=v.response;var w=v.duration;if(!this.model.isCurrentIssue(x)){this._showSaveError({issueId:x,issueKey:v.issueKey,response:t});return}this.eventBus.triggerSaveError(x,u,t);var s=t&&t.fields&&t.fields.length;if(!s&&t){this.editIssueController.reset();this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})}this.trigger("saveError",{issueId:x,duration:w,deferred:false});l("jira.issue.refreshed",{id:x})});this.listenTo(this.issueSaver,"saveStarted",function(s,t){this.eventBus.triggerSavingStarted(t)});this.listenTo(this.issueSaver,"save",function(A){var y=A.issueId;var u=A.issueKey;var x=A.savedFieldIds;var s=A.savedFieldTypes;var w=A.response;var z=A.shouldSkipSaveIssueSuccessHandler;var v=A.duration;if(this.model.isCurrentIssue(y)&&!z){this.eventBus.triggerSaveSuccess(y,u,x,w);this.viewIssueData.set(u,w);this.model.update(w,{fieldsSaved:x,fieldsInProgress:this.editIssueController.getEditsInProgress()});l("jira.psycho.issue.refreshed",{id:y});var t=w.fields&&w.fields.length;if(t){this.editIssueController.update({fields:w.fields,issueId:y,issueKey:u},{editable:true,editIssueController:this.editIssueController,issueModel:this.model,issueId:y,fieldsSaved:x,initialize:false,fieldsInProgress:this.editIssueController.getEditsInProgress()})}l("jira.issue.refreshed",{id:y})}this.trigger("saveSuccess",{issueId:y,issueKey:u,savedFieldIds:x,savedFieldTypes:s,duration:v})})},_buildEditIssueController:function(){this.editIssueController=new p({issueEventBus:this.eventBus});this.listenTo(this.editIssueController,"save",function(x,t,v,w,u,s){this.issueSaver.setSkipSaveIssueSuccessHandler(false);this.issueSaver.save(x,t,v,w,u,s)});this.listenAndRethrow(this.editIssueController,"editField");this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new h()},_onIssueLoaded:function(v,w,t){if(v.issue.isEditable){var u=!q.NO_PREFETCH.enabled();if(u&&!w.error&&!w.fromCache){this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:t.issueEntity})}}var s=!w.mergeIntoCurrent&&t.initialize!==false;if(!w.isUpdate||s){this.editIssueController.reset()}c.prototype._onIssueLoaded.call(this,v,w,t);if(v.fields){this.editIssueController.update({fields:v.fields,issueId:v.issue.id,issueKey:v.issue.key});l("jira.issue.fields.loaded",{id:v.issue.id})}},_handleUnload:function(){var s=r.bind(function(){var t;if(this.editIssueController.getDirtyEditsInProgress().length>0){t="You are still editing this page. Are you sure you want to leave?"}return t},this);this.unloadInterceptor=new b();this.unloadInterceptor.addAfterEvent(s);this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(s)})},_updateModel:function(u,s){var t=u.fields&&u.fields.length;if(t){this.editIssueController.update(u.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:s.changed})}s=r.extend({},s,{fieldsInProgress:this.editIssueController.getEditsInProgress()});c.prototype._updateModel.call(this,u,s)},_loadIssueFromDom:function(s){if(m.get("server-view-issue-is-editable")){this.editIssueController.setIssueId(s.id);this.editIssueController.setIssueKey(s.key);this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:s});m.set("server-view-issue-is-editable",null)}c.prototype._loadIssueFromDom.call(this,s)},editField:function(u){if(!u.isEditable()){return}var s=this.model.getEntity();var t=r.bind(function(){if(u.matchesFieldSelector()){u.edit()}else{new d({issueEventBus:this.eventBus,model:u,issue:s}).show()}},this);if(!u.getSaving()){t()}else{j.one(o.ISSUE_REFRESHED,function(){t()})}},abortPending:function(){this.fieldsLoader.cancel();c.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(true);c.prototype.beforeHide.call(this)},setContainer:function(s){this.editIssueController.setIssueViewContext(s);c.prototype.setContainer.call(this,s)},dismiss:function(){this.editIssueController.reset();c.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(t){var u;var s;u=new n(t).render();s=r.partial(this.stopListening,u);this.listenTo(u,{close:s,issueLinkClick:function(v){var w={isPrevented:false,preventDefault:function(){this.isPrevented=true},isDefaultPrevented:function(){return this.isPrevented===true},issueData:v};this.trigger("linkInErrorMessage",w);if(!w.isDefaultPrevented()){this.loadIssue(v)}}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/issueeditor");var a=c("jira/components/issueviewer/appmodule");return a.extend({name:"issueEditor",generateMasterRequest:true,create:function(e){e=b.defaults({},e,{showReturnToSearchOnError:function(){return false}});return new d({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(e){var f=a.prototype.commands.call(this,e);return b.extend(f,{editField:true})},requests:function(e){var f=a.prototype.requests.call(this,e);return b.extend(f,{fields:function(){return e.getFields()},hasSavesInProgress:true})},events:function(f){var e=a.prototype.events.call(this,f);return e.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/issueviewer/appmodule");return a.extend({name:"issueEditor",requests:function(d){var e=a.prototype.requests.call(this,d);return b.extend(e,{fields:function(){return[]},hasSavesInProgress:function(){return false}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/Fields.soy' */
// This file was automatically generated from Fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.IssueEditor.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.IssueEditor == 'undefined') { JIRA.Templates.IssueEditor = {}; }
if (typeof JIRA.Templates.IssueEditor.Fields == 'undefined') { JIRA.Templates.IssueEditor.Fields = {}; }


JIRA.Templates.IssueEditor.Fields.saveErrorMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLink__soy3 = '<a class="issue" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format('Saving of \x3cstrong\x3e{0}\x3c/strong\x3e failed!',issueLink__soy3));
  if (opt_data.errors.length > 0) {
    output += '<ul>';
    var messageList16 = opt_data.errors;
    var messageListLen16 = messageList16.length;
    for (var messageIndex16 = 0; messageIndex16 < messageListLen16; messageIndex16++) {
      var messageData16 = messageList16[messageIndex16];
      output += '<li>' + soy.$$escapeHtml(messageData16) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveErrorMessage.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveErrorMessage';
}


JIRA.Templates.IssueEditor.Fields.field = function(opt_data, opt_ignored) {
  return '<form id="' + soy.$$escapeHtml(opt_data.issue.id) + '-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields ' + ((opt_data.showButtonBar) ? 'show-button-bar' : '') + '">' + soy.$$filterNoAutoescape(opt_data.issue.editHtml) + '</div><span class="overlay-icon throbber" />' + ((opt_data.showButtonBar) ? JIRA.Templates.IssueEditor.Fields.saveButtons(opt_data) : JIRA.Templates.IssueEditor.Fields.saveOptions(opt_data)) + '</form>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.field.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.field';
}


JIRA.Templates.IssueEditor.Fields.saveOptions = function(opt_data, opt_ignored) {
  return '<div class="save-options"><button type="submit" class="aui-button submit" accessKey="' + soy.$$escapeHtml('s') + '" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to submit this form','s',opt_data.accessKey)) + '"><span class="aui-icon aui-icon-small aui-iconfont-success">' + soy.$$escapeHtml('Save') + '</span></button><button type="cancel" class="aui-button cancel" accessKey="' + soy.$$escapeHtml('`') + '" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to cancel','`',opt_data.accessKey)) + '"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Cancel') + '</span></button></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveOptions.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveOptions';
}


JIRA.Templates.IssueEditor.Fields.saveButtons = function(opt_data, opt_ignored) {
  return '<div class="save-options show-button-bar"><button type="submit" class="aui-button aui-button-primary submit" accessKey="' + soy.$$escapeHtml('s') + '" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to submit this form','s',opt_data.accessKey)) + '">' + soy.$$escapeHtml('Save') + '</button><button type="cancel" class="aui-button aui-button-link cancel" accessKey="' + soy.$$escapeHtml('`') + '" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to cancel','`',opt_data.accessKey)) + '">' + soy.$$escapeHtml('Cancel') + '</button></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveButtons.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveButtons';
}


JIRA.Templates.IssueEditor.Fields.modalField = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content"><h2 class="dialog-title">' + soy.$$escapeHtml(AJS.format('Edit {0} for {1}',opt_data.field.label,opt_data.issue.key)) + '</h2><form action="" class="aui" method="post"><div class="form-body">' + soy.$$filterNoAutoescape(opt_data.field.editHtml) + '</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="' + soy.$$escapeHtml('Submit') + '"/><a class="cancel" href="#">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.modalField.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.modalField';
}


JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors = function(opt_data, opt_ignored) {
  var output = '<div class="error">';
  if (opt_data.messages.length == 1) {
    output += soy.$$escapeHtml(opt_data.messages[0]);
  } else if (opt_data.messages.length > 0) {
    output += '<ul>';
    var messageList85 = opt_data.messages;
    var messageListLen85 = messageList85.length;
    for (var messageIndex85 = 0; messageIndex85 < messageListLen85; messageIndex85++) {
      var messageData85 = messageList85[messageIndex85];
      output += '<li>' + soy.$$escapeHtml(messageData85) + '</li>';
    }
    output += '</ul>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors';
}


JIRA.Templates.IssueEditor.Fields.errorsLoading = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.isTimeout) ? soy.$$escapeHtml('The Jira server could not be contacted. This may be a temporary glitch or the server may be down.') : soy.$$escapeHtml('There were errors loading the issue.'));
  if (opt_data.errorMessages) {
    output += '<ul>';
    var msgList101 = opt_data.errorMessages;
    var msgListLen101 = msgList101.length;
    for (var msgIndex101 = 0; msgIndex101 < msgListLen101; msgIndex101++) {
      var msgData101 = msgList101[msgIndex101];
      output += '<li>' + soy.$$escapeHtml(msgData101) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.errorsLoading.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.errorsLoading';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){return JIRA.Templates.IssueEditor.Fields});AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(a){var f=a("jira/components/libs/underscore");var e=a("jira/components/libs/brace");var g=a("jira/util/events");var d=a("jira/components/issueviewer/legacy/issuefieldutil");var i=a("jquery");var c=a("jira/skate");var j=a("jira/components/issueeditor/templates");var b=a("jira/components/issueeditor/eventtypes");var h=a("jira/components/issueviewer/services/darkfeatures");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var k=this;this.collection.on("reset",function(){k.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var l=this.previous("viewHtml");if(l){i.cleanData(l)}});this.onModelDestroyed(function(){var l=this.getViewHtml();if(l){i.cleanData(l)}})},blurEdit:function(){if(this.getEditing()){if(this.isDirty()||this.hasValidationError()){this.save()}else{this.cancelEdit()}}},setValidationError:function(m,l,k){this.setSaving(false);this.setError(l);this.edit({ignoreBlur:true});this.triggerSaveError();this.triggerValidationError(m,k)},handleSaveError:function(){this.setSaving(false);this.triggerSaveError()},cancelEdit:function(l){if(!this.cancelLocked){var k=new i.Event(b.BEFORE_INLINE_EDIT_CANCEL);g.trigger(k,[this.getId(),this.getFieldType(),l]);if(!k.isDefaultPrevented()){this.cancelLocked=true;if(this.getEditing()||this.getSaving()){this.setEditing(false);this.setSaving(false);this.unset("params");this.unset("initParams");this.triggerEditingCancelled();this.unset("viewHtml")}delete this.cancelLocked}}},edit:function(k){if(!this.getEditing()){this.setEditing(true);this.triggerEditingStarted(this,k)}else{if(!k||!k.ignoreBlur){this.triggerFocusRequested(this,k)}}},getCurrentParams:function(){this.triggerUpdateRequired();var m={};if(this.getParams()){m=this.getParams()}else{if(this.getInitParams()){m=this.getInitParams()}else{var l=i("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(l));m=this.getInitParams()}}var k={};f.each(m,function(o,n){k[n]=o});return k},isEditable:function(){if(this.getEditHtml()){return i(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length!==0}return false},hasValidationError:function(){return !!this.getError()},switchElToEdit:function(k){if(!this.getViewHtml()){this.setViewHtml(k.contents())}k.contents().detach();k.html(j.field({issue:this.toJSON(),accessKey:d.getAccessKeyModifier(),showButtonBar:h.RTE_ENABLED.enabled()&&d.isWikifield(this.getEditHtml())}));k.each(function(){c.init(this)});if(!this.getInitParams()){this.setInitParams(this._serializeObject(k))}this.setEditing(true)},update:function(k){if(this.getEditing()){this.setParams(this._serializeObject(k))}},handleSaveSuccess:function(){this.setSaving(false);this.setEditing(false);this.unset("viewHtml");this.unset("initParams");this.setError(null);this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(true);this.triggerSavingStarted()},save:function(){if(!this.getSaving()){this.triggerUpdateRequired();this.triggerSave(this)}},isDirty:function(){this.triggerUpdateRequired();return this._isDirty(this.getCurrentParams())},_isDirty:function(k){return JSON.stringify(k)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return d.matchesFieldSelector(this.id)},_serializeObject:function(l){var m={};var k=i(l).find(":input").serializeArray();i.each(k,function(){if(m[this.name]){if(!m[this.name].push){m[this.name]=[m[this.name]]}m[this.name].push(this.value||"")}else{m[this.name]=this.value||""}});return m}},{IS_EDITABLE:function(k){return k.isEditable()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var d=b("jira/components/issueeditor/entities/field");return c.Collection.extend({model:d,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(f,e){e=e||{};if(e.ignoreBlur){return}this.each(function(g){if(f!==g&&g.getEditing()){g.blurEdit()}})},update:function(i,g){var e=this;if(g&&g.changed){var f=g.changed;var j=f.updated?f.updated.fields:[];var h=f.added?f.added.fields:[];a.each(i,function(l){if(a.contains(j,l.id)){var k=e.get(l.id);if(k){if(k.hasValidationError()){delete l.editHtml}k.set(l,{silent:true});e.trigger("updated",k)}else{e.add(l)}}else{if(a.contains(h,l.id)){e.add(l)}}})}else{a.each(i,function(l){var k=e.get(l.id);if(k){if(k.hasValidationError()){delete l.editHtml}k.set(l,{silent:true});e.trigger("updated",k)}else{e.add(l)}})}},cancelEdit:function(){this.each(function(e){e.cancelEdit()})},isDirty:function(){return this.any(function(e){return e.isDirty()})},getDirtyFields:function(){return this.filter(function(e){return e.isDirty()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(c){var b=c("jira/components/issueeditor/cancelreasons");var h=c("jira/util/events");var e=c("jira/components/issueviewer/legacy/issuefieldutil");var j=c("jquery");var a=c("jira/components/libs/marionette-1.4.1/itemview");var g=c("jira/util/events/reasons");var k=c("jira/components/issueeditor/templates");var d=c("jira/components/issueeditor/eventtypes");var f=c("jira/components/issueeditor/analytics/viewissue");var i=c("jira/components/issueviewer/services/darkfeatures");return a.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(m){this.model.on("validationError",this.handleValidationError,this);this.model.on("editingStarted",this.switchToEdit,this);this.model.on("focusRequested",this.focus,this);this.model.on("editingCancelled",this.switchToRead,this);this.model.on("saveError",this.handleSaveError,this);this.model.on("updateRequired",this.updateModel,this);this.model.on("savingStarted",this.handleSavingStarted,this);this.model.on("modelDestroyed",this.destroy,this);this.decorate();this.issueEventBus=m.issueEventBus;this.issueEventBus.on("panelRendered",this.handlePanelRendered,this);this.model.setFieldType(this.$el.data("fieldtypecompletekey"));this._editDelay=0;var l=this;h.bind(d.INLINE_EDIT_BLURRED,function(o,n){if(n===l.model.getId()){l._onPossibleBlur()}});h.bind(d.INLINE_EDIT_REQUESTED,function(o,n){if(n!==l.model.getId()&&l._editDelay!==0){clearTimeout(l._editDelay);l._editDelay=0}})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){if(this.model.isEditable()&&!this.model.getEditing()){this.$el.addClass("editable-field inactive");this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />');this._addToolTip()}},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit");j("a:not([title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){j("[accessKey='"+"s"+"']").attr("accessKey","_s");j("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){j("[accessKey=_s]").attr("accessKey","s");j("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(l){var m=this.$el.find(".field-tools");h.trigger(d.NEW_CONTENT_ADDED,[this.$el,g.inlineEditStarted]);h.trigger(d.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]);this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-j("#stalker").height()-100);if(l){this.$el.find(":input:visible:first").focus()}if(!this.$el.find(".error").length){this.$el.find("select.aui-ss-select").each(function(){var n=j(this);if(n.data("static-suggestions")){n.trigger("showSuggestions")}})}this.$el.find(".save-options").attr("tabindex",1).prepend(m)},handleValidationError:function(m,l){this.$el.html(k.field({issue:{id:this.model.id,editHtml:m},accessKey:e.getAccessKeyModifier(),showButtonBar:i.RTE_ENABLED.enabled()&&e.isWikifield(m)}));this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id);this._handleEditingStarted(l)},handlePanelRendered:function(l,m){var n=j(e.getFieldSelector(this.model.id),m);if(n.length===1){this.$el=n;this.el=this.$el[0];this.decorate();this.delegateEvents()}},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable");this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable");this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var l=40;this.$el.scrollIntoView({direction:"y",marginBottom:l,marginTop:j("#stalker").outerHeight(true)+l});this.$el.trigger("reveal")},focus:function(){this.reveal();this.$el.find(":input").removeAttr("disabled");if(j(".aui-blanket[aria-hidden='false']").length===0){var l=this.$el.find(":input:visible:first");l.focus();if(!this.$el.hasClass("field-ignore-highlight")){l.select()}}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()});this._stealAccessKeys();this._removeToolTip();this.$el.removeClass("inactive saving").addClass("active");this._originalHeight=this.$el.height();this.model.switchElToEdit(this.$el);this._handleEditingStarted();this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()});this._addToolTip();this.$el.addClass("inactive").removeClass("active");this.$el.html(this.model.getViewHtml());this.$el.closest("form").unbind("submit",this.onSubmit);this._returnAccessKeys()},_isNonCancelableFieldBeingEdited:function(){return j("textarea",this.$el).not("[role]").length},onKeyCancel:function(l){if(l.keyCode===27&&!this._isNonCancelableFieldBeingEdited()){this.model.cancelEdit(b.escPressed);l.preventDefault()}},onClickCancel:function(l){this.model.cancelEdit();l.preventDefault()},onSubmit:function(m){var l=new j.Event("before-submit");this.$el.find("form").trigger(l);if(!l.isDefaultPrevented()){this.$el.find(":focus").blur();this.issueEventBus.triggerFieldSubmitted();this.model.save();this._returnAccessKeys()}m.preventDefault()},onEdit:function(q){var p=j(q.target).is(".overlay-icon.aui-iconfont-edit");var n=j(q.target).closest("a, .uneditable").length===0&&this.$el.hasClass("inactive");var o=this._getCurrentlySelectedText()===""&&!this._previouslySelectedText;var m=n&&(p||o);if(this._editDelay!==0){f.triggerEditableFieldDoubleClick();clearTimeout(this._editDelay);this._editDelay=0}else{if(m){h.trigger(d.INLINE_EDIT_REQUESTED,[this.model.getId()]);var l=this;if(p){f.triggerEditableFieldClickPencilIcon();j(document).one("click",function(r){if(!r.isDefaultPrevented()){l.model.edit()}})}else{this._editDelay=setTimeout(function(){if(!q.isDefaultPrevented()&&l.$el.hasClass("inactive")&&l._getCurrentlySelectedText()===""){f.triggerEditableFieldSingleClick();l.model.edit()}l._editDelay=0},250)}}}},_onPossibleBlur:function(){if(this.model.getSaving()){return}if(j(".aui-blanket[aria-hidden='false']").length>0){return}this.model.blurEdit()},_preventBlurByEsc:function(l){l.preventDefault()},_getCurrentlySelectedText:function(){if(j(document.activeElement).is(":input")){return""}if(document.selection&&document.selection.createRange){return document.selection.createRange().text||""}if(window.getSelection){return window.getSelection().toString()}return""},_enterToSubmitSelect:function(l){if(!l.isDefaultPrevented()){if(l.which===13){l.preventDefault();j(l.target).closest("form").submit()}}},_enterToSubmitMultiSelect:function(l){if(!l.isDefaultPrevented()){if(l.which===13){j(l.target).blur()}}},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/util/events");var e=c("jira/dialog/form-dialog");var f=c("jira/components/libs/marionette-1.4.1/itemview");var d=c("jira/components/issueeditor/templates");return f.extend({errorsTemplate:d.modalFieldGeneralErrors,template:d.modalField,initialize:function(g){b.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel");a.bind("Dialog.hide",this._onHide);this.issueEventBus=g.issueEventBus;this.issueEventBus.on("saveError",this._showGeneralError);this.model.onSaveSuccess(this._remove);this.model.onUpdateRequired(this._updateModel);this.model.onValidationError(this._showValidationError)},_enable:function(){var h=this._getDialog();h.hideFooterLoadingIndicator();var g=h.$popup;g.find(":input").removeAttr("disabled").trigger("enable");g.find(":input:first").focus().select();g.find(":submit").removeAttr("disabled")},_getDialog:function(){if(!this._dialog){this._dialog=new e({id:"modal-field-view",submitHandler:this._onSubmit,content:b.bind(function(g){g(this.template({field:this.model.toJSON(),issue:this.options.issue}))},this)});this._dialog.get$popup().data("field-id",this.model.getId())}return this._dialog},_onHide:function(g,h){if(h===this._getDialog().get$popup()){this._remove()}},_onSubmit:function(i,h){i.preventDefault();this.model.save();h();var g=this._getDialog();g.showFooterLoadingIndicator();g.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var g=this._getDialog();if(g.get$popup().is(":visible")){g.hide()}g.destroy();this.model.cancelEdit();a.unbind("Dialog.hide",this._onHide);this.issueEventBus.off("saveError",this._showGeneralError);this.model.off("saveSuccess",this._remove);this.model.off("updateRequired",this._updateModel);this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit();this._getDialog().show()},_showGeneralError:function(l,h,g){this._enable();var j=this._getDialog().$popup;var m=g&&g.errorCollection;if(m){var i=!b.isEmpty(m.errors);var k=!b.isEmpty(m.errorMessages);if(!i&&k){j.find(".form-body").append(this.errorsTemplate({messages:m.errorMessages}))}}},_showValidationError:function(g){this._enable();this._getDialog().$popup.find(".form-body").html(g)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(a){var d=a("jira/components/libs/marionette-1.4.1/itemview");var c=a("jira/message");var b=a("jira/components/issueeditor/templates");return d.extend({template:b.errorsLoading,initialize:function(f,e){this.errorMessages=f;this.isTimeout=e},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(c.showErrorMsg(this.$el.html(),{closeable:true,timeout:0}))}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(b){var a=b("jira/components/libs/underscore");var e=b("jira/components/libs/marionette-1.4.1/itemview");var d=b("jira/message");var c=b("jira/components/issueeditor/templates");return e.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:c.saveErrorMessage,getErrorMessages:function(){var f;var g=[];f=this.options.response.errorCollection;if(f){g=f.errorMessages.concat(a.values(f.errors))}return g},onIssueLinkClick:function(g){var f;f={id:this.options.issueId,key:this.options.issueKey};g.preventDefault();this.trigger("issueLinkClick",f);this.close()},onRender:function(){this.setElement(d.showErrorMsg(this.$el.html(),{closeable:true,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(b){var g=b("jira/components/libs/underscore");var f=b("jira/components/libs/brace");var c=b("jira/components/issueeditor/entities/fields");var e=b("jira/components/issueeditor/views/field");var d=b("jira/components/issueviewer/legacy/issuefieldutil");var i=b("jquery");var a=b("jira/message");var h=b("jira/components/issueeditor/templates");return f.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){g.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save");this.set({fields:new c()},{silent:true});this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save);this.getIssueEventBus().onSavingStarted(this._handleSavingStarted);this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess);this.getIssueEventBus().onSaveError(this._handleSaveError);this.getIssueEventBus().onSave(this.save);this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(k){var j=this.getFields().get(k);if(j){j.blurEdit()}},_handleSaveError:function(m,l,k){var j=this;if(k){this.applyErrors(k)}else{g.each(l,function(o){var n=j.getFields().get(o);if(n){n.handleSaveError()}})}},_handleSavingStarted:function(j){this.getFields().each(function(k){if(g.include(j,k.id)){k.handleSaveStarted()}})},handleFieldUpdate:function(k){var j=i(d.getFieldSelector(k.id));if(!j.hasClass("editable-field")){this.createFieldView(k)}},applyErrors:function(m,l){var j=m.errorCollection;if(j&&j.errors){this.getFields().each(function(n){if(j.errors[n.id]){var o=g.find(m.fields,function(p){return p.id===n.id});if(o){n.setValidationError(o.editHtml,j.errors[n.id],l);l=false}}})}if(j.errorMessages&&j.errorMessages.length){var k=h.saveErrorMessage({errors:j.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(k,{closeable:true})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(j){j.cancelEdit()})},_handleSaveSuccess:function(l,j,m){var k=this.getFields().filter(function(n){return g.indexOf(m,n.id)>=0});g.each(k,function(n){n.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return g.pluck(this.getFields().filter(function(j){return j.getEditing()&&j.isDirty()}),"id")},getEditsInProgress:function(){return g.pluck(this.getFields().filter(function(j){return j.getEditing()}),"id")},save:function(k,j){var o={};var n=[];var m=[];var l=[k];if(!k){l=this.getFields().filter(function(p){return !p.getSaving()&&p.getEditing()&&p.isDirty()})}else{if(!k.getEditing()||k.getSaving()){return}}g.each(l,function(p){n.push(p.getId());m.push(p.getFieldType()||"");g.extend(o,p.getCurrentParams())});if(n.length>0){this.triggerSave(this.getIssueId(),this.getIssueKey(),n,o,j,m)}},cancelUneditedFields:function(){this.getFields().each(function(j){if(j.getEditing()&&!j.isDirty()&&!j.hasValidationError()){j.cancelEdit()}})},update:function(k,j){if(k.fields){if(j&&j.fieldsInProgress){g.each(k.fields,function(l){if(g.contains(j.fieldsInProgress,l.id)){l.editing=true}})}this.getFields().update(k.fields,j)}if(k.issueId){this.setIssueId(k.issueId)}if(k.issueKey){this.setIssueKey(k.issueKey)}},createFieldView:function(k){var j=i(d.getFieldSelector(k.id),this.getIssueViewContext());if(j.length===1){var m=new e({model:k,el:j,issueEventBus:this.getIssueEventBus()});var l=function(n){var o={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:k.getId(),fieldType:k.attributes.fieldType};n=g.extend(o,n);return n}.bind(this);m.on("editField",g.bind(function(n){this.trigger("editField",l(n))},this));m.on("editFieldCancel",g.bind(function(n){this.trigger("editFieldCancel",l(n))},this))}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(c){var a=c("jira/components/issueeditor/views/loadingerror");var b=c("jira/components/libs/marionette-1.4.1/controller");return b.extend({showError:function(e,d){if(e||d){this.close();this.triggerMethod("before:render");this.view=new a(e,d);this.view.render();this.listenTo(this.view,"close",this.close);this.triggerMethod("render")}},close:function(){if(this.view){this.view.close();this.stopListening(this.view);delete this.view}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/issueviewer/legacy/issuefieldutil");var d=c("jquery");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(f){this.recurringPromise=new d.RecurringPromise().sub();this.recurringPromise.done(b.bind(function(g){this.trigger("fieldsLoaded",g)},this)).fail(b.bind(function(g){this.trigger("fieldsError",g)},this));this.contextPath=f.contextPath},load:function(g){var f=this._buildUpdateTask(g);this.recurringPromise.add(f)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(i,f){var h=d.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":true},data:{issueId:i}});var g=h.pipe(function(j){var k=e.transformFieldHtml(j);return{issueId:i,issueKey:f,fields:k.fields}},function(n){var k={};var l;switch(n.status){case 400:l=false;try{var j=JSON.parse(n.responseText)||{};k=j.errorCollection}catch(m){}break;case 401:l=false;k=null;break;default:l=true;k={};break}return{issueId:i,fields:null,errorCollection:k,isTimeout:"timeout"===n.statusText,fatalError:l}});g.abort=function(){h.abort.apply(h,arguments)};return g},_buildUpdateTask:function(h){var i=h.viewIssueData;var f=h.issueEntity;var g=new d.Deferred();i.setPending(f.id,this._getFieldsData(f.id,f.key),function(j){g.resolve(j)},function(j){if(j.fatalError){g.reject(j)}else{g.resolve(j)}});return g.promise()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/issueviewer/legacy/issuefieldutil");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager;this.model=e.model;this._saveStarted=[];this.saveInProgressManager.onSavingStarted(b.bind(function(f,g){this._saveStarted.push((new Date()).getTime());this.trigger("saveStarted",f,g)},this));this.saveInProgressManager.onSaveSuccess(b.bind(function(i,f,j,g,h){if(g&&g.fields){d.transformFieldHtml(g)}this.trigger("save",{issueId:i,issueKey:f,savedFieldIds:j,savedFieldTypes:h,response:g,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date()).getTime()-this._saveStarted.shift()})},this));this.saveInProgressManager.onSaveError(b.bind(function(i,f,h,g){if(g&&g.fields){d.transformFieldHtml(g)}this.trigger("error",{issueId:i,issueKey:f,attemptedSavedIds:h,response:g,duration:(new Date()).getTime()-this._saveStarted.shift()})},this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(j,e,h,i,f,g){this.saveInProgressManager.saveIssue(j,e,h,i,f,g)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){var i=e("jira/components/libs/underscore");var h=e("jira/components/libs/brace");var d=window.AJS.contextPath();var k=e("jira/util/events");var g=e("jira/components/issueviewer/legacy/issuefieldutil");var f=e("jira/dialog/form-dialog");var l=e("jquery");var b=e("jira/message");var a=e("jira/ajs/ajax/smart-ajax");var j=e("jira/components/issueeditor/eventtypes");var c=e("jira/components/utils/ajshelper");return h.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(t,n,p,o,u,r){this.triggerBeforeSaving();var v=this;var m;var q;q=i.extend(o,{issueId:t,atl_token:atl_token(),singleFieldEdit:true,fieldsToForcePresent:p});var s=i.extend({type:"POST",url:d+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":true},error:function(w){v._handleSaveError(t,n,p,w)},success:function(A,y,z,w){var x=w.data;if(typeof x==="string"){v._handleHtmlResponse(t,n,p,x,r)}else{g.transformFieldHtml(x);v.triggerSaveSuccess(t,n,p,x,r)}},complete:function(){v.removeSaveInProgress(m);k.trigger(j.INLINE_EDIT_SAVE_COMPLETE)},data:q},u);m=a.makeRequest(s);this.addSaveInProgress(m);this.triggerSavingStarted(t,p,o)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(m){this.setSavesInProgress(i.without(this.getSavesInProgress(),m))},addSaveInProgress:function(m){var n=this.getSavesInProgress();n.push(m);this.setSavesInProgress(n)},_handleHtmlResponse:function(t,o,p,m,r){var u=this;var n=l(c.extractBodyFromResponse(m));var q=n.find("#atl_token").val();if(q){l("#atlassian-token").attr("content",q)}var s=new f({offsetTarget:"body",content:n});this.triggerSaveError(t,o,p);s._handleServerSuccess=function(v){s.hide();var w=u._parseResponse(v);if(w){g.transformFieldHtml(w);u.triggerSaveSuccess(t,o,p,w,r)}};s._handleServerError=function(w){s.hide();var v=u._parseResponse(w.responseText);if(v){g.transformFieldHtml(v);u.triggerSaveError(t,o,p,v)}};s.show()},_handleSaveError:function(q,m,n,p){var o=this._parseResponse(p.responseText);if(o){g.transformFieldHtml(o);this.triggerSaveError(q,m,n,o)}},_parseResponse:function(m){try{return JSON.parse(m)}catch(n){this._showFatalErrorMessage();return null}},_showFatalErrorMessage:function(){var m="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";b.showErrorMsg(m,{closeable:true})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(){this._afterEventHandlers=[];this.originalBeforeUnload=window.onbeforeunload;window.onbeforeunload=b.bind(this.onBeforeUnload,this)},addAfterEvent:function(d){this._afterEventHandlers.push(d)},removeAfterEvent:function(d){this._afterEventHandlers=b.without(this._afterEventHandlers,d)},onBeforeUnload:function(){var d;var e=arguments;if(b.isFunction(this.originalBeforeUnload)){d=this.originalBeforeUnload.apply(window,e)}if(!d){d=b.reduce(this._afterEventHandlers,function(f,g){if(f){return f}return g.apply(window,e)},d)}return d}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(d){var b=d("jira/util/events");var c=d("jira/components/issueeditor/eventtypes");var a={};a.BLUR_FOCUS_TIMEOUT=50;a.BlurTriggers={Default:function(h,l){l=l.nextAll(".save-options").andSelf();var k=":input, a[href], [tabindex]";var j;var i=e(l);var g={focus:function(){if(!i){i=true;b.trigger(c.INLINE_EDIT_FOCUSED,[h])}},blur:function(){if(j){clearTimeout(j)}j=setTimeout(f,a.BLUR_FOCUS_TIMEOUT)}};l.attr("tabindex",1).bind(g).delegate(k,g);function f(){if(!e(l)){i=false;b.trigger(c.INLINE_EDIT_BLURRED,[h])}}}};function e(g){var f=document.activeElement;return g.find(f).length>0||g.filter(f).length>0}a.BlurTriggerMapping={system:{summary:a.BlurTriggers.Default,priority:a.BlurTriggers.Default,issuetype:a.BlurTriggers.Default,components:a.BlurTriggers.Default,versions:a.BlurTriggers.Default,fixVersions:a.BlurTriggers.Default,assignee:a.BlurTriggers.Default,reporter:a.BlurTriggers.Default,environment:a.BlurTriggers.Default,description:a.BlurTriggers.Default,labels:a.BlurTriggers.Default,duedate:a.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":a.BlurTriggers.Default}};b.bind(c.INLINE_EDIT_STARTED,function(j,g,f,k){var i;if(f){i=a.BlurTriggerMapping.custom[f];if(!i){var h=f.replace(/.+:(.+)/,"$1");i=a.BlurTriggerMapping.custom[h]}}else{i=a.BlurTriggerMapping.system[g]}if(i){i(g,k)}});return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(a){var b=a("jira/components/issueviewer/eventtypes");b.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete";b.INLINE_EDIT_STARTED="inlineEditStarted";b.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled";b.INLINE_EDIT_BLURRED="inlineEditBlurred";b.INLINE_EDIT_FOCUSED="inlineEditFocused";b.INLINE_EDIT_REQUESTED="inlineEditRequested";b.LOCK_PANEL_REFRESHING="lockPanelRefreshing";b.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing";b.REFRESH_ISSUE_PAGE="refreshIssuePage";return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){return{escPressed:"escPressed"}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(b){var a=b("jira/components/utils/ajshelper");return{triggerEditableFieldDoubleClick:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.double-click"})},triggerEditableFieldSingleClick:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.single-click"})},triggerEditableFieldClickPencilIcon:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.click.pencil-icon"})}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor"));AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule"));AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule"));AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue"));AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields"));AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields"));AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field"));AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader"));AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver"));AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager"));AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor"));AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field"));AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror"));AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield"));AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror"));AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils"));AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers);AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping);AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inlineeditparams', location = 'util/InlineEditParams.js' */
define("jira/components/util/inlineeditparams",["require"],function(b){var c=b("wrm/data");var a=null;function d(){var e=c.claim("com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled");a=e===undefined?true:Boolean(e)}return{isEnabled:function(){if(a===null){d()}return a}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issuecomponentresolver', location = 'issuecomponentresolver/IssueComponentResolver.js' */
define("jira/components/issuecomponentresolver",["require"],function(c){var b=c("jira/components/util/inlineeditparams");var a=c("jira/components/issueviewer");var d=c("jira/components/issueeditor");return{resolve:function(){return b.isEnabled()?d:a}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(l){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,c){var i={_:f,Backbone:c};l.call(i);return i.Marionette.noConflict()}})})(function(){var l=this,f=this.Backbone,c=this._,i=function(a,b){var e=Error(a);e.name=b||"Error";throw e;},r=f.ChildViewContainer,m=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();c.each(a,this.add,this)};c.extend(m.prototype,{add:function(a,b){var e=a.cid;this._views[e]=a;a.model&&(this._indexByModel[a.model.cid]=
e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return c.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];c.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,c.tail(arguments))},apply:function(a,b){c.each(this._views,function(e){c.isFunction(e[a])&&e[a].apply(e,b||[])})},_updateLength:function(){this.length=c.size(this._views)}});c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){m.prototype[a]=function(){var b=[c.values(this._views)].concat(c.toArray(arguments));
return c[a].apply(c,b)}});f.ChildViewContainer=m;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=r;return this};var s=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=s;return this};var g=function(a){this.options=a;this._wreqrHandlers={};c.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;c.extend(g.prototype,f.Events,{setHandlers:function(a){c.each(a,function(a,e){var d=null;c.isObject(a)&&
!c.isFunction(a)&&(d=a.context,a=a.callback);this.setHandler(e,a,d)},this)},setHandler:function(a,b,e){this._wreqrHandlers[a]={callback:b,context:e};this.trigger("handler:add",a,b,e)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};c.isFunction(this.initialize)&&this.initialize(a)};c.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,e){var d=this.storage.getCommands(a);c.each(d.instances,function(a){b.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=c.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;c.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};c.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,e){if(b){var e=e||this,d="vent"===a?"on":"setHandler";c.each(b,function(b,f){this[a][d](f,c.bind(b,e))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};c.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){c.each(["vent","commands","reqres"],function(a){c.each(t[a],function(b){var e=this;this[a][b]=function(c){var d=e._getChannel(c)[a],f=Array.prototype.slice.call(arguments,1);return d[b].apply(d,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=l.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){l.Marionette=w;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var j=Array.prototype.slice;
d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};c.each(a,function(a,d){c.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return c.each(c.keys(a),function(e){var c=/@ui\.[a-zA-Z_$0-9]*/g;e.match(c)&&(a[e.replace(c,function(a){return b[a.slice(4)]})]=a[e],delete a[e])}),
a};d.actAsCollection=function(a,b){c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){a[e]=function(){var a=[c.values(c.result(this,b))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var x=function(a,b,e){return e.toUpperCase()},y=/(^|:)(\w)/gi;d.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],e;c.isFunction(b)&&(e=b.apply(this,c.tail(arguments)));c.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return e};var z=document.documentElement,o=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};d.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;o(a)});a.listenTo(a,"render",function(){a._isRendered=!0;o(a)})};var A=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){var d=a[c];d||i('Method "'+c+'" was configured as an event handler, but does not exist.');a.listenTo(b,
e,d)})},B=function(a,b,e,c){a.listenTo(b,e,c)},C=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){a.stopListening(b,e,a[c])})},D=function(a,b,c,d){a.stopListening(b,c,d)},p=function(a,b,e,d,f){b&&e&&(c.isFunction(e)&&(e=e.call(a)),c.each(e,function(e,g){c.isFunction(e)?d(a,b,g,e):f(a,b,g,e)}))};d.bindEntityEvents=function(a,b,c){p(a,b,c,B,A)};d.unbindEntityEvents=function(a,b,c){p(a,b,c,D,C)};d.proxyBindEntityEvents=function(a,b){return d.bindEntityEvents(this,a,b)};d.proxyUnbindEntityEvents=
function(a,b){return d.unbindEntityEvents(this,a,b)};d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};c.extend(d.Callbacks.prototype,{add:function(a,b){var e=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});e.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});d.Controller=function(a){this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;c.extend(d.Controller.prototype,f.Events,{destroy:function(){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=c.extend({},c.result(this,
"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;c.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||i('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=j.apply(arguments);this.initialize.apply(this,b)}};c.extend(d.Region,{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);i("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var e=a.regionClass||b,d=c.omit(a,"selector","regionClass");a.selector&&!d.el&&(d.el=a.selector);e=new e(d);a.parentEl&&(e.getEl=function(b){if(c.isObject(b))return f.$(b);var e=a.parentEl;c.isFunction(e)&&(e=e());return e.find(b)});return e},_buildRegionFromRegionClass:function(a){return new a}});c.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var e=b||{},d=a!==this.currentView,
f=!!e.forceShow,g=!!this.currentView;!e.preventDestroy&&d&&this.empty();if(d||f)a.once("destroy",c.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&i('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;g=d.Controller.extend({constructor:function(a){this._regions={};d.Controller.call(this,a)},addRegions:function(a,b){c.isFunction(a)&&(a=a.apply(this,arguments));
var e={};c.each(a,function(a,d){c.isString(a)&&(a={selector:a});a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(d,a);e[d]=f},this);return e},addRegion:function(a,b){var e;e=c.isObject(b);var n=c.isString(b),f=!!b.selector;e=n||e&&f?d.Region.buildRegion(b,d.Region):c.isFunction(b)?d.Region.buildRegion(b,d.Region):b;this.triggerMethod("before:add:region",a,e);this._store(a,e);this.triggerMethod("add:region",a,e);return e},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();c.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();c.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return d.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=c.size(this._regions)}});d.actAsCollection(g.prototype,"_regions");d.RegionManager=g;d.TemplateCache=function(a){this.templateId=a};c.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});c.extend(d.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&i('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return c.template(a)}});d.Renderer={render:function(a,b){a||
i("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){c.bindAll(this,"render");this.options=c.extend({},c.result(this,"options"),c.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(c.result(this,"events"));c.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,j.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");c.isFunction(b)&&(b=b.call(this));return c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"ui"),e=c.result(this,"_uiBindings");return d.normalizeUIKeys(a,e||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(c.result(this,"triggers"));c.each(b,
function(b,d){var f=c.isObject(b),g=f?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,n=f?b.stopPropagation:d;(f?b.preventDefault:c)&&c&&c.apply(a);n&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;c.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},e=c.result(this,"behaviorEvents")||{},d=this.configureTriggers();c.extend(b,e,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=j.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(c.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=c.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:c.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,j.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||i("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=c.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var e=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(e)&&(e=e.call(this));e=this.buildChildView(a,b,e);this._isShown&&this.triggerMethod.call(e,"before:show");this.children.add(e);this.renderChildView(e,-1);this._isShown&&this.triggerMethod.call(e,"show")},getChildView:function(){var a=this.getOption("childView");a||i('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,e){var d=this.getOption("childViewOptions");c.isFunction(d)&&
(d=d.call(this,a,e));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,e);this._addChildView(a,e);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(c.isFunction(a.triggerMethod)?
a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(c.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=
j.call(arguments),f=d[0],g=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+f;d.splice(1,0,a);"undefined"!==typeof g&&c.isFunction(g[f])&&g[f].apply(this,d.slice(1));this.triggerMethod.apply(this,d)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||i('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=c.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&i('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=c.isFunction(this.regions)?this.regions(a):this.regions||{};var d=this.getOption.call(a,"regions");c.isFunction(d)&&(d=d.call(this,a));c.extend(b,d);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=c.result(this,"defaults")||{};this.options=c.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};c.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});
g.extend=d.extend;d.Behavior=g;var k=function(a,b){b=k.parseBehaviors(a,b||c.result(a,"behaviors"));k.wrap(a,b,c.keys(q))},q={setElement:function(a,b){a.apply(this,c.tail(arguments,2));c.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var d=c.tail(arguments,2);a.apply(this,d);c.invoke(b,"destroy",d);return this},bindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},triggerMethod:function(a,b){var d=
c.tail(arguments,2);a.apply(this,d);c.each(b,function(b){a.apply(b,d)})},delegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.bindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.bindEntityEvents(a,this.collection,d.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.unbindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.unbindEntityEvents(a,this.collection,
d.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var e={},f=c.result(this,"ui");c.each(b,function(a,b){var g={},h=c.clone(c.result(a,"events"))||{},i=c.result(a,"ui"),i=c.extend({},f,i),h=d.normalizeUIKeys(h,i);c.each(c.keys(h),function(d){var e=Array(b+2).join(" "),e=d+e,d=c.isFunction(h[d])?h[d]:a[h[d]];g[e]=c.bind(d,a)});e=c.extend(e,g)});return e}};c.extend(k,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:c.isFunction(k.behaviorsLookup)?k.behaviorsLookup.apply(this,arguments)[b]:k.behaviorsLookup[b]},parseBehaviors:function(a,b){return c.chain(b).map(function(b,d){var f=new (k.getBehaviorClass(b,d))(b,a),g=k.parseBehaviors(a,c.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,d){c.each(d,function(d){a[d]=c.partial(q[d],a[d],b)})}});d.Behaviors=k;d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var d=c.invert(this.getOption("appRoutes"))[a];if(c.isFunction(this.onRoute))this.onRoute(a,d,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,d){var f=a[d];f||i('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(f,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};c.extend(this,a);this._initChannel()};c.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),f=j.call(arguments);
f.unshift(this);return c.create.apply(c,f)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var e=d.getOption(a,"regions");c.isFunction(e)&&(e=e.call(this,a));c.extend(b,e);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global";this.channel=c.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=c.result(this,"vent")||this.channel.vent;this.commands=c.result(this,"commands")||this.channel.commands;this.reqres=c.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,d){this.moduleName=a;this.options=c.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;c.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;c.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var e=c.flatten([this,this.app,f,d,f.$,c,b]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});c.extend(d.Module,{create:function(a,b,d){var f=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=d;c.each(b,function(b,c){var i=f;f=this._getModule(i,b,a,d);this._addModuleDefinition(i,f,h[c],g)},this);return f},_getModule:function(a,b,d,f){var g=c.extend({},f),f=this.getClass(f),h=a[b];h||(h=new f(b,d,g),a[b]=h,a.submodules[b]=h);return h},getClass:function(a){var b=d.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var f=this._getDefine(c),c=this._getStartWithParent(c,b);f&&b.addDefinition(f,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var e;return c.isFunction(a)&&a.prototype instanceof d.Module?(e=b.constructor.prototype.startWithParent,c.isUndefined(e)?!0:e):c.isObject(a)?(e=a.startWithParent,c.isUndefined(e)?!0:e):!0},_getDefine:function(a){return c.isFunction(a)&&!(a.prototype instanceof d.Module)?a:c.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});this.Marionette=d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-2.1.0', location = 'libs/marionette-2.1.0.js' */
define("jira/components/libs/marionette-2.1.0",["require"],function(d){var e=d("atlassian/libs/factories/marionette-2.1.0");var h=d("jira/components/libs/backbone");var c=d("jira/components/libs/underscore");var g=e(c,h);function f(j,i){var k=c.defaults({},i||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true}});this.trigger(j,k);return k}function b(j,i){var k=this.triggerPreventable(j,i);if(k.isPrevented){i.preventDefault()}}c.extend(g.View.prototype,{unwrapTemplate:function a(j){if(j&&!this.$el.hasClass(j)){return}if(this.$el.parent().length){var i=this.$el.children();this.$el.replaceWith(i);this.setElement(i)}else{this.setElement(this.$el.children())}},triggerPreventable:f,retriggerPreventable:b});c.extend(g.Controller.prototype,{triggerPreventable:f,retriggerPreventable:b});g.ViewManager=g.Object.extend({constructor:function(){this.views={};g.Controller.apply(this,arguments)},hideView:function(j){var i=this.views[j];if(i){this.stopListening(i);if(!i.isDestroyed){i.destroy()}delete this.views[j]}},showView:function(k,j){var i=this.buildView(k,j);i.render()},buildView:function(k,j){var i=this.views[k];if(!i){i=j.call(this);this.listenTo(i,"destroy",function(){this.hideView(k)});this.views[k]=i}return i},getView:function(i){return this.views[i]},onDestroy:function(){c.each(this.views,function(i,j){this.hideView(j)},this)}});return g});define("jira/components/lib/marionette-2.1.0",["require"],function(a){return a("jira/components/libs/marionette-2.1.0")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/Utils.js' */
AJS.namespace("JIRA.Issues.Actions",null,require("jira/components/util/events/issue-actions"));define("jira/issue/utils/xsrf-token-header",[],function(){return{"X-Atlassian-Token":"no-check"}});AJS.namespace("JIRA.Issues.XsrfTokenHeader",null,require("jira/issue/utils/xsrf-token-header"));define("jira/issue/utils",["require"],function(b){var c=b("jira/dialog/dialog-register");var a=b("jira/components/libs/underscore");return{isIssueDialog:function(d){return !!d.issueId||a.include(c,d)},isDeleteDialog:function(d){return d.options.id==="delete-issue-dialog"},isEditCommentDialog:function(d){return d.options.id==="edit-comment"},getEffectiveIssueKeyForDialog:function(d){var e=d&&d.$activeTrigger&&d.$activeTrigger.data("issuekey");if(e){return e}else{return JIRA.Issues.Api.getSelectedIssue().getKey()}},getEffectiveIssueIdForDialog:function(d){if(d.issueId){return d.issueId}else{return JIRA.Issues.Api.getSelectedIssue().getId()}},getAction:function(d){if(this.isDeleteDialog(d)){return JIRA.Issues.Actions.DELETE}else{if(this.isEditCommentDialog(d)){return JIRA.Issues.Actions.EDIT_COMMENT}else{return JIRA.Issues.Actions.UPDATE}}},getMessage:function(d){if(!this.isEditCommentDialog(d)){return d.options.issueMsg||"thanks_issue_updated"}},getMeta:function(d){if(this.isEditCommentDialog(d)){return{commentId:d.$activeTrigger.attr("id").replace("edit_comment_","")}}else{return{}}},getUpdateCommandForDialog:function(e){var d=this;if(this.isIssueDialog(e)){return{key:d.getEffectiveIssueKeyForDialog(e),id:d.getEffectiveIssueIdForDialog(e),action:d.getAction(e),message:d.getMessage(e),meta:d.getMeta(e)}}},debounce:function(d,f){var e=Array.prototype.slice.call(arguments,2);if(!d){console.error("JIRA.Issues.Utils.debounce: ctx must be defined")}clearTimeout(d[f+"DebounceTimeout"]);d[f].apply(d,e);if(!d[f+"DebounceTimeout"]){d[f+"Original"]=d[f];d[f]=a.debounce(function(){return d[f+"Original"].apply(d,arguments)},300)}d[f+"DebounceTimeout"]=setTimeout(function(){d[f]=d[f+"Original"];d[f+"DebounceTimeout"]=null},500)},waitForDeferreds:function(h,g,d){d=d||window;var f=[];var e=new jQuery.Deferred();a.each(h,function(){var i=g.apply(d,arguments);if(i&&i.promise){f.push(i)}});if(f.length){jQuery.when.apply(jQuery,f).then(function(){e.resolveWith(d)})}else{e.resolveWith(d)}return e.promise()},resolvedPromise:function(){return new jQuery.Deferred().resolve().promise()},patch:function(e,d,h){var i=e.hasOwnProperty(d);var f=e[d];e[d]=h;return function g(){if(i){e[d]=f}else{delete e[d]}}},isEmptyOrWhitespace:function(d){return d===undefined||d===null||a.isEmpty(d.trim())}}});AJS.namespace("JIRA.Issues.Utils",null,require("jira/issue/utils"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/AttributesMixinCreator.js' */
define("jira/issues/attributesmixincreator",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/issues/mixins");return{create:function(e){var d={};if(a.indexOf(e,"id")===-1){e.unshift("id")}a.each(e,function(g){var h=c.createMethodName("set",g);d[h]=function(k,i){var j={};j[g]=k;this.set(j,i);return this};var f=c.createMethodName("get",g);d[f]=function(){return this.get(g)}});return d}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/EventsMixinCreator.js' */
define("jira/issues/eventsmixincreator",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/issues/mixins");return{create:function(e){var d={};var f=function(h){var g=c.createMethodName("bind",h);d[g]=function(){return this.bind.apply(this,[h].concat(a.toArray(arguments)))};var j=c.createMethodName("unbind",h);d[j]=function(){return this.unbind.apply(this,[h].concat(a.toArray(arguments)))};var i=c.createMethodName("trigger",h);d[i]=function(){return this.trigger.apply(this,[h].concat(a.toArray(arguments)))};var k=c.createMethodName("one",h);d[k]=function(){var l=this;var m=arguments[0];var o=function(){l.unbind(h,o);m(arguments)};var n=a.toArray(arguments).slice(1);return this.bind.apply(this,[h,o].concat(n))}};a.each(e,a.bind(f,this));return d}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Extensions.js' */
define("jira/issue/extensions",["require"],function(b){var l=b("jira/components/libs/underscore");var a=b("jira/issues/eventsmixincreator");var d=b("jira/issues/attributesmixincreator");function j(n,m){l.forEach(l.keys(m),function(r){var s=n.prototype;if("initialize"===r){var p=s.initialize;s.initialize=function(){m.initialize.apply(this,arguments);if(p){p.apply(this,arguments)}};return}if("validate"===r){var q=s.validate;s.validate=function(){var v=m.validate.apply(this,arguments);if(v){return v}if(q){return q.apply(this,arguments)}};return}if("defaults"===r){var t=s.defaults||(s.defaults={});var o=m[r];for(var u in o){if(t.hasOwnProperty(u)){throw"Mixin error: object "+n+" already has default "+u+" defined for mixin "+m}t[u]=o[u]}return}if("properties"===r){if(!l.isArray(m[r])){throw"Expects properties member on mixin to be an array"}if(!s.properties){s.properties=[]}s.properties=s.properties.concat(m[r]);return}if("namedEvents"===r){if(!l.isArray(m[r])){throw"Expects events member on mixin to be an array"}if(!s.namedEvents){s.namedEvents=[]}s.namedEvents=s.namedEvents.concat(m[r]);return}if(s.hasOwnProperty(r)){throw"Mixin error: object "+n+" already has property "+r+" for mixin "+m}s[r]=m[r]},this)}function e(n){return function m(q,r){var s;var p=l.extend({},q);var o;if(q&&q.mixins){o=q.mixins;delete p.mixins}s=n.call(this,p,r);if(o){l.each(q.mixins,function(t){j(s,t)})}if(s.prototype.namedEvents){j(s,a.create(s.prototype.namedEvents))}if(s.prototype.properties){j(s,d.create(s.prototype.properties))}s.extend=m;return s}}function h(p,n){var o=p.prototype;var m=n.prototype;m.set=function(t,u){var r;var s=this.properties;if(s){if(l.isObject(t)||t==null){r=t}else{r={};r[t]=u}for(var q in r){if(l.indexOf(s,q)<0){throw"Property '"+q+"' does not exist"}}}return o.set.apply(this,arguments)};m.get=function(q){if(this.properties&&l.indexOf(this.properties,q)<0){throw"Property '"+q+"' does not exist"}return o.get.apply(this,arguments)}}function f(o,n){var m=n.prototype;m.addListener=function(w,p,z,q){if(arguments.length<3){throw"The 'other', 'event', and 'callback' arguments are mandatory"}var u=p.charAt(0).toUpperCase()+p.slice(1);var y="on"+u;var v="off"+u;var x="bind"+u;var s="unbind"+u;var r;var t;if(w[y]){r=y;t=v||s;if(typeof w[r]!=="function"){throw"object does not have method "+y+"'"}if(typeof w[t]!=="function"){throw"object does not have method "+v+"'"}}else{r=x;t=s;if(typeof w[r]!=="function"){throw"object does not have event ["+p+"] registered'"}}w[r](z,q);this._cleanerUppers=this._cleanerUppers||[];this._cleanerUppers.push(function(){w[t](z,q)})};m.removeListeners=function(){if(this._cleanerUppers){l.each(this._cleanerUppers,function(p){p()})}}}function g(p,o){var m=o.prototype;var n=p.prototype.remove;m.remove=function(){this.removeListeners();return n.apply(this,arguments)};m.deactivate=function(){this.undelegateEvents();this.removeListeners()}}function c(m){var o=m.extend();var n=m.extend;o.extend=e(n);return o}function k(m){var n=c(m);h(m,n);return n}function i(m){var n=c(m);f(m,n);g(m,n);return n}return{applyModelExtensions:k,applyExtensions:c,applyViewExtensions:i}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseCollection.js' */
define("jira/issues/basecollection",["require"],function(b){var c=b("jira/components/libs/backbone");var a=b("jira/issue/extensions");return a.applyExtensions(c.Collection)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseEvented.js' */
define("jira/issues/baseevented",["require"],function(c){var e=c("jira/components/libs/backbone");var b=c("jira/components/libs/underscore");var a=c("jira/issue/extensions");var d=function(){this.initialize.apply(this,arguments)};b.extend(d.prototype,e.Events,{initialize:function(){}});d.extend=e.Model.extend;return a.applyExtensions(d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseModel.js' */
define("jira/issues/basemodel",["require"],function(b){var c=b("jira/components/libs/backbone");var a=b("jira/issue/extensions");return a.applyModelExtensions(c.Model)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseRouter.js' */
define("jira/issues/baserouter",["require"],function(b){var c=b("jira/components/libs/backbone");var a=b("jira/issue/extensions");return a.applyExtensions(c.Router)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseView.js' */
define("jira/issues/baseview",["require"],function(b){var c=b("jira/components/libs/backbone");var a=b("jira/issue/extensions");return a.applyViewExtensions(c.View)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Mixins.js' */
define("jira/issues/mixins",function(){return{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/ModelUtils.js' */
define("jira/issues/modelutils",["require"],function(c){var i=c("jira/components/libs/underscore");var h=c("jira/components/libs/backbone");var e=c("jira/issue/utils");var b;function d(){this.modelEvents={}}d.prototype.captureEvent=function(l,k){var j=k[0];if(!this.modelEvents[l.cid]){this.modelEvents[l.cid]={model:l,events:{}}}this.modelEvents[l.cid].events[j]=k};d.prototype.replayEvents=function(){i.each(this.modelEvents,function(j){i.each(j.events,function(k){h.Events.trigger.apply(j.model,k)})})};function f(k){var j=this;if(k==="change"||k.indexOf("change:")===0){b.log.captureEvent(j,i.toArray(arguments))}else{h.Events.trigger.apply(j,arguments)}}var g=function(){if(b){return{commit:function(){}}}b={log:new d()};var j=e.patch(h.Model.prototype,"trigger",f);return{commit:function(){j();b.log.replayEvents();b=null}}};var a={transaction:function(l,k){var j=g();try{return l.apply(k)}finally{j.commit()}},makeTransactional:function(k){var l=function(m){return function(){var n=arguments;return a.transaction(function(){return m.apply(this,n)},this)}};var j=Array.prototype.slice.call(arguments,1);if(j.length===0){j=i.functions(k)}i.each(j,function(m){if(m.indexOf("_")!==0){k[m]=l(k[m])}})}};return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/namespace.js' */
AJS.namespace("JIRA.Issues.AttributesMixinCreator",null,require("jira/issues/attributesmixincreator"));AJS.namespace("JIRA.Issues.BaseCollection",null,require("jira/issues/basecollection"));AJS.namespace("JIRA.Issues.BaseEvented",null,require("jira/issues/baseevented"));AJS.namespace("JIRA.Issues.BaseModel",null,require("jira/issues/basemodel"));AJS.namespace("JIRA.Issues.BaseRouter",null,require("jira/issues/baserouter"));AJS.namespace("JIRA.Issues.BaseView",null,require("jira/issues/baseview"));AJS.namespace("JIRA.Issues.EventsMixinCreator",null,require("jira/issues/eventsmixincreator"));AJS.namespace("JIRA.Issues.Mixins",null,require("jira/issues/mixins"));AJS.namespace("JIRA.Issues.ModelUtils",null,require("jira/issues/modelutils"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/orderby.soy' */
// This file was automatically generated from orderby.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.OrderBy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.OrderBy == 'undefined') { JIRA.Templates.OrderBy = {}; }


JIRA.Templates.OrderBy.orderBy = function(opt_data, opt_ignored) {
  return '' + ((require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<div class="order-by-container"><div class="order-by-fields"><a href="#" aria-haspopup="true" class="order-options aui-button aui-style-default jira-aui-dropdown2-trigger" title="' + soy.$$escapeHtml('Select the field that issues are ordered by.') + '">' + ((opt_data.sortBy && opt_data.sortBy.fieldId) ? '<span>' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '</span>' : '<span>' + soy.$$escapeHtml('Order by') + '</span>') + '</a></div><div class="order-by-direction">' + ((opt_data.sortBy) ? '<a href="#" aria-haspopup="false" class="order-by aui-button" title="' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '" data-field-id="' + soy.$$escapeHtml(opt_data.sortBy.fieldId) + '" data-direction="' + soy.$$escapeHtml(opt_data.sortBy.order) + '">' + ((opt_data.sortBy.order == 'ASC') ? '<span class="aui-icon aui-icon-small aui-iconfont-new-arrow-up">' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '</span>' : '<span class="aui-icon aui-icon-small aui-iconfont-new-arrow-down">' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '</span>') + '</a>' : '<a href="#" aria-haspopup="false" class="aui-button" aria-disabled="true" title="' + soy.$$escapeHtml('Order by') + '"><span class="aui-icon aui-icon-small aui-iconfont-new-arrow-up">' + soy.$$escapeHtml('Order by') + '</span></a>') + '</div></div>' : ((opt_data.sortBy && opt_data.sortBy.fieldId) ? '<a class="order-by ' + ((opt_data.sortBy.order == 'ASC') ? 'ascending' : 'descending') + '" data-field-id="' + soy.$$escapeHtml(opt_data.sortBy.fieldId) + '" data-direction="' + soy.$$escapeHtml(opt_data.sortBy.order) + '" href="#" title="' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '"><span>' + soy.$$escapeHtml(AJS.format('Order by {0}',opt_data.sortBy.fieldName)) + '</span><span class="aui-icon aui-icon-small aui-iconfont-' + ((opt_data.sortBy.order == 'ASC') ? 'up' : 'down') + '"></span></a>' : '<a class="order-by" title="' + soy.$$escapeHtml('Order by') + '"><span>' + soy.$$escapeHtml('Order by') + '</span></a>') + '<a class="order-options" title="' + soy.$$escapeHtml('Select the field that issues are ordered by.') + '">' + soy.$$escapeHtml('Select the field that issues are ordered by.') + '</a>');
};
if (goog.DEBUG) {
  JIRA.Templates.OrderBy.orderBy.soyTemplateName = 'JIRA.Templates.OrderBy.orderBy';
}


JIRA.Templates.OrderBy.orderByOptions = function(opt_data, opt_ignored) {
  var output = '<select id="order-by-options" multiple="multiple" class="hidden"><optgroup data-footer-text="' + soy.$$escapeHtml(opt_data.footer) + '">';
  var optionList83 = opt_data.options;
  var optionListLen83 = optionList83.length;
  for (var optionIndex83 = 0; optionIndex83 < optionListLen83; optionIndex83++) {
    var optionData83 = optionList83[optionIndex83];
    output += '<option title="' + soy.$$escapeHtml(optionData83.fieldName) + '" value="' + soy.$$escapeHtml(optionData83.fieldId) + '" data-meta="' + soy.$$escapeHtml(optionData83.meta) + '">' + soy.$$escapeHtml(optionData83.fieldName) + '</option>';
  }
  output += '</optgroup></select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.OrderBy.orderByOptions.soyTemplateName = 'JIRA.Templates.OrderBy.orderByOptions';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByModel.js' */
define("jira/components/orderby/orderbymodel",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/libs/brace");var e=c("jquery");var a=c("wrm/context-path");return d.Model.extend({namedEvents:["sort"],namedAttributes:["sortBy","jql"],initialize:function(){this.on("change:jql",this.updateSelectedSort,this)},updateSelectedSort:function(){e.ajax({type:"POST",url:a()+"/rest/orderbycomponent/latest/orderByOptions/primary",data:JSON.stringify({jql:this.getJql()}),contentType:"application/json",success:b.bind(function(f){this.setSortBy(f)},this)})},toggleSort:function(){this.setJql(this.getSortBy().toggleJql);this.triggerSort(this.getJql())},doSort:function(f){this.setJql(f);this.triggerSort(this.getJql())}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByView.js' */
define("jira/components/orderby/orderbyview",["require"],function(a){var d=a("jira/components/libs/brace");var h=a("jquery");var f=a("jira/util/events");var e=a("jira/components/orderby/eventtypes");var b=a("jira/components/orderby/templates");var c=a("jira/components/orderby/orderbydropdownview");var i=a("jira/featureflags/feature-manager");var g=i.isFeatureEnabled("jira.spectrum.m1");return d.View.extend({template:b.orderBy,events:{"click a.order-by":"_onClickOrderBy","click a.order-options":"_toggleShowDropDown"},initialize:function(){this.model.on("change:sortBy",this.render,this)},render:function(){this.$el.html(this.template(this.model.toJSON()));return this},deactivate:function(){if(this.orderByDropDown){this.orderByDropDown.deactivate()}this.undelegateEvents()},_onClickOrderBy:function(l){var k=new h.Event(e.ISSUE_TABLE_REORDER);f.trigger(k);if(!k.isDefaultPrevented()){var j=h(l.currentTarget).data("field-id");if(j){this.model.toggleSort()}}l.preventDefault()},_toggleShowDropDown:function(j){if(!this.orderByDropDown){this.orderByDropDown=new c({model:this.model,offsetTarget:g?this.$("a.order-options"):this.$("a.order-by"),onHideCallback:function(){this.orderByDropDown=null}.bind(this)})}this.orderByDropDown.toggle();j.preventDefault()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByDropDownView.js' */
define("jira/components/orderby/orderbydropdownview",["require"],function(b){var l=b("jira/components/libs/underscore");var i=b("jira/components/libs/brace");var o=b("jquery");var n=b("jira/util/events");var m=b("jira/components/orderby/eventtypes");var g=b("jira/components/orderby/templates");var a=b("jira/ajs/layer/inline-layer");var d=b("jira/ajs/select/checkbox-multi-select");var h=b("jira/ajs/select/suggestions/select-suggest-handler");var k=b("jira/ajs/list/group-descriptor");var j=b("jira/ajs/list/item-descriptor");var f=b("jira/issues/baseview");var c=b("jira/issues/tipsy");var e=b("wrm/context-path");return i.View.extend({initialize:function(p){l.bindAll(this,"_onDropdownHidden","_onDropdownShown");this.offsetTarget=p.offsetTarget;this._onHideCallback=p.onHideCallback;this._pending=null;this._inlineLayer=null},deactivate:function(){if(this._inlineLayer){this._inlineLayer.hide()}f.prototype.deactivate.apply(this,arguments)},toggle:function(){if(!this._inlineLayer){this._pending=o.ajax(this._ajaxDefaults());this._inlineLayer=this._createInlineLayer(this._pending);this._inlineLayer.bind(a.EVENTS.show,this._onDropdownShown);this._inlineLayer.bind(a.EVENTS.hide,this._onDropdownHidden);this._inlineLayer.show()}else{this._inlineLayer.hide()}},_createInlineLayer:function(p){var q=l.bind(function(s){this._deferredAddTipsyToFooter(s);return this._renderInitialContent(s)},this);var r=new a({offsetTarget:this.offsetTarget,content:function(){return p.pipe(q)},width:218});if(this._onHideCallback){r.bind(a.EVENTS.hide,this._onHideCallback)}return r},_initSingleSelect:function(q){var r=q.find("select");r.bind("selected",l.bind(this._onFieldSelected,this));this.selectControl=new d({element:r,itemAttrDisplayed:"label",suggestionsHandler:h,ajaxOptions:this._ajaxDefaults({data:l.bind(function(s){return JSON.stringify(this._ajaxOptionsData(s))},this),query:true,minQueryLength:0,formatResponse:l.bind(function(s){this._removeTipsy();var u=new k();l.each(s.fields,function(v){u.addItem(new j({title:v.fieldName,value:v.fieldId,label:v.fieldName,meta:{sortJql:v.sortJql}}))});var t=this._getFooterText(s);if(t){u.footerText(t);this._deferredAddTipsyToFooter(s)}return[u]},this)})});var p=q.find("#order-by-options-input");p.focus()},_ajaxDefaults:function(q){var p={url:e()+"/rest/orderbycomponent/latest/orderByOptions",type:"POST",contentType:"application/json",data:JSON.stringify(this._ajaxOptionsData())};return l.extend(p,q)},_ajaxOptionsData:function(q){var p=this.model.getJql();var r=this.model.getSortBy();return{query:q,jql:p?p:undefined,sortBy:r?r.fieldId:undefined}},_renderInitialContent:function(p){var q=l.map(p.fields,function(r){return l.extend({},r,{meta:JSON.stringify({sortJql:r.sortJql})})});return o("<div></div>").addClass("order-dropdown").html(g.orderByOptions({options:q,footer:this._getFooterText(p)}))},_onDropdownShown:function(q,p){this._initSingleSelect(p)},_onDropdownHidden:function(){this._removeTipsy();o("div.order-dropdown").remove();this._inlineLayer=null},_onFieldSelected:function(r,q){var p=new o.Event(m.ISSUE_TABLE_REORDER);n.trigger(p);if(!p.isDefaultPrevented()){l.defer(l.bind(function(){if(this.selectControl.outstandingRequest){this.selectControl.outstandingRequest.reject()}a.current.hide();var s=q.meta();this.model.doSort(s.sortJql)},this))}},_getFooterText:function(p){if(typeof p.matchesCount==="number"&&typeof p.maxResults==="number"){var q=p.matchesCount-p.maxResults;if(q>0){return AJS.format("{0} more fields...",q)}}return""},_deferredAddTipsyToFooter:function(s){if(this._inlineLayer){var q=s.matchesCount;var t=Math.min(s.matchesCount,s.maxResults);var r=AJS.format("Showing {0} of {1} matching fields. Find more fields by typing in the search box.",t,q);var p=this;l.defer(function(){p._tipsyTrigger=new c({el:p._inlineLayer.$layer.find(".aui-list-section-footer"),tipsy:{title:function(){return r},className:"tipsy-front"}})})}},_removeTipsy:function(){if(this._tipsyTrigger){this._tipsyTrigger.hide();this._tipsyTrigger=null}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderBy.js' */
define("jira/components/orderby",["require"],function(b){var c=b("jira/components/orderby/orderbyview");var a=b("jira/components/orderby/orderbymodel");return{create:function(f){var e;var d;f=f||{};e=new a({sortBy:f.sortBy,jql:f.jql});d=new c({model:e});return{onSort:function(){e.onSort.apply(e,arguments);return this},offSort:function(g){e.off("sort",g);return this},render:function(){d.render();return this},setElement:function(g){d.setElement(g);return this},getJql:function(){return e.getJql()},setJql:function(g){e.setJql(g);return this},setSortBy:function(g){e.setSortBy(g);return this}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/eventtypes.js' */
define("jira/components/orderby/eventtypes",[],function(){return{ISSUE_TABLE_REORDER:"issueTableReorder"}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/amd-wrapper.js' */
define("jira/components/orderby/templates",function(){return JIRA.Templates.OrderBy});AJS.namespace("JIRA.Templates.OrderBy",null,require("jira/components/orderby/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/namespace.js' */
AJS.namespace("JIRA.Components.OrderBy",null,require("jira/components/orderby"));AJS.namespace("JIRA.Issues.OrderByDropDownView",null,require("jira/components/orderby/orderbydropdownview"));AJS.namespace("JIRA.Issues.OrderByView",null,require("jira/components/orderby/orderbyview"));AJS.namespace("JIRA.Issues.OrderByModel",null,require("jira/components/orderby/orderbymodel"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(m){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(v,i){m.call({_:v,Backbone:i});var l=i.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){var m=this.Backbone,v=m.PageableCollection,i=this._,l=function(a,b){if(!i.isNumber(a)||i.isNaN(a)||!i.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a},D=function(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,
arguments),d()}catch(a){throw a;}finally{c.callback=e}}}else d()},n=i.extend,o=i.omit,t=i.clone,p=i.each,H=i.pick,I=i.contains,E=i.isEmpty,F=i.pairs,N=i.invert,z=i.isArray,A=i.isFunction,J=i.isObject,x=i.keys,y=i.isUndefined,u=Math.ceil,K=Math.floor,G=Math.max,B=m.Collection.prototype,L=/[\s'"]/g,O=/[<>\s'"]/g,M=m.PageableCollection=m.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",
pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){B.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||w.mode,c=n({},w.queryParams,this.queryParams,b.queryParams||{});c.directions=n({},w.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=n({},w.state,this.state,b.state||{});c.currentPage=null==c.currentPage?
c.firstPage:c.currentPage;z(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,n({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,n({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=t(this.state)},
_makeFullCollection:function(a,b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],y(c[h])||(g[h]=c[h]);g=new (m.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;p(x(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=t(a.state),r=g.firstPage,j=g.pageSize,k=(0===r?g.currentPage:g.currentPage-
1)*j,q=k+j;if("add"==d){var i,m,l,s,f=f||{};e==b?(m=b.indexOf(c),m>=k&&m<q&&(s=a,i=l=m-k)):(i=a.indexOf(c),s=b,l=!y(f.at)?f.at+k:k+i);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(s){s.add(c,n({},f||{},{at:l}));var o=i>=j?c:!y(f.at)&&l<q&&a.length>j?a.at(j):null;o&&D(e,d,function(){a.remove(o,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(i=g.totalPages=u(g.totalRecords/j),g.lastPage=0===r?i-1:i||r,g.currentPage>i&&(g.currentPage=g.lastPage)):
(g.totalRecords=null,g.totalPages=null);a.state=a._checkState(g);var C,r=f.index;e==a?((C=b.at(q))?D(a,d,function(){a.push(C,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})),b.remove(c)):r>=k&&r<q&&((C=b.at(q-1))&&D(a,d,function(){a.push(C,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,k),j=b.models.slice(k+a.models.length),
b.reset(g.concat(a.models).concat(j),f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(k,q),n({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(k,q),n({},f,{parse:!1})));p(x(h),function(d){var c=h[d];p([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,
e=a.pageSize,f=a.currentPage,h=a.firstPage,g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=l(c,"totalRecords");e=l(e,"pageSize");f=l(f,"currentPage");h=l(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=u(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=l(a,"pageSize"),b=b||{first:!1},d=this.state,c=u(d.totalRecords/a),e=c?G(d.firstPage,K(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(n({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,o(b,["first"]))},switchMode:function(a,b){if(!I(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?t(this._initState):this._checkState(n({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);p(["add","remove","reset","sort"],function(a){f[a]=h=i.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(p(x(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var r=this.links={},j=d.firstPage,k=u(d.totalRecords/d.pageSize),j=0===j?G(0,k-1):k||j,d=d.firstPage;d<=j;d++)r[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(o(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,i=e.pageSize,j=a;switch(a){case "first":j=f;break;
case "prev":j=h-1;break;case "next":j=h+1;break;case "last":j=g;break;default:j=l(a,"index")}this.state=this._checkState(n({},e,{currentPage:j}));b.from=h;b.to=j;e=(0===f?j:j-1)*i;c=c&&c.length?c.models.slice(e,e+i):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,o(b,"fetch")),this;"infinite"==d&&(b.url=this.links[j]);return this.fetch(o(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=l(a),d=K(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,i){var j=c.links,k=c.parseLinks(a,n({xhr:i},d));k.first&&(j[c.state.firstPage]=k.first);k.prev&&(j[f-1]=k.prev);k.next&&(j[f+1]=k.next);e&&e(a,b,i)}}return(B.sync||m.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
p(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(O,""),a=a.slice(1);p(a,function(a){var c=a.split("="),a=c[0].replace(L,""),c=c[1].replace(L,"");"rel"==a&&I(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,t(this.queryParams),t(this.state),b);d&&(this.state=this._checkState(n({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&J(a[0])&&z(a[1])){var c=t(d),e=a[0];p(F(o(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!y(d)&&!i.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*N(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&J(a[0])&&z(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";A(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,i,j={},k=decodeURIComponent,m=h.split("&"),l=0,p=m.length;l<p;l++)g=m[l].split("="),
h=g[0],g=g[1]||!0,h=k(h),g=k(g),i=j[h],z(i)?i.push(g):j[h]=i?[i,g]:g;n(c,j);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?H(this.queryParams,"sortKey","order"):o(H(this.queryParams,x(w.queryParams)),"directions");l=F(h);e=t(this);for(f=0;f<l.length;f++)j=l[f],m=j[0],k=j[1],k=A(k)?k.call(e):k,null!=b[m]&&null!=k&&(c[k]=b[m]);b.sortKey&&b.order?(f=A(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(o(this.queryParams,x(w.queryParams)));
for(f=0;f<b.length;f++)j=b[f],k=j[1],k=A(k)?k.call(e):k,null!=k&&(c[j[0]]=k);if("server"!=d){var u=this,s=this.fullCollection,v=a.success;a.success=function(b,c,e){e=e||{};y(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,n({at:s.length},n(e,{parse:false})));u.trigger("reset",u,e)}v&&v(b,c,e)};return B.fetch.call(this,n({},a,{silent:!0}))}return B.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),i;1===b&&(i=h,h=g,g=i);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=n({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),w=M.prototype;m.PageableCollection.noConflict=function(){m.PageableCollection=v;return M}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone.paginator', location = 'libs/backbone.paginator.js' */
define("jira/components/libs/backbone.paginator",["require"],function(b){var c=b("atlassian/libs/factories/backbone.paginator-2.0.2");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:latest-search-store', location = 'search/LatestSearchStore.js' */
define("jira/components/search/latestStorage",["require"],function(c){var d=c("jquery");var b=c("jira/data/local-storage");var a="jira.issue.navigator.latest.search";return{get:function(){try{var h=b.getItem(a);if(h){var f=d.parseJSON(h);if(f.jql||f.filter){return f}}}catch(g){return{}}},save:function(f){try{b.setItem(a,JSON.stringify(f))}catch(e){}}}});AJS.namespace("JIRA.Issues.LatestSearch",null,require("jira/components/search/latestStorage"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/Search.js' */
define("jira/components/search",["require"],function(e){var b=e("wrm/context-path");var g=e("jira/components/libs/backbone");var d=e("jira/components/libs/underscore");var f=e("jquery");var c=e("jira/components/search/results");var a=e("jira/components/search/latestStorage");return g.Collection.extend({url:function(){return b()+"/rest/issueNav/1/issueTable"},searchParams:{jql:"",filterId:null,columnConfig:"explicit",columns:[],layoutKey:"split-view",startIndex:0},sync:function(){var h=d.toArray(arguments);var i=h[2];i.type="POST";i.headers={"X-Atlassian-Token":"no-check"};i.data={};d.each(d.keys(this.searchParams),function(j){if(this.searchParams[j]!==null){i.data[j]=this.searchParams[j]}},this);return g.Collection.prototype.sync.apply(this,h)},parse:function(i){var h=i&&i.issueTable;if(!h||!h.issueIds){return[]}return d.map(h.issueIds,function(k,j){return{id:k,key:h.issueKeys[j]}})},update:function(h){this.set(this.parse(h))},setPreloadedData:function(h){this.preloadedData=h;this.reset(h.response,{parse:true});return this.parseResults(h.jql,h.response)},parseResults:function(h,i){a.save({jql:h});return new c([],{issues:this.toJSON(),pageSize:i.issueTable.pageSize,totalRecordsInDB:i.issueTable.total,totalRecordsInSearch:this.length,jql:h})},search:function(h){this.searchParams.jql=h;var i=new f.Deferred();if(this.preloadedData&&this.preloadedData.jql===h){this.reset(this.preloadedData.response,{parse:true});i.resolve(this.parseResults(h,this.preloadedData.response));delete this.preloadedData}else{this.fetch({reset:true,success:d.bind(function(k,j){i.resolve(this.parseResults(k.searchParams.jql,j))},this),error:function(k,j){i.reject(j)}})}return i.promise()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResult.js' */
define("jira/components/search/result",["require"],function(b){var a=b("wrm/context-path");var c=b("jira/components/libs/backbone");return c.Model.extend({initialize:function(){this.url=function(){return a()+"/rest/api/2/issue/"+this.id+"?fields=summary,status,issuetype"}},parse:function(e){var d={};if(!e.inaccessible){d.id=parseInt(e.id,10);d.key=e.key;if(e.fields){d.summary=e.fields.summary;d.status=e.fields.status.name;d.type={description:e.fields.issuetype.description,iconUrl:e.fields.issuetype.iconUrl,name:e.fields.issuetype.name}}else{d.status=e.status;d.summary=e.summary;d.type=e.type}}else{d.id=parseInt(e.id,10);d.key=e.key;d.inaccessible=true}return d}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResults.js' */
define("jira/components/search/results",["require"],function(d){var a=d("wrm/context-path");var g=d("jira/components/libs/backbone.paginator");var c=d("jira/components/libs/underscore");var f=d("jquery");var h=d("jira/components/search/result");var e=d("jira/legacy/deprecator");var b=g.extend({initialize:function(j,i){i=i||{};this.allIssues=i.issues;this.state.pageSize=i.pageSize;this.state.totalRecords=i.totalRecordsInSearch;this.totalRecordsInDB=i.totalRecordsInDB;this.allowNoSelection=i.allowNoSelection;this.jql=i.jql},model:h,url:function(){return a()+"/rest/issueNav/1/issueTable/stable"},state:{firstPage:0,currentPage:0},queryParams:{currentPage:null,pageSize:null,totalPages:null,totalRecords:null,sortKey:null,directions:null},sync:function(){var i=c.toArray(arguments);var j=i[2];j.type="POST";j.headers={"X-Atlassian-Token":"no-check"};j.data.layoutKey="split-view";j.data.id=this._getStableKeys();return g.prototype.sync.apply(this,i)},isAtTheEndOfStableSearch:function(){var i=this.state.currentPage===this.state.lastPage;var j=this.totalRecordsInDB>this.state.totalRecords;return i&&j},setPreloadedData:function(i){this.preloadedData=i;this.reset(i.response,{parse:true})},_getStableKeys:function(i){var j=typeof i==="undefined"?this._getStartIndex():i;return c.pluck(this.allIssues,"id").slice(j,j+this.state.pageSize)},_getStartIndex:function(){return this.state.pageSize*this.state.currentPage},_loadPageAndSelect:function(i,l){var j=new f.Deferred();var k={fetch:true,reset:true};this.trigger("before:loadpage",{pageToLoad:i});this.getPage(i,k).done(c.bind(function(){this.select(l);j.resolve(this.length)},this)).fail(c.bind(function(m){j.reject(m);this.trigger("error:loadpage",m)},this));return j.promise()},fetch:function(i){var j;if(this.preloadedData&&c.isEqual(this.preloadedData.ids,this._getStableKeys(this.state.pageSize*i.to))){this.reset(this.preloadedData.response,{parse:true});j=new f.Deferred().resolve().promise();delete this.preloadedData}else{j=g.prototype.fetch.call(this,i)}return j},jumpToPage:function(j){var i=new f.Deferred();this._loadPageAndSelect(j,"first").done(i.resolve).fail(i.reject);return i.promise()},jumpToPageForIssue:function(q){var n=new f.Deferred();var m=(typeof q==="number");var p=(typeof q==="string");var l;var k;for(var o=0,j=this.allIssues.length;o<j&&!k;o++){if((m&&this.allIssues[o].id===q)||(p&&this.allIssues[o].key===q)){k=this.allIssues[o];l=Math.floor(o/this.state.pageSize)}}if(typeof l==="number"&&isFinite(l)){this._loadPageAndSelect(l,k.id).done(n.resolve)}else{if(this.allowNoSelection){this._loadPageAndSelect("first",null).done(c.bind(function(){this.trigger("selectIssueNotInList",new h({id:m?q:undefined,key:p?q:undefined}))},this)).done(n.resolve)}else{this._loadPageAndSelect("first","first").done(n.resolve)}}return n.promise()},parse:function(m,k){var j=k.data;var l=m&&m.issueTable;var i=this.allIssues;c.each(l.table,function(n,o){if(n===null){var q=j.id[o];var p=c.findWhere(i,{id:q});if(p){l.table[o]={id:p.id,key:p.key,inaccessible:true}}}});return g.prototype.parse.call(this,l)},parseState:function(){return{}},parseRecords:function(i){if(i.table){return i.table}else{return[]}},select:function(i){if(typeof i==="string"){switch(i){case"first":i=this.at(0);break;case"last":i=this.at(this.length-1);break;default:i=this.findWhere({key:i});break}}else{if(typeof i==="number"){i=this.get(i)}}if(this.selected!==i){this.unselect()}if(!i){return}this.selected=i;this.selected.trigger("select",this.selected)},unselect:function(){if(this.selected){this.selected.trigger("unselect",this.selected)}this.selected=null},navigate:function(l){var j=this.indexOf(this.selected);var k=j+l;var i=this.at(k);if(i){this.select(i)}else{if(l>0&&this.hasNextPage()){this._loadPageAndSelect("next","first")}else{if(l<0&&this.hasPreviousPage()){this._loadPageAndSelect("prev","last")}}}return{current:k,total:this.length}},selectNext:function(){return this.navigate(1)},selectPrev:function(){return this.navigate(-1)},_getIssueByNavigation:function(m){var k=this.indexOf(this.selected);var l=k+m;var j=this.at(l);var i=new f.Deferred();if(j){this.select(j);i.resolve(j)}else{if(m>0&&this.hasNextPage()){this._loadPageAndSelect("next","first").done(function(){i.resolve(this.selected)}.bind(this))}else{if(m<0&&this.hasPreviousPage()){this._loadPageAndSelect("prev","last").done(function(){i.resolve(this.selected)}.bind(this))}else{i.reject()}}}return i.promise()},getNextIssue:function(){return this._getIssueByNavigation(1)},getPreviousIssue:function(){return this._getIssueByNavigation(-1)},updateSelectedIssue:function(){if(this.selected){this.selected.fetch()}},updateIssue:function(j){var i=this.get(j);if(i){i.fetch()}},hasIssueInSearch:function(i){return !!c.where(this.allIssues,{key:i}).length},isEmptySearch:function(){return !this.allIssues.length},removeAndUpdateSelectionIfNeeded:function(n){var l=n.get("key");var j;var q=c.chain(this.allIssues).map(function(i){return i.key}).value();var p=c.indexOf(q,l);var k=p+1<q.length;var o=p-1>=0;if(k){j=q[p+1]}else{if(o){j=q[p-1]}else{j=null}}for(var m=0;m<this.allIssues.length;m++){var r=this.allIssues[m];if(r.key===l){this.allIssues.splice(m,1);break}}this.state.totalRecords=this.state.totalRecords-1;this.totalRecordsInDB=this.totalRecordsInDB-1;this.unselect();this.remove(n);if(j){return this.jumpToPageForIssue(j).done(c.bind(function(){this.trigger("issueDeleted")},this))}else{return new f.Deferred().resolve(0).promise().done(c.bind(function(){this.trigger("issueDeleted")},this))}},getIssueKeyForIndex:function(j){var i=this.allIssues[j];if(!i){return}return i.key},getIssueAtGlobalIndex:function(i){return this.allIssues[i]},getPositionOfIssueInSearchResults:function(j){var i=c.indexOf(c.pluck(this.allIssues,"id"),j);if(i>-1){return i}else{return null}},getPositionOfIssueInPage:function(k){var j=this.get(k);var i=this.indexOf(j);if(i>-1){return i}else{return null}},getTotalIssues:function(){return this.getTotalIssuesInSearch()},getTotalIssuesInSearch:function(){return this.allIssues.length},getTotalIssuesInDb:function(){return this.totalRecordsInDB}});e.prop(b.prototype,"getTotalIssues",{removeInVersion:"8.0",alternativeName:"jira/components/search/results#getTotalIssuesInSearch()",sinceVersion:"7.1",displayName:"Method jira/components/search/results#getTotalIssues()"});return b});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dropdown2', location = 'aui.chunk.f5822a415663b3694cbe--62bd9d2601f89c5a91b2.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dropdown2"],[],[["XHZH","runtime","aui.splitchunk.vendors--1df5b34e16","aui.splitchunk.vendors--95c789edf5","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.1659111a3c","aui.splitchunk.bc4873e5f9","aui.splitchunk.1df5b34e16","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9","aui.splitchunk.3e0cdb810a","aui.splitchunk.cd8d39be78","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed86a19e01","aui.splitchunk.53839a15cf","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.36cd9d521c","aui.splitchunk.def7f73e47","aui.splitchunk.4248e12b20","aui.splitchunk.b548966f06"]]]);
//# sourceMappingURL=aui.chunk.f5822a415663b3694cbe--62bd9d2601f89c5a91b2.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--c7d6d1dc80', location = 'aui.chunk.a7fc0d5b8767e9b40315--bdd2730e8619a65df894.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--c7d6d1dc80"],{"2NYx":function(t,i,o){var e,n,l;n=[o("oDIA"),o("O+lX")],void 0===(l="function"==typeof(e=function(t){return function(){var i,o=Math.max,e=Math.abs,n=/left|center|right/,l=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,h=/%$/,r=t.fn.position;function p(t,i,o){return[parseFloat(t[0])*(h.test(t[0])?i/100:1),parseFloat(t[1])*(h.test(t[1])?o/100:1)]}function c(i,o){return parseInt(t.css(i,o),10)||0}t.position={scrollbarWidth:function(){if(void 0!==i)return i;var o,e,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=n.children()[0];return t("body").append(n),o=l.offsetWidth,n.css("overflow","scroll"),o===(e=l.offsetWidth)&&(e=n[0].clientWidth),n.remove(),i=o-e},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:e,isDocument:n,offset:e||n?{left:0,top:0}:t(i).offset(),scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(i){if(!i||!i.of)return r.apply(this,arguments);i=t.extend({},i);var h,a,d,g,u,m,w=t(i.of),W=t.position.getWithinInfo(i.within),v=t.position.getScrollInfo(W),y=(i.collision||"flip").split(" "),H={};return m=function(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}(w),w[0].preventDefault&&(i.at="left top"),a=m.width,d=m.height,g=m.offset,u=t.extend({},g),t.each(["my","at"],function(){var t,o,e=(i[this]||"").split(" ");1===e.length&&(e=n.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=n.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=s.exec(e[0]),o=s.exec(e[1]),H[this]=[t?t[0]:0,o?o[0]:0],i[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===i.at[0]?u.left+=a:"center"===i.at[0]&&(u.left+=a/2),"bottom"===i.at[1]?u.top+=d:"center"===i.at[1]&&(u.top+=d/2),h=p(H.at,a,d),u.left+=h[0],u.top+=h[1],this.each(function(){var n,l,s=t(this),f=s.outerWidth(),r=s.outerHeight(),m=c(this,"marginLeft"),x=c(this,"marginTop"),b=f+m+c(this,"marginRight")+v.width,T=r+x+c(this,"marginBottom")+v.height,L=t.extend({},u),P=p(H.my,s.outerWidth(),s.outerHeight());"right"===i.my[0]?L.left-=f:"center"===i.my[0]&&(L.left-=f/2),"bottom"===i.my[1]?L.top-=r:"center"===i.my[1]&&(L.top-=r/2),L.left+=P[0],L.top+=P[1],n={marginLeft:m,marginTop:x},t.each(["left","top"],function(o,e){t.ui.position[y[o]]&&t.ui.position[y[o]][e](L,{targetWidth:a,targetHeight:d,elemWidth:f,elemHeight:r,collisionPosition:n,collisionWidth:b,collisionHeight:T,offset:[h[0]+P[0],h[1]+P[1]],my:i.my,at:i.at,within:W,elem:s})}),i.using&&(l=function(t){var n=g.left-L.left,l=n+a-f,h=g.top-L.top,p=h+d-r,c={target:{element:w,left:g.left,top:g.top,width:a,height:d},element:{element:s,left:L.left,top:L.top,width:f,height:r},horizontal:l<0?"left":n>0?"right":"center",vertical:p<0?"top":h>0?"bottom":"middle"};a<f&&e(n+l)<a&&(c.horizontal="center"),d<r&&e(h+p)<d&&(c.vertical="middle"),o(e(n),e(l))>o(e(h),e(p))?c.important="horizontal":c.important="vertical",i.using.call(this,t,c)}),s.offset(t.extend(L,{using:l}))})},t.ui.position={fit:{left:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,f=t.left-i.collisionPosition.marginLeft,h=l-f,r=f+i.collisionWidth-s-l;i.collisionWidth>s?h>0&&r<=0?(e=t.left+h+i.collisionWidth-s-l,t.left+=h-e):t.left=r>0&&h<=0?l:h>r?l+s-i.collisionWidth:l:h>0?t.left+=h:r>0?t.left-=r:t.left=o(t.left-f,t.left)},top:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollTop:n.offset.top,s=i.within.height,f=t.top-i.collisionPosition.marginTop,h=l-f,r=f+i.collisionHeight-s-l;i.collisionHeight>s?h>0&&r<=0?(e=t.top+h+i.collisionHeight-s-l,t.top+=h-e):t.top=r>0&&h<=0?l:h>r?l+s-i.collisionHeight:l:h>0?t.top+=h:r>0?t.top-=r:t.top=o(t.top-f,t.top)}},flip:{left:function(t,i){var o,n,l=i.within,s=l.offset.left+l.scrollLeft,f=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-f-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?((o=t.left+a+d+g+i.collisionWidth-f-s)<0||o<e(p))&&(t.left+=a+d+g):c>0&&((n=t.left-i.collisionPosition.marginLeft+a+d+g-h)>0||e(n)<c)&&(t.left+=a+d+g)},top:function(t,i){var o,n,l=i.within,s=l.offset.top+l.scrollTop,f=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-f-h,a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,g=-2*i.offset[1];p<0?((n=t.top+a+d+g+i.collisionHeight-f-s)<0||n<e(p))&&(t.top+=a+d+g):c>0&&((o=t.top-i.collisionPosition.marginTop+a+d+g-h)>0||e(o)<c)&&(t.top+=a+d+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?e.apply(i,n):e)||(t.exports=l)}}]);
//# sourceMappingURL=aui.chunk.a7fc0d5b8767e9b40315--bdd2730e8619a65df894.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.position', location = 'aui.chunk.6d46b627bfb0d048fba9--406d570703742f04765b.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.position"],{"7ih8":function(i,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),e("2NYx"),u.default="jquery",i.exports=u.default}},[["7ih8","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--c7d6d1dc80","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.6d46b627bfb0d048fba9--406d570703742f04765b.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/brace",["backbone","underscore","atlassian/libs/factories/brace-2014.09.03"],function(c,a,b){return b(a,c)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/util/logger","backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(f,c,h,b,e){var g=e(b,h);var d={unwrapTemplate:function a(){var i=this.$el.children();if(i.length>1){c.warn("[IIC] Unwrapping template with more than one child - some content will be lost")}var j=f(i.get(0));if(this.$el.parent().length){this.$el.replaceWith(j);this.setElement(j)}else{this.setElement(j)}}};b.extend(g.ItemView.prototype,d);b.extend(g.CompositeView.prototype,d);b.extend(g.CollectionView.prototype,d);b.extend(g.LayoutView.prototype,d);return g});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jira/util/logger","underscore","jquery"],function(m,k,g){var j=(document.body||document.documentElement).style;var d=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];var l;return{cssAnimationsSupport:j.transition!==undefined||j.WebkitTransition!==undefined||j.MozTransition!==undefined||j.MsTransition!==undefined||j.OTransition!==undefined,addClassAndRemoveOnAnimationEnd:function c(q,p,n){var o;q=g(q);function r(){for(o=0;o<d.length;o++){q.off(d[o],r)}q.removeClass(p)}if(this.cssAnimationsSupport){for(o=0;o<d.length;o++){q.on(d[o],r)}}else{setTimeout(function(){q.removeClass(p)},n||1000)}q.addClass(p)},scrollElementToView:function h(s,n){var o=s[0].getBoundingClientRect();var r=n[0].getBoundingClientRect();var q=s.scrollTop();var p=0;if(r.top<o.top){p=r.top-o.top}else{if(o.bottom<r.bottom){p=r.bottom-o.bottom}}if(p!==0){s.scrollTop(q+p)}},keyCode:{ENTER:13,ESC:27},after:function b(o,q,n){if(!k.isFunction(n)){throw"Body is not a function"}o[q]=k.wrap(o[q],function p(s){var t=Array.prototype.slice.call(arguments,1);var r=s.apply(o,t);n.apply(this,k.union([r],t));return r})},error:function i(o){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.error.apply(m,n)},debug:function a(o){if(this.shouldDisplay(o)){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.debug.apply(m,n)}},trace:function f(o){if(this.shouldDisplay(o)){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.debug.apply(m,n)}},shouldDisplay:function(n){if(l==="all"||n===l){return true}return false},showLogsFor:function e(n){l=n}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:analytics', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["underscore","jira/analytics","jira/inline-issue-create/lib/marionette"],function(g,e,d){return d.Controller.extend({initialize:function c(j){this.loadTimestamp=new Date().getTime();var k=j.widget;this.widgetId=k.model.cid.substring(1);this.projects=k.projects;this.listenTo(k,"issueCreated",this.onIssueCreated);this.listenTo(k,"openCreateIssueDialog",this.onOpenCreateIssueDialog);this.listenTo(k,"activated",this.onActivated);this.listenTo(k,"deactivated",this.onDeactivated)},triggerAnalytics:function b(l,n){var j="";var m="";if(this.projects&&this.projects.size()>0){var o=this.projects.first();j=o.get("id");m=o.get("type")}var k=g.defaults({},n,{instance:parseInt(this.widgetId,10),timestarted:this.loadTimestamp,projectId:j,projectType:m});e.send({name:"jira.inlinecreate."+l,data:k})},onOpenCreateIssueDialog:function i(j){this.triggerAnalytics("openDialog",{reason:j.reason})},onIssueCreated:function a(j,l,m,k){if(k.source==="inline"){this.triggerAnalytics("issueCreatedInline")}else{this.triggerAnalytics("issueCreatedDialog")}},onDeactivated:function f(){this.triggerAnalytics("deactivated")},onActivated:function h(){this.triggerAnalytics("activated")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jira/jquery/deferred","jquery","underscore"],function(b,c,a){var d=function(){var g=JIRA.Forms.Container;return g.extend({lazyInit:function f(){var h=this.options.call(this);this.prefilledValues=h.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(h.prefilledValues);this.prefilledValues=c.param(h.prefilledValues);this.options=function i(){return h};return this._super()},render:function e(){var h=this;var i=new b();this.lazyInit();if(a.isFunction(h.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(l){h.model.markFieldAsDirty(l)})}h.model.getUseConfigurableForm().done(function k(l){if(l===true){h.configurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element]);h.$element.append(n)})}else{h.unconfigurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element,n]);h.$element.append(n)})}}).fail(function j(){i.resolveWith(h,[h.$element])});return i.promise()}})};return{build:d}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["jira/util/formatter","underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(c,b,a){return function(u,n){if(!b.isObject(n)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var l=JIRA.Forms.CreateIssueModel;var q=JIRA.Forms.ConfigurableCreateIssueForm;var m=JIRA.Forms.UnconfigurableCreateIssueForm;var f=JIRA.Forms.CreateIssueError;var e=JIRA.applyErrorsToForm;var j=JIRA.applyErrorMessageToForm;var t;n.done(function o(v){t=v;t.prefilledFields=t.prefilledFields||{};t.errors=t.errors||{};t.errorMessages=t.errorMessages||{}}).fail(function k(){t={prefilledFields:{},errors:{},errorMessages:{}}});var g=a.build();var d=new g(function r(){var y={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var v=new l({projectId:undefined,issueType:undefined});var x=new q({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});var w=new m({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});return{globalEventNamespaces:y.globalEventNamespaces,model:v,errorHandler:new f(),configurableForm:x,unconfigurableForm:w,prefilledValues:t.prefilledFields}});var p=d.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});p.options.delayShowUntil=function i(){return n};d.asDialog=function h(){return d.dialog};p.onContentReady(function s(){if(b.keys(t.errors).length){t.errorMessages.unshift("Please fix the fields marked below.");e(d.$element,t.errors)}if(t.errorMessages.length){j(d.$element,t.errorMessages.join("<br/>"))}});u.resolve(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["jira/util/formatter","jira/jquery/deferred","wrm/require","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(h,f,d,g,k,e){var a=AJS.dim;var i=AJS.undim;var c=function(){a();g.showLoadingIndicator()};var b=function(){i();g.hideLoadingIndicator()};var j=function j(m,n){var l=new f();if(n){c()}d(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],e.bind(undefined,l,m)).fail(function(){if(n){b()}k.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")});return l.promise()};return{createPrefillableCreateIssueForm:j}});define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jira/jquery/deferred","jquery","underscore"],function(b,c,a){var e=JIRA.Forms.Container;var d=function(){return e.extend({lazyInit:function g(){var h=this.options.call(this);this.prefilledValues=h.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(h.prefilledValues);this.prefilledValues=c.param(h.prefilledValues);this.options=function i(){return h};return this._super()},render:function f(){var h=this;var i=new b();this.lazyInit();if(a.isFunction(h.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(l){h.model.markFieldAsDirty(l)})}h.model.getUseConfigurableForm().done(function k(l){if(l===true){h.configurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element]);h.$element.append(n)})}else{h.unconfigurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element,n]);h.$element.append(n)})}}).fail(function j(){i.resolveWith(h,[h.$element])});return i.promise()}})};return{build:d}});define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["jira/util/formatter","underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,f,i){var d=JIRA.Forms.CreateIssueModel;var g=JIRA.Forms.ConfigurableCreateIssueForm;var c=JIRA.Forms.UnconfigurableCreateIssueForm;var h=JIRA.Forms.CreateIssueError;var a=JIRA.applyErrorsToForm;var b=JIRA.applyErrorMessageToForm;return function(t,l){if(!f.isObject(l)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var n;l.done(function q(v){n=v;n.prefilledFields=n.prefilledFields||{};n.errors=n.errors||{};n.errorMessages=n.errorMessages||{}}).fail(function k(){n={prefilledFields:{},errors:{},errorMessages:{}}});var o=i.build();var j=new o(function s(){var y={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var v=new d({projectId:undefined,issueType:undefined});var x=new g({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});var w=new c({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});return{globalEventNamespaces:y.globalEventNamespaces,model:v,errorHandler:new h(),configurableForm:x,unconfigurableForm:w,prefilledValues:n.prefilledFields}});var p=j.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});p.options.delayShowUntil=function m(){return l};j.asDialog=function r(){return j.dialog};p.onContentReady(function u(){if(f.keys(n.errors).length){n.errorMessages.unshift("Please fix the fields marked below.");a(j.$element,n.errors)}if(n.errorMessages.length){b(j.$element,n.errorMessages.join("<br/>"))}});t.resolve(j)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy' */
// This file was automatically generated from inline-issue-create-widget.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }


JIRA.Templates.InlineIssueCreate.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><div class="iic-trigger"><button type="button" class="aui-button aui-button-subtle"><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml('Create issue') + '</span> ' + soy.$$escapeHtml('Create issue') + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.trigger.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.trigger';
}


JIRA.Templates.InlineIssueCreate.widget = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic-widget' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="' + soy.$$escapeHtml('What needs to be done?') + '">' + ((opt_data.summary) ? soy.$$escapeHtml(opt_data.summary) : '') + '</textarea><div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-text iic-widget__cancel">' + soy.$$escapeHtml('Cancel') + '</button><button type="button" class="aui-button aui-button-text iic-widget__more" title="' + soy.$$escapeHtml('Open in dialog') + '">' + soy.$$escapeHtml('Open in dialog') + '</button></div></div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.widget.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.widget';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelector = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__issue-type-selector"><button type="button" class="iic-widget__issue-type-selector__trigger aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '" width="16" height="16" />' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16" />') + '</button><div id="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelector.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelector';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="aui-icon-container" data-id="' + soy.$$escapeHtml(opt_data.id) + '" style="background-image: url(\'' + soy.$$escapeHtml(opt_data.iconUrl) + '\');">' + soy.$$escapeHtml(opt_data.name) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem';
}


JIRA.Templates.InlineIssueCreate.description = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml('New') + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.description';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","underscore","wrm/context-path","jira/inline-issue-create/lib/brace"],function(k,l,d,h){return h.Collection.extend({url:function b(){var n=l.map(this.jqls,function(o){return"query="+encodeURIComponent(o)+"&"});return d()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",n)},getEntityName:undefined,initialize:function e(n,o){this._initializeState(n,o)},_initializeState:function j(n,o){if(o&&o.jqls){this.jqls=o.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},parse:function c(n){return n.values},setJQLs:function f(n){if(l.isEqual(this.jqls,n)){return}this.jqls=n;this.fetch({reset:true})},reset:function g(){this.fetching=false;this.initialized=true;return k.Collection.prototype.reset.apply(this,arguments)},fetch:function a(o){var q=this;function n(){q.fetching=false;q.initialized=true;q.trigger("fetch:finished")}o=o||{};if(o.success){o.success=l.wrap(o.success,function p(r){n();return r.apply(q,Array.prototype.slice.call(arguments,1))})}else{o.success=n}this.trigger("fetch:started");this.fetching=true;return k.Collection.prototype.fetch.call(this,o)},isInitialized:function i(){return this.initialized},isFetching:function m(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(a){var b=a.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(a,b){return a.extend({model:b,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(a){return a.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(b,c){return b.extend({model:c,comparator:function a(d){return d.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","wrm/context-path","jira/inline-issue-create/lib/brace"],function(f,b,c){return c.Model.extend({initialize:function a(){this._isSaving=false},save:function e(){var g=this;var h=f.ajax(b()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});this._isSaving=true;return h.always(function i(){g._isSaving=false})},isSaving:function d(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","underscore","wrm/context-path","jira/util/logger","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(m,n,f,o,j,i,e){return j.Model.extend({issueTypesCollectionType:e,projectsCollectionType:i,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function g(){this.issueTypes=new this.issueTypesCollectionType();this.projects=new this.projectsCollectionType()},url:function c(){var q=n.map(this.jqls,function(r){return"query="+encodeURIComponent(r)+"&"});return f()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",q)},_initializeState:function l(q,r){if(r&&r.jqls){this.jqls=r.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},setJQLs:function b(q){if(n.isEqual(this.jqls,q)){return}this.jqls=q;this.fetch({reset:true})},parse:function d(r){var q=this;var t=n.map(r.issueTypes.values,function(u){return n.pick(u,n.keys(q.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(t);var s=n.map(r.projects.values,function(u){return n.pick(u,n.keys(q.projects.model.prototype.namedAttributes))});this.projects.reset(s);return n.pick(r,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function a(s){var r=this;function q(){r.fetching=false;r.initialized=true;o.trace("inline.create.bootstrap.fetched")}s=s||{};if(s.success){s.success=n.wrap(s.success,function t(u){q();return u.apply(r,Array.prototype.slice.call(arguments,1))})}else{s.success=q}this.fetching=true;o.trace("inline.create.bootstrap.fetching");return m.Model.prototype.fetch.call(this,s)},isInitialized:function k(){return this.initialized},isFetching:function p(){return this.fetching},fireWhenInitialized:function h(q){if(this.isInitialized()&&(!this.isFetching())){q()}else{this.listenToOnce(this,"sync",q)}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jira/inline-issue-create/lib/marionette"],function(e){var a=e.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function c(){var f=(this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName())||"";if(f){this.$el.removeClass("iic-widget__description_invisible");this.ui.selectedIssueTypeName.text(f)}else{this.$el.addClass("iic-widget__description_invisible")}}},serializeData:function b(){var f={};if(this.model.getSelectedIssueType()){f=this.model.getSelectedIssueType().toJSON()}return{issueTypeName:f.name}},onRender:function d(){this.unwrapTemplate()}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["underscore","jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(k,c,j,g){var a=j.CompositeView.extend({childView:g,childViewOptions:function l(o,n){return{model:o,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function d(){if(this.model.getSelectedIssueType()){this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())}},"change:lockState":function f(n,o){this.render();if(o===this.model.constants.STATE_LOCK_SENDING){this.ui.trigger.attr("aria-disabled",true)}else{this.ui.trigger.attr("aria-disabled",false)}}},initialize:function b(){this.isDropdownShown=false;k.bindAll(this,"onDropdownShow")},serializeData:function i(){var n={};if(this.model.getSelectedIssueType()){n=this.model.getSelectedIssueType().toJSON()}return{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:n.iconUrl}},onRender:function m(){this.unwrapTemplate();this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function e(){var s=this.ui.issueTypeDropdown;s.appendTo(this.$el);var n=this.ui.issueTypeIcon.offset();var r=this.ui.issueTypeIcon.position();var o=this.ui.issueTypeIcon.outerHeight();var p=s.height();var q=c("body").outerHeight(true)<n.top+o+p;s.css({left:r.left,top:(q?r.top-p:r.top+o)+"px"})},onChildviewSelected:function h(n){this.trigger("issueTypeSelected",n.model)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jira/inline-issue-create/lib/marionette"],function(e){var b=e.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function a(f){this.dropdownModel=f.dropdownModel},events:{"click a":function d(f){f.preventDefault();this.trigger("selected")}},onRender:function c(){this.unwrapTemplate()}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jira/inline-issue-create/lib/marionette"],function(g){var d=g.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function f(h){h.preventDefault();this.trigger("selected")}},initialize:function a(h){this.widget=h.widget;this.listenTo(this.widget,"activated",this.hide);this.listenTo(this.widget,"deactivated",this.show)},onRender:function e(){this.unwrapTemplate();if(this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE){this.hide()}},hide:function c(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function b(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){var a={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};Object.freeze(a);return a});define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(f,c,j,e){var a="iic.slectedIssueType";var k=e;var h=f.Model.extend({constants:k,defaults:{state:k.STATE_CLOSED,lockState:k.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:j,issueTypes:c,state:"",lastState:"",lockState:""},initialize:function d(m){var q;var o;if(!m||!m.selectedIssueType){if(localStorage){q=JSON.parse(localStorage.getItem(a))||{};q=q||{};o=this.getIssueTypes()&&this.getIssueTypes().find(function l(r){return r.getId()===q.id})}if(o){this.setSelectedIssueType(o)}else{if(this.getIssueTypes()){this.setSelectedIssueType(this.getIssueTypes().at(0))}}}this.on("change:selectedIssueType",function p(s){var r=this.getSelectedIssueType();if(r){localStorage.setItem(a,JSON.stringify(r.toJSON()))}});this.listenTo(this.getIssueTypes(),"reset",function n(){var r=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();var s;if(!r){r=q.id}if(r!==undefined){s=this.getIssueTypes().get(r);if(s){this.setSelectedIssueType(s)}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}})},changeState:function g(l){if(l===this.getState()){return}this.setLastState(this.getState());this.setState(l)},setSelectedIssueTypeIfAvailable:function i(m){if(m){var l=this.getIssueTypes().get(m.getId());if(l){this.setSelectedIssueType(l)}}},toIssueData:function b(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(j,x,m,a){var i=500;var b=m.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(A){var z=this.ui.summary.val();if(z.length>255){this.ui.summary.val(z.substr(0,255))}this.onSummaryChange(A)},"keydown @ui.summary":function p(A){var z=this.ui.summary.val();if(A.keyCode===a.keyCode.ENTER){A.preventDefault();if(z!==""&&z.length<=255){if(this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED){this.ui.summary.blur();this.trigger("createIssue")}else{a.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",i)}}else{a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}else{if(A.keyCode===a.keyCode.ESC){this.trigger("deactivate",{reason:"keypress"})}else{if(z.length>255){a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}}},"click @ui.cancel":function y(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("deactivate",{reason:"cancel"})}},"click @ui.more":function t(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("openFullIssueDialog")}}},modelEvents:{"change:summary":function r(){this.ui.summary.val(this.model.getSummary());this.adjustSummarySize()},"change:state":function s(z,A){if(A===this.model.constants.STATE_ACTIVE){this.activate()}else{if(A===this.model.constants.STATE_CLOSED){this.deactivate()}}},"change:lockState":function h(z,A){if(this.ui.summary.prop){if(A===this.model.constants.STATE_LOCK_SENDING){this.ui.summary.prop("disabled",true)}else{this.ui.summary.prop("disabled",false)}}}},initialize:function c(z){this.cssClass=z.cssClass||"";this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})});x.bindAll(this,"adjustSummarySize","onBodyClick")},onClose:function g(){j(document).off("click.iic",this.onBodyClick)},onBodyClick:function l(z){if(!this.$el.is(z.target)&&this.$el.has(z.target).length===0){if(this.ui.summary.val()===""){this.trigger("deactivate",{reason:"cancel"})}else{if(this.ui.summary.is(":focus")){this.ui.summary.blur()}}}},serializeData:function n(){return{summary:this.model.getSummary(),cssClass:this.cssClass}},onRender:function k(){this.unwrapTemplate();this.ui.withTitle.tooltip({aria:true});var A=this;this.ui.summary.on("change cut paste drop keydown input",function z(){x.defer(A.adjustSummarySize)});x.defer(A.adjustSummarySize);if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.activate()}else{this.deactivate()}},adjustSummarySize:function d(){this.ui.summary.css("height","auto");var A=this.ui.summary.outerHeight();var z=Math.max(A+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),A);if(z){this.ui.summary.height(z+"px")}},reset:function v(){this.ui.summary.attr("style","")},hide:function o(){this.$el.addClass("iic-widget_hidden");j(document).off("click.iic",this.onBodyClick)},show:function u(){this.$el.removeClass("iic-widget_hidden");this.adjustSummarySize();var z=this;x.defer(function(){j(document).off("click.iic",z.onBodyClick);j(document).on("click.iic",z.onBodyClick)})},focusSummary:function w(){this.ui.summary.focus()},activate:function f(){this.show();this.trigger("activated")},focus:function q(){this.focusSummary();this.trigger("focused")},deactivate:function e(){this.hide();this.trigger("deactivated")},onSummaryChange:function r(z){this.trigger("summaryChanged",this.ui.summary.val())}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jira/util/formatter","wrm/context-path","jira/jquery/deferred","jquery","underscore","jira/util/logger","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics"],function(f,C,g,x,L,t,E,b,r,J,i,a,z,q,K,m,d){function I(M){if(L.isFunction(M.parameter)){M.context[M.fieldName]=new M.parameter(M.defaultOptions)}else{if(L.isObject(M.parameter)){M.context[M.fieldName]=M.parameter}else{if(undefined===M.parameter){M.context[M.fieldName]=new M.defaultConstructor(M.defaultOptions)}}}}var A=E.Controller.extend({initialize:function e(M){this._initializeComponents(M);if(M.jqls){this.setCurrentJQLs(M.jqls)}if(M.container){this.attach(M.container)}this._initializeEvents(M)},_initializeComponents:function G(M){if(L.isFunction(M.issueTypes)){this.issueTypes=new M.issueTypes(undefined,{jqls:M.jqls})}else{if(L.isObject(M.issueTypes)){this.issueTypes=M.issueTypes}else{this.issueTypes=new J(undefined,{jqls:M.jqls})}}if(L.isFunction(M.projects)){this.projects=new M.projects(undefined,{jqls:M.jqls})}else{if(L.isObject(M.projects)){this.projects=M.projects}else{this.projects=new i(undefined,{jqls:M.jqls})}}I({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:M.model,defaultConstructor:r});I({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:M.dropdownView,defaultConstructor:q});I({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:M.descriptionView,defaultConstructor:K});this.view=new z({model:this.model,cssClass:M.cssClass});this.analytics=new d({widget:this});this._currentInlineIssue=undefined},_initializeEvents:function H(M){this.listenTo(this.view,"summaryChanged",function O(Q){this.model.setSummary(Q)});this.listenTo(this.view,"createIssue",this.createIssue);this.listenTo(this.view,"deactivate",this.deactivate);this.listenTo(this.view,"openFullIssueDialog",function P(){this.trigger("openCreateIssueDialog",{reason:"manual"});this.openCreateIssueDialog()});this.listenTo(this.model,"change:state",this.onStateChange);this.listenTo(this.model,"change:lockState",this.onLockStateChange);this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked);this.listenTo(this.projects,"reset",this.checkWidgetLocked);this.on("issueCreated",function N(){this.model.setSummary("")});this.checkWidgetLocked()},render:function w(){this.view.issueTypeSelector.attachView(undefined);this.view.description.attachView(undefined);this.view.render();this.view.issueTypeSelector.show(this.dropdownView);this.view.description.show(this.descriptionView);this.listenTo(this.dropdownView,"issueTypeSelected",function(M){this.model.setSelectedIssueType(M)})},onStateChange:function(M,N){if(N===this.model.constants.STATE_ACTIVE){this.trigger("activated")}else{if(N===this.model.constants.STATE_CLOSED){this.trigger("deactivated")}}},onLockStateChange:function h(M,N){if(N===this.model.constants.STATE_LOCK_PERM_INACTIVE){if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.deactivate()}}},activate:function l(){if(this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE){this.model.changeState(this.model.constants.STATE_ACTIVE);return true}else{return false}},deactivate:function c(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function y(){if(this.issueTypes.isFetching()||!this.issueTypes.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this.projects.isFetching()||!this.projects.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this._currentInlineIssue&&this._currentInlineIssue.isSaving()){return this.model.setLockState(this.model.constants.STATE_LOCK_SENDING)}if(!this.issueTypes.length){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}if(this.projects.length!==1){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED)},focus:function F(){this.view.focus()},reset:function B(){this.model.setSummary("");this.view.reset()},attach:function p(M){var N=x(M);N.append(this.view.el)},setCurrentJQLs:function s(M){this.jqls=M},setSummary:function D(M){this.model.setSummary(M)},getSummary:function o(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function k(M){this.model.setSelectedIssueTypeIfAvailable(M)},getSelectedIssueType:function u(){return this.model.getSelectedIssueType()},setOverrides:function n(M){this.overrides=M},createIssue:function v(){var M=this;var Q={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:L.clone(this.overrides)};this.trigger("beforeIssueCreated",M,Q);this._currentInlineIssue=new a(Q);this._currentInlineIssue.save().done(function P(R){M.trigger("issueCreated",R.issue,R.prefilledFields,M,{source:"inline"});t.trace("inline.create.issue.created")}).fail(function N(R){var V=new g();M.openCreateIssueDialog(V);try{var U=JSON.parse(R.responseText);V.resolve({errors:U.errors,errorMessages:U.generalErrors,prefilledFields:U.prefilledFields})}catch(T){b.error(M,"Could not parse response: "+T,R);var S="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";V.resolve({errors:{},errorMessages:[S],prefilledFields:{}})}M.trigger("openCreateIssueDialog",{reason:"createFailed"})}).always(function O(){M.checkWidgetLocked()});this.checkWidgetLocked()},openCreateIssueDialog:function j(Q){var M=this;var N=this.model.toIssueData();if(this.projects.size()===1){N.project=this.projects.at(0).toJSON()}var O={summary:N.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():undefined,overrides:L.clone(this.overrides)};this.trigger("beforeIssueCreated",M,O);if(!Q){Q=this._resolveInlineContext(O,M)}var P=m.createPrefillableCreateIssueForm(Q.promise(),true);return P.pipe(function(T){var S=T.asDialog();function R(V,U){M.trigger("issueCreated",U,U.fields,M,{source:"dialog"});t.trace("inline.create.issue.created")}T.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",R);this.configurableForm.bind("issueCreated",R)});S.show();return S})},_resolveInlineContext:function(P,M){var Q=new g();var R=x.ajax(C()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(P),contentType:"application/json",type:"POST"});R.done(function N(S){Q.resolve({prefilledFields:S.createIssueInput})}).fail(function O(){Q.resolve({prefilledFields:{summary:P.summary?P.summary:"",issuetype:M.model.getSelectedIssueType()?M.model.getSelectedIssueType().getId():undefined}})});return Q}});return A});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap","jira/util/logger"],function WidgetGroup(h,g,k,c,i){var d=g.Controller.extend({initialize:function e(l){this.TriggerView=l.TriggerView;this.Widget=k;this.widgets={};this.currentJQLs=undefined;this.createdCallback=l.createdCallback;this.activeWidget=undefined;this.inlineBootstrap=l.inlineBootstrap||new c();this.widgetOptions=h.defaults(l.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects})},getWidget:function a(l){if(!this.widgets[l]){this.widgets[l]=this._createNewWidget(l)}return this.widgets[l]},setCurrentJqls:function j(l){this.currentJQLs=l;h.each(this.widgets,function m(n){n.widget.setCurrentJQLs(l)});this.inlineBootstrap.setJQLs(l)},activateWidget:function b(n){if(this.activeWidget===n){n.focus();return}var o=this.activeWidget;this.activeWidget=undefined;h.each(this.widgets,function m(p){if(p!==n){p.widget.deactivate()}});var l=n.activate();if(l){n.focus();this.activeWidget=n;this.trigger("widget:activated",n,o);if(o){n.setSummary(o.getSummary());n.setSelectedIssueTypeIfAvailable(o.getSelectedIssueType());o.reset()}}return l},_createNewWidget:function f(q){var n=this;var p=new this.Widget(this.widgetOptions);p.on("deactivated",function l(){if(n.activeWidget===p){n.activeWidget=undefined;p.reset()}});if(this.createdCallback){this.createdCallback(p,q)}if(this.currentJQLs){p.setCurrentJQLs(this.currentJQLs)}var m=new n.TriggerView({widget:p});m.on("selected",function(){n.activateWidget(p)});return{widget:p,trigger:m,render:function o(r){m.render();r.after(m.$el);p.attach(m.$el);p.render();n.trigger("widget:rendered",p,m,r);i.trace("inline.create.widget.rendered")}}}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-issue-create', location = 'inline-issue-create/InlineIssueCreate.js' */
define("jira/components/inline-issue-create",["require"],function(c){var b=c("jira/components/libs/underscore");var f=c("jira/components/libs/marionette-2.1.0");var e=c("jira/inline-issue-create/widget");var a=c("jira/inline-issue-create/views/default-trigger");var d=c("jira/inline-issue-create/entities/inline-bootstrap");return f.Object.extend({_buildBootstrap:function(){this.bootstrap=new d();this.listenTo(this.bootstrap,{sync:function(){this.widget.setCurrentJQLs(this.bootstrap.jqls)}})},_buildWidget:function(){this.widget=new e({issueTypes:this.bootstrap.issueTypes,projects:this.bootstrap.projects});this.listenTo(this.widget,{issueCreated:function(h,g){this.trigger("issueCreated",{issue:h,fields:g})},activated:function(){this.trigger("activated")},deactivated:function(){this.trigger("deactivated")}})},_buildTrigger:function(){this.widgetTrigger=new a({widget:this.widget});this.listenTo(this.widgetTrigger,{selected:function(){this.activate();this.trigger("inlineIssueCreateOpened")}})},initialize:function(){this._buildBootstrap();this._buildWidget();this._buildTrigger();this.render()},setJQL:function(g){this.bootstrap.setJQLs([g])},render:function(){this.widgetTrigger.render();this.widget.render()},show:function(g){this.render();g.append(this.widgetTrigger.$el);this.widget.attach(g)},activate:function(){if(this.bootstrap.projects.length){var g=this.widget.activate();if(g){this.widget.focus()}}else{this.widget.openCreateIssueDialog()}},activateWithJQL:function(g){this.bootstrap.jqls=[g];this.bootstrap.fetch({reset:true}).done(b.bind(function(){if(this.bootstrap.projects.length){var h=this.widget.activate();if(h){this.widget.focus()}}},this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/SimpleIssueList.js' */
define("jira/components/simpleissuelist",["require"],function(b){var c=b("jira/components/simpleissuelist/controllers/list");var e=b("jira/components/simpleissuelist/services/api");var d=b("jira/components/simpleissuelist/services/inline-issue-create");var g=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/underscore");var f=b("jquery");return g.Object.extend({initialize:function(){if(this.options.displayInlineIssueCreate){this.inlineIssueCreate=new d();this.listenTo(this.inlineIssueCreate,{issueCreated:function(i){this.trigger("issueCreated",i)},"activated deactivated":function(){a.defer(a.bind(function(){this.list.adjustSize()},this))}})}this.list=new c({baseURL:this.options.baseURL,inlineIssueCreate:this.inlineIssueCreate});this.listenTo(this.list,{goToPreviousPage:function(){this.trigger("list:pagination");this.searchResults.jumpToPage("prev")},goToNextPage:function(){this.trigger("list:pagination");this.searchResults.jumpToPage("next")},goToPage:function(i){this.trigger("list:pagination");this.searchResults.jumpToPage(i)},refresh:function(){this.trigger("refresh")},selectIssue:function(i){this.trigger("list:select",{id:i.id,key:i.key,absolutePosition:this.searchResults.getPositionOfIssueInSearchResults(i.id),relativePosition:this.searchResults.getPositionOfIssueInPage(i.id)});this.searchResults.select(i.id)},sort:function(i){this.trigger("sort",i)},update:function(){this.trigger("update")}});var h=a.extend({},AJS.namespace("JIRA.API.Issues"),e.init(this));AJS.namespace("JIRA.API.Issues",null,h)},load:function(h,i){if(this.searchResults){this.stopListening(this.searchResults);delete this.searchResults}this.searchResults=h;if(this.options.displayInlineIssueCreate){this.inlineIssueCreate.setJQL(this.searchResults.jql)}this.listenTo(this.searchResults,{"before:loadpage":function(){this.trigger("before:loadpage")},"error:loadpage":function(j){this.trigger("error:loadpage",j)},reset:function(){this.list.update(this.searchResults)},unselect:function(j){this.list.unselectIssue(j.get("id"))},select:function(j){var k=j.get("id")||null;if(k){this.list.selectIssue(j.get("id"))}this.trigger("select",{id:k,key:j.get("key")})},change:function(j){this.list.updateIssue(j)}});if(i){h.jumpToPageForIssue(i)}else{h.jumpToPage("first")}},show:function(h){this.list.render({el:h})},selectNext:function(){if(!this.searchResults){return}return this.searchResults.selectNext()},selectPrevious:function(){if(!this.searchResults){return}return this.searchResults.selectPrev()},selectIssue:function(h){this.searchResults.select(h)},_getIssueById:function(h){if(!this.searchResults){return}return this.searchResults.get(h)},refreshIssue:function(i){var h=this._getIssueById(i);if(!h){return}h.fetch()},updateIssue:function(j,i){var h=this._getIssueById(j);if(!h){return}h.set(i)},adjustSize:function(){this.list.adjustSize()},disableIssue:function(i){var h=this._getIssueById(i);if(!h){return}h.set("inaccessible",true)},removeIssue:function(i){var h=this._getIssueById(i);if(!h){return new f.Deferred().reject().promise()}return this.searchResults.removeAndUpdateSelectionIfNeeded(h)},onDestroy:function(){this.list.destroy()},focus:function(){this.list.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/controllers/List.js' */
define("jira/components/simpleissuelist/controllers/list",["require"],function(b){var h=b("jira/components/simpleissuelist/views/pagination");var e=b("jira/components/simpleissuelist/views/issuelist");var a=b("jira/components/simpleissuelist/views/endstablesearch");var i=b("jira/components/simpleissuelist/views/layout");var g=b("jira/components/simpleissuelist/views/loading");var c=b("jira/components/simpleissuelist/views/refresh");var f=b("jira/components/libs/marionette-2.1.0");var d=b("jira/components/orderby");return f.ViewManager.extend({_buildPagination:function(){return this.buildView("pagination",function(){var j=new h({baseURL:this.baseURL});this.listenTo(j,{prev:function(){this.trigger("goToPreviousPage")},next:function(){this.trigger("goToNextPage")},"goto":function(k){this.trigger("goToPage",k)}});return j})},_buildList:function(){return this.buildView("list",function(){var j=new e();this.listenTo(j,{"childview:select":function(k){var l=k.model;this.trigger("selectIssue",{id:l.get("id"),key:l.get("key")})},update:function(){this.trigger("update")}});return j})},_buildEndStableSearch:function(){return this.buildView("endOfStableSearch",function(){return new a()})},_buildRefresh:function(){return this.buildView("refresh",function(){var j=new c();this.listenTo(j,{refresh:function(){this.trigger("refresh")}});return j})},_buildLayout:function(){return this.buildView("layout",function(){var j=new i();this.listenTo(j,{render:function(){this.getView("layout").getRegion("pagination").show(this.getView("pagination"));this.getView("layout").getRegion("searchResults").show(this.getView("list"));this.getView("layout").getRegion("refresh").show(this.getView("refresh"));this.getView("layout").getRegion("orderBy")._ensureElement();this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el);this.orderBy.render();if(this.inlineIssueCreate){this.getView("layout").inlineIssueCreateContainer._ensureElement();this.inlineIssueCreate.show(this.getView("layout").inlineIssueCreateContainer.$el)}}});return j})},_buildOrderBy:function(){this.orderBy=d.create();this.orderBy.onSort(function(j){this.trigger("sort",j)},this);return this.orderBy},_buildViews:function(){this._buildLayout();this._buildPagination();this._buildList();this._buildRefresh();this._buildEndStableSearch();this.getView("layout").render()},initialize:function(j){this._buildOrderBy();this.baseURL=j.baseURL;this.inlineIssueCreate=j.inlineIssueCreate;this._buildViews()},render:function(j){j=j||{};var k=j.el;k.append(this.getView("layout").$el);this.getView("layout").setElement(k)},onDestroy:function(){this.hideView("layout")},update:function(j){if(j.isAtTheEndOfStableSearch()){this.getView("layout").getRegion("endOfStableMessageContainer").show(this.getView("endOfStableSearch"))}else{this.getView("layout").getRegion("endOfStableMessageContainer").empty()}this.getView("list").update(j);this.getView("refresh").render();this.getView("pagination").update(j);this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el);this.orderBy.render();this.orderBy.setJql(j.jql);if(this.inlineIssueCreate){this.inlineIssueCreate.render()}this.adjustSize()},hideLoading:function(){this.hideView("loading")},showLoading:function(){this.showView("loading",function(){var j=new g();this.listenTo(j,{render:function(){this.getView("layout").$el.prepend(j.$el)}});return j})},updateIssue:function(j){this.getView("list").updateIssue(j)},unselectIssue:function(j){this.getView("list").unselectIssue(j)},selectIssue:function(j){this.getView("list").selectIssue(j)},adjustSize:function(){if(!this.getView("layout")){return}if(!this.getView("list")){return}var n=this.getView("layout").ui.listPanel;var s=this.getView("list").$el;var o=this.getView("layout").getRegion("orderBy").$el;var q=this.getView("layout").getRegion("pagination").$el;if(q){q=q.parent()}var l=s.offset().top+n.scrollTop();var p=(q?q.outerHeight():0);var j=window.innerHeight;var m=(o?o.outerHeight():0);var k=(!this.getView("endOfStableSearch")?0:this.getView("endOfStableSearch").$el.outerHeight());var r=this.getView("layout").inlineIssueCreateContainer.$el.outerHeight()||0;n.css("height",j+m-l-k-p-r);this.getView("list").scrollSelectedIssueIntoView()},focus:function(){if(this.getView("list")){this.getView("list").focus()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/API.js' */
define("jira/components/simpleissuelist/services/api",function(){return{init:function(a){return{nextIssue:function(){a.selectNext()},previousIssue:function(){a.selectPrevious()}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/InlineIssueCreate.js' */
define("jira/components/simpleissuelist/services/inline-issue-create",["require"],function(a){return a("jira/components/inline-issue-create")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/endofstablesearch.soy' */
// This file was automatically generated from endofstablesearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.endStableSearch = function(opt_data, opt_ignored) {
  return '<div class="end-of-stable-message"><p>' + soy.$$escapeHtml('Too many search results to display. Refine your search criteria and try again.') + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.endStableSearch.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.endStableSearch';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issue.soy' */
// This file was automatically generated from issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.issue = function(opt_data, opt_ignored) {
  return '' + ((require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<li title="' + soy.$$escapeHtml(opt_data.summary) + '" data-key="' + soy.$$escapeHtml(opt_data.key) + '"><a class="splitview-issue-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.key) + '"><div><div><img height="16" width="16" alt="' + soy.$$escapeHtml(opt_data.typeName) + '" title="' + soy.$$escapeHtml(opt_data.typeName) + ' - ' + soy.$$escapeHtml(opt_data.typeDescription) + '" src="' + soy.$$escapeHtml(opt_data.typeIcon) + '"/></div><div class="issue-content-container"><span class="issue-link-key">' + soy.$$escapeHtml(opt_data.key) + '</span><span class="issue-link-summary">' + soy.$$escapeHtml(opt_data.summary) + '</span></div></div></a></li>' : '<li title="' + soy.$$escapeHtml(opt_data.summary) + '" data-key="' + soy.$$escapeHtml(opt_data.key) + '"><a class="splitview-issue-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.key) + '"><span class="issue-link-key"><img height="16" width="16" alt="' + soy.$$escapeHtml(opt_data.typeName) + '" title="' + soy.$$escapeHtml(opt_data.typeName) + ' - ' + soy.$$escapeHtml(opt_data.typeDescription) + '" src="' + soy.$$escapeHtml(opt_data.typeIcon) + '"/>&nbsp;' + soy.$$escapeHtml(opt_data.key) + '</span><span class="issue-link-summary">' + soy.$$escapeHtml(opt_data.summary) + '</span></a></li>');
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.issue.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.issue';
}


JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue = function(opt_data, opt_ignored) {
  return '<li class="inaccessible-issue" data-key="' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml('This issue can no longer be opened') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issuelist.soy' */
// This file was automatically generated from issuelist.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.issueList = function(opt_data, opt_ignored) {
  return '<div class="list-content"><ol class="issue-list"></ol></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.issueList.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.issueList';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/layout.soy' */
// This file was automatically generated from layout.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.layout = function(opt_data, opt_ignored) {
  return '<div class="simple-issue-list"><div class="list-panel"><div class="list-ordering"></div><div class="search-results"></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"></div><div class="pagination-container aui-item"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.layout.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.layout';
}


JIRA.Components.SimpleIssueList.Templates.loading = function(opt_data, opt_ignored) {
  return '<div class="loading"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.loading.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.loading';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/pagination.soy' */
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.pagination = function(opt_data, opt_ignored) {
  var output = '<div class="pagination" data-displayable-total="' + soy.$$escapeHtml(opt_data.displayableTotal) + '">';
  var MAX_PAGES_DISPLAYED__soy6 = 5;
  var lastPage__soy7 = Math.floor((opt_data.displayableTotal - 1) / opt_data.pageSize);
  var pageNumber__soy8 = Math.floor(opt_data.startIndex / opt_data.pageSize);
  var urlFragment__soy9 = '' + ((opt_data.hasQueryString) ? soy.$$filterNoAutoescape(opt_data.searchQuery) + '&startIndex=' : soy.$$filterNoAutoescape(opt_data.searchQuery) + '?startIndex=');
  var prevStartIndex__soy19 = opt_data.startIndex - opt_data.pageSize;
  output += ((prevStartIndex__soy19 >= 0) ? (require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(prevStartIndex__soy19) + '" data-start-index="' + soy.$$escapeHtml(prevStartIndex__soy19) + '" class="nav-previous" title="' + soy.$$escapeHtml(AJS.format('Go to page {0} of {1}',pageNumber__soy8,lastPage__soy7 + 1)) + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-left">&lt;&lt; ' + soy.$$escapeHtml('Previous') + '</span></a>' : '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(prevStartIndex__soy19) + '" data-start-index="' + soy.$$escapeHtml(prevStartIndex__soy19) + '" class="icon icon-previous nav-previous" title="' + soy.$$escapeHtml(AJS.format('Go to page {0} of {1}',pageNumber__soy8,lastPage__soy7 + 1)) + '"><span>&lt;&lt; ' + soy.$$escapeHtml('Previous') + '</span></a>' : '') + JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch({startPage: pageNumber__soy8 - Math.floor(MAX_PAGES_DISPLAYED__soy6 / 2), endPage: pageNumber__soy8 + Math.floor(MAX_PAGES_DISPLAYED__soy6 / 2), lastPage: lastPage__soy7, urlFragment: urlFragment__soy9, currentPage: pageNumber__soy8 + 1, maxPagesDisplayed: MAX_PAGES_DISPLAYED__soy6, pageSize: opt_data.pageSize, displayableTotal: opt_data.displayableTotal});
  var nextStartIndex__soy54 = Math.min(opt_data.startIndex + opt_data.pageSize, opt_data.displayableTotal);
  output += ((nextStartIndex__soy54 < opt_data.displayableTotal) ? (require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(nextStartIndex__soy54) + '" data-start-index="' + soy.$$escapeHtml(nextStartIndex__soy54) + '" class="nav-next" title="' + soy.$$escapeHtml(AJS.format('Go to page {0} of {1}',pageNumber__soy8 + 2,lastPage__soy7 + 1)) + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-right">' + soy.$$escapeHtml('Next') + ' &gt;&gt;</span></a>' : '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(nextStartIndex__soy54) + '" data-start-index="' + soy.$$escapeHtml(nextStartIndex__soy54) + '" class="icon icon-next nav-next" title="' + soy.$$escapeHtml(AJS.format('Go to page {0} of {1}',pageNumber__soy8 + 2,lastPage__soy7 + 1)) + '"><span>' + soy.$$escapeHtml('Next') + ' &gt;&gt;</span></a>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.pagination.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.pagination';
}


JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastPage < opt_data.maxPagesDisplayed) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: 0, endPage: opt_data.lastPage})) : (opt_data.startPage < 0) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: 0, endPage: opt_data.endPage - opt_data.startPage})) : (opt_data.endPage > opt_data.lastPage) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: opt_data.startPage - (opt_data.endPage - opt_data.lastPage), endPage: opt_data.lastPage})) : JIRA.Components.SimpleIssueList.Templates.numberLinks(opt_data));
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch';
}


JIRA.Components.SimpleIssueList.Templates.numberLinks = function(opt_data, opt_ignored) {
  var output = '';
  var size__soy102 = opt_data.endPage - opt_data.startPage + 1;
  if (size__soy102 > 1) {
    var iLimit105 = Math.round(size__soy102);
    for (var i105 = 0; i105 < iLimit105; i105++) {
      var pageIndex__soy106 = i105 + opt_data.startPage;
      var pageNumber__soy107 = pageIndex__soy106 + 1;
      var pageStartIndex__soy108 = pageIndex__soy106 * opt_data.pageSize;
      var pageEndIndex__soy109 = Math.min(pageStartIndex__soy108 + opt_data.pageSize, opt_data.displayableTotal);
      var pageBoundaries__soy110 = '' + soy.$$escapeHtml(AJS.format('Issues {0} - {1}',pageStartIndex__soy108 + 1,pageEndIndex__soy109));
      output += ' ' + ((pageNumber__soy107 == opt_data.currentPage) ? '<strong title="' + soy.$$escapeHtml(pageBoundaries__soy110) + '">' + soy.$$escapeHtml(pageNumber__soy107) + '</strong>' : '<a href="' + soy.$$escapeHtml(opt_data.urlFragment) + soy.$$escapeHtml(pageStartIndex__soy108) + '" data-page="' + soy.$$escapeHtml(pageNumber__soy107) + '" data-start-index="' + soy.$$escapeHtml(pageStartIndex__soy108) + '" title="' + soy.$$escapeHtml(pageBoundaries__soy110) + '">' + soy.$$escapeHtml(pageNumber__soy107) + '</a>');
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.numberLinks.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.numberLinks';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/refresh.soy' */
// This file was automatically generated from refresh.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.refresh = function(opt_data, opt_ignored) {
  return '<a href="#" class="aui-button aui-button-subtle refresh-table" title="' + soy.$$escapeHtml('Refresh results') + '"><span class="aui-icon aui-icon-small aui-iconfont-refresh-small">' + soy.$$escapeHtml('Refresh results') + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.refresh.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.refresh';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/amd-wrapper.js' */
define("jira/components/simpleissuelist/templates",function(){return JIRA.Components.SimpleIssueList.Templates});AJS.namespace("JIRA.Components.SimpleIssueList.Templates",null,require("jira/components/simpleissuelist/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/EndStableSearch.js' */
define("jira/components/simpleissuelist/views/endstablesearch",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.endStableSearch})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Issue.js' */
define("jira/components/simpleissuelist/views/issue",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.issue,ui:{link:"a"},events:{simpleClick:function(d){d.preventDefault();this.trigger("select")}},serializeData:function(){var d=this.model;return{id:d.get("id"),key:d.get("key"),summary:d.get("summary"),typeName:d.get("type").name,typeDescription:d.get("type").description,typeIcon:d.get("type").iconUrl}},onRender:function(){this.unwrapTemplate()},highlight:function(){this.$el.addClass("focused");this.focus();this.scrollIntoView()},unhighlight:function(){this.$el.removeClass("focused")},scrollIntoView:function(){this.$el.scrollIntoViewForAuto()},focus:function(){this.ui.link.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/InaccessibleIssue.js' */
define("jira/components/simpleissuelist/views/inaccessibleissue",["require"],function(a){var c=a("jira/components/simpleissuelist/views/issue");var b=a("jira/components/simpleissuelist/templates");return c.extend({template:b.inaccessibleIssue,triggers:{click:"select"},serializeData:function(){var d=this.model;return{key:d.get("key")}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/IssueList.js' */
define("jira/components/simpleissuelist/views/issuelist",["require"],function(a){var e=a("jira/components/libs/marionette-2.1.0");var d=a("jira/components/simpleissuelist/views/inaccessibleissue");var c=a("jira/components/simpleissuelist/views/issue");var b=a("jira/components/simpleissuelist/templates");return e.CompositeView.extend({template:b.issueList,childViewContainer:"ol",getChildView:function(f){if(f.get("inaccessible")){return d}else{return c}},_initialEvents:function(){},onUpdate:function(){if(this.collection.selected){var f=this.children.findByModel(this.collection.selected);if(f){f.highlight()}}},onRender:function(){this.unwrapTemplate()},update:function(f){this.collection=f;this.render();this.triggerMethod("update")},updateIssue:function(h){var f=this.children.findByModel(h);if(!f){return}this.removeChildView(f);var i=this.getChildView(h);var g=this.collection.indexOf(h);this.addChild(h,i,g);this.triggerMethod("update")},unselectIssue:function(h){if(!this.collection){return}var g=this.collection.get(h);if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.unhighlight()},selectIssue:function(h){if(!this.collection){return}var g=this.collection.get(h);if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.highlight()},scrollSelectedIssueIntoView:function(){if(!this.collection){return}var g=this.collection.selected;if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.scrollIntoView()},focus:function(){if(!this.children||this.children.length<1){return}this.children.findByIndex(0).focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Layout.js' */
define("jira/components/simpleissuelist/views/layout",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.LayoutView.extend({template:b.layout,regions:{pagination:".pagination-container",refresh:".refresh-container",searchResults:".search-results",orderBy:".list-ordering",endOfStableMessageContainer:".end-of-stable-message-container",inlineIssueCreateContainer:".inline-issue-create-container"},ui:{listPanel:".list-panel"},showLoading:function(){this.ui.listPanel.addClass("loading")},hideLoading:function(){this.ui.listPanel.removeClass("loading")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Loading.js' */
define("jira/components/simpleissuelist/views/loading",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.loading,onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Pagination.js' */
define("jira/components/simpleissuelist/views/pagination",["require"],function(b){var d=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/uri");var c=b("jira/components/simpleissuelist/templates");return d.ItemView.extend({template:c.pagination,ui:{prev:".nav-previous",next:".nav-next",page:"a[data-page]"},triggers:{"click @ui.prev":"prev","click @ui.next":"next"},onRender:function(){this.unwrapTemplate()},events:{"click @ui.page":function(f){var g=f.target.getAttribute("data-page");f.preventDefault();this.trigger("goto",parseInt(g,10)-1)}},update:function(e){this.collection=e;this.render()},serializeData:function(){if(!this.collection){return}var f=new a(this.options.baseURL);var e=f.query().length>0;return{startIndex:this.collection.state.pageSize*this.collection.state.currentPage,pageSize:this.collection.state.pageSize,searchQuery:f.toString(),hasQueryString:e,displayableTotal:this.collection.state.totalRecords}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Refresh.js' */
define("jira/components/simpleissuelist/views/refresh",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.refresh,triggers:{click:"refresh"},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/pager.soy' */
// This file was automatically generated from pager.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.Pager.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.Pager == 'undefined') { JIRA.Components.Pager = {}; }
if (typeof JIRA.Components.Pager.Templates == 'undefined') { JIRA.Components.Pager.Templates = {}; }


JIRA.Components.Pager.Templates.Pager = function(opt_data, opt_ignored) {
  return '<div class="pager"><div class="showing">' + ((opt_data.position && opt_data.resultCount) ? '<span>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.position,opt_data.resultCount)) + '</span>' : '') + '</div><div class="previous">' + ((opt_data.previousIssue && opt_data.position != 1) ? '<button data-id="' + soy.$$escapeHtml(opt_data.previousIssue.id) + '" data-key="' + soy.$$escapeHtml(opt_data.previousIssue.key) + '" class="aui-button aui-button-subtle" title="' + soy.$$escapeHtml('Previous Issue') + ' \'' + soy.$$escapeHtml(opt_data.previousIssue.key) + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-up">' + soy.$$escapeHtml('Previous Issue') + '\'' + soy.$$escapeHtml(opt_data.previousIssue.key) + '\'</span></button>' : (opt_data.position && opt_data.resultCount) ? '<button class="aui-button aui-button-subtle" aria-disabled="true" title="' + soy.$$escapeHtml('Not available - this is the first issue') + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-up">' + soy.$$escapeHtml('Not available - this is the first issue') + '</span></button>' : '') + '</div><div class="next">' + ((opt_data.nextIssue && opt_data.position != opt_data.resultCount) ? '<button id="next-issue" data-id="' + soy.$$escapeHtml(opt_data.nextIssue.id) + '" data-key="' + soy.$$escapeHtml(opt_data.nextIssue.key) + '" class="aui-button aui-button-subtle" title="' + soy.$$escapeHtml('Next Issue') + ' \'' + soy.$$escapeHtml(opt_data.nextIssue.key) + '\'"><span class="aui-icon aui-icon-small aui-iconfont-chevron-down">' + soy.$$escapeHtml('Next Issue') + '\'' + soy.$$escapeHtml(opt_data.nextIssue.key) + '\'</span></button>' : (opt_data.position && opt_data.resultCount) ? (opt_data.isAtTheEndOfStableSearch) ? '<button class="aui-button aui-button-subtle" aria-disabled="true" title="' + soy.$$escapeHtml(AJS.format('Whoa, you\x27\x27ve got quite a few issues there. We can show you the first {0}, but you should refine your search to return fewer issues.',opt_data.stableSearchCount)) + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-down">' + soy.$$escapeHtml(AJS.format('Whoa, you\x27\x27ve got quite a few issues there. We can show you the first {0}, but you should refine your search to return fewer issues.',opt_data.stableSearchCount)) + '</span></button>' : '<button class="aui-button aui-button-subtle" aria-disabled="true" title="' + soy.$$escapeHtml('Not available - this is the last issue') + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-down">' + soy.$$escapeHtml('Not available - this is the last issue') + '</span></button>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.Pager.Templates.Pager.soyTemplateName = 'JIRA.Components.Pager.Templates.Pager';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/amd-wrapper.js' */
define("jira/components/pager/templates",function(){return JIRA.Components.Pager.Templates});AJS.namespace("JIRA.Components.Pager.Templates",null,require("jira/components/pager/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/views/PagerView.js' */
define("jira/components/pager/views/pager",["require"],function(d){var f=d("jira/components/libs/marionette-2.1.0");var e=d("jira/components/pager/templates");var c=d("jira/components/utils/ajshelper");var b=d("jira/featureflags/feature-manager");var a=b.isFeatureEnabled("jira.spectrum.m1");return f.ItemView.extend({getTemplate:function(){if(this.searchResults&&this.searchResults.selected){return e.Pager}else{return false}},ui:{next:a?".next button":".next a",previous:a?".previous button":".previous a",nextIcon:a?".next span.aui-icon":".next span.icon"},triggers:{"simpleClick @ui.next":"next","simpleClick @ui.previous":"previous"},update:function(g){this.searchResults=g;this.undelegateEvents();this.render();this.delegateEvents()},onRender:function(){if(this.searchResults&&this.searchResults.selected){var h=this.searchResults.getIssueAtGlobalIndex(this.searchResults.allIssues.length-1);if(h.id===this.searchResults.selected.id&&this.searchResults.isAtTheEndOfStableSearch()){this.ui.nextIcon.tooltip({gravity:"ne"})}}var g=c.activeShortcuts();if(g){if(g.j&&this.ui.next.length){g.j._addShortcutTitle(this.ui.next)}if(g.k&&this.ui.previous.length){g.k._addShortcutTitle(this.ui.previous)}}},serializeData:function(){var g=this.searchResults;var j=g.selected;if(!j){return}var i=this.searchResults.getPositionOfIssueInSearchResults(this.searchResults.selected.id);var h={position:i+1,resultCount:this.searchResults.getTotalIssuesInDb()};var l=this.searchResults.getIssueAtGlobalIndex(i+1);if(l){h.nextIssue={id:l.id,key:l.key}}else{if(this.searchResults.isAtTheEndOfStableSearch()){h.isAtTheEndOfStableSearch=true;h.stableSearchCount=this.searchResults.allIssues.length}}var k=this.searchResults.getIssueAtGlobalIndex(i-1);if(k){h.previousIssue={id:k.id,key:k.key}}return h}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/Pager.js' */
define("jira/components/pager",["require"],function(a){var b=a("jira/components/pager/views/pager");var c=a("jira/components/libs/marionette-2.1.0");return c.ViewManager.extend({_buildSearchResults:function(d){this._destroySearchResults();this.searchResults=d;this.listenTo(this.searchResults,{"select reset":function(){this.getView("view").update(this.searchResults)}})},_destroySearchResults:function(){if(!this.searchResults){return}this.stopListening(this.searchResults);delete this.searchResults},_buildView:function(){this.buildView("view",function(){var d=new b({el:this.el});this.listenTo(d,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}});return d})},initialize:function(d){this.el=d.el;this._buildView()},onDestroy:function(){c.ViewManager.prototype.onDestroy.call(this);this._destroySearchResults()},load:function(d){this._buildSearchResults(d)},update:function(d){this.load(d);this.getView("view").update(d)},show:function(d){this.hideView("view");this.showView("view",function(){var e=new b({el:d});this.listenTo(e,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}});return e})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:login-utils', location = 'content/js/util/LoginUtils.js' */
define("jira/issues/utils/login",["require"],function(c){var d=c("jira/util/data/meta");var a=c("wrm/context-path");var b=a();return{isLoggedIn:function(){return !!this.loggedInUserName()},loggedInUserName:function(){return d.get("remote-user")},currentContextRelativePath:function(){var f=this._getWindowLocation();var g=f.protocol+"//"+f.host+(b||"");var e=f.href;if(e.indexOf(g)===0){return e.substr(g.length)}return e},redirectUrlToCurrent:function(){var e=this.currentContextRelativePath();return b+"/login.jsp?os_destination="+encodeURIComponent(e)},redirectUrl:function(e){return b+"/login.jsp?os_destination="+encodeURIComponent(e)},_getWindowLocation:function(){return window.location}}});AJS.namespace("JIRA.Issues.LoginUtils",null,require("jira/issues/utils/login"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:empty-results-modifier', location = 'util/EmptyResultsModifier.js' */
define("jira/components/util/empty-results-modifier",["require"],function(c){var b=c("wrm/context-path");var a=c("jira/issues/utils/login");return{modifyLink:function(d){var e=d.$(".no-results-hint a");if(a.isLoggedIn()){e.addClass("create-issue").attr("href",b()+"/secure/CreateIssue!default.jspa")}else{e.addClass("login-link").attr("href",a.redirectUrlToCurrent())}}}});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--9c8c8c1546', location = 'aui.chunk.5dea31f049d6c4f0c3de--2aa0019581c68055c6ea.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--9c8c8c1546"],{lSwU:function(n,o,i){var p,e,u;e=[i("oDIA"),i("O+lX")],void 0===(u="function"==typeof(p=function(n){return n.ui.plugin={add:function(o,i,p){var e,u=n.ui[o].prototype;for(e in p)u.plugins[e]=u.plugins[e]||[],u.plugins[e].push([i,p[e]])},call:function(n,o,i,p){var e,u=n.plugins[o];if(u&&(p||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(e=0;e<u.length;e++)n.options[u[e][0]]&&u[e][1].apply(n.element,i)}}})?p.apply(o,e):p)||(n.exports=u)}}]);
//# sourceMappingURL=aui.chunk.5dea31f049d6c4f0c3de--2aa0019581c68055c6ea.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--06bc6ae5d7', location = 'aui.chunk.604fd3e8f834244da4a6--3b7718afeb87134077c9.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--06bc6ae5d7"],{"0Hbr":function(t,e,s){var i,o,n;o=[s("oDIA"),s("O+lX")],void 0===(n="function"==typeof(i=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(s){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?i.apply(e,o):i)||(t.exports=n)},pTG0:function(t,e,s){var i,o,n;o=[s("oDIA"),s("O+lX")],void 0===(n="function"==typeof(i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?i.apply(e,o):i)||(t.exports=n)},"z+ct":function(t,e,s){var i,o,n;o=[s("oDIA"),s("XPYc"),s("5h+3"),s("lSwU"),s("0Hbr"),s("pTG0"),s("0kPy"),s("O+lX"),s("yIBB")],void 0===(n="function"==typeof(i=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var s=this.options;return!(this.helper||s.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===s.iframeFix?"iframe":s.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var s=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(s).length||t.ui.safeBlur(s)},_mouseStart:function(e){var s=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,s){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!s){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var s=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==s._trigger("stop",e)&&s._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var s=this.options,i=t.isFunction(s.helper),o=i?t(s.helper.apply(this.element[0],[e])):"clone"===s.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===s.appendTo?this.element[0].parentNode:s.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),s=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==s&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,s,i,o=this.options,n=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(s=t(o.containment))[0])&&(e=/(scroll|auto)/.test(s.css("overflow")),this.containment=[(parseInt(s.css("borderLeftWidth"),10)||0)+(parseInt(s.css("paddingLeft"),10)||0),(parseInt(s.css("borderTopWidth"),10)||0)+(parseInt(s.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(s.css("borderRightWidth"),10)||0)-(parseInt(s.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(s.css("borderBottomWidth"),10)||0)-(parseInt(s.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=s)):this.containment=o.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var s="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*s,left:e.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*s}},_generatePosition:function(t,e){var s,i,o,n,r=this.options,l=this._isRootNode(this.scrollParent[0]),a=t.pageX,h=t.pageY;return l&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),s=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):s=this.containment,t.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(h=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(h=s[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=s?o-this.offset.click.top>=s[1]||o-this.offset.click.top>s[3]?o:o-this.offset.click.top>=s[1]?o-r.grid[1]:o+r.grid[1]:o,n=r.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,a=s?n-this.offset.click.left>=s[0]||n-this.offset.click.left>s[2]?n:n-this.offset.click.left>=s[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(a=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,s,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[s,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,s,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,s,i){var o=t.extend({},s,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var s=t(this).sortable("instance");s&&!s.options.disabled&&(i.sortables.push(s),s.refreshPositions(),s._trigger("activate",e,o))})},stop:function(e,s,i){var o=t.extend({},s,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,o))})},drag:function(e,s,i){t.each(i.sortables,function(){var o=!1,n=this;n.positionAbs=i.positionAbs,n.helperProportions=i.helperProportions,n.offset.click=i.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o})),o?(n.isOver||(n.isOver=1,i._parent=s.helper.parent(),n.currentItem=s.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return s.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=i.offset.click.top,n.offset.click.left=i.offset.click.left,n.offset.parent.left-=i.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=i.offset.parent.top-n.offset.parent.top,i._trigger("toSortable",e),i.dropped=n.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,n.fromOutside=i),n.currentItem&&(n._mouseDrag(e),s.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),s.helper.appendTo(i._parent),i._refreshOffsets(e),s.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,s,i){var o=t("body"),n=i.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,s,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,s,i){var o=i.options;o._opacity&&t(s.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,s){s.scrollParentNotHidden||(s.scrollParentNotHidden=s.helper.scrollParent(!1)),s.scrollParentNotHidden[0]!==s.document[0]&&"HTML"!==s.scrollParentNotHidden[0].tagName&&(s.overflowOffset=s.scrollParentNotHidden.offset())},drag:function(e,s,i){var o=i.options,n=!1,r=i.scrollParentNotHidden[0],l=i.document[0];r!==l&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity?r.scrollTop=n=r.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(l).scrollTop()<o.scrollSensitivity?n=t(l).scrollTop(t(l).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(l).scrollTop())<o.scrollSensitivity&&(n=t(l).scrollTop(t(l).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(l).scrollLeft()<o.scrollSensitivity?n=t(l).scrollLeft(t(l).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(l).scrollLeft())<o.scrollSensitivity&&(n=t(l).scrollLeft(t(l).scrollLeft()+o.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,s,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),s=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:s.top,left:s.left})})},drag:function(e,s,i){var o,n,r,l,a,h,p,c,f,d,g=i.options,u=g.snapTolerance,m=s.offset.left,v=m+i.helperProportions.width,_=s.offset.top,P=_+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)h=(a=i.snapElements[f].left-i.margins.left)+i.snapElements[f].width,c=(p=i.snapElements[f].top-i.margins.top)+i.snapElements[f].height,v<a-u||m>h+u||P<p-u||_>c+u||!t.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==g.snapMode&&(o=Math.abs(p-P)<=u,n=Math.abs(c-_)<=u,r=Math.abs(a-v)<=u,l=Math.abs(h-m)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h}).left)),d=o||n||r||l,"outer"!==g.snapMode&&(o=Math.abs(p-_)<=u,n=Math.abs(c-P)<=u,r=Math.abs(a-m)<=u,l=Math.abs(h-v)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(o||n||r||l||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=o||n||r||l||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,s,i){var o,n=i.options,r=t.makeArray(t(n.stack)).sort(function(e,s){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(s).css("zIndex"),10)||0)});r.length&&(o=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,s,i){var o=i.options;o._zIndex&&t(s.helper).css("zIndex",o._zIndex)}}),t.ui.draggable})?i.apply(e,o):i)||(t.exports=n)}}]);
//# sourceMappingURL=aui.chunk.604fd3e8f834244da4a6--3b7718afeb87134077c9.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--f29b9b9def', location = 'aui.chunk.25d29ac3a5db8655ba18--0c97ad24864d45f4b264.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--f29b9b9def"],{zxTg:function(n,i,o){}}]);
//# sourceMappingURL=aui.chunk.25d29ac3a5db8655ba18--0c97ad24864d45f4b264.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.draggable', location = 'aui.chunk.05b7bcc68c25281d0731--3ad7dcf9c4cebedef46a.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.draggable"],{duoV:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("zxTg"),i("z+ct"),e.default="jquery",u.exports=e.default}},[["duoV","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--f29b9b9def","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.05b7bcc68c25281d0731--3ad7dcf9c4cebedef46a.js.map;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'lib/jquery.ui.sidebar.js' */
/*!
 * jQuery UI Sidebar
 * http://jqueryui.com
 *
 * Depends:
 *   jquery.ui.widget.js
 */
(function(a){a.widget("ui.sidebar",{version:"0.1",options:{minWidth:function(b){return 50},maxWidth:function(b){return window.innerWidth},resize:a.noop,easeOff:0},_create:function(){_.bindAll(this,"_handleDrag","_persist","_setContainment","_setHandlePosition","updatePosition");if(this.options.easeOff){this.updatePosition=_.debounce(this.updatePosition,this.options.easeOff)}if(!this.options.id){console.error("ui.sidebar: You must specify an id")}this._addHandle();this._restore();a(window).resize(_.debounce(this.updatePosition,30))},_restore:function(){if(window.localStorage){var b=localStorage.getItem("ui.sidebar."+this.options.id);if(b){this._setWidth(b)}}},_persist:function(){if(window.localStorage){localStorage.setItem("ui.sidebar."+this.options.id,this.element.outerWidth())}},_setContainment:function(){var b=window.innerHeight;this._elementLeft=this.element.offset().left;this._minLeft=this._elementLeft+this.options.minWidth(this);this._maxLeft=Math.max(this._minLeft,this._elementLeft+this.options.maxWidth(this));this.handle.draggable({containment:[this._minLeft,b,this._maxLeft,b]})},_handleDrag:function(d,b){var c=b.position.left-this._elementLeft;this._setWidth(c,true)},_setWidth:function(e,d){if(!d){var c=this.options.maxWidth(this);var b=this.options.minWidth(this);if(e>c){e=c}else{if(e<b){e=b}}}e-=this.element.outerWidth()-this.element.width();this.element.width(e);this.options.resize(e)},_addHandle:function(){var b=document.createElement("div");b.setAttribute("class","ui-sidebar");this.handle=a(b).appendTo(this.element);this.handle.draggable({axis:"x",drag:this._handleDrag,stop:this._persist});this.handle.mousedown(this._setContainment);_.defer(this._setHandlePosition)},_setHandlePosition:function(){this._setContainment();if(this._minLeft===this._maxLeft){this.handle.hide()}else{var c=this.element.offset();var b=c.left+this.element.outerWidth();this.handle.css({top:c.top,left:b,height:this.element.outerHeight()}).show()}},updatePosition:function(){this._setHandlePosition();this._setWidth(this.handle.offset().left-this._elementLeft-window.pageXOffset);this._persist()}})})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/detailslayout.soy' */
// This file was automatically generated from detailslayout.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.DetailsLayout.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.DetailsLayout == 'undefined') { JIRA.Components.DetailsLayout = {}; }
if (typeof JIRA.Components.DetailsLayout.Templates == 'undefined') { JIRA.Components.DetailsLayout.Templates = {}; }


JIRA.Components.DetailsLayout.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="details-layout"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.container.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.container';
}


JIRA.Components.DetailsLayout.Templates.layout = function(opt_data, opt_ignored) {
  return '<div class="aui-group split-view"><div class="aui-item list-results-panel"></div><div class="aui-item detail-panel"><div class="issue-container"></div><div class="tools-container"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.layout.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.layout';
}


JIRA.Components.DetailsLayout.Templates.empty = function(opt_data, opt_ignored) {
  return '<div><div class="navigator-content empty-results">' + ((opt_data.loggedIn) ? '<div class="no-results no-results-message"><h2>' + soy.$$escapeHtml('No issues were found to match your search') + '</h2><p class="no-results-hint">' + soy.$$filterNoAutoescape(AJS.format('Try modifying your search criteria or {0}creating a new issue{1}.','<a class="create-issue" href="' + "" + '/secure/CreateIssue!default.jspa">','</a>')) + '</p></div>' : '<div class="no-results not-logged-in-message"><h2>' + soy.$$escapeHtml('No issues were found to match your search') + '</h2><p class="no-results-hint">' + soy.$$filterNoAutoescape('Try \x3ca\x3elogging in\x3c/a\x3e to see more results.') + '</p></div>') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.empty.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.empty';
}


JIRA.Components.DetailsLayout.Templates.loading = function(opt_data, opt_ignored) {
  return '<div class="loading"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.loading.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.loading';
}


JIRA.Components.DetailsLayout.Templates.tools = function(opt_data, opt_ignored) {
  return '<div class="issue-tools"><div class="pager-container"></div><div class="expand-container"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.tools.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.tools';
}


JIRA.Components.DetailsLayout.Templates.expand = function(opt_data, opt_ignored) {
  return '<button title="' + soy.$$escapeHtml(AJS.format('Expand issue ( {0} )',opt_data.expandShortcutKey ? opt_data.expandShortcutKey : '')) + '" class="aui-button aui-button-subtle expand"><span class="aui-icon aui-icon-small aui-iconfont-focus">' + soy.$$escapeHtml(AJS.format('Expand issue ( {0} )',opt_data.expandShortcutKey ? opt_data.expandShortcutKey : '')) + '</span></button>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.expand.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.expand';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/amd-wrapper.js' */
define("jira/components/detailslayout/templates",function(){return JIRA.Components.DetailsLayout.Templates});AJS.namespace("JIRA.Components.DetailsLayout.Templates",null,require("jira/components/detailslayout/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/controllers/Tools.js' */
define("jira/components/detailslayout/controllers/tools",["require"],function(a){var d=a("jira/components/libs/marionette-2.1.0");var c=a("jira/components/pager");var b=a("jira/components/detailslayout/views/tools");return d.ViewManager.extend({initialize:function(e){this.showExpand=e.showExpand;this._buildTools();this._buildPager()},show:function(e){this.toolsView.setElement(e);this.toolsView.render()},load:function(e){this.pager.update(e)},onDestroy:function(){this.pager.destroy();d.ViewManager.prototype.onDestroy.call(this)},_buildTools:function(){this.toolsView=this.buildView("toolsView",function(){var e=new b({showExpand:this.showExpand});this.listenTo(e,{render:function(){e.pager._ensureElement();this.pager.show(e.pager.$el)},expand:function(){this.trigger("expand")}});return e})},_buildPager:function(){this.pager=new c();this.listenTo(this.pager,{next:function(){this.trigger("pager:next")},previous:function(){this.trigger("pager:previous")}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Container.js' */
define("jira/components/detailslayout/views/container",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/detailslayout/templates");return c.ItemView.extend({template:b.container,onRender:function(){this.unwrapTemplate()},showView:function(d){this.$el.append(d.$el)},showLoading:function(d){this.$el.prepend(d.$el)},hideLoading:function(d){d.$el.detach()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Empty.js' */
define("jira/components/detailslayout/views/empty",["require"],function(c){var e=c("jira/components/libs/marionette-2.1.0");var d=c("jira/components/detailslayout/templates");var a=c("jira/issues/utils/login");var b=c("jira/components/util/empty-results-modifier");return e.ItemView.extend({template:d.empty,serializeData:function(){return{loggedIn:a.isLoggedIn()}},onRender:function(){b.modifyLink(this);this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Tools.js' */
define("jira/components/detailslayout/views/tools",["require"],function(a){var e=a("jira/components/libs/marionette-2.1.0");var c=a("jira/components/detailslayout/templates");var d=a("jira/ajs/keyboardshortcut/keyboard-shortcut");var b=e.ItemView.extend({template:c.expand,triggers:{click:"expand"},serializeData:function(){return{expandShortcutKey:d.getKeyboardShortcutKeys("fullscreen.issue")}},onRender:function(){this.unwrapTemplate();this.$el.tooltip({gravity:"e"})},onDestroy:function(){if(this.$el.tooltip){this.$el.tooltip("hide")}}});return e.LayoutView.extend({initialize:function(f){this.showExpand=f.showExpand||false;this._initSubview()},template:c.tools,regions:{pager:".pager-container",expand:".expand-container"},_initSubview:function(){this._expandSubview=new b();this.listenTo(this._expandSubview,"expand",function(){this.trigger("expand")}.bind(this))},onRender:function(){if(this.showExpand){this.expand.show(this._expandSubview);if(d.initialised&&d.initialised.state()!=="resolved"){d.initialised.then(function(){this._expandSubview.render()}.bind(this))}}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Layout.js' */
define("jira/components/detailslayout/views/layout",["require"],function(b){var d=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/underscore");var c=b("jira/components/detailslayout/templates");return d.LayoutView.extend({template:c.layout,regions:{issuesList:".list-results-panel",issueComponent:".issue-container",tools:".tools-container"},ui:{detailPanel:".detail-panel"},onRender:function(){this.issuesList._ensureElement()},maximizeDetailPanelHeight:function(){var e=this.ui.detailPanel.offset().top;this.ui.detailPanel.css("height",window.innerHeight-e)},showDraggable:function(){var e=0;this.issuesList.$el.sidebar({id:"layoutview-draggable",minWidth:function(){return 250},maxWidth:a.bind(function(){return this.$el.width()-500},this),resize:a.bind(function(f){if(f!==e){e=f;this.trigger("resize")}},this)})},updateDraggable:function(){if(this.issuesList.$el.data("ui-sidebar")){this.issuesList.$el.sidebar("updatePosition")}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Loading.js' */
define("jira/components/detailslayout/views/loading",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/detailslayout/templates");return c.ItemView.extend({template:b.loading,onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/DetailsLayout.js' */
define("jira/components/detailslayout",["require"],function(b){var k=b("jira/components/libs/underscore");var f=b("jira/components/issuecomponentresolver");var g=b("jira/components/libs/marionette-2.1.0");var d=b("jira/components/simpleissuelist");var i=b("jira/components/detailslayout/views/container");var a=b("jira/components/detailslayout/views/empty");var j=b("jira/components/detailslayout/views/layout");var h=b("jira/components/detailslayout/views/loading");var c=b("jira/components/detailslayout/controllers/tools");function e(n,m,l){var p;var o=m;return function(){var q=arguments;clearTimeout(p);p=setTimeout(function(){n.apply(this,q);o=m},o);o=l}}return g.ViewManager.extend({_buildIssueComponent:function(){var n=f.resolve();var m=this.issueComponent=new n();var l=this.options;this._loadIssueInViewerComponent=e(k.bind(function(o){m.loadIssue({id:o.id,key:o.key,detailView:!l.shouldUpdateCurrentProject}).always(k.bind(function(){this.hideLoading()},this))},this),100,500);this.listenTo(m,{loadError:function(o){this.simpleIssueList.disableIssue(o.issueId);this.trigger("editorError")},loadComplete:function(o,p){this.adjustSize();this.simpleIssueList.updateIssue(o.id,{key:o.get("entity").key,summary:o.get("entity").summary,status:o.get("entity").status.name});var q={issueKey:o.get("entity").key,issueId:o.id,issueEditorOptions:p,projectId:o.get("projectId"),projectKey:o.get("projectKey"),projectType:o.get("projectType")};if(p&&p.loadReason==="issues-cache-refresh"){this.trigger("editorLoadedFromCache",q)}else{this.trigger("editorLoaded",q)}},fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},saveSuccess:function(o){this.simpleIssueList.refreshIssue(o.issueId);this.trigger("editor:saveSuccess",{event:o.issueId,savedFieldIds:o.savedFieldIds,savedFieldTypes:o.savedFieldTypes,duration:o.duration})},editField:function(o){this.trigger("editor:editField",o)},editFieldCancel:function(o){this.trigger("editor:editFieldCancel",o)},linkToIssue:function(o){this.trigger("linkToIssue",o)},refineViewer:function(o){o.preventDefault();this.updateIssueComponent(o.query)},linkInErrorMessage:function(o){o.preventDefault();this.simpleIssueList.selectIssue(o.issueData.id)},individualPanelRendered:function(o){this.trigger("individualPanelRendered",o)}})},_buildSimpleIssueList:function(){this.simpleIssueList=new d({baseURL:this.baseURL,displayInlineIssueCreate:this.options.displayInlineIssueCreate});this.listenTo(this.simpleIssueList,{select:function(l){this.trigger("select",l)},update:function(){this.trigger("list:update")},refresh:function(){this.trigger("list:refresh")},sort:function(l){this.trigger("list:sort",l)},"list:select":function(l){this.trigger("list:select",{id:l.id,key:l.key,absolutePosition:l.absolutePosition,relativePosition:l.relativePosition})},"list:pagination":function(){this.trigger("list:pagination")},"before:loadpage":function(){this.showLoading()},"error:loadpage":function(l){this.hideLoading();this.trigger("error:loadpage",l)},issueCreated:function(l){this.trigger("issueCreated",l)}})},_buildContainerView:function(){this.containerView=this.buildView("containerView",function(){var l=new i();this.listenTo(l,{render:function(){this.getView("layoutView").render();this.getView("emptyView").render();this.getView("loadingView").render();l.$el.prepend(this.getView("layoutView").$el)}});return l})},_buildEmptyView:function(){this.emptyView=this.buildView("emptyView",function(){var l;if(typeof this.options.emptyViewFactory==="function"){l=this.options.emptyViewFactory()}else{l=new a()}this.listenTo(l,{render:function(){this.containerView.$el.append(l.$el);this.adjustSize();this.trigger("empty")}});return l})},_showEmptyView:function(){this.layoutView.$el.detach();this.containerView.$el.empty();this.containerView.showView(this.emptyView);this.adjustSize();this.trigger("empty")},_buildTools:function(){this.tools=new c({showExpand:this.useExpand});this.listenTo(this.tools,{expand:function(){this.trigger("expand")},"pager:next":function(){var l=this.selectNext();this.trigger("pager:next",l)},"pager:previous":function(){var l=this.selectPrevious();this.trigger("pager:previous",l)}})},_buildLayoutView:function(){this.layoutView=this.buildView("layoutView",function(){var l=new j();this.listenTo(l,{render:function(){l.issueComponent._ensureElement();this.issueComponent.setContainer(l.issueComponent.$el);l.issuesList._ensureElement();this.simpleIssueList.show(l.issuesList.$el);l.tools._ensureElement();this.tools.show(l.tools.$el)},resize:function(){this.adjustSize()}});return l})},_buildLoadingView:function(){this.loadingView=this.buildView("loadingView",function(){return new h()})},_buildComponents:function(){this._buildIssueComponent();this._buildSimpleIssueList();this._buildTools()},_buildViews:function(){this._buildLayoutView();this._buildEmptyView();this._buildLoadingView();this._buildContainerView();this.containerView.render()},initialize:function(l){this.baseURL=l.baseURL;this.useExpand=l.useExpand||false;this._buildComponents();this._buildViews()},_showLoadingView:function(){this.containerView.showLoading(this.loadingView)},_hideLoadingView:function(){this.containerView.hideLoading(this.loadingView)},_showLayoutView:function(){this.emptyView.$el.detach();this.containerView.showView(this.layoutView);this.layoutView.showDraggable();this.adjustSize()},show:function(l){l.replaceWith(this.containerView.$el);return this.containerView.$el},onDestroy:function(){this.tools.destroy();this.issueComponent.close();this.simpleIssueList.destroy();g.ViewManager.prototype.onDestroy.call(this)},showLoading:function(){this._showLoadingView()},hideLoading:function(){this._hideLoadingView()},load:function(l,m){if(this.searchResults){this.stopListening(this.searchResults);delete this.searchResults}this.searchResults=l;this.listenTo(this.searchResults,{issueDeleted:function(){if(!this.searchResults.length){this._showEmptyView()}},"select selectIssueNotInList":function(n){this.showLoading();this._loadIssueInViewerComponent({id:n.id,key:n.get("key")})}});if(this.searchResults.isEmptySearch()){this._showEmptyView()}else{this.simpleIssueList.load(this.searchResults,m);this.tools.load(this.searchResults);this._showLayoutView()}this.trigger("list:render")},adjustSize:function(){k.defer(k.bind(function(){if(this.getView("layoutView")){this.simpleIssueList.adjustSize();this.getView("layoutView").maximizeDetailPanelHeight();this.issueComponent.applyResponsiveDesign();this.getView("layoutView").updateDraggable()}if(this.getView("emptyView")){var m=this.getView("emptyView").$el;var l=m.length&&m.offset().top;m.css("height",window.innerHeight-l)}},this))},refreshIssue:function(l){this.simpleIssueList.refreshIssue(l);return this.issueComponent.refreshIssue()},removeIssue:function(l){this.showLoading();return this.simpleIssueList.removeIssue(l).always(k.bind(function(){this.hideLoading()},this)).done(k.bind(function(m){if(m===0){this._showEmptyView()}},this))},getActiveIssueId:function(){return this.issueComponent.getIssueId()},getActiveIssueKey:function(){return this.issueComponent.getIssueKey()},getActiveProjectId:function(){return this.issueComponent.getProjectId()},getActiveProjectKey:function(){return this.issueComponent.getProjectKey()},getActiveProjectType:function(){return this.issueComponent.getProjectType()},selectNext:function(){return this.simpleIssueList.selectNext()},selectPrevious:function(){return this.simpleIssueList.selectPrevious()},updateIssueComponent:function(l){this.showLoading();this.listenToOnce(this.issueComponent,"loadComplete",function(){this.hideLoading()});this.issueComponent.updateIssueWithQuery(l)},isLoading:function(){return this.issueComponent.isCurrentlyLoading()},hasSavesInProgress:function(){if("hasSavesInProgress" in this.issueComponent){return this.issueComponent.hasSavesInProgress()}else{return false}},canDismissComment:function(){return this.issueComponent.canDismissComment()},getEditorFields:function(){if("getFields" in this.issueComponent){return this.issueComponent.getFields()}else{return undefined}},abortPending:function(){return this.issueComponent.abortPending()},beforeHide:function(){return this.issueComponent.beforeHide()},beforeShow:function(){return this.issueComponent.beforeShow()},removeIssueMetadata:function(){return this.issueComponent.removeIssueMetadata()},editField:function(l){if("editField" in this.issueComponent){return this.issueComponent.editField(l)}},focusList:function(){this.simpleIssueList.focus()},focusEditor:function(){this.issueComponent.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:jira-projects-backbone-core', location = 'lib/backbone.js' */
define("jira-projects-backbone",["jquery","underscore","atlassian/libs/factories/backbone-1.0.0","jira/backbone-queryparams"],function(e,b,a,c){var d=a(b,e);c(d);return d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
define("jira/projects/libs/marionette-mixins",[],function(){return function a(d,f){function e(i,h){var g=this;var j=d.defaults({},h||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true;g.trigger(i+":prevented",this)}});this.trigger(i,j);return j}function c(h,g){var i=this.triggerPreventable(h,g);if(i.isPrevented){g.preventDefault()}}d.extend(f.View.prototype,{unwrapTemplate:function b(){if(this.$el.parent().length){var g=this.$el.children();this.$el.replaceWith(g);this.setElement(g)}else{this.setElement(this.$el.children())}},triggerPreventable:e,retriggerPreventable:c});d.extend(f.Controller.prototype,{triggerPreventable:e,retriggerPreventable:c});f.ViewManager=f.Controller.extend({constructor:function(){f.Controller.apply(this,arguments);this.views={}},hideView:function(h){var g=this.views[h];if(g){this.stopListening(g);if(!g.isDestroyed){g.destroy()}delete this.views[h]}},showView:function(i,h){var g=this.buildView(i,h);g.render()},buildView:function(i,h){var g=this.views[i];if(!g){g=h.call(this);this.listenTo(g,"destroy",function(){this.hideView(i)});this.views[i]=g}return g},getView:function(g){return this.views[g]}});return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["jira-projects-backbone","underscore","atlassian/libs/factories/marionette-2.1.0","jira/projects/libs/marionette-mixins"],function(e,b,c,a){var d;d=c(b,e);d=a(b,d);return d});AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9, hideSelectedItem: opt_data.hideSelectedItem});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var itemList19 = opt_data.items;
    var itemListLen19 = itemList19.length;
    for (var itemIndex19 = 0; itemIndex19 < itemListLen19; itemIndex19++) {
      var itemData19 = itemList19[itemIndex19];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData19, hideSelectedItem: opt_data.hideSelectedItem});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + '>' + ((opt_data.item.link) ? '<a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + soy.$$escapeHtml(opt_data.item.link) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>' : '<a ' + ((! opt_data.hideSelectedItem) ? 'class="aui-dropdown2-radio' + ((opt_data.item.selected) ? ' checked' : '') + '"' : '') + ' data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button aui-button-link aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="menu" aria-haspopup="true">' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.js' */
(function(){var a=JIRA.Projects.Subnavigator.Templates;define("jira/projects/components/subnavigator/templates",[],function(){return a})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
define("jira/projects/components/subnavigator/views/content",["jira/projects/components/subnavigator/templates","underscore","jira/projects/libs/marionette","jquery"],function(b,a,d,c){return d.ItemView.extend({template:b.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600;this.hideSelectedItem=a.has(this.options,"hideSelectedItem")?this.options.hideSelectedItem:true},_hideTooltips:function(){clearTimeout(this.tooltipTimer);c(".tipsy").remove()},events:{"click @ui.item":function(g){this._hideTooltips();var f=c(g.target).attr("data-item-id");this.trigger("click",f)},"mouseenter @ui.item":function(e){this._hideTooltips();this.tooltipTimer=setTimeout(function(){c(e.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var e=this.model.get("selectedItem");var g=this.model.get("itemGroups");var f=this.hideSelectedItem;if(e){g=a.map(g,function(h){if(f){return a.reject(h,function(i){return i.id===e.id})}else{return a.map(h,function(j){var i=a.clone(j);if(i.id===e.id){i.selected=true}return i})}})}return{itemGroups:g,hideSelectedItem:f,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this._hideTooltips();c(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
define("jira/projects/components/subnavigator/views/trigger",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
define("jira/projects/components/subnavigator/views/static-trigger",["jira/projects/components/subnavigator/views/trigger"],function(a){return a.extend({serializeData:function(){return{label:this.options.label,renderAsButton:true,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this.$el.removeClass("subnav-trigger")}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
define("jira/projects/components/subnavigator/views/title",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.title,serializeData:function(){var c=this.model.get("selectedItem");return{title:c.label}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
define("jira/projects/components/subnavigator/entities/items",["underscore","jira-projects-backbone"],function(a,b){return b.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return a.isEmpty(this.getAllItems())},selectItem:function(d){var c=this.getAllItems();this.set("selectedItem",a.find(c,function(e){return e.id===d})||a.first(c))},getAllItems:function(){return a.flatten(this.get("itemGroups"))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
define("jira/projects/components/subnavigator/subnavigator",["jira/projects/components/subnavigator/views/trigger","jira/projects/components/subnavigator/views/title","jira/projects/components/subnavigator/views/static-trigger","jira/projects/components/subnavigator/views/content","jira/projects/components/subnavigator/entities/items","jira/projects/libs/marionette","jira/util/browser","underscore","jquery"],function(h,e,a,b,c,f,d,g,i){return f.Controller.extend({_shouldShow:function(){return !this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.options.changeViewText){var j=this.model.getAllItems().length;return j>1}else{return true}},_sanitizeItems:function(){var j=this.options.itemGroups;if(j&&j[0]){if(!g.isArray(j[0])){return[j]}}return j},_buildModel:function(){this.model=new c({itemGroups:this._sanitizeItems()});this.model.selectItem(this.options.selectedItem);this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){this.titleView=new e({model:this.model});this.titleView.setElement(i(this.options.titlePlaceholder))},_buildTriggerView:function(){if(this.options.changeViewText){this.triggerView=new a({model:this.model,id:this.options.id,label:this.options.changeViewText})}else{this.triggerView=new h({model:this.model,id:this.options.id})}this.triggerView.setElement(i(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new b({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem});this.contentView.setElement(i(this.options.contentPlaceholder));this.listenTo(this.contentView,"click",function(l){this.model.selectItem(l);var k=this.model.get("selectedItem");var j=this.triggerPreventable("itemSelected",{item:k});if(j.isPrevented){return}if(k.link){d.reloadViaWindowLocation(k.link)}}.bind(this))},initialize:function(){this._buildModel();if(this._shouldShow()){this._buildTriggerView();this._buildContentView();if(this.options.titlePlaceholder){this._buildTitleView()}}},show:function(){if(this._shouldShow()){if(this._shouldShowTriggerView()){this.triggerView.render();this.contentView.render()}if(this.titleView){this.titleView.render()}}},selectItem:function(j){if(this._shouldShow()){this.model.selectItem(j)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator-namespaces.js' */
AJS.namespace("JIRA.Projects.Subnavigator",null,require("jira/projects/components/subnavigator/subnavigator"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Content",null,require("jira/projects/components/subnavigator/views/content"));AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger",null,require("jira/projects/components/subnavigator/views/static-trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Title",null,require("jira/projects/components/subnavigator/views/title"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger",null,require("jira/projects/components/subnavigator/views/trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items",null,require("jira/projects/components/subnavigator/entities/items"));AJS.namespace("JIRA.Projects.Subnavigator.Templates",null,require("jira/projects/components/subnavigator/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'page/projects-api.js' */
define("jira/api/projects",["wrm/data"],function(d){var a=d.claim("project-key");var c=d.claim("project-id");var b=d.claim("project-name");var e=d.claim("project-type");return{getCurrentProjectId:function(){return c},getCurrentProjectKey:function(){return a},getCurrentProjectName:function(){return b},getCurrentProjectType:function(){return e}}});AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:apis', location = 'js/apis/projects.js' */
define("jira/projectissuenavigator/apis/projects",["jira/api/projects"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-uri', location = 'js/libs/uri.js' */
define("jira/projectissuenavigator/libs/uri",["require"],function(a){return a("atlassian/libs/uri-1.14.1")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-underscore', location = 'js/libs/underscore.js' */
define("jira/projectissuenavigator/libs/underscore",["require"],function(a){return a("jira/components/libs/underscore")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-marionette', location = 'js/libs/marionette.js' */
define("jira/projectissuenavigator/libs/marionette",["require"],function(a){return a("jira/components/libs/marionette-2.1.0")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-ajshelper', location = 'js/libs/ajshelper.js' */
define("jira/projectissuenavigator/libs/ajshelper",[],function(){var a=window.AJS;return{format:a.format.bind(a),trigger:a.trigger.bind(a)}});;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:metrics', location = 'content/js/util/metrics.js' */
define("jira/issues/navigator/metrics",["internal/browser-metrics"],function(a){function b(c,e){var f=document.querySelectorAll(c);for(var d=0;d<f.length;d++){f[d].classList.add(e)}}return{notifyIssueView:function(d){d=Boolean(d);var e="#key-val";var c=".issue-body-content:not(.browser-metrics-stale)";if(!d){b(c,"browser-metrics-stale")}a.start({isInitial:d,key:"jira.issue.view",ready:[{selector:e,requireUpdate:false},{selector:c,requireUpdate:false}]})},notifyIssueNavList:function(){var c=".navigator-content";var d="#issuetable:not(.browser-metrics-stale), .error:not(.browser-metrics-stale), .no-results-hint:not(.browser-metrics-stale), #errorPageContainer:not(.browser-metrics-stale)";b(d,"browser-metrics-stale");a.start({key:"jira.issue.nav-list",ready:[{selector:c,requireUpdate:false},{selector:d,requireUpdate:false}]})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issuesearch.soy' */
// This file was automatically generated from issuesearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Issues.Projects.IssueSearch.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Issues == 'undefined') { JIRA.Issues = {}; }
if (typeof JIRA.Issues.Projects == 'undefined') { JIRA.Issues.Projects = {}; }
if (typeof JIRA.Issues.Projects.IssueSearch == 'undefined') { JIRA.Issues.Projects.IssueSearch = {}; }
if (typeof JIRA.Issues.Projects.IssueSearch.Templates == 'undefined') { JIRA.Issues.Projects.IssueSearch.Templates = {}; }


JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState = function(opt_data, opt_ignored) {
  return '' + ((require("jira/featureflags/feature-manager").isFeatureEnabled('jira.spectrum.m1')) ? '<div class="no-results no-results-message"><h2>' + soy.$$escapeHtml('No issues were found to match your search') + '</h2><p class="no-results-hint">' + soy.$$escapeHtml('Try modifying your filter or creating a new issue below.') + '</p></div>' : '<div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>' + soy.$$escapeHtml('No issues were found to match your search') + '</h3><p class="no-results-hint">' + soy.$$escapeHtml('Try modifying your filter or creating a new issue below.') + '</p></div>');
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState';
}


JIRA.Issues.Projects.IssueSearch.Templates.emptyState = function(opt_data, opt_ignored) {
  return '<div><div class="navigator-content empty-results">' + soy.$$filterNoAutoescape(opt_data.content) + '<div class="inline-issue-create-container"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.emptyState.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.emptyState';
}


JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag = function(opt_data, opt_ignored) {
  var output = '';
  var link__soy22 = '<a class="issue-created-key issue-link" data-issue-key="' + opt_data.issueKey + '" href="' + "" + '/projects/' + opt_data.projectKey + '/issues/' + opt_data.issueKey + '">' + opt_data.issueKey + ' - ' + opt_data.summary + '</a>';
  output += AJS.format('{0} {1} has been successfully created.','Issue',link__soy22);
  return output;
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag';
}


JIRA.Issues.Projects.IssueSearch.Templates.issueSearch = function(opt_data, opt_ignored) {
  return '<div class="issue-search"><header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-group aui-group-split"><div class="aui-item subnavigation"><h1><span id="issues-subnavigation-title" class="subnavigator-title"></span><span id="issues-subnavigation-trigger"></span></h1><span id="issues-subnavigation-content"></span></div><div class="aui-item"><div id="full-issue-navigator"><a href="' + soy.$$escapeHtml("") + '/issues/">' + soy.$$escapeHtml('View all issues and filters') + '</a></div></div></div></div></header><div class="details-layout"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.issueSearch.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.issueSearch';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issueview.soy' */
// This file was automatically generated from issueview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Issues.Projects.IssueView.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Issues == 'undefined') { JIRA.Issues = {}; }
if (typeof JIRA.Issues.Projects == 'undefined') { JIRA.Issues.Projects = {}; }
if (typeof JIRA.Issues.Projects.IssueView == 'undefined') { JIRA.Issues.Projects.IssueView = {}; }
if (typeof JIRA.Issues.Projects.IssueView.Templates == 'undefined') { JIRA.Issues.Projects.IssueView.Templates = {}; }


JIRA.Issues.Projects.IssueView.Templates.issueView = function(opt_data, opt_ignored) {
  return '<div class="issue-view"><div class="navigation-tools"><div class="pager-container"></div><div class="collapse-container"></div></div><div class="issue-container">' + ((opt_data.serverRenderedViewIssue) ? JIRA.Components.IssueViewer.Templates.layout(opt_data) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueView.Templates.issueView.soyTemplateName = 'JIRA.Issues.Projects.IssueView.Templates.issueView';
}


JIRA.Issues.Projects.IssueView.Templates.issueCollapse = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<button title="' + soy.$$escapeHtml(AJS.format('Collapse issue ( {0} )',opt_data.collapseShortcutKey ? opt_data.collapseShortcutKey : '')) + '" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">' + soy.$$escapeHtml(AJS.format('Collapse issue ( {0} )',opt_data.collapseShortcutKey ? opt_data.collapseShortcutKey : '')) + '</span></button>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueView.Templates.issueCollapse.soyTemplateName = 'JIRA.Issues.Projects.IssueView.Templates.issueCollapse';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/ProjectIssueNavigator.js' */
define("jira/projectissuenavigator",["require"],function(h){var s=h("jira/projectissuenavigator/libs/underscore");var j=h("jira/projectissuenavigator/services/analytics");var o=h("jira/projectissuenavigator/services/api");var t=h("jira/projectissuenavigator/services/filters");var c=h("jira/projectissuenavigator/services/dialogscleaner");var l=h("jira/projectissuenavigator/pages/issuesearch");var n=h("jira/projectissuenavigator/pages/issueview");var k=h("jquery");var f=h("jira/projectissuenavigator/libs/marionette");var e=h("jira/projectissuenavigator/services/metrics");var q=h("jira/projectissuenavigator/services/router");var m=h("jira/projectissuenavigator/entities/navigatorstate");var p=h("jira/projectissuenavigator/services/traces");var d=h("jira/projectissuenavigator/services/jiraevents");var a=h("wrm/data");var g=h("jira/components/search");var r=h("jira/projectissuenavigator/services/keyboardshortcuts");var i=h("jira/projectissuenavigator/services/urlhelper");var b=h("jira/projectissuenavigator/services/browser");return f.Object.extend({_initializedFromPageLoad:true,initialize:function(u){u=s.defaults({},u,{el:k("<div></div>"),canCreateIssues:false,emptyViewContent:""});this.el=u.el;this.canCreateIssues=u.canCreateIssues;this.emptyViewContent=u.emptyViewContent},_buildSearch:function(){this.searchService=new g();var w=a.claim("com.atlassian.jira.jira-issue-navigator-components:search-data");if(w){var u=this.searchService.setPreloadedData(w);var v=a.claim("com.atlassian.jira.jira-issue-navigator-components:search-results");if(v){u.setPreloadedData(v)}this.state.set("searchResults",u)}},_buildIssueView:function(){this.issueView=new n({state:this.state,search:this.searchService,showCollapse:this.state.has("filter")});this.listenTo(this.issueView,{collapse:function(u){e.startIssueSearch();j.collapseIssue({source:u});this._showIssueSearch()},linkToIssue:function(){e.startIssueView()},issueDelete:function(w){e.startIssueSearch();var v=this.state.get("searchResults");if(!v){this._destroyIssueView();this._showIssueSearch()}else{var u=v.get(w.issueId);v.removeAndUpdateSelectionIfNeeded(u).done(function(){if(v.selected){this.state.set("issue",v.selected.get("key"))}this._destroyIssueView();this._showIssueSearch()}.bind(this))}},updateUrl:function(u){this.router.updateURL({project:this.state.get("project"),issue:u.issueKey,filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad,keepParameters:this._initializedFromPageLoad,isIssueView:true});this._initializedFromPageLoad=false},editorFieldsLoaded:this._notifyIssueViewEditorFieldsLoaded.bind(this),loadError:function(u){u=u||[];this.jiraEvents.triggerRefreshIssuePage(u.issueId)},individualPanelRendered:function(u){this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(u)},viewRendered:function(u,v){this.jiraEvents.triggerNewContentAddedFromPageLoad(u);this.jiraEvents.triggerRefreshToggleBlocks(v)},panelRendered:function(w,v,u){this.jiraEvents.triggerPanelRefreshed(w,v,u)}})},_buildKeyboardShortuts:function(){var u=new r();this.listenTo(u,{focusIssueList:function(){if(this.issueSearch){this.issueSearch.focusIssueList()}},focusIssueEditor:function(){if(this.issueSearch){this.issueSearch.focusIssueEditor()}else{if(this.issueView){this.issueView.focusIssueEditor()}}}})},_notifyIssueViewEditorLoadedAndInThePage:function(u){u=u||{};this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueView.el);if(!u.existingMarkup){this.jiraEvents.triggerRefreshIssuePage(this.issueView.getIssueId())}p.traceEditorLoaded();j.triggerProjectNavViewIssue({issueId:this.issueView.getIssueId(),issueKey:this.issueView.getIssueKey(),projectId:this.issueView.getProjectId(),projectKey:this.issueView.getProjectKey(),projectType:this.issueView.getProjectType()});e.endIssueView()},_notifyIssueViewEditorFieldsLoaded:function(){p.traceEditorFieldsLoaded()},_notifyIssueSearchEditorLoadedAndInThePage:function(u){u=u||{};this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueSearch.el);if(!u.issueRefreshedEvent){this.jiraEvents.triggerRefreshIssuePage(this.issueSearch.getIssueId())}j.triggerProjectNavViewIssue({issueId:this.issueSearch.getIssueId(),issueKey:this.issueSearch.getIssueKey(),projectId:this.issueSearch.getProjectId(),projectKey:this.issueSearch.getProjectKey(),projectType:this.issueSearch.getProjectType()});p.traceEditorLoaded()},_showIssueView:function(u){this._buildIssueView();o.useImplementation(this._getAPIImplementation(this.issueView));function v(w){this.listenTo(this.issueView,{editorLoaded:this._notifyIssueViewEditorLoadedAndInThePage.bind(this)});w=s.defaults({},w,{existingMarkup:false});this._notifyIssueViewEditorLoadedAndInThePage(w);this.issueView.adjustSize();this.issueView.focusIssueEditor()}if(u.existingMarkup===true){this.issueView.attach(this.el.find(".issue-view"));this.issueView.loadFromPage(u.issueKey).always(function(){v.call(this,{existingMarkup:true})}.bind(this))}else{this.issueView.render();this.issueView.load(u.issueKey).always(function(){this._activateIssueViewPage();v.call(this,{existingMarkup:false})}.bind(this))}},_destroyIssueView:function(){if(this.issueView){this.issueView.destroy();this.stopListening(this.issueView);delete this.issueView}},_buildIssueSearch:function(){this.issueSearch=new l({canCreateIssues:this.canCreateIssues,emptyViewContent:this.emptyViewContent,state:this.state,search:this.searchService});this.listenTo(this.issueSearch,{linkToIssue:function(u){e.startIssueView();this.state.unset("searchResults");this.state.unset("filter");this._showIssueView({issueKey:u.issueKey})},expand:function(u){e.startIssueView();j.expandIssue({source:u});this._stateBeforeExpand=new m({filter:this.state.get("filter"),searchResults:this.state.get("searchResults"),issue:this.state.get("issue")});this._showIssueView({issueKey:this.issueSearch.getIssueKey()})},filterSelected:function(u){j.filterSelect(u)},goToFullIssueNavigator:function(){j.goToFullIssueNavigator()},issueSelectedInList:function(u){j.issueSelectedInList(u)},manageFilters:function(){j.manageFilters()},"list:update":function(){p.traceListLoaded()},editorLoaded:function(u){this._notifyIssueSearchEditorLoadedAndInThePage(u)},editorFieldsLoaded:function(){this._notifyIssueViewEditorFieldsLoaded()},editorError:function(){p.traceEditorError()},"pager:next":function(u){j.pager("next",u)},"pager:previous":function(u){j.pager("previous",u)},"issue:select issue:empty":function(){this.router.updateURL({project:this.state.get("project"),issue:this.state.get("issue"),filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad});this._initializedFromPageLoad=false},"editor:saveSuccess":function(u){j.editorFieldSaved(u)},"editor:editField":function(u){j.editFieldStarted(u)},"editor:editFieldCancel":function(u){j.editFieldCancelled(u)}})},_activateIssueSearchPage:function(){this._destroyIssueView();this._activatePage(this.issueSearch)},_activateIssueViewPage:function(){this._destroyIssueSearch();this._activatePage(this.issueView)},_showIssueSearch:function(u){u=u||{};if(!this.issueSearch){this._buildIssueSearch();this._activateIssueSearchPage();o.useImplementation(this._getAPIImplementation(this.issueSearch));this.issueSearch.show()}if(this.state.has("searchResults")){this.issueSearch.load()}else{if(this._stateBeforeExpand){this.state.set({searchResults:this._stateBeforeExpand.get("searchResults"),issue:this._stateBeforeExpand.get("issue"),filter:this._stateBeforeExpand.get("filter")});delete this._stateBeforeExpand;this.issueSearch.load()}else{this.issueSearch.search({filter:u.filter||t.getDefaultFilterId(),issue:u.issue||null,orderby:u.orderby||null,startIndex:u.startIndex||null})}}},_destroyIssueSearch:function(){if(this.issueSearch){this.issueSearch.destroy();this.stopListening(this.issueSearch);delete this.issueSearch}},_activatePage:function(u){this.el.find(".content").empty().append(u.el)},_scrollToAnchor:function(){var u=i.getAnchor();b.scrollIntoView(u)},_buildRouter:function(){this.router=new q();this.listenTo(this.router,{"route:browse:initial":function(u){e.startIssueViewFromPageLoad();this.state.update(u);this._showIssueView({existingMarkup:a.claim("com.atlassian.jira.jira-projects-issue-navigator:server-rendered"),issueKey:u.issue});this._scrollToAnchor()},"route:browse":function(u){e.startIssueView();if(!u.filter){this.state.unset("searchResults")}this.state.update(u);this._showIssueView({existingMarkup:false,issueKey:u.issue});c.clean();this._scrollToAnchor()},"route:issues:initial":function(u){e.startIssueSearchFromPageLoad();u.filter=t.sanitiseFilter(u.filter);this.state.update(u);this._showIssueSearch(u);j.filterSelect({filterId:u.filter,source:"url"})},"route:issues":function(u){e.startIssueSearch();this.state.unset("searchResults");u.filter=t.sanitiseFilter(u.filter);this.state.update(u);this._showIssueSearch(u);j.filterSelect({filterId:u.filter,source:"url"});c.clean()}})},_getAPIImplementation:function(v){var w=this;var u={viewSelectedIssue:function(){if(!w.issueView){e.startIssueView();w.state.unset("searchResults");w.state.unset("filter");w._showIssueView({issueKey:w.issueSearch.getIssueKey()})}},returnToSearch:function(){if(!w.issueSearch){e.startIssueSearch();w._showIssueSearch({issue:w.state.get("issue")})}},isFullScreenIssueVisible:function(){return Boolean(w.issueView)},isQueryValid:function(){return true}};return s.extend({},o.getDefaultImplementation(),v.getAPIImplementation(),u)},start:function(){k(document.body).addClass("page-type-split page-issue-navigator");this._buildRouter();this.state=new m();this.jiraEvents=new d();this._buildSearch();this._buildKeyboardShortuts();t.initialize();o.init();this.router.start();var u;k(window).on("scroll resize",s.bind(function(){if(!u){u=requestAnimationFrame(s.bind(function(){this.adjustSize();u=null},this))}},this));this.adjustSize()},adjustSize:function(){if(this.issueView){this.issueView.adjustSize()}if(this.issueSearch){this.issueSearch.adjustSize()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Analytics.js' */
define("jira/projectissuenavigator/services/analytics",function(){var a=require("jira/projectissuenavigator/libs/ajshelper");return{filterSelect:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.select",data:{filterId:b.filterId,source:b.source}})},goToFullIssueNavigator:function(){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.load.full.issue.nav"})},expandIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.expand",data:{source:b.source}})},collapseIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.collapse",data:{source:b.source}})},issueSelectedInList:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.select.issue",data:{issueKey:b.key,source:"list",sameProject:true}})},triggerProjectNavViewIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.view.issue",data:{issueId:b.issueId,projectId:b.projectId,projectType:b.projectType,issueMatchesProjectContext:b.issueKey==null?false:b.issueKey.indexOf(b.projectKey+"-")===0}})},manageFilters:function(){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.manage"})},pager:function(c,b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.pager",data:{current:b.current,total:b.total,direction:c}})},editorFieldSaved:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit",data:{issueId:b.issueId,savedFieldIds:b.savedFieldIds,savedFieldTypes:b.savedFieldTypes,source:"jira.projectissuenav.global"}})},editFieldStarted:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit.start",data:{issueId:b.issueId,fieldId:b.fieldId,fieldType:b.fieldType,source:"jira.projectissuenav.global"}})},editFieldCancelled:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit.cancel",data:{issueId:b.issueId,fieldId:b.fieldId,fieldType:b.fieldType,source:"jira.projectissuenav.global"}})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/API.js' */
define("jira/projectissuenavigator/services/api",["require"],function(d){var c=d("jira/projectissuenavigator/libs/underscore");var a=function(){};var b={nextIssue:a,previousIssue:a,getActiveIssueId:a,getActiveIssueKey:a,refreshActiveIssue:a,refreshIssue:a,editField:a,getFields:a,isSaving:a,isLoading:a,hasAccessibleIssue:a,showLoadError:a,waitForSavesToComplete:a,viewSelectedIssue:a,returnToSearch:a,focusSearch:a,toggleFilterPanel:a,isQueryValid:a,isFullScreenIssueVisible:a,switchLayouts:a,openFocusShifter:a,toggleFullscreenIssue:a};var f=b;function h(i){var j={};i.forEach(function(k){j[k]=function(){return f[k].apply(f,arguments)}});return j}function g(){var i=h(["nextIssue","previousIssue","getActiveIssueId","getActiveIssueKey","refreshActiveIssue","refreshIssue","editField","getFields","isSaving","isLoading","hasAccessibleIssue","showLoadError","waitForSavesToComplete","viewSelectedIssue","returnToSearch","focusSearch","toggleFilterPanel","isQueryValid","isFullScreenIssueVisible","switchLayouts","openFocusShifter","toggleFullscreenIssue"],f);return i}function e(j){var i={viewSelectedIssue:function(){j.viewSelectedIssue()},nextIssue:function(){j.nextIssue()},returnToSearch:function(){j.returnToSearch()},focusSearch:function(){j.focusSearch()},toggleFilterPanel:function(){j.toggleFilterPanel()},isQueryValid:function(){return j.isQueryValid()},isFullScreenIssueVisible:function(){return j.isFullScreenIssueVisible()},switchLayouts:function(){j.switchLayouts()},openFocusShifter:function(){j.openFocusShifter()},waitForSavesToComplete:function(){j.waitForSavesToComplete()},prevIssue:function(){j.previousIssue()},getSelectedIssueId:function(){return j.getActiveIssueId()},getSelectedIssueKey:function(){return j.getActiveIssueKey()},refreshSelectedIssue:function(){return j.refreshActiveIssue()},editFieldOnSelectedIssue:function(k){return j.editField(k)},getFieldsOnSelectedIssue:function(){return j.getFields()},hasSavesInProgress:function(){return j.isSaving()},isCurrentlyLoadingIssue:function(){return j.isLoading()},isSelectedIssueAccessible:function(){return j.hasAccessibleIssue()},issueIsVisible:function(){return j.hasAccessibleIssue()},showInlineIssueLoadError:function(){return j.showLoadError()},updateIssue:function(k){k=k||{};return j.refreshIssue(k.id)},toggleFullscreenIssue:function(){j.toggleFullscreenIssue()}};AJS.namespace("JIRA.Issues.Api",null,i)}return{getDefaultImplementation:function(){return c.clone(b)},init:function(){var i=g();e(i);AJS.namespace("JIRA.API.IssueSearch",null,i)},useImplementation:function(i){f=i}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Browser.js' */
define("jira/projectissuenavigator/services/browser",function(){return{getCurrentUrl:function(){return document.location.href},hasPushState:function(){return !!(window.history&&window.history.pushState)},locationReplace:function(a){return window.location.replace(a)},locationAssign:function(a){return window.location.assign(a)},getDocument:function(){return document},scrollIntoView:function(b){var a=document.getElementById(b);if(a){a.scrollIntoView()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Filters.js' */
define("jira/projectissuenavigator/services/filters",["require"],function(d){var e=d("wrm/context-path")();var j=d("jira/projectissuenavigator/libs/underscore");var g=d("wrm/data");var c=d("jira/projectissuenavigator/libs/ajshelper");var b=d("jira/projectissuenavigator/apis/projects");var a;var l;var k;var f;var i;function h(m){return j.indexBy(j.flatten(m),"id")}return{initialize:function(){a=g.claim("com.atlassian.jira.jira-projects-issue-navigator:generic-filters")||[];l=g.claim("com.atlassian.jira.jira-projects-issue-navigator:project-filters")||[];k=g.claim("com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters");i=g.claim("com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority")||[this.getAllIssuesFilterId()];f=b.getCurrentProjectId()},getExtraLinks:function(){return[{id:"manage",label:"Manage Filters",link:e+"/secure/ManageFilters.jspa?searchShareType=project&projectShare="+f+"&Search=Search&filterView=search"}]},getAvailableFilters:function(m){var n=[];if(a&&a.length){n.push(a)}if(l&&l.length){n.push(l);if(m&&k){n.push(this.getExtraLinks())}}return n},getDefaultFilterId:function(){return j.find(i,j.bind(function(m){return !!j.findWhere(j.flatten(this.getAvailableFilters()),{id:m})},this))},getJQL:function(n,m,p){var o=j.findWhere(j.flatten(this.getAvailableFilters()),{id:n});if(o){return c.format(o.jql,m,p||o.defaultOrderby)}},getAllIssuesFilterId:function(){return"allissues"},sanitiseFilter:function(m){if(j.some(j.flatten(this.getAvailableFilters()),function(n){return n.id===m})){return m}return this.getDefaultFilterId()},filterSupportsInlineIssueCreate:function(m){var o=h(this.getAvailableFilters(false));var n=o[m];return Boolean(n&&n.supportsInlineIssueCreate)}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsOverrider.js' */
define("jira/projectissuenavigator/services/dialogsoverrider",["require"],function(d){var i=d("jira/dialog/dialog");var k=d("jira/util/events");var c=d("jira/dialog/form-dialog");var l=d("jquery");var f=d("jira/dialog/labels-dialog");var h=d("jira/projectissuenavigator/libs/marionette");function a(m){return function(){var n=i.current;m.trigger("quickEdit",{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})}}function b(m){return function(){var n=i.current;m.trigger("quickCreateSubtask",{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})}}function g(m){return(typeof m.isIssueDialog==="boolean"&&m.isIssueDialog)||(l.isFunction(m.isIssueDialog)&&m.isIssueDialog())}function j(n,o,m){return function(r,q,p){if(p){p.issueId=o(p);p.issueKey=m(p);if(g(p)&&p.options.id!=="clone-issue-dialog"){p._performRedirect=function(){this.redirected=false};p.options.onDialogFinished=function(){p.hide();var s;if(p.options.id==="delete-issue-dialog"){s="issueDelete"}else{s="issueUpdate"}n.trigger(s,{issueId:p.issueId,issueKey:p.issueKey,message:p.options.issueMsg||"thanks_issue_updated"})}}}}}function e(){return function(){l("body").css("overflow","")}}return h.Object.extend({_overrideLabelsDialogSubmitResponse:function(){this.oldLabelsDialogSubmitReponse=f.prototype._handleSubmitResponse;f.prototype._handleSubmitResponse=function(){return c.prototype._handleSubmitResponse.apply(this,arguments)};this.currentLabelsDialogSubmitResponse=f.prototype._handleSubmitResponse},_restoreLabelsDialogSubmitResponse:function(){if(f.prototype._handleSubmitResponse!==this.currentLabelsDialogSubmitResponse){return}f.prototype._handleSubmitResponse=this.oldLabelsDialogSubmitReponse},initialize:function(m){this._overrideLabelsDialogSubmitResponse();this.handlerDialogShow=j(this,m.getIssueId,m.getIssueKey);this.handlerDialogHide=e(this,m.getIssueId,m.getIssueKey);k.bind("Dialog.show",this.handlerDialogShow);k.bind("Dialog.hide",this.handlerDialogHide);this.handlerQuickEditSuccess=a(this);k.bind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess);this.handlerQuickCreateSubtaskSuccess=b(this);k.bind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)},destroy:function(){this._restoreLabelsDialogSubmitResponse();k.unbind("Dialog.show",this.handlerDialogShow);k.unbind("Dialog.hide",this.handlerDialogHide);k.unbind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess);k.unbind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsCleaner.js' */
define("jira/projectissuenavigator/services/dialogscleaner",["require"],function(b){var a=b("jira/dialog/dialog");return{clean:function(){if(a.current){a.current.hide()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/FocusShifter.js' */
define("jira/projectissuenavigator/services/focusshifter",["require"],function(e){var g=e("jira/projectissuenavigator/libs/marionette");var f=e("jquery");var d=e("jira/projectissuenavigator/libs/underscore");var c=e("jira/shifter");function b(h){return d.chain(h.models).filter(function(i){return i.id!=="comment"&&i.isEditable()}).map(function(i){return{label:i.getLabel(),value:i.id}}).value()}function a(h){return function(){var j=h.getFields();var i=j?b(j):[];return{id:"edit-fields",name:"Edit Fields",context:h.getIssueKey(),weight:100,getSuggestions:function(){return new f.Deferred().resolve(i)},onSelection:function(k){var l=h.getFields().get(k);h.editField(l)}}}}return g.Object.extend({initialize:function(h){this.provider=a(h);c.register(this.provider)},onDestroy:function(){c.unregister(this.provider)},show:function(){c.show()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/InlineIssueCreate.js' */
define("jira/projectissuenavigator/services/inline-issue-create",["require"],function(a){var b=a("jira/components/inline-issue-create");return b});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/JiraEvents.js' */
define("jira/projectissuenavigator/services/jiraevents",["require"],function(e){var c=e("jira/util/events");var d=e("jira/util/events/types");var b=e("jira/components/issueviewer/eventtypes");var a=e("jira/util/events/reasons");var f=e("jquery");var g=e("jira/projectissuenavigator/libs/marionette");return g.Object.extend({initialize:function(){this.deferredEvents=[];this.isDeferring=true;f(function(){setTimeout(this._drainDeferredEvents.bind(this),0)}.bind(this))},triggerNewContentAddedFromPanelRefreshed:function(h){this.trigger(d.NEW_CONTENT_ADDED,[f(h),a.panelRefreshed])},triggerRefreshIssuePage:function(h){this.trigger(b.ISSUE_REFRESHED,[h])},triggerNewContentAddedFromPageLoad:function(h){this.trigger(d.NEW_CONTENT_ADDED,[f(h),a.pageLoad])},triggerRefreshToggleBlocks:function(h){this.trigger(d.REFRESH_TOGGLE_BLOCKS,[h])},triggerPanelRefreshed:function(j,i,h){this.trigger(b.PANEL_REFRESHED,[j,i,h])},_drainDeferredEvents:function(){this.isDeferring=false;this.deferredEvents.forEach(function(h){this.trigger(h[0],h[1])}.bind(this));this.deferredEvents.length=0},trigger:function(h,i){if(this.isDeferring){this.deferredEvents.push([h,i])}else{c.trigger(h,i)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/KeyboardShortcuts.js' */
define("jira/projectissuenavigator/services/keyboardshortcuts",["require"],function(a){var f=a("jira/projectissuenavigator/services/browser");var i=a("jquery");var h=a("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle");var c=a("jira/projectissuenavigator/libs/marionette");function e(){return i(f.getDocument()).find("div.aui-blanket").length>0}function b(j){return(j.which===i.ui.keyCode.LEFT||j.which===i.ui.keyCode.RIGHT)}function g(){return !h.areKeyboardShortcutsDisabled()}function d(k){if(g()&&!e()&&b(k)){var j=i(k.target);var l=j.is(":not(:input)");if(j==null||l){if(k.which===i.ui.keyCode.LEFT){this.trigger("focusIssueList")}else{if(k.which===i.ui.keyCode.RIGHT){this.trigger("focusIssueEditor")}}}}}return c.Object.extend({initialize:function(){i(f.getDocument()).on("keydown",d.bind(this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/LinksCapturer.js' */
define("jira/projectissuenavigator/services/linkscapturer",["require"],function(b){var c=b("jquery");var a=b("jira/projectissuenavigator/libs/underscore");var d=b("jira/projectissuenavigator/libs/marionette");return d.Object.extend({initialize:function(e){e=e||{};this.el=c(e.el);this.linkHandler=a.bind(function(){this.trigger("linkToFullIssueNavigator")},this);this.linkToFullIssueNavigator()},linkToFullIssueNavigator:function(){this.el.on("click","#full-issue-navigator",this.linkHandler)},destroy:function(){this.el.off("click","#full-issue-navigator",this.linkHandler)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Metrics.js' */
define("jira/projectissuenavigator/services/metrics",["require"],function(a){var b=a("internal/browser-metrics");return{startIssueView:function(){b.start({key:"jira.project.issue.view-issue"})},startIssueSearch:function(){b.start({key:"jira.project.issue.nav-detail"})},startIssueViewFromPageLoad:function(){b.start({key:"jira.project.issue.view-issue",isInitial:true,ready:[{selector:"#key-val",requireUpdate:false},".issue-body-content"]})},startIssueSearchFromPageLoad:function(){b.start({key:"jira.project.issue.nav-detail",isInitial:true})},endIssueView:function(){b.end({key:"jira.project.issue.view-issue"})},endIssueSearch:function(){b.end({key:"jira.project.issue.nav-detail"})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Notifications.js' */
define("jira/projectissuenavigator/services/notifications",["require"],function(b){var c=b("jira/message");var a=b("jira/projectissuenavigator/libs/ajshelper");var d={thanks_issue_updated:"{0} has been updated.",thanks_issue_transitioned:"{0} has been updated.",thanks_issue_assigned:"{0} has been assigned.",thanks_issue_commented:"{0} has been updated with your comment.",thanks_issue_worklogged:"Work has been logged on {0}.",thanks_issue_voted:"Your vote on {0} has been updated.",thanks_issue_watched:"Your watcher status on {0} has been updated.",thanks_issue_moved:"{0} has been moved.",thanks_issue_linked:"The links on {0} have been updated.",thanks_issue_cloned:"{0} has been cloned.",thanks_issue_labelled:"The labels on {0} have been updated.",thanks_issue_deleted:"{0} has been deleted.",thanks_issue_attached:"The file(s) have been attached to {0}."};return{show:function(f,e){var g=d[f||"thanks_issue_updated"];if(g&&e){g=a.format(g,e)}c.showSuccessMsg(g||f,{closeable:true})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Router.js' */
define("jira/projectissuenavigator/services/router",["require"],function(d){var h=d("jira/components/libs/backbone");var f=d("jira/projectissuenavigator/services/urlhelper");var g=d("jira/projectissuenavigator/services/browser");var e=d("jira/util/data/meta");var c=d("wrm/context-path")();var b=d("jira/projectissuenavigator/libs/uri");var a=d("jira/projectissuenavigator/libs/underscore");return h.Router.extend({initialize:function(){this._isFirstLoad=true;this.route(/.*/,function(){var j=f.extractStateFromCurrentUrl();var k={issue:j.issue,filter:j.filter,orderby:j.orderby,startIndex:j.startIndex,project:j.project};var i=(function(l,m){if(this._isFirstLoad){this._isFirstLoad=false;this.trigger(m,k)}else{this.trigger(l,k)}}.bind(this));if(f.isBrowseUrl()){i("route:browse","route:browse:initial")}else{i("route:issues","route:issues:initial")}})},updateURL:function(l){l=l||{};this._updatePermalinkState(l);var j={issue:l.issue,project:l.project,filter:l.filter,orderby:l.orderby};var k=l.isIssueView?f.generateBrowseUrl(j):f.generateUrl(j);var i=new b(k);var n=new b(g.getCurrentUrl());var m=new b({path:n.path(),query:n.query(),fragment:n.fragment()});if(i.equals(m)){return}if(l.keepParameters){i.search(a.extend(m.search(true),i.search(true)));i.hash(m.hash());k=i.toString()}this.navigate(k,{trigger:false,replace:!!l.replaceHistory})},goTo:function(i){i=i||{};g.locationAssign(f.generateUrl({project:i.project,issue:i.issue,filter:i.filter,orderby:i.orderby}))},_getBaseurl:function(){return b.build(a.extend(a.pick(b.parse(g.getCurrentUrl()),"protocol","hostname","port","username","password"),{path:c}))},_getServerBaseurl:function(){var i=e.get("jira-base-url");if(i){return i}return this._getBaseurl()},_updatePermalinkState:function(i){if(i.issue){e.set("viewissue-permlink",new b(this._getServerBaseurl()+"/browse/"+i.issue).normalize().toString())}},start:function(){var i=f.generateRootUrl();var l=g.hasPushState();var k=f.getApplicationUrl();var j=k&&!f.isHashUrl();if(!l&&j){g.locationReplace(i+k.replace(/^\//,"#"));return}h.history.start({root:"",pushState:true})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Traces.js' */
define("jira/projectissuenavigator/services/traces",function(){return{traceListLoaded:function(){JIRA.trace("sidebarissuenavigator.list.loaded");JIRA.trace("jira.search.finished")},traceEditorLoaded:function(){JIRA.trace("sidebarissuenavigator.editor.loaded")},traceEditorFieldsLoaded:function(){JIRA.trace("sidebarissuenavigator.editorfields.loaded")},traceEditorError:function(){JIRA.trace("sidebarissuenavigator.editor.error")},traceIssueViewRender:function(){JIRA.trace("jira.project.issueview.render")},traceIssueUpdated:function(){JIRA.trace("jira.issue.update")}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/URLHelper.js' */
define("jira/projectissuenavigator/services/urlhelper",["require"],function(a){var e=a("wrm/context-path")();var j=a("jira/projectissuenavigator/services/browser");var i=a("jira/projectissuenavigator/libs/uri");function c(l,m){var k=l.search(true).filter;if(k){m.filter=k}else{m.filter=null}}function h(k,m){var l=k.search(true).orderby;if(l){m.orderby=l}else{m.orderby=null}}function d(l,m){var k=l.filename();if(k){m.issue=k}}function b(k,l){var m=k.search(true).startIndex;if(m){l.startIndex=m}else{l.startIndex=null}}function g(k){var l=new i("");if(k.issue){l.filename(k.issue)}if(k.filter){l.setSearch("filter",k.filter)}else{l.removeSearch("filter")}if(k.orderby){l.setSearch("orderby",k.orderby)}else{l.removeSearch("orderby")}return l.toString()}function f(l){var k=new i("");if(l){k.path(e+"/projects/"+l+"/issues")}return k.toString()}return{extractProjectKeyFromCurrentUrl:function(){var l=new i(j.getCurrentUrl()).pathname();var k;if(this.isBrowseUrl(l)){k=l.match(/\/([A-Z0-9]+)\-[0-9]+$/)}else{k=l.match(/\/projects\/([^\/]+?)\/issues/)}if(k){return k[1]}else{return null}},extractIssueKeyFromCurrentUrl:function(){var l=new i(j.getCurrentUrl()).pathname();var k=l.match(/\/([A-Z0-9]+\-[0-9]+)$/);if(k){return k[1]}else{return null}},generateUrl:function(l){var k=f(l.project);var n=g(l);var m=j.hasPushState()?"/":"#";return k+m+n},generateBrowseUrl:function(l){var k=new i("");k.path(e+"/browse/");var m=g(l);return k.toString()+m},extractStateFromCurrentUrl:function(){var k=new i(this.getApplicationUrl());if(this.isHashUrl()){k=new i(k.fragment())}var l={};c(k,l);h(k,l);d(k,l);b(k,l);l.project=this.extractProjectKeyFromCurrentUrl();return l},generateRootUrl:function(k){k=k||this.extractProjectKeyFromCurrentUrl();return f(k)},getApplicationUrl:function(){var k=j.getCurrentUrl();var l=new RegExp(this.isBrowseUrl(k)?"^.*/browse/":"^.*"+this.generateRootUrl()+"");return k.replace(l,"")},isBrowseUrl:function(k){k=k||j.getCurrentUrl();return k.indexOf("/browse/")>-1},isHashUrl:function(){var l=this.getApplicationUrl();var k=l.match(/^#/);return !!k},getAnchor:function(){return new i(j.getCurrentUrl()).fragment()}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/views/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview/views/issue",["require"],function(b){var e=b("jira/projectissuenavigator/libs/marionette");var c=b("jira/projectissuenavigator/pages/issueview/templates");var d=b("jira/ajs/keyboardshortcut/keyboard-shortcut");var a=e.ItemView.extend({template:c.issueCollapse,rendered:false,triggers:{click:"collapse"},onRender:function(){this.unwrapTemplate();this.$el.tooltip({gravity:"e"})},onDestroy:function(){if(this.$el.tooltip){this.$el.tooltip("hide")}},serializeData:function(){return{collapseShortcutKey:d.getKeyboardShortcutKeys("fullscreen.issue")}}});return e.LayoutView.extend({template:c.issueView,className:"wrapper",rendered:false,regions:{issueContainer:".issue-container",pager:".pager-container",collapse:".collapse-container"},initialize:function(f){this.showCollapse=f.showCollapse||false;this._initSubview()},_initSubview:function(){this._collapseSubview=new a();this.listenTo(this._collapseSubview,"collapse",function(){this.trigger("collapse")}.bind(this))},maximizeHeight:function(){this.$el.css("height",window.innerHeight-this.$el.offset().top)},onRender:function(){if(this.showCollapse){this.collapse.show(this._collapseSubview);if(d.initialised&&d.initialised.state()!=="resolved"){d.initialised.then(function(){this._collapseSubview.render()}.bind(this))}}this.unwrapTemplate(this.className);this.rendered=true},attach:function(f){this.setElement(f);this.bindUIElements();this.triggerMethod("render")},templateHelpers:function(){return this.options}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview",["require"],function(b){var m=b("jira/projectissuenavigator/libs/underscore");var p=b("jira/components/issueviewer/services/darkfeatures");var g=b("jira/projectissuenavigator/services/dialogsoverrider");var k=b("jira/projectissuenavigator/services/focusshifter");var c=b("jira/components/issuecomponentresolver");var j=b("jira/projectissuenavigator/pages/issueview/views/issue");var h=b("jira/components/issueviewer/templates");var l=b("jira/flag");var o=b("jquery");var i=b("jira/projectissuenavigator/libs/marionette");var d=b("jira/projectissuenavigator/services/metrics");var f=b("jira/projectissuenavigator/services/notifications");var a=b("jira/components/pager");var n=b("jira/projectissuenavigator/services/traces");var e=b("wrm/data");return i.Object.extend({initialize:function(q){this.showCollapse=q.showCollapse||false;this.state=q.state;this._buildIssueView();this._buildIssueComponent();this._buildDialogsOverrider();this._buildFocusShifter();this._buildPager()},onDestroy:function(){this.issueComponent.close();this.issueView.destroy();this.dialogsOverrider.destroy();this.focusShifter.destroy();this._destroyPager();if(this.el){this.el.remove()}},_destroyPager:function(){if(this.pager){this.pager.destroy();this.stopListening(this.pager);delete this.pager}},render:function(){this.issueView.render();this.el=this.issueView.$el},attach:function(q){this.issueView.attach(q);this.el=this.issueView.$el},loadFromPage:function(q){this._updateState(q);this._updateURL(q);this._updatePager();return this.issueComponent.loadIssueRenderedByTheServer({key:q,project:{id:e.claim("projectId"),key:e.claim("projectKey"),projectType:e.claim("projectType")},detailView:false})},load:function(q){this._updateState(q);this._updateURL(q);this._updatePager();return this.issueComponent.loadIssue({key:q,detailView:false})},_updateURL:function(q){if(p.REDIRECT_FROM_GLOBAL_TO_PROJECT.enabled()){this.trigger("updateUrl",{issueKey:q})}},_updatePager:function(){var r=this.state.get("searchResults");var q=this.state.get("issue");if(r&&r.hasIssueInSearch(q)){if(!r.selected||r.selected.get("key")!==q){r.select(q)}this.pager.update(r)}else{this._destroyPager()}},_updateState:function(q){this.state.set("issue",q)},adjustSize:function(){this.issueView.maximizeHeight();this.issueComponent.applyResponsiveDesign()},_buildIssueView:function(){this.issueView=new j({showCollapse:this.showCollapse});this.listenTo(this.issueView,{render:function(){this.issueView.issueContainer._ensureElement();this.issueComponent.setContainer(this.issueView.issueContainer.$el);if(this.pager){this.issueView.pager._ensureElement();this.pager.show(this.issueView.pager.$el)}},collapse:function(){this.trigger("collapse","ui-button")}})},_buildIssueComponent:function(){var q=c.resolve();this.issueComponent=new q({useJIRAEvents:false});this.listenTo(this.issueComponent,{fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},loadError:function(r){this.trigger("loadError",r)},loadComplete:function(r,s){this.trigger("editorLoaded",s)},linkToIssue:function(r){this.trigger("linkToIssue",r);this.state.unset("searchResults");this.state.unset("filter");this.load(r.issueKey)},individualPanelRendered:function(r){this.trigger("individualPanelRendered",r)},renderMainView:function(r,s){this.trigger("viewRendered",r,s)},panelRendered:function(t,s,r){this.trigger("panelRendered",t,s,r)},refineViewer:function(r){r.preventDefault();this.issueComponent.updateIssueWithQuery(r.query)}})},_buildDialogsOverrider:function(){function q(t,s,r){return r&&r.$activeTrigger&&r.$activeTrigger.data(t)||(typeof s==="function")&&s()}this.dialogsOverrider=new g({getIssueId:m.partial(q,"issueid",this.issueComponent.getIssueId.bind(this.issueComponent)),getIssueKey:m.partial(q,"issuekey",this.issueComponent.getIssueKey.bind(this.issueComponent))});this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(r){this.issueComponent.refreshIssue().done(function(){f.show(r.message,r.issueKey);n.traceIssueUpdated()})},issueDelete:function(r){f.show(r.message,r.issueKey);if(r.issueKey===this.state.get("issue")){this.trigger("issueDelete",r)}else{this.issueComponent.refreshIssue()}}})},_buildFocusShifter:function(){this.focusShifter=new k(this.issueComponent)},getIssueId:function(){return this.issueComponent.getIssueId()},getIssueKey:function(){return this.issueComponent.getIssueKey()},getProjectId:function(){return this.issueComponent.getProjectId()},getProjectKey:function(){return this.issueComponent.getProjectKey()},getProjectType:function(){return this.issueComponent.getProjectType()},_buildPager:function(){this.pager=new a();this.listenTo(this.pager,{next:function(){this._loadNextIssue()},previous:function(){this._loadPreviousIssue()}})},_loadNextIssue:function(){var q=this.state.get("searchResults");if(!q){return}q.getNextIssue().done(function(r){this._loadIssueFromPager(r,"pager:next")}.bind(this))},_loadPreviousIssue:function(){var q=this.state.get("searchResults");if(!q){return}q.getPreviousIssue().done(function(r){this._loadIssueFromPager(r,"pager:previous")}.bind(this))},_loadIssueFromPager:function(q,r){var s=this.state.get("searchResults");this.trigger(r,{current:s.getPositionOfIssueInSearchResults(q.id),total:s.length});this.load(q.get("key"))},getAPIImplementation:function(){var q=this;return{nextIssue:function(){var r=q.state.get("searchResults");if(!r){return}d.startIssueSearch();return q._loadNextIssue()},previousIssue:function(){var r=q.state.get("searchResults");if(!r){return}d.startIssueSearch();return q._loadPreviousIssue()},getActiveIssueId:function(){return q.issueComponent.getIssueId()},getActiveIssueKey:function(){return q.issueComponent.getIssueKey()},refreshActiveIssue:function(){d.startIssueSearch();return q.issueComponent.refreshIssue()},refreshIssue:function(){d.startIssueSearch();return q.issueComponent.refreshIssue()},editField:function(s){if(!("getFields" in q.issueComponent)){return false}var r=q.issueComponent.getFields();var t=r&&r.get(s);var u=t&&t.isEditable();if(u){q.issueComponent.editField(t)}return u},getFields:function(){if(!("getFields" in q.issueComponent)){return undefined}var r=q.issueComponent.getFields();return r.length?r:undefined},isSaving:function(){if(!("hasSavesInProgress" in q.issueComponent)){return false}return q.issueComponent.hasSavesInProgress()},isLoading:function(){return q.issueComponent.isCurrentlyLoading()},hasAccessibleIssue:function(){return !q.issueComponent.isShowingError()},showLoadError:function(){return l.showErrorMsg("",h.Body.errorsLoading(),{persistent:false})},waitForSavesToComplete:function(){if(!("hasSavesInProgress" in q.issueComponent)){return new o.Deferred().resolve().promise()}var s=new o.Deferred();if(!q.issueComponent.hasSavesInProgress()){s.resolve()}else{var r=function(){m.defer(function(){if(!q.issueComponent.hasSavesInProgress()){s.resolve()}})};q.issueComponent.once("saveSuccess",r)}return s.promise()},openFocusShifter:function(){q.focusShifter.show()},toggleFullscreenIssue:function(){if(q.showCollapse){q.trigger("collapse","kb-shortcut")}}}},focusIssueEditor:function(){this.issueComponent.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/IssueSearch.js' */
define("jira/projectissuenavigator/pages/issuesearch",["require"],function(k){var v=k("jira/projectissuenavigator/libs/underscore");var o=k("jira/components/detailslayout");var e=k("jira/projectissuenavigator/services/dialogsoverrider");var n=k("jira/projectissuenavigator/pages/issuesearch/views/empty");var w=k("jira/projectissuenavigator/services/filters");var p=k("jira/projectissuenavigator/services/focusshifter");var s=k("jira/projectissuenavigator/services/inline-issue-create");var c=k("jira/util/events");var h=k("jira/flag");var m=k("jquery");var d=k("jira/projectissuenavigator/services/linkscapturer");var i=k("jira/projectissuenavigator/libs/marionette");var a=k("jira/message");var r=k("jira/util/data/meta");var g=k("jira/projectissuenavigator/services/metrics");var b=k("jira/projectissuenavigator/services/notifications");var t=k("jira/ajs/ajax/smart-ajax");var f=k("jira/projectissuenavigator/pages/issuesearch/templates");var q=k("jira/components/util/events");var j=k("jira/projectissuenavigator/libs/uri");var l=k("jira/projectissuenavigator/services/urlhelper");var u=JIRA.Projects.Subnavigator;return i.Object.extend({initialize:function(x){this.el=m(f.issueSearch());this._buildState(x.state);this._buildSearch(x.search);this._buildSubnavigation();if(x.canCreateIssues){this._buildInlineIssueCreate()}this._buildDetailsLayout();this._buildLinksCapturer();this._buildDialogsOverrider();this._buildFocusShifter()},_buildState:function(x){this.state=x},_setTitleText:function(x){var z=w.getAvailableFilters(true);var y=v.chain(z).flatten().findWhere({id:x}).value();var A=this.el.find("#issues-subnavigation-title");A.text((y&&y.label)||"")},_buildSubnavigation:function(){var x=this.state.get("filter")||w.getDefaultFilterId();this._setTitleText(x);this.subnavigation=new u({triggerPlaceholder:this.el.find("#issues-subnavigation-trigger"),contentPlaceholder:this.el.find("#issues-subnavigation-content"),itemGroups:w.getAvailableFilters(true),selectedItem:x,hideSelectedItem:false,changeViewText:"Switch filter"});this.listenTo(this.subnavigation,{itemSelected:function(y){if(y.item.id==="manage"){this.trigger("manageFilters")}else{if(y.item.jql){g.startIssueSearch();y.preventDefault();this._setTitleText(y.item.id);this.search({filter:y.item.id,issue:null,orderby:null});this.trigger("filterSelected",{filterId:y.item.id,source:"subnavigator"})}}}})},_buildInlineIssueCreate:function(){this.inlineIssueCreate=new s();this.listenTo(this.inlineIssueCreate,{issueCreated:function(x){g.startIssueSearch();this.search({issue:x.issue.issueKey})}})},_buildDetailsLayout:function(){var x={baseURL:l.generateRootUrl(this.state.get("project")),useExpand:true};if(this.options.canCreateIssues){x.displayInlineIssueCreate=true;x.emptyViewFactory=v.bind(function(){this.emptyView=new n({emptyViewContent:this.options.emptyViewContent});return this.emptyView},this)}this.detailsLayout=new o(x);this.listenTo(this.detailsLayout,{select:function(y){this.state.set("issue",y.key);this.trigger("issue:select",{issue:y.key})},empty:function(){this.state.unset("issue");if(this.options.canCreateIssues){this.emptyView.inlineIssueCreateContainer._ensureElement();this.inlineIssueCreate.show(this.emptyView.inlineIssueCreateContainer.$el);this.inlineIssueCreate.activateWithJQL(this.state.get("searchResults").jql)}this.trigger("issue:empty")},"list:update":function(){this.trigger("list:update")},"list:sort":function(y){g.startIssueSearch();var z=y.match(/ORDER +BY +(.*)$/i);if(!z){return}this.search({orderby:z[1]})},"list:refresh":function(){g.startIssueSearch();this.search({issue:null})},"list:select":function(y){g.startIssueSearch();this.trigger("issueSelectedInList",y)},render:function(){c.trigger(q.LAYOUT_RENDERED)},"editorLoadedFromCache editorLoaded":function(y){g.endIssueSearch();r.set("viewissue-permlink",this._getFullScreenURL(y.issueKey));this.trigger("editorLoaded",{issueRefreshedEvent:(y.issueEditorOptions||{}).issueRefreshedEvent||false})},linkToIssue:function(y){this.trigger("linkToIssue",y)},"list:pagination":function(){g.startIssueSearch()},"error:loadpage":function(y){this.showErrorFlagFromResponse(y)},"editor:saveSuccess":function(y){this.trigger("editor:saveSuccess",{issueId:y.event,savedFieldIds:y.savedFieldIds,savedFieldTypes:y.savedFieldTypes,duration:y.duration})},"editor:editField":function(y){this.trigger("editor:editField",y)},"editor:editFieldCancel":function(y){this.trigger("editor:editFieldCancel",y)},"pager:next":function(y){g.startIssueSearch();this.trigger("pager:next",y)},"pager:previous":function(y){g.startIssueSearch();this.trigger("pager:previous",y)},expand:function(){this.trigger("expand","ui-button")},editorError:function(){this.trigger("editorError")},editorFieldsLoaded:function(){this.trigger("editorFieldsLoaded")},individualPanelRendered:function(y){this.trigger("individualPanelRendered",y)}});if(this.options.canCreateIssues){this.listenTo(this.detailsLayout,{issueCreated:function(y){if(w.filterSupportsInlineIssueCreate(this.state.get("filter"))){g.startIssueSearch();this.search({issue:y.issue.issueKey})}else{a.showSuccessMsg(f.issueCreatedFlag({issueKey:y.issue.issueKey,projectKey:this.state.get("project"),summary:y.fields.summary}),{closeable:true})}}})}},_buildSearch:function(x){this.searchService=x},_buildLinksCapturer:function(){this.linksCapturer=new d({el:this.el});this.listenTo(this.linksCapturer,{linkToFullIssueNavigator:function(){this.trigger("goToFullIssueNavigator")}})},_buildDialogsOverrider:function(){function x(A,z,y){return y&&y.$activeTrigger&&y.$activeTrigger.data(A)||(typeof z==="function")&&z()}this.dialogsOverrider=new e({getIssueId:v.partial(x,"issueid",v.bind(this.detailsLayout.getActiveIssueId,this.detailsLayout)),getIssueKey:v.partial(x,"issuekey",v.bind(this.detailsLayout.getActiveIssueKey,this.detailsLayout))});this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(y){this.detailsLayout.refreshIssue(y.issueId).done(v.bind(function(){b.show(y.message,y.issueKey)},this))},issueDelete:function(y){this.removeIssue(y.issueId).done(v.bind(function(){b.show(y.message,y.issueKey)},this))}})},_buildFocusShifter:function(){this.focusShifter=new p(this.detailsLayout.issueComponent)},_getFullScreenURL:function(x){var y=r.get("jira-base-url");return new j(y+"/browse/"+x).normalize().toString()},load:function(){var z=this.state.get("searchResults");var y=this.state.get("filter");var A=w.getAllIssuesFilterId()===y;var x=this.state.get("issue");var B=z.hasIssueInSearch(x);this._setTitleText(y);this.subnavigation.selectItem(y);if(!x){this.detailsLayout.load(z);return}if(B){this.detailsLayout.load(z,x);return}if(!A){this.search({filter:w.getAllIssuesFilterId()});this.trigger("filterSelected",{filterId:w.getAllIssuesFilterId(),source:"issueFilterMismatch"});return}this.detailsLayout.load(z)},search:function(y){y=y||{};this.state.update({issue:y.issue,filter:y.filter,orderby:y.orderby});this.detailsLayout.showLoading();var x=w.getJQL(this.state.get("filter"),this.state.get("project"),this.state.get("orderby"));this.searchService.search(x).done(v.bind(function(z){this.state.update({searchResults:z});if(!this.state.has("issue")&&y.startIndex){this.state.update({issue:z.getIssueKeyForIndex(y.startIndex)})}this.load()},this)).fail(v.bind(function(z){this.detailsLayout.hideLoading();this.showErrorFlagFromResponse(z)},this))},show:function(){this.subnavigation.show();this.detailsLayout.show(m(this.el).find(".details-layout"))},onDestroy:function(){this.subnavigation.destroy();if(this.inlineIssueCreate){this.inlineIssueCreate.destroy()}this.detailsLayout.destroy();this.linksCapturer.destroy();this.dialogsOverrider.destroy();this.focusShifter.destroy()},adjustSize:function(){this.detailsLayout.adjustSize()},showErrorFlagFromResponse:function(x){if(typeof x==="undefined"||x.statusText===t.SmartAjaxResult.TIMEOUT||x.status===401||x.hasData){return this.showErrorFlag(t.buildSimpleErrorContent(x))}else{var y=JSON.parse(x.responseText);if(x.status===400&&y.errorMessages.length>0){return this.showErrorFlag(y.errorMessages[0])}else{return this.showErrorFlag(t.buildSimpleErrorContent(x))}}},showErrorFlag:function(y){var x=AJS.escapeHtml(y);return h.showErrorMsg("",x,{persistent:false})},removeIssue:function(x){return this.detailsLayout.removeIssue(x)},getIssueId:function(){return this.detailsLayout.getActiveIssueId()},getIssueKey:function(){return this.detailsLayout.getActiveIssueKey()},getProjectId:function(){return this.detailsLayout.getActiveProjectId()},getProjectKey:function(){return this.detailsLayout.getActiveProjectKey()},getProjectType:function(){return this.detailsLayout.getActiveProjectType()},getAPIImplementation:function(){var x=this;return{nextIssue:function(){g.startIssueSearch();return x.detailsLayout.selectNext()},previousIssue:function(){g.startIssueSearch();return x.detailsLayout.selectPrevious()},getActiveIssueId:function(){return x.getIssueId()},getActiveIssueKey:function(){return x.getIssueKey()},refreshActiveIssue:function(){g.startIssueSearch();var y=x.detailsLayout.getActiveIssueId();return x.detailsLayout.refreshIssue(y)},refreshIssue:function(y){g.startIssueSearch();return x.detailsLayout.refreshIssue(y)},editField:function(z){var y=x.detailsLayout.issueComponent.getFields();var A=y&&y.get(z);var B=A&&A.isEditable();if(B){x.detailsLayout.issueComponent.editField(A)}return B},getFields:function(){var y=x.detailsLayout.issueComponent.getFields();return y.length?y:undefined},isSaving:function(){return x.detailsLayout.issueComponent.hasSavesInProgress()},isLoading:function(){return x.detailsLayout.isLoading()},hasAccessibleIssue:function(){return Boolean(x.detailsLayout.searchResults&&x.detailsLayout.searchResults.length&&x.detailsLayout.searchResults.selected&&!x.detailsLayout.searchResults.selected.get("inaccessible"))},showLoadError:function(){return x.showErrorFlag(JIRA.Components.IssueViewer.Templates.Body.errorsLoading())},waitForSavesToComplete:function(){var z=new m.Deferred();if(!x.detailsLayout.issueComponent.hasSavesInProgress()){z.resolve()}else{var y=function(){v.defer(function(){if(!x.detailsLayout.issueComponent.hasSavesInProgress()){z.resolve()}})};x.once("editor:saveSuccess",y)}return z.promise()},openFocusShifter:function(){x.focusShifter.show()},toggleFullscreenIssue:function(){x.trigger("expand","kb-shortcut")}}},focusIssueList:function(){this.detailsLayout.focusList()},focusIssueEditor:function(){this.detailsLayout.focusEditor()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/views/Empty.js' */
define("jira/projectissuenavigator/pages/issuesearch/views/empty",["require"],function(a){var c=a("jira/projectissuenavigator/libs/marionette");var b=a("jira/projectissuenavigator/pages/issuesearch/templates");return c.LayoutView.extend({initialize:function(){this.content=this.options.emptyViewContent||b.defaultEmptyState()},template:b.emptyState,regions:{inlineIssueCreateContainer:".inline-issue-create-container"},serializeData:function(){return{content:this.content}},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/entities/NavigatorState.js' */
define("jira/projectissuenavigator/entities/navigatorstate",["require"],function(b){var a=b("jira/projectissuenavigator/libs/underscore");var c=b("jira/components/libs/backbone");return c.Model.extend({defaults:{project:undefined,issue:undefined,filter:undefined,orderby:undefined,searchResults:undefined,startIndex:undefined},update:function(d){a.each(d,function(f,e){if(f===null){this.unset(e)}else{if(f!==undefined){this.set(e,f)}}}.bind(this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/amd-wrapper.js' */
define("jira/projectissuenavigator/templates",function(){return JIRA.Issues.Projects.Templates});define("jira/projectissuenavigator/pages/issuesearch/templates",function(){return JIRA.Issues.Projects.IssueSearch.Templates});define("jira/projectissuenavigator/pages/issueview/templates",function(){return JIRA.Issues.Projects.IssueView.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:commons_runtime', location = 'dist/runtime.7acb70432c2717e70082.js' */
(function(a){function b(c){if(d[c])return d[c].exports;var e=d[c]={i:c,l:!1,exports:{}};return a[c].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c=window.jiraDevelopmentIntegrationPluginJsonp;window.jiraDevelopmentIntegrationPluginJsonp=function(d,f,g){for(var h,j,k,l=0,i=[];l<d.length;l++)j=d[l],e[j]&&i.push(e[j][0]),e[j]=0;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h]);for(c&&c(d,f,g);i.length;)i.shift()();if(g)for(l=0;l<g.length;l++)k=b(b.s=g[l]);return k};var d={},e={runtime:0};b.e=function(a){function c(){h.onerror=h.onload=null,clearTimeout(i);var b=e[a];0!==b&&(b&&b[1](new Error("Loading chunk "+a+" failed.")),e[a]=void 0)}var d=e[a];if(0===d)return new Promise(function(a){a()});if(d)return d[2];var f=new Promise(function(b,c){d=e[a]=[b,c]});d[2]=f;var g=document.getElementsByTagName("head")[0];if({0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,14:!0}[a])return WRM.require("wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:"+a),f;var h=document.createElement("script");h.type="text/javascript",h.charset="utf-8",h.async=!0,h.timeout=12e4,b.nc&&h.setAttribute("nonce",b.nc),h.src=b.p+""+({"column-module":"column-module","devstatus-admin":"devstatus-admin","devstatus-admin-summary":"devstatus-admin-summary","devstatus-triggers":"devstatus-triggers","devstatus-view-issue":"devstatus-view-issue",releasereport:"releasereport","smart-commits":"smart-commits"}[a]||a)+"."+{0:"dfca51da8f2f2f410f56",1:"1693a1a96c5481964864",2:"91354457765debe6dfd1",3:"6323f62600270aaca3af",4:"99640566d0504aa46d9f",5:"761bd2dc8acedbcd5b7c",6:"ce9d5b6bcdd56c26be68",7:"6692414ffe83ec29423d",8:"b05ffb7fe81ef52d96bf",9:"1539897518fbefa49f52",10:"36d51fd1d1a1c5031bf3",11:"f78c15ffa743784a1419",12:"80aca20ef48dc85a0543",13:"96ffe4e48c5ae7aff520",14:"bbe20f139a46946ca40e","column-module":"8ef50e6cb5d90eb66cd2","devstatus-admin":"762acd76e8a530cfb7c5","devstatus-admin-summary":"f0721f96e26c1970a60d","devstatus-triggers":"68cb1b64ec4835e567b8","devstatus-view-issue":"db31d611e52e0febdb0b",releasereport:"a13465fafd372f48f7e8","smart-commits":"c6e3879f47ab75ffa3ca"}[a]+".js";var i=setTimeout(c,12e4);return h.onerror=h.onload=c,g.appendChild(h),f},b.m=a,b.c=d,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b.oe=function(a){throw console.error(a),a},"undefined"!=typeof AJS&&(b.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:assets-DEV_PSEUDO_HASH/")})([]);
//# sourceMappingURL=runtime.7acb70432c2717e70082.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:entrypoint-devstatus-view-issue', location = 'dist/devstatus-view-issue.db31d611e52e0febdb0b.js' */
jiraDevelopmentIntegrationPluginJsonp(["devstatus-view-issue"],{"./js/util/DevStatusNavigation.js":function(a,b,c){"use strict";var d,e;d=[c("jira.webresources:wrm-context-path/require('wrm/context-path')"),c("jira.webresources:ajs-underscorejs-amd-shim/require('underscore')")],e=function(a,b){return{getUrl:function(){return window.location.href},reload:function(){b.defer(function(){window.location.reload()})},navigate:function(a){b.defer(function(){window.location=a})},redirectToLogin:function(){this.navigate(a()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},"./js/util/DevStatusURLUtils.js":function(a,b,c){"use strict";var d,e;d=[c("jira.webresources:jquery/require('jquery')"),c("jira.webresources:ajs-underscorejs-amd-shim/require('underscore')"),c,c("jira.webresources:parse-uri/require('jira/libs/parse-uri')")],e=function(a,b,d,e){var f=c("./js/util/DevStatusNavigation.js");return{getDetailDialogParam:function(){var a=this._removeKickAssIHashFromUrl(f.getUrl()),b=e(a);return b&&b.queryKey&&b.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(a){var b=this._removeKickAssIHashFromUrl(f.getUrl()),c=e(b);return c.queryKey.devStatusDetailDialog=encodeURIComponent(a),this.createUrlFromParsedUri(c)},getCreateReviewDetailUrl:function(a){return this.getUrlWithDetailDialogParam("create-review-"+a)},isCreateReviewDetailDialogLink:function(a){return a&&a.lastIndexOf&&0===a.lastIndexOf("create-review-",0)},getCreateReviewDetailDialogApplicationType:function(a){return a.substring(14)},_removeKickAssIHashFromUrl:function(a){return a.replace("i#","")},createUrlFromParsedUri:function(c){var d=[];a.each(c.queryKey,function(c,e){b.isObject(e)?a.each(e,function(a,b){d.push(c+"="+b)}):d.push(c+"="+e)});var e="";return c.protocol&&(e+=c.protocol+"://"),c.authority&&(e+=c.authority),c.path&&(e+=c.path),0<d.length&&(e+="?"+d.join("&")),c.anchor&&(e+="#"+c.anchor),e}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},"./js/viewissue/DevStatusInit.js":function(a,b,c){"use strict";var d=c("./js/viewissue/DevStatusStatePersist.js"),e=c("jira.webresources:jquery/require('jquery')");d.setDetailDialogParam(),e(function(){return c.e(0).then(function(){var a=[c("./js/viewissue/DevStatusApp.js")];(function(a){return a.documentReadyInit(e(document))}).apply(null,a)}).catch(c.oe)})},"./js/viewissue/DevStatusStatePersist.js":function(a,b,c){"use strict";var d,e;d=[c("jira.webresources:jira-metadata/require('jira/util/data/meta')"),c("./js/util/DevStatusURLUtils.js")],e=function(a,b){return{setDetailDialogParam:function(){a.set("fusion-open-detail-dialog",b.getDetailDialogParam())}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},"jira.webresources:ajs-underscorejs-amd-shim/require('underscore')":function(a){a.exports=require("underscore")},"jira.webresources:jira-metadata/require('jira/util/data/meta')":function(a){a.exports=require("jira/util/data/meta")},"jira.webresources:jquery/require('jquery')":function(a){a.exports=require("jquery")},"jira.webresources:parse-uri/require('jira/libs/parse-uri')":function(a){a.exports=require("jira/libs/parse-uri")},"jira.webresources:wrm-context-path/require('wrm/context-path')":function(a){a.exports=require("wrm/context-path")}},["./js/viewissue/DevStatusInit.js"]);
//# sourceMappingURL=devstatus-view-issue.db31d611e52e0febdb0b.js.map;
;
/* module-key = 'jira.webresources:initMainDashboard', location = '/includes/jira/dashboard/init-dashboard-flags.js' */
require(["jquery","wrm/data","jira/flag"],function(s,a,e){"use strict";s(function(){var s=a.claim("dashboardInfoMessage"),r=a.claim("dashboardInstallMessage");s&&e.showInfoMsg("",s),r&&e.showSuccessMsg("",r)})});;
;
/* module-key = 'jira.webresources:dashboard-performance-metrics', location = '/includes/jira/dashboard/performanceMetrics.js' */
!function(){function e(e){var n=t.Deferred();return e.contentDocument&&"complete"===e.contentDocument.readyState?n.resolve():t(e).load(function(){n.resolve()}),n.promise()}function n(n){var r=n.map(function(){return e(this)});return t.when.apply(t,r)}var r=require("internal/browser-metrics"),t=require("jquery");r.start({key:"jira.dashboard",isInitial:!0}),function(){var e=t.Deferred();return t(function(){var n=t("#dashboard");0===n.length&&e.reject(),n.hasClass("initializing")?n.on("initialized",function(){e.resolve()}):e.resolve()}),e.promise()}().then(function(){return n(t("#dashboard").find("iframe").get())}).done(function(){r.end({key:"jira.dashboard"})})}();;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dialog2', location = 'aui.chunk.b5729973223ff2ab9942--da012c4e39af013853e7.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dialog2"],{"0+IH":function(i,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dialog2=void 0;var t=a("p4ys");Object.defineProperty(e,"dialog2",{enumerable:!0,get:function(){return function(i){return i&&i.__esModule?i:{default:i}}(t).default}}),a("AehQ"),a("ZO0i")},ZO0i:function(i,e,a){},p4ys:function(i,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=d(a("+x/D")),u=d(a("TmQU")),n=d(a("KloK")),o=d(a("jEnx")),l=d(a("6RZY"));function d(i){return i&&i.__esModule?i:{default:i}}var s={"aui-focus":"false","aui-blanketed":"true"};var f='\n        <section role="dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true">\n            <header class="aui-dialog2-header">\n                <h2 class="aui-dialog2-header-main"></h2>\n                <a class="aui-dialog2-header-close">\n                    <span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span>\n                </a>\n            </header>\n            <div class="aui-dialog2-content"></div>\n            <footer class="aui-dialog2-footer"></footer>\n        </section>';function c(i){this.$el=i?(0,t.default)(i):(0,t.default)(f),function(i){t.default.each(s,function(e,a){var t="data-"+e;i[0].hasAttribute(t)||i.attr(t,a)})}(this.$el)}c.prototype.on=function(i,e){return(0,o.default)(this.$el).on(i,e),this},c.prototype.off=function(i,e){return(0,o.default)(this.$el).off(i,e),this},c.prototype.show=function(){return(0,o.default)(this.$el).show(),this},c.prototype.hide=function(){return(0,o.default)(this.$el).hide(),this},c.prototype.remove=function(){return(0,o.default)(this.$el).remove(),this},c.prototype.isVisible=function(){return(0,o.default)(this.$el).isVisible()};var r=(0,l.default)("dialog2",c);r.on=function(i,e){return o.default.on(i,".aui-dialog2",e),this},r.off=function(i,e){return o.default.off(i,".aui-dialog2",e),this},(0,t.default)(document).on("click",".aui-dialog2-header-close",function(i){i.preventDefault(),r((0,t.default)(this).closest(".aui-dialog2")).hide()}),r.on("show",function(i,e){var a;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(i){return(a=e.find(i+" :aui-tabbable")).length}),a&&a.first().focus()}),r.on("hide",function(i,e){var a=(0,o.default)(e);e.data("aui-remove-on-hide")&&a.remove()}),(0,u.default)("aui/dialog2",r),(0,n.default)("dialog2",r),e.default=r,i.exports=e.default}},[["0+IH","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.bc4873e5f9","aui.splitchunk.fb15cffa72","aui.splitchunk.8659b532c1","aui.splitchunk.3e0cdb810a","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.5b8c290363"]]]);
//# sourceMappingURL=aui.chunk.b5729973223ff2ab9942--da012c4e39af013853e7.js.map;
;
/* module-key = 'com.atlassian.gadgets.dashboard:client-side-soy-templates', location = 'templates/dashboard.soy' */
// This file was automatically generated from dashboard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Gadgets.Templates.Dashboard.
 */

if (typeof Gadgets == 'undefined') { var Gadgets = {}; }
if (typeof Gadgets.Templates == 'undefined') { Gadgets.Templates = {}; }
if (typeof Gadgets.Templates.Dashboard == 'undefined') { Gadgets.Templates.Dashboard = {}; }


Gadgets.Templates.Dashboard.attr = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.styleClass) ? ' class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.value) ? ' value="' + soy.$$escapeHtml(opt_data.value) + '"' : '') + ((opt_data.name) ? ' name="up_' + soy.$$escapeHtml(opt_data.name) + '"' : '') + ((opt_data.selected) ? ' selected="selected"' : '');
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.attr.soyTemplateName = 'Gadgets.Templates.Dashboard.attr';
}


Gadgets.Templates.Dashboard.toolsDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownStyleClass__soy32 = opt_data.styleClass ? 'aui-dd-parent ' + opt_data.styleClass : 'aui-dd-parent';
  var triggerStyleClass__soy33 = opt_data.trigger.styleClass ? opt_data.trigger.styleClass : 'aui-dd-trigger';
  var triggerText__soy34 = opt_data.trigger.text;
  output += '<a aria-owns="tools-dropdown-items" aria-haspopup="true" class="aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml(triggerText__soy34) + '</span></a><div id="tools-dropdown-items" class="aui-style-default aui-dropdown2"><ul class="aui-list-truncate">';
  var itemList38 = opt_data.list.items;
  var itemListLen38 = itemList38.length;
  for (var itemIndex38 = 0; itemIndex38 < itemListLen38; itemIndex38++) {
    var itemData38 = itemList38[itemIndex38];
    output += '<li>' + Gadgets.Templates.Dashboard.toolsMenuItem(itemData38) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.toolsDropdown.soyTemplateName = 'Gadgets.Templates.Dashboard.toolsDropdown';
}


Gadgets.Templates.Dashboard.toolsMenuItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.useTemplate == 'toolsDropdown') ? Gadgets.Templates.Dashboard.toolsDropdown(opt_data) : (opt_data.link) ? '<a ' + Gadgets.Templates.Dashboard.attr(opt_data.link) + '>' + soy.$$escapeHtml(opt_data.link.text) + '</a>' : '');
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.toolsMenuItem.soyTemplateName = 'Gadgets.Templates.Dashboard.toolsMenuItem';
}


Gadgets.Templates.Dashboard.dropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownStyleClass__soy57 = opt_data.styleClass ? 'aui-dd-parent ' + opt_data.styleClass : 'aui-dd-parent';
  var triggerStyleClass__soy58 = opt_data.trigger.styleClass ? opt_data.trigger.styleClass : 'aui-dd-trigger';
  output += '<li ' + Gadgets.Templates.Dashboard.attr(soy.$$augmentMap(opt_data, {styleClass: dropdownStyleClass__soy57})) + '>' + ((opt_data.isAdg2) ? '<a id="' + soy.$$escapeHtml(opt_data.trigger.id) + '" class="' + soy.$$escapeHtml(triggerStyleClass__soy58) + ' standard " href="#">' + soy.$$escapeHtml(opt_data.trigger.text) + '</a>' : '<a id="' + soy.$$escapeHtml(opt_data.trigger.id) + '" class="' + soy.$$escapeHtml(triggerStyleClass__soy58) + ' standard" href="#"><span class="aui-icon-small aui-iconfont-more"></span></a>') + '<ul class="aui-dropdown standard hidden">';
  var itemList79 = opt_data.list.items;
  var itemListLen79 = itemList79.length;
  for (var itemIndex79 = 0; itemIndex79 < itemListLen79; itemIndex79++) {
    var itemData79 = itemList79[itemIndex79];
    output += Gadgets.Templates.Dashboard.menuItem(itemData79);
  }
  output += '</ul></li>';
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.dropdown.soyTemplateName = 'Gadgets.Templates.Dashboard.dropdown';
}


Gadgets.Templates.Dashboard.menuItem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.useTemplate == 'dropdown') {
    output += Gadgets.Templates.Dashboard.dropdown(opt_data);
  } else {
    output += '<li ' + Gadgets.Templates.Dashboard.attr(opt_data) + '>';
    if (opt_data.items) {
      output += '<ul>';
      var subItemList94 = opt_data.items;
      var subItemListLen94 = subItemList94.length;
      for (var subItemIndex94 = 0; subItemIndex94 < subItemListLen94; subItemIndex94++) {
        var subItemData94 = subItemList94[subItemIndex94];
        output += Gadgets.Templates.Dashboard.menuItem(subItemData94);
      }
      output += '</ul>';
    } else {
      output += '<a ' + Gadgets.Templates.Dashboard.attr(opt_data.link) + '>' + soy.$$escapeHtml(opt_data.link.text) + '</a>';
    }
    output += '</li>';
  }
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.menuItem.soyTemplateName = 'Gadgets.Templates.Dashboard.menuItem';
}


Gadgets.Templates.Dashboard.gadget = function(opt_data, opt_ignored) {
  var output = '<div class="gadget ' + ((opt_data.color) ? soy.$$escapeHtml(opt_data.color) : '') + '" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-renderbox"><div class="dashboard-item-frame gadget-container" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-chrome"><div class="dashboard-item-header"><h3 id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-title" class="dashboard-item-title">' + ((opt_data.titleUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.titleUrl) + '">' + soy.$$escapeHtml(opt_data.title) + '</a>' : soy.$$escapeHtml(opt_data.title)) + '</h3><div class="gadget-menu"><ul>' + ((opt_data.layout.writable) ? (opt_data.isAdg2) ? '<li class="aui-icon i-move">move</li>' : '<li><svg class="aui-icon move" width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch --><title>icon16px-move-n0</title><desc>Created with Sketch.</desc><defs><path d="M6.63862491,6.49228119 L6.63862491,7.74937509 C6.63862491,7.75685685 6.6384677,7.76430352 6.6381563,7.77171208 L6.6381563,9.36974886 L7.30629208,8.70762819 C7.52975388,8.4849217 7.89269183,8.4849217 8.1169035,8.70762819 C8.2286344,8.81860652 8.28412491,8.9640781 8.28412491,9.10954968 C8.28412491,9.25502127 8.2286344,9.40049285 8.1169035,9.51072132 L6.49493079,11.1184073 C6.38619938,11.2256363 6.24522348,11.2803756 6.10349771,11.2841249 L6.07575245,11.2841249 C5.93402668,11.2803756 5.79305078,11.2256363 5.68506924,11.1184073 L4.0638464,9.51072132 C3.9521155,9.40049285 3.89662499,9.25502127 3.89662499,9.10954968 C3.89662499,8.9640781 3.9521155,8.81935637 4.0638464,8.70762819 C4.2873082,8.4849217 4.65024615,8.4849217 4.87370795,8.70762819 L5.54184372,9.36899901 L5.54184372,6.49228119 L4.28614527,6.49228119 C4.28035457,6.49228119 4.27458489,6.49218699 4.26883765,6.492 L2.66475,6.492 L3.327,7.16025 C3.54975,7.38375 3.54975,7.74675 3.327,7.971 C3.216,8.08275 3.0705,8.13825 2.925,8.13825 C2.7795,8.13825 2.634,8.08275 2.52375,7.971 L0.91575,6.34875 C0.8085,6.24 0.75375,6.099 0.75,5.95725 L0.75,5.9295 C0.75375,5.78775 0.8085,5.64675 0.91575,5.53875 L2.52375,3.91725 C2.634,3.8055 2.7795,3.75 2.925,3.75 C3.0705,3.75 3.21525,3.8055 3.327,3.91725 C3.54975,4.14075 3.54975,4.50375 3.327,4.72725 L2.6655,5.3955 L5.54184372,5.3955 L5.54184372,4.14027036 C5.54184372,4.13447965 5.54193793,4.12870998 5.54212491,4.12296273 L5.54212491,2.51887509 L4.87387491,3.18112509 C4.65037491,3.40387509 4.28737491,3.40387509 4.06312491,3.18112509 C3.95137491,3.07012509 3.89587491,2.92462509 3.89587491,2.77912509 C3.89587491,2.63362509 3.95137491,2.48812509 4.06312491,2.37787509 L5.68537491,0.769875086 C5.79412491,0.662625086 5.93512491,0.607875086 6.07687491,0.604125086 L6.10462491,0.604125086 C6.24637491,0.607875086 6.38737491,0.662625086 6.49537491,0.769875086 L8.11687491,2.37787509 C8.22862491,2.48812509 8.28412491,2.63362509 8.28412491,2.77912509 C8.28412491,2.92462509 8.22862491,3.06937509 8.11687491,3.18112509 C7.89337491,3.40387509 7.53037491,3.40387509 7.30687491,3.18112509 L6.63862491,2.51962509 L6.63862491,5.3955 L7.89525,5.3955 C7.90273177,5.3955 7.91017844,5.39565722 7.91758699,5.39596861 L9.51562377,5.39596861 L8.85350311,4.72783283 C8.63079661,4.50437104 8.63079661,4.14143308 8.85350311,3.91722141 C8.96448143,3.80549051 9.10995301,3.75 9.2554246,3.75 C9.40089618,3.75 9.54636777,3.80549051 9.65659624,3.91722141 L11.2642822,5.53919413 C11.3715113,5.64792554 11.4262506,5.78890144 11.4299998,5.93062721 L11.4299998,5.95837246 C11.4262506,6.10009824 11.3715113,6.24107413 11.2642822,6.34905567 L9.65659624,7.97027852 C9.54636777,8.08200941 9.40089618,8.13749993 9.2554246,8.13749993 C9.10995301,8.13749993 8.96523128,8.08200941 8.85350311,7.97027852 C8.63079661,7.74681672 8.63079661,7.38387876 8.85350311,7.16041697 L9.51487392,6.49228119 L6.63862491,6.49228119 Z" id="path-1"></path></defs><g id="Dashboard-logged-in" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-964.000000, -477.000000)"><g id="icon16px-move-n0" transform="translate(964.000000, 477.000000)"><use id="Combined-Shape" fill="#ffffff" xlink:href="#path-1"></use></g></g></svg></li>' : '') + ((opt_data.isMaximizable) ? '<li>' + ((opt_data.isAdg2) ? '<a href="#" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-maximize" class="aui-icon maximize" title="' + soy.$$escapeHtml('Maximise') + '">' + soy.$$escapeHtml('Maximise') + '</a>' : '<a href="#" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-maximize" class="maximize" title="' + soy.$$escapeHtml('Maximise') + '"><span class="aui-icon aui-icon-small aui-iconfont-vid-full-screen-on"></span></a>') + '</li>' : '') + Gadgets.Templates.Dashboard.dropdown(soy.$$augmentMap(opt_data.menu, {isAdg2: opt_data.isAdg2})) + '</ul></div></div><div class="dashboard-item-content ' + ((opt_data.minimized) ? 'minimization' : '') + '">';
  if (opt_data.userPrefs) {
    output += '<form action="' + soy.$$escapeHtml(opt_data.userPrefs.action) + '" class="aui userpref-form hidden" method="post" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-edit"><fieldset><legend><span class="dashboard-item-title">' + soy.$$escapeHtml(opt_data.title) + '</span> ' + soy.$$escapeHtml('Preferences') + '</legend>';
    var fieldList171 = opt_data.userPrefs.fields;
    var fieldListLen171 = fieldList171.length;
    for (var fieldIndex171 = 0; fieldIndex171 < fieldListLen171; fieldIndex171++) {
      var fieldData171 = fieldList171[fieldIndex171];
      if (fieldData171.type == 'hidden') {
        output += '<input id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref" type="hidden" class="hidden" ' + Gadgets.Templates.Dashboard.attr(fieldData171) + '/>';
      } else if (fieldData171.type == 'list') {
        output += '<div id="up_' + soy.$$escapeHtml(fieldData171.name) + '-container" class="list-container field-group"><label for="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref">' + soy.$$escapeHtml(fieldData171.displayName) + '</label><input id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref" type="text" class="list text med" ' + Gadgets.Templates.Dashboard.attr(fieldData171) + ' />' + ((fieldData171.required) ? 'field.required' : '') + '<div class="description">' + soy.$$escapeHtml('(pipe-delimited)') + '</div></div>';
      } else if (fieldData171.type == 'bool') {
        output += '<div class="checkbox field-group"><input type="checkbox" value="true" class="bool" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref"' + ((fieldData171.value) ? 'checked' : '') + ' ' + Gadgets.Templates.Dashboard.attr(fieldData171) + ' /><label for="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref">' + soy.$$escapeHtml(fieldData171.displayName) + ' ' + ((fieldData171.required) ? 'field.required' : '') + '</label><br/></div>';
      } else if (fieldData171.type == 'enum') {
        output += '<div class="field-group"><label for="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref">' + soy.$$escapeHtml(fieldData171.displayName) + ' ' + ((fieldData171.required) ? 'field.required' : '') + '</label><select id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref" class="enum" ' + Gadgets.Templates.Dashboard.attr(fieldData171) + '>';
        var optionList243 = fieldData171.options;
        var optionListLen243 = optionList243.length;
        for (var optionIndex243 = 0; optionIndex243 < optionListLen243; optionIndex243++) {
          var optionData243 = optionList243[optionIndex243];
          output += '<option class="enum" ' + Gadgets.Templates.Dashboard.attr(optionData243) + '>' + soy.$$escapeHtml(optionData243.label) + '</option>';
        }
        output += '</select></div>';
      } else if (fieldData171.type == 'string') {
        output += '<div class="field-group"><label for="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref">' + soy.$$escapeHtml(fieldData171.displayName) + '</label><input id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-form-' + soy.$$escapeHtml(fieldData171.name) + '-pref" type="text" ' + Gadgets.Templates.Dashboard.attr(fieldData171) + ' class="string text">' + ((fieldData171.required) ? 'field.required' : '') + '<br/></div>';
      }
    }
    output += '</fieldset><div class="buttons-container submit"><input type="submit" class="submit" value="' + soy.$$escapeHtml('Save') + '" name="save" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-save"/><input type="reset" class="cancel" value="' + soy.$$escapeHtml('Cancel') + '" name="reset" id="gadget-' + soy.$$escapeHtml(opt_data.id) + '-cancel" class="userpref-form-cancel"/></div></form>';
  }
  var gadgetHeight__soy279 = opt_data.height ? opt_data.height : 300;
  output += ((opt_data.inlineHtml || opt_data.amdModule) ? '<div id="gadget-' + soy.$$escapeHtml(opt_data.id) + '" class="gadget-inline">' + soy.$$filterNoAutoescape(opt_data.inlineHtml) + '</div>' : '<iframe id="gadget-' + soy.$$escapeHtml(opt_data.id) + '" class="gadget-iframe" name="gadget-' + soy.$$escapeHtml(opt_data.id) + '" src="' + soy.$$escapeHtml(opt_data.renderedGadgetUrl) + '" height="' + soy.$$escapeHtml(gadgetHeight__soy279) + '" width="100%" scrolling="no" frameborder="no"></iframe>') + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.gadget.soyTemplateName = 'Gadgets.Templates.Dashboard.gadget';
}


Gadgets.Templates.Dashboard.layoutDialog = function(opt_data, opt_ignored) {
  var output = '<div class="dialog-components"><h2 class="dialog-title">' + soy.$$escapeHtml('Edit layout') + '</h2><div class="dialog-page-body"><div class="dialog-panel-body panel-body"><p><strong>' + soy.$$escapeHtml('Choose dashboard layout') + '</strong></p><ul>';
  var layoutList305 = opt_data.layouts;
  var layoutListLen305 = layoutList305.length;
  for (var layoutIndex305 = 0; layoutIndex305 < layoutListLen305; layoutIndex305++) {
    var layoutData305 = layoutList305[layoutIndex305];
    output += '<li><a href="#" id="' + soy.$$escapeHtml(layoutData305.layoutAttrName) + '"><strong>' + soy.$$escapeHtml(layoutData305.layout) + '</strong></a></li>';
  }
  output += '</ul></div></div><div class="dialog-button-panel"><button class="button-panel-button" id="' + soy.$$escapeHtml(opt_data.closeId) + '">' + soy.$$escapeHtml('Close') + '</button></div></div>';
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.layoutDialog.soyTemplateName = 'Gadgets.Templates.Dashboard.layoutDialog';
}


Gadgets.Templates.Dashboard.dashboardMenu = function(opt_data, opt_ignored) {
  var output = '<div class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>' + soy.$$escapeHtml(opt_data.title) + '</h1></div><div class="aui-page-header-actions" id="dash-options"><div id="dash-throbber" class="throbber">&nbsp;</div>';
  var itemList321 = opt_data.items;
  var itemListLen321 = itemList321.length;
  for (var itemIndex321 = 0; itemIndex321 < itemListLen321; itemIndex321++) {
    var itemData321 = itemList321[itemIndex321];
    output += Gadgets.Templates.Dashboard.toolsMenuItem(itemData321);
  }
  output += '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Gadgets.Templates.Dashboard.dashboardMenu.soyTemplateName = 'Gadgets.Templates.Dashboard.dashboardMenu';
}
;
;
/* module-key = 'com.atlassian.gadgets.dashboard:client-side-soy-templates', location = 'templates/dashboard-item-directory.soy' */
// This file was automatically generated from dashboard-item-directory.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Dashboard.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Dashboard == 'undefined') { JIRA.Dashboard = {}; }
if (typeof JIRA.Dashboard.Templates == 'undefined') { JIRA.Dashboard.Templates = {}; }


JIRA.Dashboard.Templates.gadgetDirectoryDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-layer aui-dialog2 aui-dialog2-xlarge" aria-hidden="true"><header class="aui-dialog2-header"><h1 class="aui-dialog2-header-main">' + soy.$$escapeHtml(opt_data.headerText) + '</h1>' + ((opt_data.canManageGadgets) ? '<div class="aui-dialog2-header-secondary"><a href="' + soy.$$escapeHtml(opt_data.gadgetsAdminUrl) + '">' + soy.$$escapeHtml(opt_data.manageGadgetsLabel) + '</a></div>' : '') + '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a></header><div class="aui-dialog2-content"></div></section>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.gadgetDirectoryDialog.soyTemplateName = 'JIRA.Dashboard.Templates.gadgetDirectoryDialog';
}


JIRA.Dashboard.Templates.gadgetDirectoryLoadingPage = function(opt_data, opt_ignored) {
  return '<div class="message-panel"><aui-spinner class="loading-spinner" size="small"></aui-spinner><p class="loading-text">' + soy.$$escapeHtml(opt_data.loadingText) + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.gadgetDirectoryLoadingPage.soyTemplateName = 'JIRA.Dashboard.Templates.gadgetDirectoryLoadingPage';
}


JIRA.Dashboard.Templates.gadgetDirectoryLoadFailurePage = function(opt_data, opt_ignored) {
  return '<div class="message-panel"><p class="title" style="text-align: center;"><strong>' + soy.$$escapeHtml('Failed to load gadgets') + '</strong></p><p style="text-align: center;">' + soy.$$escapeHtml('Something went wrong while trying to load the gadgets.') + '</p><p style="text-align: center;"><a href="#" data-purpose="reload-directory">' + soy.$$escapeHtml('Try again') + '</a></p></div>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.gadgetDirectoryLoadFailurePage.soyTemplateName = 'JIRA.Dashboard.Templates.gadgetDirectoryLoadFailurePage';
}


JIRA.Dashboard.Templates.gadgetDirectoryPage = function(opt_data, opt_ignored) {
  return '<div id="directory-page" class="aui-group"><div id="nav-panel" class="aui-item aui-page-panel-nav"><form class="directory-search aui" action="#"><input id="search" class="text" type="text" placeholder="' + soy.$$escapeHtml(opt_data.searchPlaceholder) + '"></input></form><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"></div></nav></div><div id="right-panel" class="aui-item"><div id="message-panel"></div><div id="list-panel"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.gadgetDirectoryPage.soyTemplateName = 'JIRA.Dashboard.Templates.gadgetDirectoryPage';
}


JIRA.Dashboard.Templates.directoryNavList = function(opt_data, opt_ignored) {
  var output = '<div class="aui-nav-heading"><strong>' + soy.$$escapeHtml(opt_data.headerText) + '</strong></div><ul class="aui-nav">';
  var categoryList38 = opt_data.categories;
  var categoryListLen38 = categoryList38.length;
  for (var categoryIndex38 = 0; categoryIndex38 < categoryListLen38; categoryIndex38++) {
    var categoryData38 = categoryList38[categoryIndex38];
    var isSelected__soy39 = categoryData38.label == opt_data.selectedCategoryLabel;
    output += JIRA.Dashboard.Templates.directoryNavItem({category: categoryData38, selected: isSelected__soy39});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.directoryNavList.soyTemplateName = 'JIRA.Dashboard.Templates.directoryNavList';
}


JIRA.Dashboard.Templates.directoryNavItem = function(opt_data, opt_ignored) {
  return '<li class="category-nav-item' + ((opt_data.selected) ? ' aui-nav-selected' : '') + '" ><a href="#" data-category-label="' + soy.$$escapeHtml(opt_data.category.label) + '" data-purpose="category-nav" title="' + soy.$$escapeHtml(opt_data.category.label) + '"><span class="aui-badge">' + soy.$$escapeHtml(opt_data.category.count) + '</span>' + soy.$$escapeHtml(opt_data.category.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.directoryNavItem.soyTemplateName = 'JIRA.Dashboard.Templates.directoryNavItem';
}


JIRA.Dashboard.Templates.directoryItems = function(opt_data, opt_ignored) {
  var output = '';
  var itemList60 = opt_data.items;
  var itemListLen60 = itemList60.length;
  for (var itemIndex60 = 0; itemIndex60 < itemListLen60; itemIndex60++) {
    var itemData60 = itemList60[itemIndex60];
    output += (itemData60.specUri) ? JIRA.Dashboard.Templates.directoryItem({item: itemData60, id: itemData60.specUri, type: 'gadget'}) : JIRA.Dashboard.Templates.directoryItem({item: itemData60, id: itemData60.completeModuleKey, type: 'dashboard-item'});
  }
  output += JIRA.Dashboard.Templates.noResultsPage(null);
  return output;
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.directoryItems.soyTemplateName = 'JIRA.Dashboard.Templates.directoryItems';
}


JIRA.Dashboard.Templates.directoryItem = function(opt_data, opt_ignored) {
  var output = '';
  var localityLabel__soy75 = opt_data.item.isLocal ? 'Local' : 'External';
  output += '<div class="aui-group item-group" data-item-id="' + soy.$$escapeHtml(opt_data.id) + '" data-item-title="' + soy.$$escapeHtml(opt_data.item.titleLabel) + '">' + ((opt_data.item.thumbnailUri) ? '<div class="aui-item item-thumbnail"><img width="120" height="60" src="' + soy.$$escapeHtml(opt_data.item.thumbnailUri) + '"></img></div>' : '') + '<div class="aui-item item-description"><h4>' + soy.$$escapeHtml(opt_data.item.titleLabel) + '</h4><p class="item-author">' + soy.$$escapeHtml(opt_data.item.authorLineItem) + '  &bull;  ' + soy.$$escapeHtml(localityLabel__soy75) + '</p><p>' + soy.$$escapeHtml(opt_data.item.description) + '</p>' + ((opt_data.item.specUri) ? '<div class="aui-group"><textarea style="width: 350px; height: 50px; display: none;">' + soy.$$escapeHtml(opt_data.item.specUriDisplay) + '</textarea><a href="#" class="toggle-xml" data-purpose="toggle-xml">' + soy.$$escapeHtml('Show XML link') + '</a></div>' : '') + '</div><div class="aui-item item-actions"><button type="button" class="aui-button add-dashboard-item-selector" data-purpose="add-dashboard-item" data-item-type="' + soy.$$escapeHtml(opt_data.type) + '" data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml('Add gadget') + '</button></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.directoryItem.soyTemplateName = 'JIRA.Dashboard.Templates.directoryItem';
}


JIRA.Dashboard.Templates.directoryMessages = function(opt_data, opt_ignored) {
  return '' + ((opt_data.payload.directoryIsVisible && opt_data.payload.hasUnrenderedData) ? JIRA.Dashboard.Templates.moreDataMessage(null) : '') + ((opt_data.payload.retrievalInProgress) ? JIRA.Dashboard.Templates.inProgressMessage(null) : (opt_data.payload.retrievalFailed) ? JIRA.Dashboard.Templates.retrievalFailedMessage(null) : '');
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.directoryMessages.soyTemplateName = 'JIRA.Dashboard.Templates.directoryMessages';
}


JIRA.Dashboard.Templates.inProgressMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.info({id: 'in-progress-message', titleContent: 'Not all gadgets have loaded', content: '<p>' + soy.$$escapeHtml('We\x27re still trying to fetch all of the available gadgets.') + '</p>'});
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.inProgressMessage.soyTemplateName = 'JIRA.Dashboard.Templates.inProgressMessage';
}


JIRA.Dashboard.Templates.retrievalFailedMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({id: 'failure-message', titleContent: 'Some gadgets failed to load', content: '<p>' + soy.$$escapeHtml('We were unable to load all of the available gadgets.') + '</p><p><a href=\'#\' data-purpose=\'retry\'>' + soy.$$escapeHtml('Try again') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.retrievalFailedMessage.soyTemplateName = 'JIRA.Dashboard.Templates.retrievalFailedMessage';
}


JIRA.Dashboard.Templates.moreDataMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.info({id: 'more-data-message', titleContent: 'More gadgets available', content: '<p>' + soy.$$escapeHtml('Additional gadgets have been found and can be loaded.') + '</p><p><a href=\'#\' id="load-more-directory-items" data-purpose=\'load\'>' + soy.$$escapeHtml('Load all gadgets') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.moreDataMessage.soyTemplateName = 'JIRA.Dashboard.Templates.moreDataMessage';
}


JIRA.Dashboard.Templates.noResultsPage = function(opt_data, opt_ignored) {
  return '<div class="message-panel" data-item-id="no-result"><p class="title" style="text-align: center;"><strong>' + soy.$$escapeHtml('No results') + '</strong></p><p style="text-align: center;">' + soy.$$escapeHtml('Try a different category or change your search') + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Dashboard.Templates.noResultsPage.soyTemplateName = 'JIRA.Dashboard.Templates.noResultsPage';
}
;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard-underscore', location = 'js/shims/underscore-shim.js' */
define("dashboard/shims/underscore",["atlassian/libs/underscore-1.5.2"],function(_){return _});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/json.js' */
if(!this.JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/lib/effects.js' */
jQuery.effects||(function($){$.effects={};$.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true}fx.elem.style[attr]="rgb("+Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0)+","+Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0)+","+Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)+")"}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3){return color}if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color)){return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)]}if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color)){return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55]}if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color)){return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)]}if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color)){return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)]}if(result=/rgba\(0, 0, 0, 0\)/.exec(color)){return colors["transparent"]}return colors[$.trim(color).toLowerCase()]}function getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=""&&color!="transparent"||$.nodeName(elem,"body")){break}attr="backgroundColor"}while(elem=elem.parentNode);return getRGB(color)}var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]=="string"){camelCase=key.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase()});newStyle[camelCase]=style[key]}}}else{for(key in style){if(typeof style[key]==="string"){newStyle[key]=style[key]}}}return newStyle}function filterStyles(styles){var name,value;for(name in styles){value=styles[name];if(value==null||$.isFunction(value)||name in shorthandStyles||(/scrollbar/).test(name)||(!(/color/i).test(name)&&isNaN(parseFloat(value)))){delete styles[name]}}return styles}function styleDifference(oldStyle,newStyle){var diff={_:0},name;for(name in newStyle){if(oldStyle[name]!=newStyle[name]){diff[name]=newStyle[name]}}return diff}$.effects.animateClass=function(value,duration,easing,callback){if($.isFunction(easing)){callback=easing;easing=null}return this.each(function(){var that=$(this),originalStyleAttr=that.attr("style")||" ",originalStyle=filterStyles(getElementStyles.call(this)),newStyle,className=that.attr("className");$.each(classAnimationActions,function(i,action){if(value[action]){that[action+"Class"](value[action])}});newStyle=filterStyles(getElementStyles.call(this));that.attr("className",className);that.animate(styleDifference(originalStyle,newStyle),duration,easing,function(){$.each(classAnimationActions,function(i,action){if(value[action]){that[action+"Class"](value[action])}});if(typeof that.attr("style")=="object"){that.attr("style").cssText="";that.attr("style").cssText=originalStyleAttr}else{that.attr("style",originalStyleAttr)}if(callback){callback.apply(this,arguments)}})})};$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames)},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames)},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force=="boolean"||force===undefined){if(!speed){return this._toggleClass(classNames,force)}else{return $.effects.animateClass.apply(this,[(force?{add:classNames}:{remove:classNames}),speed,easing,callback])}}else{return $.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing])}},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback])}});$.extend($.effects,{version:"1.8rc3",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data("ec-storage-"+set[i],element[0].style[set[i]])}}},restore:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.css(set[i],element.data("ec-storage-"+set[i]))}}},setMode:function(el,mode){if(mode=="toggle"){mode=el.is(":hidden")?"show":"hide"}return mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent()}var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});element.wrap(wrapper);wrapper=element.parent();if(element.css("position")=="static"){wrapper.css({position:"relative"});element.css({position:"relative"})}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto"}});element.css({position:"relative",top:0,left:0})}return wrapper.css(props).show()},removeWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent().replaceWith(element)}return element},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1]}});return value}});function _normalizeArguments(effect,options,speed,callback){if(typeof effect=="object"){callback=options;speed=null;options=effect;effect=options.effect}if($.isFunction(options)){callback=options;speed=null;options={}}if(typeof options=="number"||$.fx.speeds[options]){callback=speed;speed=options;options={}}options=options||{};speed=speed||options.duration;speed=$.fx.off?0:typeof speed=="number"?speed:$.fx.speeds[speed]||$.fx.speeds._default;callback=callback||options.complete;return[effect,options,speed,callback]}$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),args2={options:args[1],duration:args[2],callback:args[3]},effectMethod=$.effects[effect];return effectMethod&&!$.fx.off?effectMethod.call(this,args2):this},_show:$.fn.show,show:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed]){return this._show.apply(this,arguments)}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="show";return this.effect.apply(this,args)}},_hide:$.fn.hide,hide:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed]){return this._hide.apply(this,arguments)}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="hide";return this.effect.apply(this,args)}},__toggle:$.fn.toggle,toggle:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed]||typeof speed=="boolean"||$.isFunction(speed)){return this.__toggle.apply(this,arguments)}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="toggle";return this.effect.apply(this,args)}},cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit]}});return val}});$.easing.jswing=$.easing.swing;$.extend($.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return -c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b}return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b}return -c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b}return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b}if(t==d){return b+c}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b}return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d/2)==2){return b+c}if(!p){p=d*(0.3*1.5)}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return $.easing.easeInBounce(x,t*2,0,c,d)*0.5+b}return $.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}})})(jQuery);;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/lib/ajs.clone.js' */
AJS.clone=function(o){function F(){}F.prototype=o;return new F()};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/lib/ajs.parseUri.js' */
if(!console.error){console.log=console.warn=console.error=console.time=console.timeEnd=function(){}}AJS.parseUri=function(uri,strict){var unesc=window.decodeURIComponent||unescape;var esc=window.encodeURIComponent||escape;function parseUri(str){var o=parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||""}uri[o.q.name]={};uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){if($1){uri[o.q.name][unesc($1)]=unesc($2)}});return uri}parseUri.options={strictMode:!!strict,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};uri=parseUri(uri);uri.toString=function(){var params=[];AJS.$.each(uri.queryKey,function(name,value){params.push(esc(name)+"="+esc(value))});return uri.protocol+"://"+uri.authority+uri.path+"?"+params.join("&")+"#"+uri.anchor};return uri};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.window.js' */
window.AG=window.AG||{};AG.window=window;;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.DOMEvent.js' */
window.AG=window.AG||{};AG.DOMEvent=function(name){var window=AG.window;var event;if(typeof window.Event==="function"){event=new window.Event(name)}else{event=window.document.createEvent("HTMLEvents");event.initEvent(name,true,false)}return event};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.DashboardManager.js' */
window.AG=window.AG||{};AG.DashboardManager=(function(){var dashboard,layouts=[],initializeMenuHandlers=function(){AJS.$("#layout-changer").click(function(e){e.preventDefault();AG.DashboardManager.editLayout()});if(AJS.$("#dashboard-tools-dropdown").length>0){AJS.$("#dashboard-tools-dropdown").dropDown("standard",{trigger:".aui-dd-link"})}},initializeDirectory=function(){if(AG.param.get("writable")){new JIRA.Dashboard.Modules.Directory(".add-gadget-link")}};return{getDashboard:function(){return dashboard},addLayout:function(descriptor){var layout=AG.LayoutManager(descriptor);layouts.push(layout);if(descriptor.active!==false){this.setLayout(layout)}layout.init()},showShims:function(){if(!AJS.$("body").hasClass("propagation-blocker")){AJS.$("body").addClass("propagation-blocker");this.getDashboard().shim.height(this.getDashboard().outerHeight())}},hideShims:function(){if(AJS.$("body").hasClass("propagation-blocker")){AJS.$("body").removeClass("propagation-blocker")}},doDiagnostics:function(){AJS.$.ajax({type:"post",url:AG.param.get("dashboardDiagnosticsUrl"),data:{uri:document.location.href},error:function(request){if(request.status==500){diagnosticsErrorDisplay(request)}},success:function(data){AJS.$("#diagnostic-warning").addClass("hidden")}});var diagnosticsErrorDisplay=function(request){var diagnosticsWarningDiv=AJS.$("#diagnostic-warning");diagnosticsWarningDiv.html(request.responseText);var learnMoreText="Click here to learn more";var diagnosticsContentDiv=AJS.$("#diagnostic-content",diagnosticsWarningDiv);var learnMoreLink=AJS.$("#learn-more-link",diagnosticsWarningDiv);var displayErrorLink=AJS.$("#display-error-link",diagnosticsWarningDiv);var stackTraceDiv=AJS.$("#error-stack-trace",diagnosticsWarningDiv);var closeWarning=function(){diagnosticsWarningDiv.slideUp();diagnosticsWarningDiv.addClass("hidden");AJS.$.ajax({type:"post",url:AG.param.get("dashboardDiagnosticsUrl"),data:{method:"delete"}})};var setToggleDetails=function(link,detailDiv){link.click(function(){if(link.text()=="Hide"){link.text(learnMoreText);detailDiv.slideUp();detailDiv.addClass("hidden")}else{detailDiv.removeClass("hidden");detailDiv.slideDown("slow");link.text("Hide")}})};setToggleDetails(learnMoreLink,diagnosticsContentDiv);setToggleDetails(displayErrorLink,stackTraceDiv);AJS.$("#diagnostic-warning .close").click(function(){closeWarning()});diagnosticsWarningDiv.removeClass("hidden")}},editLayout:function(){var layoutHtml,popup,layouts=[];AJS.$.each(AG.LayoutManager.layouts,function(){var layout=this,layoutAttrName=AG.LayoutManager.getLayoutAttrName(layout);layouts.push({layoutAttrName:layoutAttrName,layout:layout})});layoutHtml=Gadgets.Templates.Dashboard.layoutDialog({layouts:layouts,closeId:"dialog-close"});popup=AJS.popup(507,224,"layout-dialog");popup.element.html(layoutHtml).addClass(AG.LayoutManager.getLayoutAttrName(AG.DashboardManager.getLayout().getLayout())).addClass("aui-dialog");AJS.$("#dialog-close",popup.element).click(function(e){popup.hide();e.preventDefault()});AJS.$.each(AG.LayoutManager.layouts,function(){var layout=this,layoutAttrName=AG.LayoutManager.getLayoutAttrName(layout);AJS.$("#"+layoutAttrName).click(function(e){var activeLayout=AG.DashboardManager.getLayout();popup.element.removeClass(AG.LayoutManager.getLayoutAttrName(activeLayout.getLayout())).addClass(layoutAttrName);activeLayout.setLayout(layout);popup.hide();AG.Sortable.update();e.preventDefault()})});this.editLayout=(function(){popup.show();AJS.$(document).keyup(function(e){if(e.keyCode===27){popup.hide();AJS.$(document).unbind("keyup",arguments.callee);e.preventDefault()}});return arguments.callee}())},getLayout:function(){return this.activeLayout},markReadOnlyLayouts:function(){AJS.$.each(layouts,function(){if(!this.isWritable()){this.markReadOnlyLayout()}})},unmarkReadOnlyLayouts:function(){AJS.$.each(layouts,function(){if(!this.isWritable()){this.unmarkReadOnlyLayout()}})},setLayout:function(layout){this.activeLayout=layout;this.getDashboard().header.html(AJS.$("<h1></h1>").text(layout.getName()))},addGadget:function(gadget,column){this.activeLayout.addGadget(gadget,column)},getGadgetTokenFrames:function(){return AG.DashboardManager.getLayout().getGadgets().filter(function(gadget){return gadget.getElement().has("iframe.gadget-iframe").length}).map(function(gadget){return{gadget:gadget,iframeId:gadget.getElement().find("iframe.gadget-iframe").attr("id")}})},getGadgetTokenParams:function(){return this.getGadgetTokenFrames().map(function(gadgetFrame){return gadgetFrame.gadget.getSecurityToken()}).filter(Boolean).reduce(function(state,securityToken,index){state["st."+index]=securityToken;return state},{})},setup:function(options){var that=this,securityTokenRefreshRate=AJS.parseUri(document.location.href).queryKey["__st_refresh"]||1000*60*12;console.debug=console.debug||function(){};AJS.$.aop.after({target:AG.window.gadgets.IfrGadgetService.prototype,method:"setHeight"},function(){that.getLayout().onInit(function(){that.getLayout().refresh()})});AG.param.set(options.params);AG.Sortable.init();dashboard=AJS.$("#dashboard");dashboard.contents=AJS.$("#dashboard-content");dashboard.shim=AJS.$('<div class="dashboard-shim"> </div>').appendTo(dashboard.contents);dashboard.tabContainer=dashboard.find(".dashboard-tabs");dashboard.header=dashboard.contents.find(".aui-page-header-main");initializeMenuHandlers();AJS.$.each(options.layouts,function(){that.addLayout(this)});initializeDirectory();dashboard.removeClass("initializing");dashboard[0].dispatchEvent(AG.DOMEvent("initialized"));function updateSecurityTokens(){console.debug("Updating all gadget security tokens");var gadgetTokenFrames=that.getGadgetTokenFrames();var gadgetTokenParams=that.getGadgetTokenParams();if(!Object.keys(gadgetTokenParams).length){console.debug("No iframe gadgets on dashboard, so there is no need to update security tokens.");return }AJS.$.ajax({type:"POST",url:AG.param.get("securityTokensUrl"),data:gadgetTokenParams,dataType:"json",success:function(newSecurityTokens){AJS.$.each(gadgetTokenFrames,function(index){this.gadget.setSecurityToken(newSecurityTokens["st."+index]);try{AG.window.gadgets.rpc.call(this.iframeId,"update_security_token",null,this.gadget.getSecurityToken())}catch(e){console.debug("Unable to update the security token for gadget with iframe id "+this.iframeId+".  This likely means that the gadget does not use the "+"'auth-refresh' feature.  If the gadget uses gadgets.io.makeRequest after its"+"initial startup, it is a good idea to use the 'auth-refresh' feature "+"by adding <Optional feature='auth-refresh' /> to your gadget's "+"<ModulePrefs> section.  Otherwise, the gadget's security token could expire"+" and subsequent calls to gadgets.io.makeRequest will fail.")}});console.debug("Updating security tokens complete.")},error:function(request,textStatus){if(request.status!=200){console.debug("Failed to get new security tokens. Response was had a status of '"+request.status+"' saying '"+request.statusText+"'")}else{console.debug("There was an error processing the response. Error was '"+textStatus+"'")}}})}console.debug("Security tokens will be refreshed every "+securityTokenRefreshRate+"ms");window.setInterval(updateSecurityTokens,securityTokenRefreshRate);that.doDiagnostics()}}}());(function(){var buffer;jQuery(AG).bind("AG.iframeResize",function(){if(buffer){clearTimeout(buffer)}buffer=window.setTimeout(function(){AG.DashboardManager.getLayout().refresh();buffer=null},100)})})();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.LayoutManager.js' */
(function(){if(typeof Object.create!=="function"){Object.create=function(o){function F(){}F.prototype=o;return new F()}}var LayoutManager={saveLayout:function(){var that=this;function getData(){return AJS.$.extend({layout:that.layout},AG.Sortable.serialize())}AJS.$.ajax({type:"PUT",url:AG.param.get("layoutAction"),contentType:"application/json",data:JSON.stringify(getData()),success:function(){if(AJS.debug){console.log("AG.LayoutManager.saveLayout: Layout ("+that.layout+") saved successfully")}},error:function(request){if(request.status==403||request.status==401){alert("Sorry, you do not have permission to modify this dashboard. Your dashboard may be out of sync with the server: please reload the page.")}else{alert("Sorry, your changes to this dashboard could not be saved. Your dashboard may be out of sync with the server: please reload the page.")}if(AJS.debug){console.log("AG.LayoutManager.saveLayout: Request failed! Printing response object...");console.log(request)}}})},getColumn:function(idx){var that=this,i=parseInt(idx,16);if(arguments.length){return that.columns}else{if(!isNaN(i)||!that.columns[i]){return that.columns.eq(i)}else{if(AJS.debug){console.error("AG.LayoutManager.getColumn: The column index you provided is invalid. "+"Expected a number in the range of 0-"+that.columns.length-1+" but recieved "+idx)}}}},setLayout:function(layout,save){layout=AJS.$.trim(layout);if(this.layout===layout){if(AJS.debug){console.warn("AG.LayoutManager.setLayout: Ignoring! The layout supplied is the same as the current "+"layout ("+layout+")")}return }if(AJS.$.inArray(layout,AG.LayoutManager.layouts)===-1){if(AJS.debug){console.error("AG.LayoutManager.setLayout: Invalid layout! Was given "+layout+", but expected "+"either of '"+AG.LayoutManager.layouts.toString()+"'")}}this.container.addClass("layout-"+layout.toLowerCase());if(!this.isWritable()){if(AJS.debug){console.log("AG.LayoutManager.setLayout: Can't manipulate layout. Layout is not writable")}return }if(this.layout){this.container.removeClass("layout-"+this.layout.toLowerCase())}AJS.$.each(this.gadgets,function(){var layoutRep=this.getElement().layoutRep,prevColumn=layoutRep.parent().prev();if(!layoutRep.is(":visible")){if(prevColumn.is(":visible")){prevColumn.append(layoutRep)}else{prevColumn.prev().append(layoutRep)}}});if(layout==="AB"||layout==="BA"||layout==="AA"){this.columns.eq(0).addClass("sortable");this.columns.eq(1).addClass("sortable");this.columns.eq(2).removeClass("sortable")}else{if(layout==="A"){this.columns.eq(0).addClass("sortable");this.columns.eq(1).removeClass("sortable");this.columns.eq(2).removeClass("sortable")}else{if(layout==="AAA"){this.columns.eq(0).addClass("sortable");this.columns.eq(1).addClass("sortable");this.columns.eq(2).addClass("sortable")}}}this.layout=layout;this.refresh();if(save!==false){this.saveLayout()}else{if(AJS.debug){console.log("AG.LayoutManager.setLayout: Layout successfully set to '"+this.layout+"'")}}},getGadgets:function(){return this.gadgets},removeGadget:function(gadget){var that=this;AJS.$.each(this.gadgets,function(idx){if(this===gadget){that.gadgets.splice(idx,1);return false}})},deactivate:function(){this.container.hide();AJS.$.each(this.gadgets,function(){if(this.getElement().layoutRep.css("display")==="list-item"){this.getElement().hide()}})},activate:function(){this.container.show();AJS.$.each(this.gadgets,function(){this.getElement().show()});this.refresh()},restoreDefaultView:function(){var that=this;AJS.$(".operations li",AG.DashboardManager.getDashboard()).toggleClass("hidden");this.container.removeClass("maximized");jQuery.each(this.getGadgets(),function(){if(that.getPublicInstance()!==this){this.getElement().show()}});this.refresh()},refresh:function(){var that=this;function appendEmptyMsgElem(col,idx){var message=AJS.format("Drag your gadgets here or {0}add a new gadget.{1}","<a class='add-gadget-link' id='add-gadget-"+idx+"' href='#'>","</a>");return AJS.$("<li class='empty-text'>"+message+"</li>").appendTo(col)}function isCanvasMode(){return !!AJS.$(".layout.maximized").size()}if(!this.initialized&&!isCanvasMode()){return }if(!AG.DashboardManager.getDashboard().hasClass("dragging")){this.columns.css("minHeight","");this.columns.filter(":visible").each(function(idx){var column=AJS.$(this);if(AJS.$("li:visible:not(.empty-text)",column).length===0){column.addClass("empty");if(that.isWritable()){if(!this.msgElem){this.msgElem=appendEmptyMsgElem(column,idx)}else{if(this.msgElem){this.msgElem.show()}}}}else{if(column.hasClass("empty")){column.removeClass("empty");if(this.msgElem){this.msgElem.hide()}}}})}AJS.$("li.gadget",this.container).each(function(){this.getGadgetInstance().updatePosition()});if(!AG.DashboardManager.getDashboard().hasClass("dragging")){this.columns.each(function(){var column=AJS.$(this);column.css("minHeight",column.parent().height())})}},addGadget:function(gadget,column){var that=this,rpctoken;function hideGadget(){gadget.getElement().layoutRep.addClass("hidden");gadget.getElement().hide();gadget.getLayoutManager().refresh()}function showGadget(){delete gadget.hasBeenDropped;gadget.getElement().layoutRep.removeClass("hidden");gadget.getElement().show();gadget.getLayoutManager().refresh()}function validateAdd(numGadgets){if(parseInt(numGadgets)>=AG.param.get("maxGadgets")){showGadget();alert("Sorry, you have exceeded the maximum number of gadgets supported by your dashboard.  You must remove some gadgets before proceeding.")}else{gadget.move(that.options.resourceUrl)}}function appendToColumn(){if(!that.initialized){that.columns.eq(column).append(gadget.getElement().layoutRep)}else{that.columns.eq(column).prepend(gadget.getElement().layoutRep)}}function isFromDifferentLayout(){return AJS.$.isFunction(gadget.getLayoutManager)}function ensureIframeDoesntCache(){AJS.$("iframe",gadget.getElement()).each(function(){this.src=this.src;this.contentWindow.location=this.src})}function raiseIframeAppendedEvent(){AJS.$("iframe",gadget.getElement()).each(function(idx,elem){AJS.$(document).trigger("iframeAppended",elem)})}if(!isFromDifferentLayout()){column=column||gadget.column||0;gadget=gadget.loaded?gadget:AG.Gadget.getNullGadgetRepresentation(gadget);rpctoken=Math.round(Math.random()*10000000);if(gadget.renderedGadgetUrl){if(gadget.renderedGadgetUrl.indexOf("#rpctoken")==-1){gadget.renderedGadgetUrl+="#rpctoken="+rpctoken}else{gadget.renderedGadgetUrl=gadget.renderedGadgetUrl.replace(/#rpctoken=\d*/,"#rpctoken="+rpctoken)}}gadget.layout=this.options;gadget=AG.Gadget(gadget);appendToColumn();AG.DashboardManager.getDashboard().contents.append(gadget.getElement());gadget.updatePosition();gadget.freezeHeight();gadgets.rpc.setAuthToken(gadget.getElement().find("iframe").attr("id"),rpctoken);ensureIframeDoesntCache();AG.Sortable.update();raiseIframeAppendedEvent();gadget.onAfterRender()}else{hideGadget();AJS.$.get(this.options.resourceUrl+"/numGadgets",function(numGadgets){validateAdd(numGadgets)})}this.refresh();this.gadgets.push(gadget);return gadget},markReadOnlyLayout:function(){if(!this.isWritable()){this.tab.addClass("inactive")}},onInit:function(callback){if(!this.initialized){this.onInit.callbacks=this.onInit.callbacks||[];this.onInit.callbacks.push(callback)}else{callback()}},unmarkReadOnlyLayout:function(){if(!this.isWritable()&&this.tab.hasClass("inactive")){this.tab.removeClass("inactive")}},isWritable:function(){return this.options.writable},getPublicInstance:function(){var that=this;if(!this.publicInterface){this.publicInterface={unmarkReadOnlyLayout:function(){return that.unmarkReadOnlyLayout.apply(that,arguments)},restoreDefaultView:function(){return that.restoreDefaultView.apply(that,arguments)},markReadOnlyLayout:function(){return that.markReadOnlyLayout.apply(that,arguments)},isWritable:function(){return that.isWritable.apply(that,arguments)},activate:function(){return that.activate.apply(that,arguments)},deactivate:function(){return that.deactivate.apply(that,arguments)},getGadgets:function(){return that.getGadgets.apply(that,arguments)},getLayout:function(){return that.layout},getContainer:function(){return that.container},getColumn:function(){return that.columns},setLayout:function(){return that.setLayout.apply(that,arguments)},addGadget:function(){return that.addGadget.apply(that,arguments)},removeGadget:function(){return that.removeGadget.apply(that,arguments)},refresh:function(){return that.refresh.apply(that,arguments)},init:function(){return that.init.apply(that,arguments)},saveLayout:function(){return that.saveLayout.apply(that,arguments)},getId:function(){return that.options.id},getName:function(){return that.options.title},onInit:function(){return that.onInit.apply(that,arguments)}}}return this.publicInterface},init:function(){var that=this,canvasGadget;this.gadgets=[];this.options.gadgets=this.options.gadgets||[];function getCanvasGadgetRepresentation(gadgets){var canvasGadget;AJS.$.each(that.options.gadgets,function(){if(AG.Gadget.isCanvasView(this.id)){canvasGadget=this;return false}});return canvasGadget}function fitTab(label,capacity){var labelText=label.text();while(label.width()>=capacity&&labelText.length>=3){labelText=labelText.slice(0,labelText.length-1);label.text(labelText+"...")}}function appendTab(){var labelSpan=AJS.$("<span />").text(that.options.title).attr("title",that.options.title),labelStrong=AJS.$("<strong />").append(labelSpan),capacity;that.tab=AJS.$("<li />");if(!that.options.active){that.tab.append(AJS.$("<a href='"+that.options.uri+"' />").append(labelStrong))}else{that.tab.append(labelStrong);that.tab.addClass("active")}that.tab.get(0).getLayoutInstance=function(){return that.getPublicInstance()};that.tab.appendTo(AG.DashboardManager.getDashboard().tabContainer);capacity=AG.DashboardManager.getDashboard().tabContainer.innerWidth()-parseInt(labelStrong.css("padding-left"))-parseInt(labelStrong.css("padding-right"));fitTab(labelSpan,capacity);AJS.$("li:first",AG.DashboardManager.getDashboard().tabContainer).addClass("first");if(that.isWritable()&&that.options.active===false){AG.Sortable.addHotSpot(that.tab,function(gadget){that.addGadget(gadget)})}}function appendColumns(){that.container=AJS.$("<div class='layout' />").appendTo(AG.DashboardManager.getDashboard().contents);that.columns=AJS.$("<ul />").addClass("column first").add(AJS.$("<ul />").addClass("column second")).add(AJS.$("<ul />").addClass("column third")).appendTo(that.container)}function appendGadgets(){AJS.$.each(that.options.gadgets,function(){that.addGadget(this)})}function setInitialized(){that.initialized=true;if(that.onInit.callbacks){AJS.$.each(that.onInit.callbacks,function(){this()})}that.refresh()}if(this.options.active!==false){appendColumns();this.setLayout(this.options.layout,false);canvasGadget=getCanvasGadgetRepresentation(this.options.gadgets);if(canvasGadget){canvasGadget=this.addGadget(canvasGadget);canvasGadget.setView("canvas");canvasGadget.updatePosition();AJS.$.aop.after({target:canvasGadget,method:"setView"},function(){canvasGadget.remove();that.removeGadget(canvasGadget);appendGadgets();setInitialized()})}else{appendGadgets();setInitialized()}}}};AG.LayoutManager=function(options){var layoutManager=Object.create(LayoutManager);layoutManager.options=options;return layoutManager.getPublicInstance()};AG.LayoutManager.layouts=["A","AA","BA","AB","AAA"];AG.LayoutManager.getLayoutAttrName=function(layout){return"layout-"+layout.toLowerCase()}}());;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.Gadget.js' */
window.AG=window.AG||{};(function(){var _=require("dashboard/shims/underscore");function FauxList(listContainer){var that=this,ENTER_KEY=13;this.container=AJS.$(listContainer);this.values=AJS.$("input.list",this.container).hide().val().split("|");this.originalValues=this.values.join("|").split("|");this.container.append('<input class="add-to-list text med js" type="text" value="" />'+'<button class="submit-to-list js">'+"Add"+"</button>");this.container.children(".submit-to-list").click(function(e){that.addToList();e.preventDefault()});AJS.$("input.add-to-list",this.container).keydown(function(e){if(e.keyCode==ENTER_KEY){that.addToList();e.preventDefault()}});AJS.$(".description",this.container).appendTo(this.container);this.create(this.values)}FauxList.prototype={reset:function(){this.create(this.originalValues)},create:function(values){var ul,listItem,that=this;if(values){AJS.$.each(values,function(){if(this==""){values.splice(values.indexOf(this),1)}});ul=AJS.$('<ul class="faux-list"></ul>');if(values.length>0){for(var i=0,ii=values.length;i<ii;i++){listItem=AJS.$('<li class="listvalue-'+i+'"><span>'+values[i]+'</span><a class="remove" href="#remove-from-list" title="'+"Remove from list."+'">x</a></li>');AJS.$("a",listItem).click(function(e){var removeValue=AJS.$(this).parent("li").attr("class").split("-")[1];values.splice(removeValue,1);if(values.length>0){that.create(values)}else{AJS.$("input.list",this.container).val("")}listItem.remove();e.preventDefault()});ul.append(listItem)}if(AJS.$("ul.faux-list",this.container).length==0){AJS.$("input.list",this.container).before(ul)}else{AJS.$("ul.faux-list",this.container).replaceWith(ul)}}else{AJS.$("ul.faux-list",this.container).remove()}AJS.$("input.list",this.container).val(values.join("|"));AG.DashboardManager.getLayout().refresh()}},addToList:function(){var newValue=AJS.$("input.add-to-list",this.container).val().replace(/\|+/g,"%7C");this.values.push(newValue);AJS.$("input.add-to-list",this.container).val("");this.create(this.values)}};var Gadget={draw:function(json){var that=this;function addRenderingData(args){function generateMenuItems(){var menu=[];function isEditable(){return !!(isWritable()&&args.hasNonHiddenUserPrefs)}function isWritable(){return args.layout.writable}function generateColorList(){var colorList=[];AJS.$.each(AG.Gadget.COLORS,function(colorIndex){var color=AG.Gadget.getColorAttrName(this);colorList.push({styleClass:color,link:{href:"#",text:colorNames[colorIndex]}})});return{styleClass:"item-link gadget-colors",items:colorList}}if(isEditable()){menu.push({styleClass:"dropdown-item",link:{styleClass:"item-link edit",href:"#gadget-"+args.id+"-edit",text:"Edit"}})}menu.push({styleClass:"dropdown-item",link:{styleClass:"item-link "+(args.minimized?"maximization":"minimization"),href:"#",text:args.minimized?"Expand":"Minimise"}});if(isWritable()){menu.push(generateColorList());menu.push({styleClass:"dropdown-item",link:{styleClass:"item-link delete",href:"#",text:"Delete"}})}return menu}return AJS.$.extend({menu:{trigger:{text:"Gadget menu",href:"#"},list:{items:generateMenuItems()}}},args)}function createElement(){json.minimized=that.minimized;json.view=that.view;var renderingData=addRenderingData(json);that.$=AJS.$(Gadgets.Templates.Dashboard.gadget(renderingData))}function setHeightFromCookie(){if(json){var height=AG.Cookie.read("gadget-"+json.id+"-fh",null);if(!isNaN(parseInt(height))){json=AJS.$.extend(json,{height:height})}}}function setElementShortcuts(){that.$.layoutRep=AJS.$("<li class='gadget' id='rep-"+json.id+"' />").height(that.$.height());that.$.layoutRep.get(0).getGadgetInstance=that.$.get(0).getGadgetInstance=function(){return that.getPublicInstance()}}function applyDropdownControls(){var ACTIVE_CLASS="dropdown-active",ddParent=AJS.$(".aui-dd-parent",that.$);ddParent.mousedown(function(e){e.stopPropagation()});that.$.dropdown=ddParent.dropDown("standard",{selectionHandler:function(e){e.preventDefault()},item:"> li"})[0];that.$.dropdown.addCallback("show",function(){that.$.addClass(ACTIVE_CLASS);AG.DashboardManager.showShims()});that.$.dropdown.addCallback("hide",function(){that.$.removeClass(ACTIVE_CLASS);AG.DashboardManager.hideShims()});that.$.hover(function(){},function(){if(that.$.dropdown.$.is(":visible")){that.$.dropdown.hide()}})}function applyGadgetHoverControls(){var HOVER_CLASS="gadget-hover";that.$.hover(function(){AJS.$(".gadget-container",that.$).addClass(HOVER_CLASS)},function(){AJS.$(".gadget-container",that.$).removeClass(HOVER_CLASS)})}function applyColorControls(){AJS.$(".gadget-colors a",that.$).click(function(e){that.setColor(this.parentNode.className);e.preventDefault()})}function applyMinimizeControls(){var menuElem=AJS.$("a.minimization, a.maximization",that.$),titleElem=AJS.$(".dashboard-item-title",that.$),maxMinToggle=function(e){if(that.minimized){that.maximize()}else{that.minimize()}AJS.$(this).one(e.type,function(e){if(that.minimized){that.maximize()}else{that.minimize()}AJS.$(this).one(e.type,maxMinToggle)})};titleElem.one("dblclick",maxMinToggle);menuElem.one("click",maxMinToggle);if(AJS.$.browser.safari){titleElem.get(0).onselectstart=function(){return false}}}function applyFocusControls(){var column;AJS.$(".dashboard-item-header",that.$).mousedown(function(e){if(!that.$.hasClass("maximized")||AG.DashboardManager.getDashboard().hasClass("v-tabs")){if(!column){column=that.$.layoutRep.parent()}that.$.dropdown.hide();that.$.focusTimeout=setTimeout(function(){delete that.$.focusTimeout},150);e.target=that.$.layoutRep[0];that.$.layoutRep.trigger(e)}});that.$.mouseup(function(){if(that.$.focusTimeout){clearTimeout(that.$.focusTimeout)}else{if(that.$.layoutRep.is(":visible")){that.$.stop(true,true)}}})}function applyUserPrefControls(){var fauxLists=[],prefForm=AJS.$(".userpref-form",that.$),prefsChanged=false,savePrefForm=function(success){var formArray=prefForm.serializeArray(),submittedState={};AJS.$.each(formArray,function(){submittedState[this.name]=this.value||""});AJS.$(":checkbox:not(:checked)",prefForm).each(function(){submittedState[this.name]=false});AJS.$.ajax({url:prefForm.attr("action"),type:"PUT",contentType:"application/json",data:JSON.stringify(submittedState),dataType:"text",success:success})};if(that.isEditable()){AJS.$(".list-container",that.$).each(function(){fauxLists.push(new FauxList(this))});AJS.$(".edit",that.$).click(function(e){if(!prefForm.is(":visible")){if(that.minimized){that.maximize()}prefForm.removeClass("hidden");AJS.$(".field-group :input:first",prefForm).focus();that.getLayoutManager().refresh()}else{prefForm.addClass("hidden");that.getLayoutManager().refresh()}e.preventDefault()});prefForm.submit(function(e){savePrefForm(function(){window.location.reload()});e.preventDefault()});AJS.$(":reset",prefForm).click(function(){AJS.$.each(fauxLists,function(){this.reset()});prefForm.addClass("hidden");that.getLayoutManager().refresh()})}AJS.$("iframe.gadget-iframe",that.$).bind("setUserPref",function(e){for(var i=1,j=arguments.length;i<j;i+=2){if(pref_name=arguments[i]){var pref_value=arguments[i+1];var input=AJS.$(":input[name='up_"+pref_name+"']",prefForm);if(input.attr("type")=="checkbox"){input.attr("checked",pref_value)}else{input.val(pref_value)}}}if(!prefsChanged){setTimeout(function(){savePrefForm(function(){});prefsChanged=false},100);prefsChanged=true}})}function applyDeleteControls(){AJS.$("a.delete",that.$).bind("click",function(e){that.destroy();e.preventDefault()})}function applyViewToggleControls(){AJS.$("a.maximize",that.$).click(function(e){if(!AG.Gadget.isCanvasView(that.id)){that.getPublicInstance().setView("canvas");e.preventDefault()}else{that.getPublicInstance().setView("default");e.preventDefault()}})}function applyErrorMessage(){AJS.$("iframe.gadget-iframe",that.$).load(function(){AJS.$("#error-gadget-message",AJS.$(this).contents()).html(that.errorMessage)})}setHeightFromCookie();createElement();setElementShortcuts();applyDropdownControls();applyGadgetHoverControls();applyMinimizeControls();if(this.isMaximizable){applyViewToggleControls()}if(!this.loaded){applyErrorMessage()}if(this.getLayoutManager().isWritable()){applyDeleteControls();applyFocusControls();applyColorControls();applyUserPrefControls()}},isEditable:function(){if(this.configurable){return this.getLayoutManager().isWritable()}else{return !!(this.getLayoutManager().isWritable()&&this.hasNonHiddenUserPrefs)}},setLayoutManager:function(layoutManager){if(layoutManager){this.layoutManager=layoutManager}else{this.layoutManager=AG.DashboardManager.getLayout()}},getLayoutManager:function(){if(!this.layoutManager){this.setLayoutManager()}return this.layoutManager},setColor:function(color){var that=this;that.$.removeClass(that.color).addClass(color);that.color=color;AJS.$.ajax({type:"PUT",url:that.colorUrl,contentType:"application/json",data:JSON.stringify({color:color}),error:function(request){if(request.status==403||request.status==401){alert("Sorry, you do not have permission to modify this dashboard. Your dashboard may be out of sync with the server: please reload the page.")}else{alert("Sorry, your changes to this dashboard could not be saved. Your dashboard may be out of sync with the server: please reload the page.")}}})},updatePosition:function(){var gadgetCSSToUpdate,layoutCSSToUpdate,that=this;function isGadgetBeingDragged(){return that.$.hasClass("dragging")}function getCurrentGadgetCSS(){var LAYOUT_REP_OFFSET,dashboard=AG.DashboardManager.getDashboard().contents,DASHBOARD_OFFSET=dashboard.offset();if(!getCurrentGadgetCSS.cache){LAYOUT_REP_OFFSET=that.$.layoutRep.offset();getCurrentGadgetCSS.cache={left:(LAYOUT_REP_OFFSET.left-DASHBOARD_OFFSET.left)/dashboard.width()*100+"%",top:LAYOUT_REP_OFFSET.top-DASHBOARD_OFFSET.top,width:that.$.layoutRep.width()/dashboard.width()*100+"%"}}return getCurrentGadgetCSS.cache}function getCurrentLayoutRepCSS(){if(!getCurrentLayoutRepCSS.cache){getCurrentLayoutRepCSS.cache={height:that.$.height()}}return getCurrentLayoutRepCSS.cache}function filterModifiedCSS(lastRecordedCSS,currentCSS){if(lastRecordedCSS){AJS.$.each(lastRecordedCSS,function(property){if(this===currentCSS[property]){delete currentCSS[property]}})}return currentCSS}if(!isGadgetBeingDragged()){layoutCSSToUpdate=filterModifiedCSS(this.$.layoutRep.lastRecordedCSS,getCurrentLayoutRepCSS());this.$.layoutRep.css(layoutCSSToUpdate);this.$.layoutRep.lastRecordedCSS=layoutCSSToUpdate;gadgetCSSToUpdate=filterModifiedCSS(this.$.lastRecordedCSS,getCurrentGadgetCSS());this.$.css(gadgetCSSToUpdate);this.$.lastRecordedCSS=gadgetCSSToUpdate;if(this.$.hasClass("hidden")){this.$.removeClass("hidden")}}},maximize:function(){var MIN_CLASS="minimization",MAX_CLASS="maximization",MIN_TEXT="Minimise",menuElem=AJS.$("a.minimization, a.maximization",this.$);menuElem.removeClass(MAX_CLASS).addClass(MIN_CLASS).text(MIN_TEXT);this.$.css({height:"auto"});AJS.$(".dashboard-item-content",this.$).removeClass(MIN_CLASS);this.getLayoutManager().refresh();AG.Cookie.erase(this.COOKIE_MINIMIZE);if(this.minimized){this.moduleAPI.trigger("expand")}this.minimized=false},minimize:function(){var MIN_CLASS="minimization",MAX_CLASS="maximization",MAX_TEXT="Expand",menuElem=AJS.$("a.minimization, a.maximization",this.$);menuElem.removeClass(MIN_CLASS).addClass(MAX_CLASS).text(MAX_TEXT);this.$.css({height:"auto"});AJS.$(".dashboard-item-content",this.$).addClass(MIN_CLASS);this.getLayoutManager().refresh();AG.Cookie.save(this.COOKIE_MINIMIZE,"true");this.minimized=true;this.moduleAPI.trigger("minimize")},remove:function(){var that=this;that.$.layoutRep.remove();that.$.remove();this.moduleAPI.trigger("remove");that.getLayoutManager().removeGadget(that.getPublicInstance());that.getLayoutManager().refresh();AJS.$.each(this,function(name,property){property=null});AG.Cookie.erase("gadget-"+that.id+"-fh")},move:function(targetResourceUrl){this.remove();AJS.$(AJS.$.ajax({type:"PUT",data:{id:this.id,title:this.title,titleUrl:this.titleUrl,gadgetSpecUrl:this.gadgetSpecUrl,height:this.$.height(),width:this.$.width(),color:this.color,isMaximizable:this.isMaximizable,userPrefs:this.userPrefs,renderedGadgetUrl:this.renderedGadgetUrl,colorUrl:this.colorUrl,gadgetUrl:this.gadgetUrl,hasNonHiddenUserPrefs:this.hasNonHiddenUserPrefs,column:this.column,loaded:this.loaded},contentType:"application/json",url:targetResourceUrl+"/gadget/"+this.id,})).throbber({target:AJS.$("#dash-throbber")})},destroy:function(){var that=this;if(confirm(AJS.format("Are you sure you want to permanently remove the {0} gadget?",that.title))){AJS.$("#dash-throbber").addClass("loading");AJS.$.ajax({type:"DELETE",url:this.gadgetUrl,complete:function(){AJS.$("#dash-throbber").removeClass("loading")},success:function(){that.$.fadeOut(function(){that.remove();if(that.view==="canvas"){that.getLayoutManager().restoreDefaultView()}})},error:function(request){if(request.status==403||request.status==401){alert("Sorry, you do not have permission to modify this dashboard. Your dashboard may be out of sync with the server: please reload the page.")}else{alert("Sorry, your changes to this dashboard could not be saved. Your dashboard may be out of sync with the server: please reload the page.")}}})}},setView:function(view){var MAXIMIZED_CLASS="maximized",uri={},that=this,anchor=this.title.replace(/\s/g,"-")+"/"+this.id,layoutManager=this.getLayoutManager(),rpctoken;var MINIMIZE_ICON_CLASS="aui-iconfont-vid-full-screen-off";var MAXIMIZE_ICON_CLASS="aui-iconfont-vid-full-screen-on";function toDefaultViewHandler(){that.getPublicInstance().setView("default")}if(this.view===view){return }if(view==="canvas"||view==="default"){if(this.gadgetUrl){AJS.$.ajax({async:false,type:"GET",url:this.gadgetUrl,dataType:"json",success:function(rep){rpctoken=Math.round(Math.random()*10000000);uri=AJS.parseUri(rep.renderedGadgetUrl+"#rpctoken="+rpctoken)}})}gadgets.rpc.setAuthToken(AJS.$("iframe.gadget-iframe",this.$).attr("id"),rpctoken);if(view==="canvas"){AJS.$(".operations li",AG.DashboardManager.getDashboard()).toggleClass("hidden");AJS.$.extend(uri.queryKey,{view:"canvas"});AJS.$("iframe.gadget-iframe",this.$).attr("src",uri.toString());layoutManager.getContainer().addClass(MAXIMIZED_CLASS);AJS.$(".gadget-container",this.$).addClass(MAXIMIZED_CLASS);this.$.addClass(MAXIMIZED_CLASS);AJS.$(".aui-icon",this.$).attr("title","Restore");this.$.layoutRep.addClass(MAXIMIZED_CLASS);this.$.layoutRep.parent().addClass(MAXIMIZED_CLASS);AJS.$("."+MAXIMIZE_ICON_CLASS).removeClass(MAXIMIZE_ICON_CLASS).addClass(MINIMIZE_ICON_CLASS);AJS.$.each(this.getLayoutManager().getGadgets(),function(){if(that.getPublicInstance()!==this){this.getElement().hide()}});AJS.$.extend(uri.queryKey,{view:"canvas"});AJS.$("iframe.gadget-iframe",this.$).attr("src",uri.toString());this.maximize();window.location.href=window.location.href.replace(/#.*/,"")+"#"+anchor;AJS.$(".minimize",AG.DashboardManager.getDashboard()).click(toDefaultViewHandler);this.view="canvas";this.moduleAPI.trigger("maximize")}else{AJS.$(".gadget-container",this.$).removeClass(MAXIMIZED_CLASS);this.$.removeClass(MAXIMIZED_CLASS);AJS.$(".aui-icon",this.$).attr("title","Maximise");this.$.layoutRep.removeClass(MAXIMIZED_CLASS);this.$.layoutRep.parent().removeClass(MAXIMIZED_CLASS);AJS.$("."+MINIMIZE_ICON_CLASS).removeClass(MINIMIZE_ICON_CLASS).addClass(MAXIMIZE_ICON_CLASS);this.getLayoutManager().restoreDefaultView();AJS.$.extend(uri.queryKey,{view:"default"});AJS.$("iframe.gadget-iframe",this.$).attr("src",uri.toString());this.getLayoutManager().refresh();window.location.href=window.location.href.replace(anchor,"");AJS.$("a.minimize",AG.DashboardManager.getDashboard()).unbind("click",toDefaultViewHandler);this.view="default";this.moduleAPI.trigger("restore")}}else{if(AJS.debug){console.warn("AG.Gadget.setView: Ignored! not a valid view. Was supplied '"+view+"' but expected "+"either 'default' or 'canvas'")}}},editPrefs:function(){},getPublicInstance:function(){var gadget=this;var itemContent=gadget.$.find(".gadget-inline");var freezeHeight=function(){itemContent.css("height",itemContent.height()+"px")};if(!this.publicInterface){this.publicInterface={updatePosition:function(){return gadget.updatePosition.apply(gadget,arguments)},getLayoutManager:function(){return gadget.getLayoutManager.apply(gadget,arguments)},setLayoutManager:function(){return gadget.setLayoutManager.apply(gadget,arguments)},getElement:function(){return gadget.$},move:function(targetUrl){return gadget.move(targetUrl)},remove:function(){return gadget.remove.apply(gadget,arguments)},getId:function(){return gadget.id},showShim:function(){return gadget.showShim.apply(gadget,arguments)},hideShim:function(){return gadget.hideShim.apply(gadget,arguments)},minimize:function(){return gadget.minimize.apply(gadget,arguments)},maximize:function(){return gadget.minimize.apply(gadget,arguments)},getSecurityToken:function(){return gadget.securityToken},setSecurityToken:function(securityToken){gadget.securityToken=securityToken},onDragStart:function(){gadget.moduleAPI.trigger("dragStart")},onDragStop:function(){gadget.moduleAPI.trigger("dragStop")},onAfterRender:function(){gadget.moduleAPI.trigger("afterRender")},freezeHeight:freezeHeight,resize:function(){itemContent.css("height","");gadget.moduleAPI.trigger("force-layout-refresh");freezeHeight()}};if(this.isMaximizable){this.publicInterface.setView=function(){return gadget.setView.apply(gadget,arguments)}}}return this.publicInterface},init:function(options){this.COOKIE_MINIMIZE=options.id+":minimized";this.minimized=AG.Cookie.read(this.COOKIE_MINIMIZE)==="true";this.title=options.title;this.color=options.color;this.colorUrl=options.colorUrl;this.gadgetUrl=options.gadgetUrl;this.id=options.id;this.hasNonHiddenUserPrefs=options.hasNonHiddenUserPrefs;this.isMaximizable=options.isMaximizable;this.titleUrl=options.titleUrl;this.gadgetSpecUrl=options.gadgetSpecUrl;this.userPrefs=options.userPrefs;this.renderedGadgetUrl=options.renderedGadgetUrl;this.column=options.column;this.loaded=options.loaded;this.errorMessage=options.errorMessage;this.inlineHtml=options.inlineHtml;this.configurable=options.configurable;this.amdModule=options.amdModule;this.webResourceKey=options.webResourceKey;this.context=options.context;this.securityToken=AJS.parseUri(options.renderedGadgetUrl).queryKey["st"];this.draw(options);this.moduleAPI=new AG.InlineGadgetAPI(this);if(this.amdModule){if(this.webResourceKey){WRM.require(["wr!"+this.webResourceKey],function(){this.initializeAmdModule(options)}.bind(this))}else{this.initializeAmdModule(options)}}},initializeAmdModule:function initializeAmdModule(options){var gadget=this;var gadgetElement=this.$.find("#gadget-"+this.id);var Module=AG.Util.safeInit(function(){return require(gadget.amdModule)},gadgetElement,gadget,"Can not import amd Module "+this.amdModule);if(Module){var userPreferences=AG.Util.extractUserPreferences(options.userPrefs.fields);var moduleApi=this.moduleAPI;var moduleInstance=AG.Util.safeInit(function(){return new Module(moduleApi)},gadgetElement,gadget,"Error initializing");var safeRender=function(renderingFunction){AG.Util.safeRender(renderingFunction,gadgetElement,gadget)};if(this.isEditable()){var dropdown=this.getPublicInstance().getElement().dropdown;var configureLink=AJS.$('<li class="dropdown-item configure"><a class="item-link no_target" href="#">'+"Edit"+"</a></li>");configureLink.on("click",function(){safeRender(function(){moduleInstance.renderEdit(gadgetElement,userPreferences);gadget.moduleAPI.trigger("afterRender")})});configureLink.appendTo(dropdown.$);dropdown.reset()}if(this.isEditable()&&!userPreferences.isConfigured){safeRender(function(){moduleInstance.renderEdit(gadgetElement,userPreferences)})}else{safeRender(function(){moduleInstance.render(gadgetElement,userPreferences)})}this.moduleAPI.on("preferencesSaved",function(prefs){userPreferences=AG.Util.extractUserPreferences(prefs);safeRender(function(){moduleInstance.render(gadgetElement,userPreferences);gadget.moduleAPI.trigger("afterRender")})});this.moduleAPI.on("close-edit",function(){safeRender(function(){moduleInstance.render(gadgetElement,userPreferences);gadget.moduleAPI.trigger("afterRender")})});this.moduleAPI.on("force-layout-refresh",(function(){this.getLayoutManager().refresh()}).bind(this))}}};AG.Gadget=function(options){var gadget=AJS.clone(Gadget);gadget.init(options);return gadget.getPublicInstance()};AG.Gadget.COLORS=[5,1,4,3,2,6,7,8];AG.Gadget.getColorAttrName=function(color){return"color"+color};var colorNames=["Color 1","Color 2","Color 3","Color 4","Color 5","Color 6","Color 7","Color 8"];AG.Gadget.isCanvasView=function(gadgetId){var uri=AJS.parseUri(window.location.href);return new RegExp(gadgetId).test(uri.anchor)};AG.Gadget.getNullGadgetRepresentation=function(errorGadget){return AJS.$.extend(errorGadget,{title:"Gadget error",renderedGadgetUrl:AG.param.get("errorGadgetUrl"),color:errorGadget.color||"color7"})};AG.Util={extractUserPreferences:function(userPreferences){var preferences={};_.each(userPreferences,function(preference){var parsedValue;if(preference.value==="true"||preference.value==="false"){parsedValue=preference.value==="true"}else{parsedValue=preference.value}preferences[preference.name]=parsedValue});return preferences},safeRender:function(renderFunction,gadgetElement,gadget){this.safeInvokeFunction(renderFunction,gadgetElement,gadget,"Unknown error occurred rendering this gadget.","Error rendering")},safeInit:function(initFunction,gadgetElement,gadget,errorMsg){return this.safeInvokeFunction(initFunction,gadgetElement,gadget,"Unknown error occurred initializing this gadget.",errorMsg)},safeInvokeFunction:function(functionToInvoke,gadgetElement,gadget,userErrorMsg,consoleErrorMsg){try{return functionToInvoke()}catch(err){var errorContainer=AJS.$('<div class="item-error"/>').append(aui.message.error({content:"<p>"+userErrorMsg+"</p>"}));AJS.$(gadgetElement).append(errorContainer);console.error(consoleErrorMsg+" gadget with id '"+gadget.id+"': "+err.message,err);gadget.moduleAPI.hideLoadingBar()}}}})();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.Param.js' */
AG=AG||{};if(!console.warn){console.warn=function(){}}AG.param=(function(){var strs={};return{get:function(key){var args=arguments;if(strs[key]!==undefined){if(arguments.length>1){args[0]=strs[key];return AJS.format.apply(this,args)}else{return strs[key]}}else{if(AJS.debug){console.warn("param.get: Key '"+key+"' does not exist.")}return null}},set:function(key,str){var setParam=function(){var k=arguments[0];var v=arguments[1];if(typeof k==="string"){strs[k]=v}else{if(AJS.debug){console.warn("param.set: Ignored param.set, key may be undefined. "+"Printing value...");console.log(k)}}};if(arguments.length===1&&typeof arguments[0]==="object"){AJS.$.each(arguments[0],function(key,str){setParam(key,str)})}else{if(arguments.length===2){setParam(arguments[0],arguments[1])}else{if(AJS.debug){console.warn("param.set: Expected arguments to be of length 1 or 2, however recieved a length of "+arguments.length+". Printing value...");console.log(arguments)}}}},clear:function(){if(AJS.debug){strs={}}}}}());;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.Cookie.js' */
(function(){var COOKIE_NAME="AG.congolmerate.cookie";function getValueFromCongolmerate(name,cookieValue){if(cookieValue==null){cookieValue=""}var eq=name+"=";var cookieParts=cookieValue.split("|");for(var i=0;i<cookieParts.length;i++){var cp=cookieParts[i];while(cp.charAt(0)==" "){cp=cp.substring(1,cp.length)}if(cp.indexOf(name)==0){return cp.substring(eq.length,cp.length)}}return null}function addOrAppendToValue(name,value,cookieValue){var newCookieValue="";if(cookieValue==null){cookieValue=""}var cookieParts=cookieValue.split("|");for(var i=0;i<cookieParts.length;i++){var cp=cookieParts[i];if(cp!=""){while(cp.charAt(0)==" "){cp=cp.substring(1,cp.length)}if(cp.indexOf(name)!=0){newCookieValue+=cp+"|"}}}if(value!=null&&value!=""){var pair=name+"="+value;if((newCookieValue.length+pair.length)<4020){newCookieValue+=pair}}return newCookieValue}function getCookieValue(name){var eq=name+"=",ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(eq)==0){return c.substring(eq.length,c.length)}}return null}function saveCookie(name,value,days){var ex;if(days){var d=new Date();d.setTime(d.getTime()+(days*24*60*60*1000));ex="; expires="+d.toGMTString()}else{ex=""}document.cookie=name+"="+value+ex+";path=/"}AG.Cookie={save:function(name,value){var cookieValue;if(window.localStorage){cookieValue=localStorage.getItem(COOKIE_NAME)}else{cookieValue=getCookieValue(COOKIE_NAME)}cookieValue=addOrAppendToValue(name,value,cookieValue);if(window.localStorage){localStorage.setItem(COOKIE_NAME,cookieValue)}else{saveCookie(COOKIE_NAME,cookieValue,365)}},read:function(name,defaultValue){var cookieValue,value;if(window.localStorage){cookieValue=localStorage.getItem(COOKIE_NAME)}else{cookieValue=getCookieValue(COOKIE_NAME)}value=getValueFromCongolmerate(name,cookieValue);if(value!=null){return value}return defaultValue},erase:function(name){this.save(name,"")}}})();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/AG.Sortable.js' */
AG.Sortable=function(){var sortableControl,dragGadget,hotspots=[],options={cursor:"move",items:"li.gadget",tolerance:"pointer",placeholder:"placeholder",forcePointerForContainers:true,scroll:true,revert:AJS.$.browser.safari?false:250,scrollSensitivity:300,scrollSpeed:16,zIndex:10,helper:function(event,item){return item.get(0).getGadgetInstance().getElement()},change:function(){AG.DashboardManager.getLayout().refresh()},start:function(event,obj){dragGadget=obj.item.get(0).getGadgetInstance();function preventTextSelection(){if(typeof document.onselectstart!=="undefined"){document.onselectstart=function(){return false}}}function preventHelperRemovalOnDrop(){obj.item.removeValidator=AJS.$.aop.around({target:AJS.$,method:"remove"},function(invocation){if(obj.helper!==this){invocation.proceed()}})}function setPlaceholder(){obj.placeholder.height(obj.helper.outerHeight()-2).html("<p>"+"Drag your gadget here."+"</p>")}obj.helper.addClass("dragging");preventTextSelection();preventHelperRemovalOnDrop();setPlaceholder();AG.DashboardManager.getLayout().refresh();AG.DashboardManager.getDashboard().addClass("dragging");AG.DashboardManager.showShims();AG.DashboardManager.markReadOnlyLayouts();dragGadget.onDragStart()},stop:function(event,obj){var gadgetElement=dragGadget.getElement();function enableTextSelection(){if(typeof document.onselectstart!=="undefined"){document.onselectstart=null}}gadgetElement.layoutRep.css({display:""});gadgetElement.css({height:"auto"}).removeClass("dragging");if(!dragGadget.hasBeenDropped){AG.DashboardManager.getLayout().saveLayout()}else{sortableControl.sortable("option","revert",250)}enableTextSelection();obj.item.removeValidator[0].unweave();AG.DashboardManager.getDashboard().removeClass("dragging");AG.DashboardManager.hideShims();AG.DashboardManager.getLayout().refresh();AG.DashboardManager.unmarkReadOnlyLayouts();dragGadget.onDragStop()}};return{serialize:function(){var params={};AJS.$.each(this.columns.filter(":visible"),function(i){params[i]=[];AJS.$.each(AJS.$(this).sortable("toArray"),function(){params[i].push(AJS.$("#"+this).get(0).getGadgetInstance().getId())})});return params},addHotSpot:function(elem,callback){var offset=elem.offset(),dashboardOffset=AG.DashboardManager.getDashboard().offset();hotspots.push(AJS.$("<div class='hotspot-shim hidden' />").hover(function(){dragGadget.getElement().css({opacity:0.5});elem.addClass("hover")},function(){dragGadget.getElement().css({opacity:""});elem.removeClass("hover")}).mouseup(function(){sortableControl.sortable("option","revert",false);dragGadget.hasBeenDropped=true;callback(dragGadget)}).css({height:elem.outerHeight(),width:elem.outerWidth(),left:offset.left-dashboardOffset.left,top:offset.top-dashboardOffset.top}).appendTo(AG.DashboardManager.getDashboard()))},update:function(){AG.Sortable.init()},init:function(){if(sortableControl){sortableControl.sortable("destroy")}this.columns=AJS.$(".draggable .column.sortable");if(this.columns.length>0){sortableControl=this.columns.sortable(AJS.$.extend(options,{connectWith:this.columns}))}}}}();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/api/AG.InlineGadgetAPI.js' */
(function(){var _=require("dashboard/shims/underscore");var API=function(gadget){this.gadget=gadget;this.publicInstace=gadget.getPublicInstance&&gadget.getPublicInstance()};var resize=function(API){if(API.publicInstace){API.publicInstace.resize()}};_.extend(API.prototype,Backbone.Events,{isEditable:function(){return this.gadget.isEditable()},_preparePreferencesToBeSaved:function(preferences){var userPreferences={};userPreferences["up_isConfigured"]=true;_.each(preferences,function(value,name){userPreferences["up_"+name]=String(value)});return userPreferences},getRefreshFieldValue:function(fieldName){fieldName=fieldName||"refresh";var input=this.gadget.$.find("input[name="+fieldName+"]");return input.is(":checked")?input.val():"false"},savePreferences:function(preferences){if(!this.isEditable()){this.trigger("error:preferencesSaved");return{}}return AJS.$.ajax({url:this.gadget.userPrefs.action,type:"PUT",contentType:"application/json",data:JSON.stringify(this._preparePreferencesToBeSaved(preferences))}).done((function(){AJS.$.ajax({url:this.gadget.userPrefs.action,type:"GET",dataType:"json"}).done((function(results){this.trigger("preferencesSaved",results.fields)}).bind(this)).fail((function(){this.trigger("error:preferencesSaved")}).bind(this))}).bind(this)).fail((function(){this.trigger("error:preferencesSaved")}).bind(this))},setTitle:function(title){if(!this.gadget.$){return }this.gadget.$.find(".dashboard-item-title").text(title)},initRefresh:function(preferences,cb){if(this.gadget.refreshIntervalId){clearInterval(this.gadget.refreshIntervalId)}if(!isNaN(parseInt(preferences.refresh))){var refreshIntervalMillis=parseInt(preferences.refresh)*60000;this.gadget.refreshIntervalId=setInterval(cb,refreshIntervalMillis)}},showLoadingBar:function(){if(!this.gadget.$){return }var self=this;if(!this.gadget.showLoadingBarTimeoutId){this.gadget.showLoadingBarTimeoutId=setTimeout(function(){var $gadgetContainer=self.gadget.$.find("#gadget-"+self.gadget.id);var cls=$gadgetContainer.width()<250?"loading-small":"loading";self.$loadingBar=AJS.$('<div class="'+cls+'"></div>');self.$loadingBar.height(Math.max(40,$gadgetContainer.height()));$gadgetContainer.after(self.$loadingBar);$gadgetContainer.addClass("hidden");self.forceLayoutRefresh()},1000)}},hideLoadingBar:function(){if(this.gadget.showLoadingBarTimeoutId){clearTimeout(this.gadget.showLoadingBarTimeoutId);delete this.gadget.showLoadingBarTimeoutId}if(!this.$loadingBar){return }if(!this.gadget.$){return }this.$loadingBar.detach();this.$loadingBar=null;this.gadget.$.find("#gadget-"+this.gadget.id).removeClass("hidden");this.forceLayoutRefresh()},getContext:function(){return this.gadget.context},closeEdit:function(){this.trigger("close-edit")},forceLayoutRefresh:function(){console.warn("forceLayoutRefresh() is deprecated. Use resize() instead.");resize(this)},getGadgetId:function(){return this.gadget.id},resize:function(){resize(this)}});AG=window.AG||{};AG.InlineGadgetAPI=API})();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/dashboard-directory-constants.js' */
AJS.namespace("JIRA.Dashboard.Directory.Constants");JIRA.Dashboard.Directory.Constants.getDefaultCategoryName=function(){return "All"};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/dashboard-service.js' */
AJS.namespace("JIRA.Dashboard.DashboardService");JIRA.Dashboard.DashboardService={addItem:function(directoryItem,callback){if(AG.DashboardManager.getLayout().getGadgets().length>=AG.param.get("maxGadgets")){callback.onError("Sorry, you have exceeded the maximum number of gadgets supported by your dashboard.  You must remove some gadgets before proceeding.");return }var dashboardResourceUrl=AG.param.get("dashboardResourceUrl");var localeLang=AJS.$(".locale-lang","#i18n-settings").val();var localeCountry=AJS.$(".locale-country","#i18n-settings").val();AJS.$.ajax({type:"POST",url:dashboardResourceUrl+".json?"+(localeLang?"locale.lang="+localeLang:"")+(localeCountry?"&locale.country="+localeCountry:""),contentType:"application/json",dataType:"json",data:JSON.stringify({dashboardItemId:directoryItem.id,type:directoryItem.type,columnIndex:AJS.activeColumn}),processData:false,success:function(data){AG.Cookie.erase("gadget-"+data.id+"-fh");AG.DashboardManager.addGadget(data,AJS.activeColumn);callback.onSuccess()},error:function(request,textStatus,errorThrown){console.error("DashboardService: Failed to add item to the dashboard. Reason: "+errorThrown);callback.onError()}})}};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/entities/dashboard-item-retriever.js' */
define("dashboard/item-retriever",["dashboard/shims/underscore"],function(_){var ItemRetriever=function(){this.inProgressUrls=[];this.retrievedUrls=[];this.failedUrls=[]};ItemRetriever.prototype=_.extend({retrieve:function(endpointUrls){this.trigger("batchRetrieving");_.each(endpointUrls,retrieveFromUrl,this);function retrieveFromUrl(endpointUrl){this.inProgressUrls.push(endpointUrl);this.trigger("retrieving");AJS.$.ajax({type:"GET",dataType:"json",global:false,cache:false,url:endpointUrl,context:this,success:function(data){this.inProgressUrls=_.reject(this.inProgressUrls,function(url){return url===endpointUrl});this.retrievedUrls.push(endpointUrl);this.trigger("retrieve",data);this.checkForCompletion()},error:function(request,textStatus,errorThrown){this.inProgressUrls=_.reject(this.inProgressUrls,function(url){return url===endpointUrl});this.failedUrls.push(endpointUrl);this.trigger("retrieveFailure",endpointUrl);this.checkForCompletion()}})}},retrievalStarted:function(){return this.inProgressUrls.length!==0||this.retrievedUrls.length!==0||this.failedUrls.length!==0},retrievalInProgress:function(){return this.inProgressUrls.length!==0},retrievalCompleted:function(){return this.inProgressUrls.length===0&&(this.retrievedUrls.length!==0||this.failedUrls.length!==0)},retrievalFailed:function(){return this.inProgressUrls.length===0&&this.retrievedUrls.length===0&&this.failedUrls.length!==0},hasSomeFailure:function(){return this.failedUrls.length!==0},isReady:function(){return this.retrievedUrls.length>0},checkForCompletion:function(){if(this.retrievalCompleted()){this.trigger("batchRetrieveComplete")}},reset:function(){this.inProgressUrls.length=0;this.retrievedUrls.length=0;this.failedUrls.length=0},retryFailedEndpoints:function(){var failedUrls=this.failedUrls;this.failedUrls=[];this.retrieve(failedUrls)}},Backbone.Events);return ItemRetriever});AJS.namespace("JIRA.Dashboard.Services.ItemRetriever",null,require("dashboard/item-retriever"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/entities/dashboard-item-directory-entities.js' */
define("dashboard/item-directory-entities",["dashboard/shims/underscore"],function(_){var DirectoryItem=Backbone.Model.extend({});var DirectoryItems=Backbone.Collection.extend({model:DirectoryItem,initialize:function(models,options){this.localItemsEndpointUrl=AJS.contextPath()+"/rest/config/1.0/directoryitems/local.json";this.externalItemsEndpointUrl=AJS.contextPath()+"/rest/config/1.0/directoryitems/external.json";this.endpointUrls=[this.localItemsEndpointUrl,this.externalItemsEndpointUrl];this.retriever=options.retriever;this.listenTo(this.retriever,{"retrieving":this.beforeRetrieve,"retrieve":this.processRetrievedItems,"retrieveFailure":this.handleRetrievalError,"batchRetrieving":function(){this.trigger("batchRetrieving")},"batchRetrieveComplete":function(){this.trigger("batchRetrieveComplete")}});this.categorisedItems={}},comparator:"titleLabel",retrievalStarted:function(){return this.retriever.retrievalStarted()},retrievalInProgress:function(){return this.retriever.retrievalInProgress()},retrievalCompleted:function(){return this.retriever.retrievalCompleted()},retrievalFailed:function(){return this.retriever.retrievalFailed()},isReady:function(){return this.retriever.isReady()},hasSomeFailure:function(){return this.retriever.hasSomeFailure()},retrieve:function(){this.retriever.retrieve(this.endpointUrls)},beforeRetrieve:function(){this.trigger("retrieving")},processRetrievedItems:function(data){this.set(this.transformResponseData(data),{remove:false});this.updateCategorisedItems();this.trigger("retrieve",data)},handleRetrievalError:function(failedEndpointUrl){this.trigger("retrieveFailure",failedEndpointUrl)},updateCategorisedItems:function(){this.categorisedItems={};this.categorisedItems[JIRA.Dashboard.Directory.Constants.getDefaultCategoryName()]=[];_.each(this.models,function(model){this.categorisedItems[JIRA.Dashboard.Directory.Constants.getDefaultCategoryName()].push(model);_.each(model.get("categories"),function(category){this.categorisedItems[category]=this.categorisedItems[category]||[];this.categorisedItems[category].push(model)},this)},this)},getCategorisedItems:function(){return this.categorisedItems},reset:function(){this.set([]);this.categorisedItems={};this.retriever.reset();this.trigger("reset")},retryFailedEndpoints:function(){this.retriever.retryFailedEndpoints()},transformResponseData:function(data){return _.map(data,function(item){item.isLocal=false;item.specUriDisplay=item.specUri;item.description=item.description||"Description not available";item.authorLabel=item.authorLabel||"Author unknown";item.authorLineItem=AJS.format("By {0}",item.authorLabel);if(!/^http/.test(item.specUri)){item.specUriDisplay=AG.param.get("dashboardDirectoryBaseUrl")+item.specUri;item.isLocal=true}else{if(_.has("completeModuleKey")){item.isLocal=true}}return item})}});return{DirectoryItem:DirectoryItem,DirectoryItems:DirectoryItems}});AJS.namespace("JIRA.Dashboard.Entities.DirectoryItem",null,require("dashboard/item-directory-entities").DirectoryItem);AJS.namespace("JIRA.Dashboard.Entities.DirectoryItems",null,require("dashboard/item-directory-entities").DirectoryItems);;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/entities/directory-view-state.js' */
define("dashboard/directory-view-state",["dashboard/shims/underscore"],function(_){var DirectoryViewModel=Backbone.Model.extend({initialize:function(attributes,options){this.directoryItems=options.directoryItems;this.initializeStates();this.listenTo(this.directoryItems,{"batchRetrieving":this.handleBatchRetrievalStart,"retrieve":this.handleRetrieval,"retrieveFailure":this.handleRetrievalFailure,"reset":this.initializeStates})},initializeStates:function(){this.set({retrievalInProgress:false,retrievalFailed:false,hasUnrenderedData:false,directoryIsVisible:false,searchText:"",selectedCategory:JIRA.Dashboard.Directory.Constants.getDefaultCategoryName(),categorisedItems:{},filteredCategorisedItems:{}})},handleBatchRetrievalStart:function(){this.set("retrievalInProgress",true);this.trigger("messageUpdate")},handleRetrieval:function(data){this.checkRetrievalCompleted();if(this.get("directoryIsVisible")&&data.length>0){this.set("hasUnrenderedData",true)}if(!this.get("retrievalInProgress")||this.get("hasUnrenderedData")){this.trigger("messageUpdate")}if(!this.get("directoryIsVisible")&&data.length>0){this.loadData()}},loadData:function(){this.updateCategorisedItems();this.trigger("dataUpdate")},loadUnrenderedData:function(){this.loadData();this.set("hasUnrenderedData",false);this.trigger("messageUpdate")},handleRetrievalFailure:function(){this.checkRetrievalCompleted();if(!this.get("retrievalInProgress")){this.trigger("messageUpdate")}},checkRetrievalCompleted:function(){if(this.directoryItems.retrievalCompleted()){this.set("retrievalInProgress",false);this.set("retrievalFailed",this.directoryItems.hasSomeFailure())}},setDirectoryVisible:function(){this.set("directoryIsVisible",true)},setDirectoryNotVisible:function(){this.set("directoryIsVisible",false)},setSearchText:function(searchText){this.set("searchText",searchText.toLowerCase());this.updateFilteredCategorisedItems()},getSearchText:function(){return this.get("searchText")},setSelectedCategory:function(category){this.set("selectedCategory",category)},getSelectedCategory:function(){return this.get("selectedCategory")},updateCategorisedItems:function(){this.set("categorisedItems",this.directoryItems.getCategorisedItems());this.updateFilteredCategorisedItems()},getCategorisedItems:function(){return this.get("categorisedItems")},updateFilteredCategorisedItems:function(){this.set("filteredCategorisedItems",this.filterCategorisedItems(this.getSearchText()))},getFilteredCategorisedItems:function(){return this.get("filteredCategorisedItems")},filterCategorisedItems:function(searchText){if(!searchText){return this.getCategorisedItems()}var filtered={};_.each(this.getCategorisedItems(),function(items,category){filtered[category]=_.filter(items,function(item){return this.matchesSearchText(searchText,item)},this)},this);return filtered},matchesSearchText:function(searchText,item){searchText=searchText.toLowerCase();return item.get("id").toLowerCase().indexOf(searchText)>-1||item.get("titleLabel").toLowerCase().indexOf(searchText)>-1||item.get("authorLabel").toLowerCase().indexOf(searchText)>-1||item.get("description").toLowerCase().indexOf(searchText)>-1},getCategoryCount:function(){return this.transformCategoryCountForDisplay(this.getCategorisedItems())},getFilteredCategoryCount:function(){return this.transformCategoryCountForDisplay(this.getFilteredCategorisedItems())},transformCategoryCountForDisplay:function(categorisedItems){var categoryCount=[];_.each(categorisedItems,function(items,category){categoryCount.push({label:category,count:items.length})});return _.sortBy(categoryCount,"label")},getItemsForCategory:function(category){return this.getCategorisedItems()[category]},getVisibleItemsForCategory:function(category){return this.getFilteredCategorisedItems()[category]}});return DirectoryViewModel});AJS.namespace("JIRA.Dashboard.Entities.DirectoryViewModel",null,require("dashboard/directory-view-state"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-items-view.js' */
define("dashboard/directory-items-view",["dashboard/shims/underscore"],function(_){var DirectoryItems=Backbone.View.extend({template:JIRA.Dashboard.Templates.directoryItems,events:{"click button[data-purpose='add-dashboard-item']":function(e){var addButton=AJS.$(e.target);var directoryItem={id:addButton.attr("data-item-id"),type:addButton.attr("data-item-type")};this.trigger("dashboardItemAdd",directoryItem)},"click a[data-purpose='toggle-xml']":function(e){e.preventDefault();var $textArea=AJS.$(e.target.parentNode).find("textarea");var $anchor=AJS.$(e.target);if($textArea.is(":visible")){$textArea.hide();$anchor.text("Show XML link")}else{$textArea.show();$textArea.select();$anchor.text("Hide XML link")}}},render:function(){var items=[];_.each(this.model.getItemsForCategory(this.model.getSelectedCategory()),function(model){items.push(model.attributes)});this.$el.html(this.template({items:items}));this.applySearchTextFiltering();this.$el.children().filter(".item-group").last().addClass("last")},applySearchTextFiltering:function(){var visibleItemIds={};var visibleCount=0;_.each(this.model.getVisibleItemsForCategory(this.model.getSelectedCategory()),function(model){visibleItemIds[model.get("id")]=true;visibleCount++});if(visibleCount===0){visibleItemIds["no-result"]=true}var $items=this.$el.children();_.each($items,function(item){var $item=AJS.$(item);if(!visibleItemIds[$item.attr("data-item-id")]){$item.addClass("hidden")}else{$item.removeClass("hidden")}});$items.removeClass("last").filter(".item-group:visible").last().addClass("last")},enableAddButtons:function(){this.delegateEvents();this.$("button[data-purpose='add-dashboard-item']").removeAttr("aria-disabled")},disableAddButtons:function(){this.undelegateEvents();this.$("button[data-purpose='add-dashboard-item']").attr("aria-disabled","true")}});return DirectoryItems});AJS.namespace("JIRA.Dashboard.Views.DirectoryItems",null,require("dashboard/directory-items-view"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-view.js' */
AJS.namespace("JIRA.Dashboard.Views");JIRA.Dashboard.Views.Directory=Backbone.View.extend({initialize:function(){this.$shell=AJS.$(JIRA.Dashboard.Templates.gadgetDirectoryPage({searchPlaceholder:"Search"}));this.$searchBox=this.$shell.find("#search")},events:{"submit form.directory-search":function(e){e.preventDefault()},"keyup #search":function(e){e.preventDefault();this.trigger("searchTextUpdate",AJS.$(e.target).val())}},getNavRootElement:function(){return this.$shell.find("div.aui-navgroup-inner")},getItemsRootElement:function(){return this.$shell.find("div#list-panel")},getMessagesRootElement:function(){return this.$shell.find("div#message-panel")},render:function(){this.$el.html(this.$shell)},detach:function(){this.$shell.detach()},resetUserInput:function(){this.$searchBox.val("")},setFocusOnSearch:function(){this.$searchBox.focus()}});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-nav-view.js' */
AJS.namespace("JIRA.Dashboard.Views");JIRA.Dashboard.Views.DirectoryNav=Backbone.View.extend({template:JIRA.Dashboard.Templates.directoryNavList,events:{"click a[data-purpose='category-nav']":function(e){this.trigger("categorySelect",AJS.$(e.target).attr("data-category-label"));e.preventDefault()},"click a[data-purpose='category-nav'] > span":function(e){this.trigger("categorySelect",AJS.$(e.target.parentNode).attr("data-category-label"));e.stopPropagation()}},render:function(){var self=this;this.$el.html(this.template({categories:self.model.getFilteredCategoryCount(),selectedCategoryLabel:self.model.getSelectedCategory(),headerText:"CATEGORIES"}))}});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-loading-view.js' */
AJS.namespace("JIRA.Dashboard.Views");JIRA.Dashboard.Views.DirectoryLoadingView=Backbone.View.extend({template:JIRA.Dashboard.Templates.gadgetDirectoryLoadingPage,initialize:function(){this.$content=AJS.$(this.template({loadingText:"Loading gadgets..."}))},render:function(){this.$el.html(this.$content)},detach:function(){this.$content.detach()}});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-load-failure-view.js' */
AJS.namespace("JIRA.Dashboard.Views");JIRA.Dashboard.Views.DirectoryLoadFailureView=Backbone.View.extend({template:JIRA.Dashboard.Templates.gadgetDirectoryLoadFailurePage,events:{"click a[data-purpose='reload-directory']":function(){this.trigger("directoryReloadRequest")}},initialize:function(){this.$content=AJS.$(this.template())},render:function(){this.$el.html(this.$content)},detach:function(){this.$content.detach()}});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/views/directory-message-view.js' */
AJS.namespace("JIRA.Dashboard.Views");JIRA.Dashboard.Views.DirectoryMessageView=Backbone.View.extend({template:JIRA.Dashboard.Templates.directoryMessages,events:{"click a[data-purpose='retry']":function(){this.trigger("retrieveRetryRequest")},"click a[data-purpose='load']":function(){this.trigger("additionalItemsLoadRequest")}},render:function(payload){this.$el.html(this.template({payload:payload}))}});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/controllers/directory-controller.js' */
define("dashboard/directory-controller",["dashboard/shims/underscore"],function(_){var DirectoryController=function(model,contentRootElement){this.model=model;this.viewState=new JIRA.Dashboard.Entities.DirectoryViewModel({},{directoryItems:model});this.directory=new JIRA.Dashboard.Views.Directory({el:contentRootElement});this.directoryNav=new JIRA.Dashboard.Views.DirectoryNav({model:this.viewState,el:this.directory.getNavRootElement()});this.directoryItemsView=new JIRA.Dashboard.Views.DirectoryItems({model:this.viewState,el:this.directory.getItemsRootElement()});this.messageView=new JIRA.Dashboard.Views.DirectoryMessageView({el:this.directory.getMessagesRootElement()});this.listenTo(this.viewState,{"messageUpdate":this.refreshMessage,"dataUpdate":this.refreshData});this.listenTo(this.directoryItemsView,"dashboardItemAdd",this.handleDashboardItemAddition);this.listenTo(this.directoryNav,"categorySelect",this.updatedSelectedCategory);this.listenTo(this.directory,"searchTextUpdate",this.updateSearchText);this.listenTo(this.messageView,{"additionalItemsLoadRequest":function(){this.viewState.loadUnrenderedData()},"retrieveRetryRequest":function(){this.model.retryFailedEndpoints()}})};DirectoryController.prototype=_.extend({refreshMessage:function(){this.messageView.render({"retrievalInProgress":this.viewState.get("retrievalInProgress"),"retrievalFailed":this.viewState.get("retrievalFailed"),"directoryIsVisible":this.viewState.get("directoryIsVisible"),"hasUnrenderedData":this.viewState.get("hasUnrenderedData")})},refreshData:function(){this.directoryNav.render();this.directoryItemsView.render()},handleDashboardItemAddition:function(directoryItem){this.trigger("dashboardItemAdd",directoryItem)},disableDirectoryAddButtons:function(){this.directoryItemsView.disableAddButtons()},enableDirectoryAddButtons:function(){this.directoryItemsView.enableAddButtons()},updatedSelectedCategory:function(category){this.viewState.setSelectedCategory(category);this.directoryNav.render();this.directoryItemsView.render()},updateSearchText:function(searchText){if(searchText===this.viewState.getSearchText()){return }this.viewState.setSearchText(searchText);this.directoryNav.render();this.directoryItemsView.applySearchTextFiltering()},render:function(){this.directory.render();this.viewState.setDirectoryVisible()},detach:function(){this.directory.detach();this.viewState.setDirectoryNotVisible()},resetUserInput:function(){this.viewState.setSelectedCategory(JIRA.Dashboard.Directory.Constants.getDefaultCategoryName());this.viewState.setSearchText("");this.directoryNav.render();this.directoryItemsView.render();this.directory.resetUserInput()},setFocusOnSearch:function(){this.directory.setFocusOnSearch()}},Backbone.Events);return DirectoryController});AJS.namespace("JIRA.Dashboard.Controllers.DirectoryController",null,require("dashboard/directory-controller"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/controllers/directory-loader.js' */
define("dashboard/directory-loader",["dashboard/shims/underscore"],function(_){var DirectoryLoader=function(triggersSelector){this.directoryItems=new JIRA.Dashboard.Entities.DirectoryItems([],{retriever:new JIRA.Dashboard.Services.ItemRetriever()});this.dialogController=new JIRA.Dashboard.Controllers.DialogController(this.directoryItems);this.directoryController=this.dialogController.getDirectoryController();this.triggersSelector=triggersSelector;this.startListeningToTriggers();this.listenTo(this.directoryController,"dashboardItemAdd",function(directoryItem){this.trigger("dashboardItemAdd",directoryItem)});this.listenTo(this.dialogController,"directoryReloadRequest",this.reload)};DirectoryLoader.prototype=_.extend({handleClickEvent:function(e){var id=AJS.$(e.currentTarget).attr("id")||"";AJS.activeColumn=id.substring(11)||0;this.load();return e.preventDefault()},load:function(){if(this.directoryItems.isReady()){this.dialogController.showDirectory()}else{if(!this.directoryItems.retrievalStarted()){this.dialogController.showDirectoryLoadingPage();this.listenTo(this.directoryItems,"retrieve",this.handleFirstRetrieve);this.listenTo(this.directoryItems,"retrieveFailure",this.handleRetrieveFailure);this.directoryItems.retrieve()}else{if(this.directoryItems.retrievalFailed()){this.dialogController.showDirectoryLoadFailurePage()}else{this.dialogController.showDirectoryLoadingPage()}}}},reload:function(){this.directoryItems.reset();this.load()},handleFirstRetrieve:function(data){if(data.length==0&&this.directoryItems.retrievalInProgress()){return }this.stopListening(this.directoryItems);this.dialogController.renderDirectory()},handleRetrieveFailure:function(){if(!this.directoryItems.retrievalInProgress()){this.stopListening(this.directoryItems);this.dialogController.renderDirectoryLoadFailurePage()}},disableDirectoryAddButtons:function(){this.directoryController.disableDirectoryAddButtons()},enableDirectoryAddButtons:function(){this.directoryController.enableDirectoryAddButtons()},startListeningToTriggers:function(){AJS.$(document).on("click.dashboard-directory-loader",this.triggersSelector,this.handleClickEvent.bind(this))},stopListeningToTriggers:function(){AJS.$(document).off("click.dashboard-directory-loader",this.triggersSelector)}},Backbone.Events);return DirectoryLoader});AJS.namespace("JIRA.Dashboard.Controllers.DirectoryLoader",null,require("dashboard/directory-loader"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/controllers/dialog-controller.js' */
define("dashboard/dialog-controller",["dashboard/shims/underscore"],function(_){var DialogController=function(model,dialogId){var $dialog=AJS.$(JIRA.Dashboard.Templates.gadgetDirectoryDialog({id:dialogId||"gadget-dialog",headerText:"Add a gadget",gadgetsAdminUrl:AG.param.get("gadgetDirectoryAdminUrl"),manageGadgetsLabel:"Manage gadgets",canManageGadgets:AG.param.get("canAddExternalGadgetsToDirectory")}));var $contentRootElement=$dialog.find("div.aui-dialog2-content");this.dialog=AJS.dialog2($dialog);this.dialogVisible=false;var self=this;this.dialog.on("hide",function(){self.dialogVisible=false;self.resetUserInputOnCurrentPage()});this.currentPage="";this.loadingView=new JIRA.Dashboard.Views.DirectoryLoadingView({el:$contentRootElement[0]});this.loadFailureView=new JIRA.Dashboard.Views.DirectoryLoadFailureView({el:$contentRootElement[0]});this.directoryController=new JIRA.Dashboard.Controllers.DirectoryController(model,$contentRootElement[0]);this.listenTo(this.loadFailureView,"directoryReloadRequest",function(){this.trigger("directoryReloadRequest")});this.windowIsUnloading=false;window.onbeforeunload=function(){self.windowIsUnloading=true;if(self.dialogVisible){self.dialog.hide()}}};DialogController.prototype=_.extend({showDirectoryLoadingPage:function(){this.renderDirectoryLoadingPage(true)},renderDirectoryLoadingPage:function(showDialog){this.renderPage("loading",(function(){this.loadingView.render()}).bind(this),showDialog)},showDirectory:function(){this.renderDirectory(true)},renderDirectory:function(showDialog){this.renderPage("directory",(function(){this.directoryController.render();this.directoryController.setFocusOnSearch()}).bind(this),showDialog)},showDirectoryLoadFailurePage:function(){this.renderDirectoryLoadFailurePage(true)},renderDirectoryLoadFailurePage:function(showDialog){if(this.windowIsUnloading){return }this.renderPage("loadFailure",(function(){this.loadFailureView.render()}).bind(this),showDialog)},renderPage:function(pageName,renderFn,showDialog){if(this.currentPage!==pageName){this.detachCurrentPage();renderFn();this.currentPage=pageName}if(showDialog&&!this.dialogVisible){this.showDialog()}},detachCurrentPage:function(){switch(this.currentPage){case"":break;case"loading":this.loadingView.detach();break;case"directory":this.directoryController.detach();break;case"loadFailure":this.loadFailureView.detach();break;default:throw"Unknown page: "+this.currentPage}},resetUserInputOnCurrentPage:function(){if(this.currentPage==="directory"){this.directoryController.resetUserInput()}},getDirectoryController:function(){return this.directoryController},showDialog:function(){this.dialog.show();this.dialogVisible=true},destroyDialog:function(){this.dialog.remove()}},Backbone.Events);return DialogController});AJS.namespace("JIRA.Dashboard.Controllers.DialogController",null,require("dashboard/dialog-controller"));;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/dashboard-item-directory.js' */
AJS.namespace("JIRA.Dashboard.Modules");JIRA.Dashboard.Modules.Directory=function(triggersSelector){this.controller=new JIRA.Dashboard.Controllers.DirectoryLoader(triggersSelector);this.controller.on("dashboardItemAdd",this.onDashboardItemAdd,this)};JIRA.Dashboard.Modules.Directory.prototype={onDashboardItemAdd:function(directoryItem){this.controller.disableDirectoryAddButtons();var self=this;JIRA.Dashboard.DashboardService.addItem(directoryItem,{onSuccess:function(){self.controller.enableDirectoryAddButtons()},onError:function(errorMsg){if(errorMsg){alert(errorMsg)}self.controller.enableDirectoryAddButtons()}})}};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard', location = 'js/jquery.cookie.js' */
jQuery.cookie=function(name,value,options){if(typeof value!="undefined"){options=options||{};if(value===null){value="";options.expires=-1}var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;if(typeof options.expires=="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000))}else{date=options.expires}expires="; expires="+date.toUTCString()}var path=options.path?"; path="+(options.path):"";var domain=options.domain?"; domain="+(options.domain):"";var secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}else{var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};;
;
/* module-key = 'jira.webresources:captcha', location = '/includes/jira/captcha/Captcha.js' */
define("jira/captcha",["jquery"],function(a){var c={setup:function(){a("#captcha").delegate("span.captcha-reload","click",function(a){c.refresh(),a.preventDefault()})},refresh:function(){var c=a(".captcha-image","#captcha .captcha-container"),r=c.attr("src");r=r.indexOf("__r")>=0?r.replace(/__r=([^&]+)/,"__r="+Math.random()):r.indexOf("?")>=0?r+"&__r="+Math.random():r+"?__r="+Math.random(),c.attr("src",r),a("#captcha .captcha-response").focus()}};return c}),AJS.namespace("JIRA.Captcha",null,require("jira/captcha"));;
;
/* module-key = 'jira.webresources:captcha', location = '/includes/jira/captcha/captcha-init.js' */
require(["jira/captcha","jquery"],function(e,r){r(e.setup)});;
;
/* module-key = 'com.atlassian.jira.gadgets:login-dashboard-item-resources', location = 'static/dashboarditem/login/login.soy' */
// This file was automatically generated from login.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Login.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Login == 'undefined') { JIRA.DashboardItem.Login = {}; }
if (typeof JIRA.DashboardItem.Login.Templates == 'undefined') { JIRA.DashboardItem.Login.Templates = {}; }


JIRA.DashboardItem.Login.Templates.Login = function(opt_data, opt_ignored) {
  var output = '<div id="login-container" class=""><form id="loginform" method="post" action="#" name="loginform" class="aui gdt">';
  if (opt_data.recoveryModeEnabled) {
    var help__soy6 = '<a target="_blank" href="' + soy.$$escapeHtml(opt_data.recoveryModeHelpUrl) + '">';
    var end__soy10 = '</a>';
    output += aui.message.warning({content: '' + soy.$$filterNoAutoescape(AJS.format('Jira is running in recovery mode. You can log in as {0}, using the password specified when starting Jira. See {1}the documentation{2} for more details.',opt_data.recoveryModeUser,help__soy6,end__soy10))});
  }
  output += ((opt_data.errorMessage) ? '<div id="usernameerror" class="aui-message aui-message-error"><p>' + soy.$$escapeHtml(opt_data.errorMessage) + '</p></div>' : '') + '<div class="field-group"><label accesskey="u" for="login-form-username" id="usernamelabel">' + soy.$$filterNoAutoescape(AJS.format('{0}U{1}sername','<u>','</u>')) + '</label><input class="text medium-field" id="login-form-username" name="os_username" type="text"></div><div class="field-group"><label accesskey="p" for="login-form-password" id="passwordlabel">' + soy.$$filterNoAutoescape(AJS.format('{0}P{1}assword','<u>','</u>')) + '</label><input class="text medium-field" id="login-form-password" name="os_password" type="password"></div>' + ((opt_data.showRememberMe) ? '<fieldset class="group"><div class="checkbox" id="rememberme"><input class="checkbox" id="login-form-remember-me" name="os_cookie" type="checkbox" value="true"><label accesskey="r" for="login-form-remember-me" id="remembermelabel">' + soy.$$filterNoAutoescape(AJS.format('{0}R{1}emember my login on this computer','<u>','</u>')) + '</label></div></fieldset>' : '') + ((opt_data.showCaptcha) ? '<div class="field-group" id="captcha"><label id="captchalabel" for="login-form-captcha" accesskey="c">' + soy.$$escapeHtml('Please enter the word as shown below') + '</label><input type="text" name="os_captcha" id="login-form-captcha" class="text medium-field captcha-response"><div class="captcha-container"><img alt="" class="captcha-image" height="100px" id="captchaimg" src="' + soy.$$escapeHtml("") + '/captcha?ts=' + soy.$$escapeHtml(opt_data.captchaTimestamp) + '" width="200px"><a id="os-captcha-icon" href="#login-form-os-captcha" tabindex="-1" class="captcha-trigger" title="' + soy.$$escapeHtml('Refresh the image') + '"><span class="aui-icon captcha-reload icon-reload">' + soy.$$escapeHtml('Refresh the image') + '</span></a></div></div>' : '') + ((opt_data.isPublicMode) ? '<div class="field-group" id="publicmodeon"><div id="publicmodeonmsg">' + soy.$$filterNoAutoescape(AJS.format('Not a member? {0}{1}{2} for an account.','<a id="signup" href="' + "" + '/secure/Signup!default.jspa" tabindex="-1" target="_parent">','Sign up','</a>')) + '</div></div>' : (opt_data.adminFormOn) ? '<div class="field-group" id="publicmodeooff"><div id="publicmodeoffmsg">' + soy.$$filterNoAutoescape(AJS.format('Not a member? To request an account, {0}.',AJS.format('please contact your {0}Jira administrators{1}','<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">','</a>'))) + '</div></div>' : '<div class="field-group" id="publicmodeooff"><div id="publicmodeoffmsg">' + soy.$$escapeHtml(AJS.format('Not a member? To request an account, {0}.',AJS.format('please contact your {0}Jira administrators{1}','',''))) + '</div></div>') + '<div class="buttons-container"><div class="buttons"><input class="aui-button aui-button-primary" id="login" name="login" type="submit" value="' + soy.$$escapeHtml('Log In') + '">' + ((opt_data.showForgotPassword) ? '<a class="cancel" href="' + soy.$$escapeHtml("") + '/secure/ForgotLoginDetails.jspa" id="forgotpassword" target="_parent">' + soy.$$escapeHtml('Can\x27t access your account?') + '</a>' : '') + '</div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Login.Templates.Login.soyTemplateName = 'JIRA.DashboardItem.Login.Templates.Login';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:login-dashboard-item-resources', location = 'static/dashboarditem/login/login.js' */
define("jira-dashboard-items/login",["jira/util/formatter","jira/captcha","wrm/context-path","underscore","jquery"],function(e,t,i,n,o){function r(e,t,i){e.empty().html(JIRA.DashboardItem.Login.Templates.Login({isPublicMode:t.isPublicMode,adminFormOn:t.isAdminFormOn,showForgotPassword:!t.externalUserManagement&&!t.externalPasswordManagement,showRememberMe:t.allowCookies,errorMessage:i,showCaptcha:t.isElevatedSecurityCheckShown,captchaTimestamp:Date.now()}))}function a(e,t){e.width()<490?t.addClass("top-label"):t.removeClass("top-label")}function s(e){setTimeout(function(){e.find("#login-form-username").focus()},200)}function l(){a(this.$element,this.$form),s(this.$element),t.setup(),this.API.resize()}function c(t){return t=t||{},t.communicationError?"Sorry, a communication error occurred while trying to contact the remote authentication server.":t.loginError?"Sorry, an error occurred trying to log you in - please try again.":t.loginFailedByPermissions?e.format("You do not have a permission to log in. If you think this is incorrect, {0}.",t.contactAdminLink):t.isElevatedSecurityCheckShown?"Sorry, your userid is required to answer a CAPTCHA question correctly.":"Sorry, your username and password are incorrect - please try again."}function d(e,t){this.currentError=c(e),this.render(this.$element,t,!0),this.API.hideLoadingBar(),l.call(this)}var h=function(e){this.currentError=null,this.API=e,this.API.on("afterRender",l,this)};return h.prototype.render=function(e,t,a){var s=this.$element=o(e),l=this.currentError;(a||0===s.find("#loginform").length)&&r(s,t,l);var c=this.$form=s.find("#loginform");c.submit(n.bind(function(e){e.preventDefault(),this.API.showLoadingBar(),o.ajax({type:"POST",url:i()+"/rest/gadget/1.0/login",data:c.serialize(),success:n.bind(function(e){e.loginSucceeded?window.location=i():(t.isElevatedSecurityCheckShown=e.isElevatedSecurityCheckShown,d.call(this,e,t))},this),error:n.bind(function(e){d.call(this,e,t)},this)})},this))},h});;
;
/* module-key = 'com.atlassian.gadgets.publisher:dashboard-item-common', location = 'dashboard-item/common/dashboard-item-common.soy' */
// This file was automatically generated from dashboard-item-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Atlassian.DashboardItem.Common.Templates.
 */

if (typeof Atlassian == 'undefined') { var Atlassian = {}; }
if (typeof Atlassian.DashboardItem == 'undefined') { Atlassian.DashboardItem = {}; }
if (typeof Atlassian.DashboardItem.Common == 'undefined') { Atlassian.DashboardItem.Common = {}; }
if (typeof Atlassian.DashboardItem.Common.Templates == 'undefined') { Atlassian.DashboardItem.Common.Templates = {}; }


Atlassian.DashboardItem.Common.Templates.config = function(opt_data, opt_ignored) {
  return '<div class="dashboard-item-preferences-config"><div class="dashboard-item-error"></div><form action="#" method="post" class="aui">' + soy.$$filterNoAutoescape(opt_data.fields) + '<div class="buttons-container"><div class="buttons"><input class="button submit" type="submit" value="' + soy.$$escapeHtml('Save') + '">' + ((opt_data.isConfigured) ? '<input class="aui-button aui-button-link cancel" type="button" value="' + soy.$$escapeHtml('Cancel') + '">' : '') + '</div></div></form></div>';
};
if (goog.DEBUG) {
  Atlassian.DashboardItem.Common.Templates.config.soyTemplateName = 'Atlassian.DashboardItem.Common.Templates.config';
}


Atlassian.DashboardItem.Common.Templates.refreshInterval = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy16 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group ' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(prefixedId__soy16) + '">' + soy.$$escapeHtml('Auto refresh') + '</label><div class="checkbox"><label><input type="checkbox" id="' + soy.$$escapeHtml(prefixedId__soy16) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" value="15" class="checkbox" ' + ((opt_data.value != 'false' && opt_data.value != '') ? 'checked="checked"' : '') + '>' + soy.$$escapeHtml('Update every 15 minutes') + '</label></div><div class="description">&nbsp;</div></div>';
  return output;
};
if (goog.DEBUG) {
  Atlassian.DashboardItem.Common.Templates.refreshInterval.soyTemplateName = 'Atlassian.DashboardItem.Common.Templates.refreshInterval';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:dashboard-item-common-resources', location = 'static/dashboarditem/common/DashboardItemCommonFunctions.js' */
define("jira-dashboard-items/common-functions",["underscore"],function(e){function t(t){var r=e.extend({},t);if(r.projectOrFilterId&&(!r.type||!r.id)){r.name=r.projectOrFilterId;var i=r.projectOrFilterId.split("-");2===i.length&&(r.type=i[0],r.id=i[1])}return delete r.projectOrFilterId,r}function r(t){var r=e.extend({},t);return!r.projectOrFilterId&&r.type&&r.id&&(r.projectOrFilterId=r.type+"-"+r.id),delete r.id,delete r.type,r}return{projectFilterBackwardCompatible:t,getSafeLegacyProjectOrFilterId:r}});;
;
/* module-key = 'com.atlassian.jira.gadgets:project-filter-autocomplete-component', location = 'static/components/project-filter-autocomplete/project-filter-autocomplete.soy' */
// This file was automatically generated from project-filter-autocomplete.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.ProjectFilterAutoComplete == 'undefined') { JIRA.DashboardItem.ProjectFilterAutoComplete = {}; }
if (typeof JIRA.DashboardItem.ProjectFilterAutoComplete.Templates == 'undefined') { JIRA.DashboardItem.ProjectFilterAutoComplete.Templates = {}; }


JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy3 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy3) + '">' + soy.$$escapeHtml('Project or Saved Filter') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><div class="builder-container"><input type="hidden" name="name" ' + ((opt_data.selectionName) ? 'value="' + soy.$$escapeHtml(opt_data.selectionName) + '"' : '') + '><input type="hidden" name="type" ' + ((opt_data.selectionType) ? 'value="' + soy.$$escapeHtml(opt_data.selectionType) + '"' : '') + '><input type="hidden" name="id" ' + ((opt_data.selectionID) ? 'value="' + soy.$$escapeHtml(opt_data.selectionID) + '"' : '') + '><span class="filterpicker-value-name field-value">' + ((opt_data.selectionName) ? soy.$$escapeHtml(opt_data.selectionName) : soy.$$escapeHtml('No Filter/Project selected')) + '</span><div class="quick-find"><input class="text" id="' + soy.$$escapeHtml(prefixedId__soy3) + '" placeholder="' + soy.$$escapeHtml('Search') + '"><span class="inline-error"></span></div><input class="hidden" id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_id"/><input class="hidden" id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_name"/></div><div class="projectOrFilter-error error"></div><div class="description">' + soy.$$escapeHtml('Project or saved filter to use as the basis for the graph.') + '<br/><a id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_advance" class="advanced-search" href="#" title="' + soy.$$escapeHtml('Click here to select/change filter or project.') + '" target="_parent">' + soy.$$escapeHtml('Advanced Search') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField.soyTemplateName = 'JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField';
}


JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionSection = function(opt_data, opt_ignored) {
  return '<div class=\'suggestionBlock\'><h5>' + soy.$$escapeHtml(opt_data.sectionTitle) + '</h5><ul class=\'aui-list-section\'></ul></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionSection.soyTemplateName = 'JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionSection';
}


JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionProject = function(opt_data, opt_ignored) {
  return '<li class="aui-list-item" data-type="project" data-id="' + soy.$$escapeHtml(opt_data.suggestion.id) + '"><a href="#" class="aui-list-item-link aui-indented-link" target="_parent">' + soy.$$filterNoAutoescape(opt_data.suggestion.html) + '(' + soy.$$escapeHtml(opt_data.suggestion.key) + ')</a></li>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionProject.soyTemplateName = 'JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionProject';
}


JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionFilter = function(opt_data, opt_ignored) {
  return '<li class="aui-list-item" data-type="filter" data-id="' + soy.$$escapeHtml(opt_data.suggestion.id) + '"><a href="#" class="aui-list-item-link aui-indented-link" target="_parent">' + soy.$$filterNoAutoescape(opt_data.suggestion.nameHtml) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionFilter.soyTemplateName = 'JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.SuggestionFilter';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:project-filter-autocomplete-component', location = 'static/components/project-filter-autocomplete/ProjectFilterAutoComplete.js' */
define("jira-dashboard-items/components/autocomplete/project-filter-autocomplete",["jira/util/formatter","wrm/context-path","jira/autocomplete/rest-autocomplete","jira/util/events","jira/util/objects","jquery"],function(e,t,n,i,r,a){var s=JIRA.DashboardItem.ProjectFilterAutoComplete.Templates,o=function(e){var n=e.parentElement,r=e.fieldID,s=function(){var e=a("#filter_"+r+"_id").attr("value"),t=e.substr(0,e.indexOf("-"));e=e.substr(e.indexOf("-")+1);var s=a("#filter_"+r+"_name").text();n.find("input[name=type]").val(t),n.find("input[name=id]").val(e),n.find("input[name=name]").val(s),n.find(".filterpicker-value-name").text(s).addClass("success"),i.trigger("gadget-advancedprojectfilter-selected")},o=n.find("#filter_"+r+"_id");new MutationObserver(s).observe(o[0],{attributes:!0}),n.find("#filter_"+r+"_advance").click(function(e){var n=t()+"/secure/FilterPickerPopup.jspa?showProjects=true&field="+r,i="filter_"+r.replace(new RegExp("-","g"),"")+"_window";window.open(n,i,"width=800, height=500, resizable, scrollbars=yes").focus(),e.preventDefault()})};return function(i){i=i||{};var l=r.begetObject(n);l.getAjaxParams=function(){return{url:t()+"/rest/gadget/1.0/pickers/projectsAndFilters",data:i.ajaxData||{},dataType:"json",type:"GET"}},l.completeField=function(e){e&&(i.parentElement.find("input[name=type]").val(e.type),i.parentElement.find("input[name=id]").val(e.id),i.parentElement.find("input[name=name]").val(e.name),i.parentElement.find(".filterpicker-value-name").text(e.name).addClass("success"),this.field.val(""),this.field.trigger("change"))};var c=function(e,t,n,i,r){var o=[],l=a(s.SuggestionSection({sectionTitle:n})),c=l.find("ul.aui-list-section");return a(i).each(function(){var e=this,n=a(r({suggestion:e}));e.type=t,n.mouseover(function(){a(this).addClass("active")}),o.push([n,e]),c.append(n)}),e.append(l),o};return l.renderSuggestions=function(t){this.clearResponseContainer(),this.responseContainer.addClass("aui-list");var n=[];if(t&&t.projects&&t.projects.length>0){var i=c(this.responseContainer,"project","Projects",t.projects,s.SuggestionProject);n=n.concat(i)}if(t&&t.filters&&t.filters.length>0){var r=c(this.responseContainer,"filter","Filters",t.filters,s.SuggestionFilter);n=n.concat(r)}return this.responseContainer.find(".aui-list-item-link").click(function(e){e.preventDefault()}),l.addSuggestionControls(n),n},i.minQueryLength=1,i.queryDelay=.25,l.init(i),o(i),l}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:d3-3.4.13', location = 'libs/d3/3.4.13/d3-3.4.13.js' */
!function(){function Ya(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function pb(a){return null===a?NaN:+a}function Ka(a){return!isNaN(a)}function Wd(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0>a(b[f],c)?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0<a(b[f],c)?e=f:d=f+1}return d}}}function Sg(a){return a.length}function Xd(a,b){for(var c in b)Object.defineProperty(a.prototype,
c,{value:b[c],enumerable:!1})}function pa(){this._=Object.create(null)}function qb(a){return(a+="")===Tg||a[0]===Fc?Fc+a:a}function Fb(a){return(a+="")[0]===Fc?a.slice(1):a}function Yd(a){return qb(a)in this._}function Zd(a){return(a=qb(a))in this._&&delete this._[a]}function $d(){var a=[],b;for(b in this._)a.push(Fb(b));return a}function ae(){var a=0,b;for(b in this._)++a;return a}function be(){for(var a in this._)return!1;return!0}function Gc(){this._=Object.create(null)}function Ug(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function Hc(a,b){if(b in a)return b;for(var b=b.charAt(0).toUpperCase()+b.slice(1),c=0,d=ce.length;c<d;++c){var e=ce[c]+b;if(e in a)return e}}function L(){}function Ic(){}function de(a){function b(){for(var b=c,d=-1,g=b.length,h;++d<g;)(h=b[d].on)&&h.apply(this,arguments);return a}var c=[],d=new pa;b.on=function(b,f){var g=d.get(b),h;if(2>arguments.length)return g&&g.on;g&&(g.on=null,c=c.slice(0,h=c.indexOf(g)).concat(c.slice(h+1)),d.remove(b));f&&c.push(d.set(b,
{on:f}));return a};return b}function Aa(){i.event.preventDefault()}function Jc(){for(var a=i.event,b;b=a.sourceEvent;)a=b;return a}function Kc(a){for(var b=new Ic,c=0,d=arguments.length;++c<d;)b[arguments[c]]=de(b);b.of=function(c,d){return function(g){try{var h=g.sourceEvent=i.event;g.target=a;i.event=g;b[g.type].apply(c,d)}finally{i.event=h}}};return b}function Ba(a){Gb(a,C);return a}function Lc(a){return"function"===typeof a?a:function(){return Mc(a,this)}}function ee(a){return"function"===typeof a?
a:function(){return Nc(a,this)}}function fe(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=i.ns.qualify(a);return null==b?a.local?d:c:"function"===
typeof b?a.local?h:g:a.local?f:e}function ge(a){return a.trim().replace(/\s+/g," ")}function he(a){return RegExp("(?:^|\\s+)"+i.requote(a)+"(?:\\s+|$)","g")}function ie(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}var a=(a+"").trim().split(/^|\s+/).map(Vg),e=a.length;return"function"===typeof b?d:c}function Vg(a){var b=he(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||
"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",ge(e+" "+a))):c.setAttribute("class",ge(e.replace(b," ")))}}function je(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?f:e}function ke(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:
this[a]=c}return null==b?c:"function"===typeof b?e:d}function le(a){return"function"===typeof a?a:(a=i.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function me(a){return function(){return ne(this,a)}}function Wg(a){arguments.length||(a=Ya);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function qa(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.length,
h;f<g;f++)(h=e[f])&&b(h,f,c);return a}function oe(a){Gb(a,ra);return a}function Hb(){var a=this.__transition__;a&&++a.active}function pe(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=j(b,Ca(arguments));d.call(this);this.addEventListener(a,this[g]=e,e.$=c);e._=b}function f(){var b=RegExp("^__on([^.]+)"+i.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var g="__on"+a,h=
a.indexOf("."),j=qe;0<h&&(a=a.slice(0,h));var k=Oc.get(a);k&&(a=k,j=Xg);return h?b?e:d:b?L:f}function qe(a,b){return function(c){var d=i.event;i.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{i.event=d}}}function Xg(a,b){var c=qe(a,b);return function(a){var b=a.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&c.call(this,a)}}function Ib(){var a=".dragsuppress-"+ ++Yg,b="click"+a,c=i.select(S).on("touchmove"+a,Aa).on("dragstart"+a,Aa).on("selectstart"+a,Aa);if(rb){var d=
sa.style,e=d[rb];d[rb]="none"}return function(f){c.on(a,null);rb&&(d[rb]=e);if(f){var g=function(){c.on(b,null)};c.on(b,function(){Aa();g()},!0);setTimeout(g,0)}}}function Pc(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Qc&&(S.scrollX||S.scrollY)){var c=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();Qc=!(e.f||e.e);c.remove()}Qc?
(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Zg(){return i.event.changedTouches[0].identifier}function $g(){return i.event.target}function ah(){return S}function Rc(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Za(a){return 1<a?Q:-1>a?-Q:Math.asin(a)}function re(a){return((a=Math.exp(a))+1/a)/2}function se(a){return(a=
Math.sin(a/2))*a}function La(){}function ka(a,b,c){return this instanceof ka?void(this.h=+a,this.s=+b,this.l=+c):2>arguments.length?a instanceof ka?new ka(a.h,a.s,a.l):te(""+a,ue,ka):new ka(a,b,c)}function Sc(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f,a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c;f=0.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return new T(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*
d(a-120)))}function ea(a,b,c){return this instanceof ea?void(this.h=+a,this.c=+b,this.l=+c):2>arguments.length?a instanceof ea?new ea(a.h,a.c,a.l):a instanceof fa?ve(a.l,a.a,a.b):ve((a=we((a=i.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ea(a,b,c)}function Tc(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new fa(c,Math.cos(a*=x)*b,Math.sin(a)*b)}function fa(a,b,c){return this instanceof fa?void(this.l=+a,this.a=+b,this.b=+c):2>arguments.length?a instanceof fa?new fa(a.l,a.a,a.b):a instanceof ea?Tc(a.h,a.c,a.l):
we((a=T(a)).r,a.g,a.b):new fa(a,b,c)}function xe(a,b,c){a=(a+16)/116;c=a-c/200;b=Uc(a+b/500)*ye;a=Uc(a)*ze;c=Uc(c)*Ae;return new T(Vc(3.2404542*b-1.5371385*a-0.4985314*c),Vc(-0.969266*b+1.8760108*a+0.041556*c),Vc(0.0556434*b-0.2040259*a+1.0572252*c))}function ve(a,b,c){return 0<a?new ea(Math.atan2(c,b)*H,Math.sqrt(b*b+c*c),a):new ea(NaN,NaN,a)}function Uc(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Wc(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Vc(a){return Math.round(255*
(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function T(a,b,c){return this instanceof T?void(this.r=~~a,this.g=~~b,this.b=~~c):2>arguments.length?a instanceof T?new T(a.r,a.g,a.b):te(""+a,T,Sc):new T(a,b,c)}function Jb(a){return new T(a>>16,a>>8&255,a&255)+""}function $a(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function te(a,b,c){var d=0,e=0,f=0,g,h;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(h=g[2].split(","),g[1]){case "hsl":return c(parseFloat(h[0]),parseFloat(h[1])/
100,parseFloat(h[2])/100);case "rgb":return b(Xc(h[0]),Xc(h[1]),Xc(h[2]))}if(c=Kb.get(a))return b(c.r,c.g,c.b);if(null!=a&&"#"===a.charAt(0)&&!isNaN(c=parseInt(a.slice(1),16)))4===a.length?(d=(c&3840)>>4,d|=d>>4,e=c&240,e|=e>>4,f=c&15,f|=f<<4):7===a.length&&(d=(c&16711680)>>16,e=(c&65280)>>8,f=c&255);return b(d,e,f)}function ue(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g=(e+d)/2;f?(d=0.5>g?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=
0<g&&1>g?0:a);return new ka(a,d,g)}function we(a,b,c){var a=Yc(a),b=Yc(b),c=Yc(c),d=Wc((0.4124564*a+0.3575761*b+0.1804375*c)/ye),e=Wc((0.2126729*a+0.7151522*b+0.072175*c)/ze),a=Wc((0.0193339*a+0.119192*b+0.9503041*c)/Ae);return fa(116*e-16,500*(d-e),200*(e-a))}function Yc(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Xc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function G(a){return"function"===typeof a?a:function(){return a}}function P(a){return a}
function Zc(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Lb(b,c,a,d)}}function Lb(a,b,c,d){function e(){var a=j.status,b,d;if(d=!a)d=(d=j.responseType)&&"text"!==d?j.response:j.responseText;if(d||200<=a&&300>a||304===a){try{b=c.call(f,j)}catch(e){g.error.call(f,e);return}g.load.call(f,b)}else g.error.call(f,j)}var f={},g=i.dispatch("beforesend","progress","load","error"),h={},j=new XMLHttpRequest,k=null;S.XDomainRequest&&(!("withCredentials"in j)&&/^(http(s)?:)?\/\//.test(a))&&
(j=new XDomainRequest);"onload"in j?j.onload=j.onerror=e:j.onreadystatechange=function(){3<j.readyState&&e()};j.onprogress=function(a){var b=i.event;i.event=a;try{g.progress.call(f,j)}finally{i.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return h[a];null==b?delete h[a]:h[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return k;k=a;return f};f.response=function(a){c=
a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Ca(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);j.open(c,a,!0);null!=b&&!("accept"in h)&&(h.accept=b+",*/*");if(j.setRequestHeader)for(var i in h)j.setRequestHeader(i,h[i]);null!=b&&j.overrideMimeType&&j.overrideMimeType(b);null!=k&&(j.responseType=k);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});g.beforesend.call(f,j);j.send(null==d?null:
d);return f};f.abort=function(){j.abort();return f};i.rebind(f,g,"on");return null==d?f:f.get(bh(d))}function bh(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function $c(){var a=Be(),a=Ce()-a;24<a?(isFinite(a)&&(clearTimeout(Mb),Mb=setTimeout($c,a)),Nb=0):(Nb=1,De($c))}function Be(){var a=Date.now();for(ta=Ob;ta;)a>=ta.t&&(ta.f=ta.c(a-ta.t)),ta=ta.n;return a}function Ce(){for(var a,b=Ob,c=Infinity;b;)b.f?b=a?a.n=b.n:Ob=b.n:(b.t<c&&(c=b.t),b=(a=b).n);Pb=a;return c}function ad(a,b){return b-
(a?Math.ceil(Math.log(a)/Math.LN10):1)}function ch(a){return a+""}function ua(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ma(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){b(c=a(new R(c-1)),1);return c}function f(a,c){b(a=new R(+a),c);return a}function g(a,d,f){var a=e(a),h=[];if(1<f)for(;a<d;)c(a)%f||h.push(new Date(+a)),b(a,1);else for(;a<d;)h.push(new Date(+a)),b(a,1);return h}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=
g;var h=a.utc=Qb(a);h.floor=h;h.round=Qb(d);h.ceil=Qb(e);h.offset=Qb(f);h.range=function(a,b,c){try{R=ua;var d=new ua;d._=a;return g(d,b,c)}finally{R=Date}};return a}function Qb(a){return function(b,c){try{R=ua;var d=new ua;d._=b;return a(d,c)._}finally{R=Date}}}function U(a,b,c){var d=0>a?"-":"",a=(d?-a:a)+"",e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function Rb(a){return RegExp("^(?:"+a.map(i.requote).join("|")+")","i")}function Sb(a){for(var b=new pa,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),
c);return b}function dh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function eh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c)))?(a.U=+b[0],c+b[0].length):-1}function fh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):-1}function gh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function hh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1}function ih(a,
b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function jh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function Ee(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function kh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function Fe(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function lh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,
c+2)))?(a.M=+b[0],c+b[0].length):-1}function mh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function nh(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function oh(a){var b=a.getTimezoneOffset(),a=0<b?"-":"+",c=B(b)/60|0,b=B(b)%60;return a+U(c,"0",2)+U(b,"0",2)}function ph(a,b,c){Ge.lastIndex=0;return(a=Ge.exec(b.slice(c,c+1)))?c+a[0].length:-1}function qh(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=
0,f=a[c];!f[1](b);)f=a[++c];return f[0](b)}}function bd(){}function He(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Tb(a,b){if(a&&Ie.hasOwnProperty(a.type))Ie[a.type](a,b)}function cd(a,b,c){var d=-1,c=a.length-c,e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function Je(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)cd(a[c],b,1);b.polygonEnd()}function rh(){function a(a,b){var a=a*x,b=b*x/2+A/4,c=a-d,k=0<=c?1:-1,n=k*c,c=Math.cos(b),l=Math.sin(b),m=f*l,i=e*c+
m*Math.cos(n),k=m*k*Math.sin(n);Na.add(Math.atan2(k,i));d=a;e=c;f=l}var b,c,d,e,f;W.point=function(g,h){W.point=a;d=(b=g)*x;e=Math.cos(h=(c=h)*x/2+A/4);f=Math.sin(h)};W.lineEnd=function(){a(b,c)}}function Oa(a){var b=a[0],a=a[1],c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function Ub(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function ab(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function dd(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Vb(a,b){return[a[0]*
b,a[1]*b,a[2]*b]}function Wb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Xb(a){return[Math.atan2(a[1],a[0]),Za(a[2])]}function Yb(a,b){return B(a[0]-b[0])<t&&B(a[1]-b[1])<t}function ed(a,b){var a=a*x,c=Math.cos(b*=x);sb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function sb(a,b,c){++tb;va+=(a-va)/tb;wa+=(b-wa)/tb;la+=(c-la)/tb}function Ke(){function a(a,f){var a=a*x,g=Math.cos(f*=x),h=g*Math.cos(a),g=g*Math.sin(a),j=Math.sin(f),k=Math.atan2(Math.sqrt((k=c*j-d*
g)*k+(k=d*h-b*j)*k+(k=b*g-c*h)*k),b*h+c*g+d*j);bb+=k;aa+=k*(b+(b=h));ba+=k*(c+(c=g));V+=k*(d+(d=j));sb(b,c,d)}var b,c,d;ga.point=function(e,f){var e=e*x,g=Math.cos(f*=x);b=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);ga.point=a;sb(b,c,d)}}function Le(){ga.point=ed}function sh(){function a(a,b){var a=a*x,c=Math.cos(b*=x),k=c*Math.cos(a),c=c*Math.sin(a),n=Math.sin(b),l=e*n-f*c,m=f*k-d*n,i=d*c-e*k,q=Math.sqrt(l*l+m*m+i*i),s=d*k+e*c+f*n,p=q&&-(1<s?0:-1>s?A:Math.acos(s))/q,q=Math.atan2(q,s);Da+=p*l;Ea+=
p*m;ma+=p*i;bb+=q;aa+=q*(d+(d=k));ba+=q*(e+(e=c));V+=q*(f+(f=n));sb(d,e,f)}var b,c,d,e,f;ga.point=function(g,h){b=g;c=h;ga.point=a;var g=g*x,j=Math.cos(h*=x);d=j*Math.cos(g);e=j*Math.sin(g);f=Math.sin(h);sb(d,e,f)};ga.lineEnd=function(){a(b,c);ga.lineEnd=Le;ga.point=ed}}function cb(){return!0}function Me(a,b,c,d,e){var f=[],g=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Yb(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],c[1]);e.lineEnd()}else b=new Zb(c,a,null,
!0),c=new Zb(c,null,b,!1),b.o=c,f.push(b),g.push(c),b=new Zb(d,a,null,!1),c=new Zb(d,null,b,!0),b.o=c,f.push(b),g.push(c)}});g.sort(b);Ne(f);Ne(g);if(f.length){a=0;b=c;for(c=g.length;a<c;++a)g[a].e=b=!b;for(var b=f[0],h,j;;){for(var k=b,n=!0;k.v;)if((k=k.n)===b)return;h=k.z;e.lineStart();do{k.v=k.o.v=!0;if(k.e){if(n){a=0;for(c=h.length;a<c;++a)e.point((j=h[a])[0],j[1])}else d(k.x,k.n.x,1,e);k=k.n}else{if(n){h=k.p.z;for(a=h.length-1;0<=a;--a)e.point((j=h[a])[0],j[1])}else d(k.x,k.p.x,-1,e);k=k.p}k=
k.o;h=k.z;n=!n}while(!k.v);e.lineEnd()}}}function Ne(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Zb(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function Oe(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);o.point(c[0],c[1])}function j(){s.point=h;o.lineStart()}function k(){s.point=g;o.lineEnd()}function n(a,b){y.push([a,b]);var c=e(a,b);w.point(c[0],
c[1])}function l(){w.lineStart();y=[]}function m(){n(y[0][0],y[0][1]);w.lineEnd();var a=w.clean(),b=r.buffer(),c=b.length;y.pop();z.push(y);y=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;if(0<c){v||(f.polygonStart(),v=!0);for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);f.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),p.push(b.filter(th))}var o=b(f),q=e.invert(d[0],d[1]),s={point:g,lineStart:j,lineEnd:k,polygonStart:function(){s.point=n;s.lineStart=l;s.lineEnd=m;p=[];z=[]},polygonEnd:function(){s.point=
g;s.lineStart=j;s.lineEnd=k;p=i.merge(p);var a,b=q;a=z;var d=b[0],e=b[1],h=[Math.sin(d),-Math.cos(d),0],n=0,m=0;Na.reset();for(var l=0,r=a.length;l<r;++l){var o=a[l],w=o.length;if(w)for(var y=o[0],ca=y[0],b=y[1]/2+A/4,u=Math.sin(b),Re=Math.cos(b),x=1;;){x===w&&(x=0);var b=o[x],B=b[0],C=b[1]/2+A/4,Se=Math.sin(C),C=Math.cos(C),eb=B-ca,G=0<=eb?1:-1,gd=G*eb,$b=gd>A,u=u*Se;Na.add(Math.atan2(u*G*Math.sin(gd),Re*C+u*Math.cos(gd)));n+=$b?eb+G*Y:eb;if($b^ca>=d^B>=d&&(y=ab(Oa(y),Oa(b)),Wb(y),ca=ab(h,y),Wb(ca),
ca=($b^0<=eb?-1:1)*Za(ca[2]),e>ca||e===ca&&(y[0]||y[1])))m+=$b^0<=eb?1:-1;if(!x++)break;ca=B;u=Se;Re=C;y=b}}a=(n<-t||n<t&&0>Na)^m&1;p.length?(v||(f.polygonStart(),v=!0),Me(p,uh,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd());v&&(f.polygonEnd(),v=!1);p=z=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},p,r=Te(),w=b(r),v=!1,z,y;return s}}function th(a){return 1<a.length}function Te(){var a=[],b;return{lineStart:function(){a.push(b=
[])},point:function(a,d){b.push([a,d])},lineEnd:L,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function uh(a,b){return(0>(a=a.x)[0]?a[1]-Q-t:Q-a[1])-(0>(b=b.x)[0]?b[1]-Q-t:Q-b[1])}function Ue(a,b,c,d){return function(e){var f=e.a,g=e.b,h=f.x,f=f.y,j=0,k=1,n=g.x-h,g=g.y-f,l;l=a-h;if(n||!(0<l)){l/=n;if(0>n){if(l<j)return;l<k&&(k=l)}else if(0<n){if(l>k)return;l>j&&(j=l)}l=c-h;if(n||!(0>l)){l/=n;if(0>n){if(l>k)return;l>j&&(j=l)}else if(0<
n){if(l<j)return;l<k&&(k=l)}l=b-f;if(g||!(0<l)){l/=g;if(0>g){if(l<j)return;l<k&&(k=l)}else if(0<g){if(l>k)return;l>j&&(j=l)}l=d-f;if(g||!(0>l)){l/=g;if(0>g){if(l>k)return;l>j&&(j=l)}else if(0<g){if(l<j)return;l<k&&(k=l)}0<j&&(e.a={x:h+j*n,y:f+j*g});1>k&&(e.b={x:h+k*n,y:f+k*g});return e}}}}}}function Ve(a,b,c,d){function e(d,e){return B(d[0]-a)<t?0<e?0:3:B(d[0]-c)<t?0<e?2:1:B(d[1]-b)<t?0<e?1:0:0<e?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-
a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function j(f,h,j,k){var n=0,m=0;if(null==f||(n=e(f,j))!==(m=e(h,j))||0>g(f,h)^0<j){do k.point(0===n||3===n?a:c,1<n?d:b);while((n=(n+j+4)%4)!==m)}else k.point(h[0],h[1])}function k(e,f){a<=e&&(e<=c&&b<=f&&f<=d)&&h.point(e,f)}function n(e,f){var e=Math.max(-ac,Math.min(ac,e)),f=Math.max(-ac,Math.min(ac,f)),g=a<=e&&e<=c&&b<=f&&f<=d;s&&p.push([e,f]);if(X)w=e,v=f,z=g,X=!1,g&&(h.lineStart(),h.point(e,f));else if(g&&F)h.point(e,f);else{var j=
{a:{x:y,y:D},b:{x:e,y:f}};o(j)?(F||(h.lineStart(),h.point(j.a.x,j.a.y)),h.point(j.b.x,j.b.y),g||h.lineEnd(),I=!1):g&&(h.lineStart(),h.point(e,f),I=!1)}y=e;D=f;F=g}var l=h,m=Te(),o=Ue(a,b,c,d),q,s,p,r={point:k,lineStart:function(){r.point=n;s&&s.push(p=[]);X=!0;F=!1;y=D=NaN},lineEnd:function(){q&&(n(w,v),z&&F&&m.rejoin(),q.push(m.buffer()));r.point=k;F&&h.lineEnd()},polygonStart:function(){h=m;q=[];s=[];I=!0},polygonEnd:function(){h=l;q=i.merge(q);var b;b=[a,d];for(var c=0,e=s.length,g=b[1],k=0;k<
e;++k)for(var n=1,m=s[k],v=m.length,r=m[0],o;n<v;++n)o=m[n],r[1]<=g?o[1]>g&&0<Rc(r,o,b)&&++c:o[1]<=g&&0>Rc(r,o,b)&&--c,r=o;b=0!==c;c=I&&b;e=q.length;if(c||e)h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Me(q,f,b,j,h),h.polygonEnd();q=s=p=null}},w,v,z,y,D,F,X,I;return r}}function We(a,b){function c(c,e){return c=a(c,e),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,e){return c=b.invert(c,e),c&&a.invert(c[0],c[1])});return c}function hd(a){var b=0,c=A/3,d=id(a),a=d(b,c);
a.parallels=function(a){return!arguments.length?[180*(b/A),180*(c/A)]:d(b=a[0]*A/180,c=a[1]*A/180)};return a}function Xe(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Za((f-(a*a+c*c)*e*e)/(2*e))]};return c}function vh(){function a(a,b){bc+=e*a-d*b;d=a;e=b}var b,c,d,e;Fa.point=function(f,g){Fa.point=a;b=d=f;c=e=g};Fa.lineEnd=
function(){a(b,c)}}function wh(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b);h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Ye(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){f=Ye(a);return h},result:function(){if(g.length){var a=g.join("");g=[];return a}}};return h}function Ye(a){return"m0,"+a+"a"+
a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Qa(a,b){va+=a;wa+=b;++la}function Ze(){function a(a,e){var f=a-b,g=e-c,f=Math.sqrt(f*f+g*g);aa+=f*(b+a)/2;ba+=f*(c+e)/2;V+=f;Qa(b=a,c=e)}var b,c;ha.point=function(d,e){ha.point=a;Qa(b=d,c=e)}}function $e(){ha.point=Qa}function xh(){function a(a,b){var c=a-d,j=b-e,c=Math.sqrt(c*c+j*j);aa+=c*(d+a)/2;ba+=c*(e+b)/2;V+=c;c=e*a-d*b;Da+=c*(d+a);Ea+=c*(e+b);ma+=3*c;Qa(d=a,e=b)}var b,c,d,e;ha.point=function(f,g){ha.point=a;Qa(b=d=f,c=e=g)};
ha.lineEnd=function(){a(b,c)}}function yh(a){function b(b,c){a.moveTo(b,c);a.arc(b,c,g,0,Y)}function c(b,c){a.moveTo(b,c);h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e;h.point=b},pointRadius:function(a){g=a;return h},result:L};return h}function af(a){function b(a){return(h?d:c)(a)}function c(b){return bf(b,function(c,d){c=
a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=a(d,e);b.point(d[0],d[1])}function d(){F=NaN;E.point=f;b.lineStart()}function f(c,d){var g=Oa([c,d]),k=a(c,d);e(F,X,D,I,t,J,F=k[0],X=k[1],D=c,I=g[0],t=g[1],J=g[2],h,b);b.point(F,X)}function g(){E.point=c;b.lineEnd()}function i(){d();E.point=q;E.lineEnd=s}function q(a,b){f(p=a,b);r=F;w=X;v=I;z=t;y=J;E.point=f}function s(){e(F,X,D,I,t,J,r,w,p,v,z,y,h,b);E.lineEnd=g;g()}var p,r,w,v,z,y,D,F,X,I,t,J,E={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart();
E.lineStart=i},polygonEnd:function(){b.polygonEnd();E.lineStart=d}};return E}function e(b,c,d,h,m,i,q,s,p,r,w,v,z,y){var D=q-b,F=s-c,X=D*D+F*F;if(X>4*f&&z--){var I=h+r,u=m+w,J=i+v,E=Math.sqrt(I*I+u*u+J*J),db=Math.asin(J/=E),fd=B(B(J)-1)<t||B(d-p)<t?(d+p)/2:Math.atan2(u,I),Pa=a(fd,db),db=Pa[0],Pa=Pa[1],Pe=db-b,Qe=Pa-c,ca=F*Pe-D*Qe;if(ca*ca/X>f||0.3<B((D*Pe+F*Qe)/X-0.5)||h*r+m*w+i*v<g)e(b,c,d,h,m,i,db,Pa,fd,I/=E,u/=E,J,z,y),y.point(db,Pa),e(db,Pa,fd,I,u,J,q,s,p,r,w,v,z,y)}}var f=0.5,g=Math.cos(30*x),
h=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);h=0<(f=a*a)&&16;return b};return b}function cf(a){this.stream=a}function bf(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ga(a){return id(function(){return a})()}function id(a){function b(a){a=h(a[0]*x,a[1]*x);return[a[0]*k+r,w-a[1]*k]}function c(a){return(a=h.invert((a[0]-
r)/k,(w-a[1])/k))&&[a[0]*H,a[1]*H]}function d(){h=We(g=jd(q,s,p),f);var a=f(m,o);r=n-a[0]*k;w=l+a[1]*k;return e()}function e(){F&&(F.valid=!1,F=null);return b}var f,g,h,j=af(function(a,b){a=f(a,b);return[a[0]*k+r,w-a[1]*k]}),k=150,n=480,l=250,m=0,o=0,q=0,s=0,p=0,r,w,v=df,z=P,y=null,D=null,F;b.stream=function(a){F&&(F.valid=!1);F=ef(v(g,j(z(a))));F.valid=!0;return F};b.clipAngle=function(a){if(!arguments.length)return y;var b;if(null==a)b=(y=a,df);else{var c=(y=+a)*x,d=function(a,b){return Math.cos(a)*
Math.cos(b)>g},f=function(a,b,c){var d=Oa(a),e=Oa(b),f=[1,0,0],e=ab(d,e),h=Ub(e,e),d=e[0],j=h-d*d;if(!j)return!c&&a;h=g*h/j;j=-g*d/j;d=ab(f,e);f=Vb(f,h);e=Vb(e,j);dd(f,e);e=Ub(f,d);h=Ub(d,d);j=e*e-h*(Ub(f,f)-1);if(!(0>j)){var k=Math.sqrt(j),j=Vb(d,(-e-k)/h);dd(j,f);j=Xb(j);if(!c)return j;var c=a[0],n=b[0],a=a[1],b=b[1],m;n<c&&(m=c,c=n,n=m);var l=n-c,i=B(l-A)<t,v=i||l<t;!i&&b<a&&(m=a,a=b,b=m);if(v?i?0<a+b^j[1]<(B(j[0]-c)<t?a:b):a<=j[1]&&j[1]<=b:l>A^(c<=j[0]&&j[0]<=n))return b=Vb(d,(-e+k)/h),dd(b,f),
[j,Xb(b)]}},h=function(a,b){var d=j?c:A-c,e=0;a<-d?e|=1:a>d&&(e|=2);b<-d?e|=4:b>d&&(e|=8);return e},g=Math.cos(c),j=0<g,k=B(g)>t;b=kd(c,6*x);b=Oe(d,function(a){var b,c,e,g,n;return{lineStart:function(){g=e=!1;n=1},point:function(m,l){var i=[m,l],v,p=d(m,l),s=j?p?0:h(m,l):p?h(m+(0>m?A:-A),l):0;!b&&(g=e=p)&&a.lineStart();if(p!==e&&(v=f(b,i),Yb(b,v)||Yb(i,v)))i[0]+=t,i[1]+=t,p=d(i[0],i[1]);if(p!==e)n=0,p?(a.lineStart(),v=f(i,b),a.point(v[0],v[1])):(v=f(b,i),a.point(v[0],v[1]),a.lineEnd()),b=v;else if(k&&
b&&j^p){var r;if(!(s&c)&&(r=f(i,b,!0)))n=0,j?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1]))}p&&(!b||!Yb(b,i))&&a.point(i[0],i[1]);b=i;e=p;c=s},lineEnd:function(){e&&a.lineEnd();b=null},clean:function(){return n|(g&&e)<<1}}},b,j?[0,-c]:[-A,c-A])}v=b;return e()};b.clipExtent=function(a){if(!arguments.length)return D;z=(D=a)?Ve(a[0][0],a[0][1],a[1][0],a[1][1]):P;return e()};b.scale=function(a){if(!arguments.length)return k;
k=+a;return d()};b.translate=function(a){if(!arguments.length)return[n,l];n=+a[0];l=+a[1];return d()};b.center=function(a){if(!arguments.length)return[m*H,o*H];m=a[0]%360*x;o=a[1]%360*x;return d()};b.rotate=function(a){if(!arguments.length)return[q*H,s*H,p*H];q=a[0]%360*x;s=a[1]%360*x;p=2<a.length?a[2]%360*x:0;return d()};i.rebind(b,j,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&c;return d()}}function ef(a){return bf(a,function(b,c){a.point(b*x,c*x)})}function ub(a,
b){return[a,b]}function ff(a,b){return[a>A?a-Y:a<-A?a+Y:a,b]}function jd(a,b,c){return a?b||c?We(gf(a),hf(b,c)):gf(a):b||c?hf(b,c):ff}function jf(a){return function(b,c){return b+=a,[b>A?b-Y:b<-A?b+Y:b,c]}}function gf(a){var b=jf(a);b.invert=jf(-a);return b}function hf(a,b){function c(a,b){var c=Math.cos(b),n=Math.cos(a)*c,c=Math.sin(a)*c,l=Math.sin(b),m=l*d+n*e;return[Math.atan2(c*f-m*g,n*d-l*e),Za(m*f+c*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);c.invert=function(a,b){var c=
Math.cos(b),n=Math.cos(a)*c,c=Math.sin(a)*c,l=Math.sin(b),m=l*f-c*g;return[Math.atan2(c*f+l*g,n*d+m*e),Za(m*d-n*e)]};return c}function kd(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var j=g*b;if(null!=e){if(e=kf(c,e),f=kf(c,f),0<g?e<f:e>f)e+=g*Y}else e=a+g*Y,f=a-0.5*j;for(var k;0<g?e>f:e<f;e-=j)h.point((k=Xb([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],k[1])}}function kf(a,b){var c=Oa(b);c[0]-=a;Wb(c);var d=1<-c[1]?0:-1>-c[1]?A:Math.acos(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-t)%(2*Math.PI)}
function lf(a,b,c){var d=i.range(a,b-t,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function mf(a,b,c){var d=i.range(a,b-t,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function ld(a){return a.source}function md(a){return a.target}function vb(a,b){function c(b,c){var f=Math.cos(b),g=Math.cos(c),f=a(f*g);return[f*g*Math.sin(b),f*Math.sin(c)]}c.invert=function(a,c){var f=Math.sqrt(a*a+c*c),g=b(f),h=Math.sin(g),g=Math.cos(g);return[Math.atan2(a*h,
f*g),Math.asin(f&&c*h/f)]};return c}function nf(a,b){function c(a,b){0<f?b<-Q+t&&(b=-Q+t):b>Q-t&&(b=Q-t);var c=f/Math.pow(Math.tan(A/4+b/2),e);return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(A/4+b/2)/Math.tan(A/4+a/2)),f=d*Math.pow(Math.tan(A/4+a/2),e)/e;if(!e)return cc;c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-Q]};return c}function of(a,b){function c(a,
b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(B(e)<t)return ub;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function cc(a,b){return[a,Math.log(Math.tan(A/4+b/2))]}function pf(a){var b=Ga(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,arguments);
return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var h=e.apply(b,arguments);if(h===b){if(f=null==a){var j=A*c(),k=d();e([[k[0]-j,k[1]-j],[k[0]+j,k[1]+j]])}}else f&&(h=null);return h};return b.clipExtent(null)}function nd(a,b){return[Math.log(Math.tan(A/4+b/2)),-a]}function fb(a){return a[0]}function wb(a){return a[1]}function qf(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=Rc(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function zh(a,b){return a[0]-b[0]||
a[1]-b[1]}function od(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function rf(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,a=a[1],c=c[1],b=b[1]-a,d=d[1]-c,f=(h*(a-c)-d*(e-f))/(d*g-h*b);return[e+f*g,a+f*b]}function sf(a){var b=a[0],a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Ah(){dc(this);this.edge=this.site=this.circle=null}function tf(a){var b=uf.pop()||new Ah;b.site=a;return b}function pd(a){gb(a);hb.remove(a);uf.push(a);dc(a)}function vf(a,b){var c=a.site,d=c.x,e=c.y,
f=e-b;if(!f)return d;var g=a.P;if(!g)return-Infinity;var c=g.site,g=c.x,c=c.y,h=c-b;if(!h)return g;var j=g-d,k=1/f-1/h,n=j/h;return k?(-n+Math.sqrt(n*n-2*k*(j*j/(-2*h)-c+h/2+e-f/2)))/k+d:(d+g)/2}function wf(a){this.site=a;this.edges=[]}function xf(a,b){return b.angle-a.angle}function Bh(){dc(this);this.x=this.y=this.arc=this.site=this.cy=null}function ib(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,g=d.x-c,h=d.y-f,d=e.x-c,e=e.y-f,j=2*(g*e-h*d);if(!(j>=-qd)){var k=
g*g+h*h,n=d*d+e*e,h=(e*k-h*n)/j,g=(g*n-d*k)/j,e=g+f,f=yf.pop()||new Bh;f.arc=a;f.site=b;f.x=h+c;f.y=e+Math.sqrt(h*h+g*g);f.cy=e;a.circle=f;a=null;for(b=xb._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}xb.insert(a,f);a||(rd=f)}}}}function gb(a){var b=a.circle;b&&(b.P||(rd=b.N),xb.remove(b),yf.push(b),dc(b),a.circle=null)}function Ch(a,b){var c=a.b;if(c)return!0;var d=a.a,c=b[0][0],e=b[1][0],f=b[0][1],g=b[1][1],h=a.l,j=a.r,k=h.x,h=h.y,n=j.x,j=j.y,
l=(k+n)/2,m;if(j===h){if(l<c||l>=e)return;if(k>n){if(d){if(d.y>=g)return}else d={x:l,y:f};c={x:l,y:g}}else{if(d){if(d.y<f)return}else d={x:l,y:g};c={x:l,y:f}}}else if(m=(k-n)/(j-h),l=(h+j)/2-m*l,-1>m||1<m)if(k>n){if(d){if(d.y>=g)return}else d={x:(f-l)/m,y:f};c={x:(g-l)/m,y:g}}else{if(d){if(d.y<f)return}else d={x:(g-l)/m,y:g};c={x:(f-l)/m,y:f}}else if(h<j){if(d){if(d.x>=e)return}else d={x:c,y:m*c+l};c={x:e,y:m*e+l}}else{if(d){if(d.x<c)return}else d={x:e,y:m*e+l};c={x:c,y:m*c+l}}a.a=d;a.b=c;return!0}
function zf(a,b){this.l=a;this.r=b;this.a=this.b=null}function yb(a,b,c,d){var e=new zf(a,b);jb.push(e);c&&ec(e,a,b,c);d&&ec(e,b,a,d);Ra[a.i].edges.push(new fc(e,a,b));Ra[b.i].edges.push(new fc(e,b,a));return e}function Dh(a,b,c){a=new zf(a,null);a.a=b;a.b=c;jb.push(a);return a}function ec(a,b,c,d){!a.a&&!a.b?(a.a=d,a.l=b,a.r=c):a.l===c?a.b=d:a.a=d}function fc(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-
e.x,e.y-d.y)}function sd(){this._=null}function dc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function zb(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Ab(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Af(a){for(;a.L;)a=a.L;return a}function td(a,b){var c=a.sort(Eh).pop(),d,e,f;jb=[];Ra=Array(a.length);hb=new sd;for(xb=new sd;;)if(f=rd,c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==d||c.y!==e){Ra[c.i]=new wf(c);
d=c;for(var g=d.x,h=d.y,j=f=e=void 0,k=void 0,n=hb._;n;)if(j=vf(n,h)-g,j>t)n=n.L;else{var k=g,l;var m=n;l=h;var i=m.N;i?l=vf(i,l):(m=m.site,l=m.y===l?m.x:Infinity);k-=l;if(k>t){if(!n.R){e=n;break}n=n.R}else{j>-t?(e=n.P,f=n):k>-t?(e=n,f=n.N):e=f=n;break}}g=tf(d);hb.insert(e,g);if(e||f)if(e===f)gb(e),f=tf(e.site),hb.insert(g,f),g.edge=f.edge=yb(e.site,g.site),ib(e),ib(f);else if(f){gb(e);gb(f);h=e.site;n=h.x;k=h.y;l=d.x-n;var m=d.y-k,j=f.site,i=j.x-n,q=j.y-k,s=2*(l*q-m*i),p=l*l+m*m,r=i*i+q*q,n={x:(q*
p-m*r)/s+n,y:(l*r-i*p)/s+k};ec(f.edge,h,j,n);g.edge=yb(h,d,null,n);f.edge=yb(d,j,null,n);ib(e);ib(f)}else g.edge=yb(e.site,g.site);d=c.x;e=c.y}c=a.pop()}else if(f){j=f.arc;f=j.circle;h=f.x;n=f.cy;f={x:h,y:n};l=j.P;k=j.N;g=[j];pd(j);for(j=l;j.circle&&B(h-j.circle.x)<t&&B(n-j.circle.cy)<t;)l=j.P,g.unshift(j),pd(j),j=l;g.unshift(j);gb(j);for(l=k;l.circle&&B(h-l.circle.x)<t&&B(n-l.circle.cy)<t;)k=l.N,g.push(l),pd(l),l=k;g.push(l);gb(l);h=g.length;n=void 0;for(n=1;n<h;++n)l=g[n],j=g[n-1],ec(l.edge,j.site,
l.site,f);j=g[0];l=g[h-1];l.edge=yb(j.site,l.site,null,f);ib(j);ib(l)}else break;if(b){c=jb;d=Ue(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(f=c[e],!Ch(f,b)||!d(f)||B(f.a.x-f.b.x)<t&&B(f.a.y-f.b.y)<t)f.a=f.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];f=b[1][1];n=Ra;for(k=n.length;k--;)if((l=n[k])&&l.prepare()){i=l.edges;q=i.length;for(m=0;m<q;)if(s=i[m].end(),h=s.x,j=s.y,p=i[++m%q].start(),g=p.x,p=p.y,B(h-g)>t||B(j-p)>t)i.splice(m,0,new fc(Dh(l.site,s,B(h-c)<t&&f-j>t?{x:c,y:B(g-
c)<t?p:f}:B(j-f)<t&&d-h>t?{x:B(p-f)<t?g:d,y:f}:B(h-d)<t&&j-e>t?{x:d,y:B(g-d)<t?p:e}:B(j-e)<t&&h-c>t?{x:B(p-e)<t?g:c,y:e}:null),l.site,null)),++q}}c={cells:Ra,edges:jb};hb=xb=jb=Ra=null;return c}function Eh(a,b){return b.y-a.y||b.x-a.x}function Fh(a){return a.x}function Gh(a){return a.y}function Bf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Bb(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=0.5*(c+e),h=0.5*(d+f),b=b.nodes;b[0]&&Bb(a,b[0],c,d,g,h);b[1]&&Bb(a,b[1],g,d,e,h);b[2]&&Bb(a,b[2],c,h,
g,f);b[3]&&Bb(a,b[3],g,h,e,f)}}function ud(a,b){var a=i.rgb(a),b=i.rgb(b),c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+$a(Math.round(c+f*a))+$a(Math.round(d+g*a))+$a(Math.round(e+h*a))}}function Cf(a,b){var c={},d={},e;for(e in a)e in b?c[e]=Sa(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function xa(a,b){a=+a;b=+b;return function(c){return a*(1-c)+b*c}}function Df(a,b){for(var c=vd.lastIndex=wd.lastIndex=0,d,e,
f,g=-1,h=[],j=[],a=a+"",b=b+"";(d=vd.exec(a))&&(e=wd.exec(b));){if((f=e.index)>c)f=b.slice(c,f),h[g]?h[g]+=f:h[++g]=f;(d=d[0])===(e=e[0])?h[g]?h[g]+=e:h[++g]=e:(h[++g]=null,j.push({i:g,x:xa(d,e)}));c=wd.lastIndex}c<b.length&&(f=b.slice(c),h[g]?h[g]+=f:h[++g]=f);return 2>h.length?j[0]?(b=j[0].x,function(a){return b(a)+""}):function(){return b}:(b=j.length,function(a){for(var c=0,d;c<b;++c)h[(d=j[c]).i]=d.x(a);return h.join("")})}function Sa(a,b){for(var c=i.interpolators.length,d;0<=--c&&!(d=i.interpolators[c](a,
b)););return d}function gc(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),h;for(h=0;h<g;++h)c.push(Sa(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<f;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}}function Ef(a){return function(b){return 1-a(1-b)}}function Ff(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function Hh(a){return a*a}function Ih(a){return a*a*a}function Jh(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:
3*(a-b)+c-0.75)}function Kh(a){return 1-Math.cos(a*Q)}function Lh(a){return Math.pow(2,10*(a-1))}function Mh(a){return 1-Math.sqrt(1-a*a)}function Nh(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Gf(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function Hf(a){var b=[a.a,a.b],c=[a.c,a.d],d=If(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=f*b[1];f=If(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=
-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*H;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*H:0}function If(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function Jf(a,b){var c=[],d=[],e,f=i.transform(a),g=i.transform(b),h=f.translate,j=g.translate,k=f.rotate,n=g.rotate,l=f.skew,m=g.skew,f=f.scale,g=g.scale;h[0]!=j[0]||h[1]!=j[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:xa(h[0],j[0])},{i:3,x:xa(h[1],
j[1])})):j[0]||j[1]?c.push("translate("+j+")"):c.push("");k!=n?(180<k-n?n+=360:180<n-k&&(k+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:xa(k,n)})):n&&c.push(c.pop()+"rotate("+n+")");l!=m?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:xa(l,m)}):m&&c.push(c.pop()+"skewX("+m+")");f[0]!=g[0]||f[1]!=g[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:xa(f[0],g[0])},{i:e-2,x:xa(f[1],g[1])})):(1!=g[0]||1!=g[1])&&c.push(c.pop()+"scale("+g+")");e=d.length;return function(a){for(var b=
-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function Oh(a,b){b=(b-=a=+a)||1/b;return function(c){return(c-a)/b}}function Ph(a,b){b=(b-=a=+a)||1/b;return function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Qh(a){var b=a.source,a=a.target,c;var d=a;if(b===d)c=b;else{c=Kf(b);for(var d=Kf(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function Kf(a){for(var b=[],c=a.parent;null!=
c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function Rh(a){a.fixed|=2}function Sh(a){a.fixed&=-7}function Th(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Uh(a){a.fixed&=-5}function Lf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,g=f.length,h=-1,j;++h<g;)j=f[h],null!=j&&(Lf(j,b,c),a.charge+=j.charge,d+=j.charge*j.cx,e+=j.charge*j.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);
a.cx=d/a.charge;a.cy=e/a.charge}function Cb(a,b){i.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Vh;return a}function Db(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)c.push(e[d])}function na(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(g=a.children)&&(f=g.length))for(var e=-1,f,g;++e<f;)c.push(g[e]);for(;null!=(a=d.pop());)b(a)}function Wh(a){return a.children}function Xh(a){return a.value}function Yh(a,b){return b.value-a.value}
function Vh(a){return i.merge(a.map(function(a){return(a.children||[]).map(function(c){return{source:a,target:c}})}))}function Zh(a){return a.x}function $h(a){return a.y}function ai(a,b,c){a.y0=b;a.y=c}function xd(a){return i.range(a.length)}function yd(a){for(var b=-1,a=a[0].length,c=[];++b<a;)c[b]=0;return c}function bi(a){for(var b=1,c=0,d=a[0][1],e,f=a.length;b<f;++b)if((e=a[b][1])>d)c=b,d=e;return c}function ci(a){return a.reduce(di,0)}function di(a,b){return a+b[1]}function ei(a,b){return Mf(a,
Math.ceil(Math.log(b.length)/Math.LN2+1))}function Mf(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function fi(a){return[i.min(a),i.max(a)]}function gi(a,b){return a.value-b.value}function zd(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Nf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return 0.999*e*e>c*c+d*d}function Of(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);g=Math.max(a.y+a.r,g)}if((c=
a.children)&&(o=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,g=-Infinity,h,j,k,n,i,m,o;c.forEach(hi);h=c[0];h.x=-h.r;h.y=0;b(h);if(1<o&&(j=c[1],j.x=j.r,j.y=0,b(j),2<o)){k=c[2];Pf(h,j,k);b(k);zd(h,k);h._pack_prev=k;zd(k,j);j=h._pack_next;for(n=3;n<o;n++){Pf(h,j,k=c[n]);var q=0,s=1,p=1;for(i=j._pack_next;i!==j;i=i._pack_next,s++)if(Nf(i,k)){q=1;break}if(1==q)for(m=h._pack_prev;m!==i._pack_prev&&!Nf(m,k);m=m._pack_prev,p++);q?(s<p||s==p&&j.r<h.r?(k=h,i=j=i):(k=h=m,i=j),k._pack_next=i,i._pack_prev=
k,n--):(zd(h,k),j=k,b(k))}}h=(d+e)/2;j=(f+g)/2;for(n=m=0;n<o;n++)k=c[n],k.x-=h,k.y-=j,m=Math.max(m,k.r+Math.sqrt(k.x*k.x+k.y*k.y));a.r=m;c.forEach(ii)}}function hi(a){a._pack_next=a._pack_prev=a}function ii(a){delete a._pack_next;delete a._pack_prev}function Qf(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e)for(var a=-1,f=e.length;++a<f;)Qf(e[a],b,c,d)}function Pf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f,g=g*g,d=d*d,b=0.5+(d-g)/(2*h),g=Math.sqrt(Math.max(0,
2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function Rf(a,b){return a.parent==b.parent?1:2}function Ad(a){var b=a.children;return b.length?b[0]:a.t}function Bd(a){var b=a.children,c;return(c=b.length)?b[c-1]:a.t}function Sf(a){var b=a.children;return b&&b.length?Sf(b[0]):a}function Tf(a){var b=a.children,c;return b&&(c=b.length)?Tf(b[c-1]):a}function Cd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Uf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-
b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function kb(a){var b=a[0],a=a[a.length-1];return b<a?[b,a]:[a,b]}function hc(a){return a.rangeExtent?a.rangeExtent():kb(a.range())}function ji(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function ic(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function Vf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/
a)*a}}:ki}function li(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=i.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Wf(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?li:ji,k=d?Ph:Oh;g=e(a,b,k,c);h=e(b,a,k,Sa);return f}function f(a){return g(a)}var g,h;f.invert=function(a){return h(a)};f.domain=function(b){if(!arguments.length)return a;
a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(Gf)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return i.range.apply(i,Ha(a,b))};f.tickFormat=function(b,c){return Dd(a,b,c)};f.nice=function(b){ic(a,Vf(Ha(a,b)[2]));return e()};f.copy=function(){return Wf(a,b,c,d)};return e()}function Ed(a,
b){return i.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ha(a,b){null==b&&(b=10);var c=kb(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+0.5*e;c[2]=e;return c}function Dd(a,b,c){b=Ha(a,b);if(c){a=Xf.exec(c);a.shift();if("s"===a[8]){var d=i.formatPrefix(Math.max(B(b[0]),B(b[1])));a[7]||(a[7]="."+jc(d.scale(b[2])));a[8]="f";c=i.format(a.join(""));return function(a){return c(d.scale(a))+
d.symbol}}if(!a[7]){var e=a[8],f=jc(b[2]),b=e in mi?Math.abs(f-jc(Math.max(B(b[0]),B(b[1]))))+ +("e"!==e):f-2*("%"===e);a[7]="."+b}c=a.join("")}else c=",."+jc(b[2])+"f";return i.format(c)}function jc(a){return-Math.floor(Math.log(a)/Math.LN10+0.01)}function Yf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}g.invert=function(b){return f(a.invert(b))};g.domain=function(b){if(!arguments.length)return d;
c=0<=b[0];a.domain((d=b.map(Number)).map(e));return g};g.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return g};g.nice=function(){var b=ic(d.map(e),c?Math:ni);a.domain(b);d=b.map(f);return g};g.ticks=function(){var a=kb(d),g=[],k=a[0],a=a[1],n=Math.floor(e(k)),i=Math.ceil(e(a)),m=b%1?2:b;if(isFinite(i-n)){if(c){for(;n<i;n++)for(var o=1;o<m;o++)g.push(f(n)*o);g.push(f(n))}else for(g.push(f(n));n++<i;)for(o=m-1;0<o;o--)g.push(f(n)*o);for(n=0;g[n]<k;n++);for(i=g.length;g[i-
1]>a;i--);g=g.slice(n,i)}return g};g.tickFormat=function(a,b){if(!arguments.length)return Zf;2>arguments.length?b=Zf:"function"!==typeof b&&(b=i.format(b));var d=Math.max(0.1,a/g.ticks().length),n=c?(l=1E-12,Math.ceil):(l=-1E-12,Math.floor),l;return function(a){return a/f(n(e(a)+l))<=d?b(a):""}};g.copy=function(){return Yf(a.copy(),b,c,d)};return Ed(g,a)}function $f(a,b,c){function d(b){return a(e(b))}var e=kc(b),f=kc(1/b);d.invert=function(b){return f(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;
a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return i.range.apply(i,Ha(c,a))};d.tickFormat=function(a,b){return Dd(c,a,b)};d.nice=function(a){return d.domain(ic(c,Vf(Ha(c,a)[2])))};d.exponent=function(g){if(!arguments.length)return b;e=kc(b=g);f=kc(1/b);a.domain(c.map(e));return d};d.copy=function(){return $f(a.copy(),b,c)};return Ed(d,a)}function kc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ag(a,b){function c(c){return f[((e.get(c)||("range"===b.t?
e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return i.range(a.length).map(function(a){return b+c*a})}var e,f,g;c.domain=function(d){if(!arguments.length)return a;a=[];e=new pa;for(var f=-1,g=d.length,n;++f<g;)e.has(n=d[f])||e.set(n,a.push(n));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return f;f=a;g=0;b={t:"range",a:arguments};return c};c.rangePoints=function(e,j){2>arguments.length&&(j=0);var k=e[0],n=e[1],i=(n-k)/(Math.max(1,a.length-1)+j);f=d(2>a.length?(k+n)/
2:k+i*j/2,i);g=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(e,j,k){2>arguments.length&&(j=0);3>arguments.length&&(k=j);var i=e[1]<e[0],l=e[i-0],m=(e[1-i]-l)/(a.length-j+2*k);f=d(l+m*k,m);i&&f.reverse();g=m*(1-j);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,j,k){2>arguments.length&&(j=0);3>arguments.length&&(k=j);var i=e[1]<e[0],l=e[i-0],m=e[1-i],o=Math.floor((m-l)/(a.length-j+2*k));f=d(l+Math.round((m-l-(a.length-j)*o)/2),o);i&&f.reverse();g=Math.round(o*
(1-j));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return kb(b.a[0])};c.copy=function(){return ag(a,b)};return c.domain(a)}function bg(a,b){function c(){var c=0,g=b.length;for(e=[];++c<g;)e[c-1]=i.quantile(a,c/g);return d}function d(a){if(!isNaN(a=+a))return b[i.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;a=b.map(pb).filter(Ka).sort(Ya);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};
d.quantiles=function(){return e};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return bg(a,b)};return c()}function cg(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=
function(b){b=c.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return cg(a,b,c)};return e()}function dg(a,b){function c(c){if(c<=c)return b[i.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return dg(a,b)};return c}function eg(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;
a=c.map(b);return b};b.ticks=function(b){return i.range.apply(i,Ha(a,b))};b.tickFormat=function(b,d){return Dd(a,b,d)};b.copy=function(){return eg(a)};return b}function oi(a){return a.innerRadius}function pi(a){return a.outerRadius}function fg(a){return a.startAngle}function gg(a){return a.endAngle}function hg(a){function b(b){function g(){i.push("M",f(a(l),h))}for(var i=[],l=[],m=-1,o=b.length,q,s=G(c),p=G(d);++m<o;)e.call(this,q=b[m],m)?l.push([+s.call(this,q,m),+p.call(this,q,m)]):l.length&&(g(),
l=[]);l.length&&g();return i.length?i.join(""):null}var c=fb,d=wb,e=cb,f=Z,g=f.key,h=0.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return g;g="function"===typeof a?f=a:(f=Fd.get(a)||Z).key;return b};b.tension=function(a){if(!arguments.length)return h;h=a;return b};return b}function Z(a){return a.join("L")}function Gd(a){for(var b=
0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Hd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function lc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return Z(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,j=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],j=2);if(1<b.length){h=b[1];f=a[j];j++;d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+
","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(e=2;e<b.length;e++,j++)f=a[j],h=b[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}c&&(c=a[j],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function Id(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],g=a[1],h=1,j=a.length;++h<j;)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function ig(a){if(3>a.length)return Z(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],e=[e,",",f,"L",da(Ia,
g),",",da(Ia,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Jd(e,g,h);a.pop();e.push("L",d);return e.join("")}function da(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Jd(a,b,c){a.push("C",da(jg,b),",",da(jg,c),",",da(kg,b),",",da(kg,c),",",da(Ia,b),",",da(Ia,c))}function Kd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function lg(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]+Ta,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function mg(a){function b(b){function j(){q.push("M",
h(a(p),l),i,k(a(s.reverse()),l),"Z")}for(var q=[],s=[],p=[],r=-1,w=b.length,v,z=G(c),y=G(e),D=c===d?function(){return u}:G(d),F=e===f?function(){return I}:G(f),u,I;++r<w;)g.call(this,v=b[r],r)?(s.push([u=+z.call(this,v,r),I=+y.call(this,v,r)]),p.push([+D.call(this,v,r),+F.call(this,v,r)])):s.length&&(j(),s=[],p=[]);s.length&&j();return q.length?q.join(""):null}var c=fb,d=fb,e=0,f=wb,g=cb,h=Z,j=h.key,k=h,i="L",l=0.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;
c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};b.defined=function(a){if(!arguments.length)return g;g=a;return b};b.interpolate=function(a){if(!arguments.length)return j;j="function"===typeof a?h=a:(h=Fd.get(a)||Z).key;k=h.reverse||h;i=h.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return l;
l=a;return b};return b}function qi(a){return a.radius}function ng(a){return[a.x,a.y]}function ri(){return 64}function si(){return"circle"}function og(a){a=Math.sqrt(a/A);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Eb(a,b){Gb(a,M);a.id=b;return a}function Ld(a,b,c,d){var e=a.id;return qa(a,"function"===typeof c?function(a,g,h){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function ti(a){null==
a&&(a="");return function(){this.textContent=a}}function mc(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var g=d.time,f=e[c]={tween:new pa,time:g,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;i.timer(function(d){function j(d){if(e.active>c)return n();e.active=c;f.event&&f.event.start.call(a,l,b);f.tween.forEach(function(c,d){(d=d.call(a,l,b))&&p.push(d)});i.timer(function(){s.c=k(d||1)?cb:k;return 1},0,g)}function k(d){if(e.active!==c)return n();
for(var d=d/q,g=m(d),h=p.length;0<h;)p[--h].call(a,g);if(1<=d)return f.event&&f.event.end.call(a,l,b),n()}function n(){--e.count?delete e[c]:delete a.__transition__;return 1}var l=a.__data__,m=f.ease,o=f.delay,q=f.duration,s=ta,p=[];s.t=o+g;if(o<=d)return j(d-o);s.c=j},0,g)}}function ui(a,b,c){a.attr("transform",function(a){var e=b(a);return"translate("+(isFinite(e)?e:c(a))+",0)"})}function vi(a,b,c){a.attr("transform",function(a){var e=b(a);return"translate(0,"+(isFinite(e)?e:c(a))+")"})}function Md(a){return a.toISOString()}
function Nd(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,e=i.bisect(nc,d);return e==nc.length?[b.year,Ha(a.map(function(a){return a/31536E6}),c)[2]]:!e?[wi,Ha(a,c)[2]]:b[d/nc[e-1]<nc[e]/d?e-1:e]}d.invert=function(b){return Ua(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(Ua);a.domain(b);return d};d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,Ua(+d+1),b).length}var j=d.domain(),k=kb(j);if(k=null==a?e(k,10):"number"===typeof a&&
e(k,a))a=k[0],b=k[1];return d.domain(ic(j,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=Ua(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Ua(+b+1);return b}}:a))};d.ticks=function(a,b){var c=kb(d.domain()),j=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];j&&(a=j[0],b=j[1]);return a.range(c[0],Ua(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return Nd(a.copy(),b,c)};return Ed(d,a)}function Ua(a){return new Date(a)}function xi(a){return JSON.parse(a.responseText)}
function yi(a){var b=ia.createRange();b.selectNode(ia.body);return b.createContextualFragment(a.responseText)}var i={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var pg=[].slice,Ca=function(a){return pg.call(a)},ia=document,sa=ia.documentElement,S=window;try{Ca(sa.childNodes)[0].nodeType}catch(bj){Ca=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{ia.createElement("div").style.setProperty("opacity",0,"")}catch(cj){var oc=S.Element.prototype,zi=oc.setAttribute,
Ai=oc.setAttributeNS,qg=S.CSSStyleDeclaration.prototype,Bi=qg.setProperty;oc.setAttribute=function(a,b){zi.call(this,a,b+"")};oc.setAttributeNS=function(a,b,c){Ai.call(this,a,b,c+"")};qg.setProperty=function(a,b,c){Bi.call(this,a,b+"",c)}}i.ascending=Ya;i.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};i.min=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){for(;++c<d&&!((e=a[c])!=null&&e<=e);)e=void 0;for(;++c<d;)if((f=a[c])!=null&&e>f)e=f}else{for(;++c<d&&!((e=b.call(a,a[c],
c))!=null&&e<=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null&&e>f)e=f}return e};i.max=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){for(;++c<d&&!((e=a[c])!=null&&e<=e);)e=void 0;for(;++c<d;)if((f=a[c])!=null&&f>e)e=f}else{for(;++c<d&&!((e=b.call(a,a[c],c))!=null&&e<=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null&&f>e)e=f}return e};i.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(arguments.length===1){for(;++c<d&&!((e=g=a[c])!=null&&e<=e);)e=g=void 0;for(;++c<d;)if((f=
a[c])!=null){e>f&&(e=f);g<f&&(g=f)}}else{for(;++c<d&&!((e=g=b.call(a,a[c],c))!=null&&e<=e);)e=void 0;for(;++c<d;)if((f=b.call(a,a[c],c))!=null){e>f&&(e=f);g<f&&(g=f)}}return[e,g]};i.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(arguments.length===1)for(;++f<d;){if(Ka(e=+a[f]))c=c+e}else for(;++f<d;)if(Ka(e=+b.call(a,a[f],f)))c=c+e;return c};i.mean=function(a,b){var c=0,d=a.length,e,f=-1,g=d;if(arguments.length===1)for(;++f<d;)Ka(e=pb(a[f]))?c=c+e:--g;else for(;++f<d;)Ka(e=pb(b.call(a,a[f],f)))?c=
c+e:--g;return g?c/g:void 0};i.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c=c-d)?e+c*(a[d]-e):e};i.median=function(a,b){var c=[],d=a.length,e,f=-1;if(arguments.length===1)for(;++f<d;)Ka(e=pb(a[f]))&&c.push(e);else for(;++f<d;)Ka(e=pb(b.call(a,a[f],f)))&&c.push(e);return c.length?i.quantile(c.sort(Ya),0.5):void 0};var rg=Wd(Ya);i.bisectLeft=rg.left;i.bisect=i.bisectRight=rg.right;i.bisector=function(a){return Wd(a.length===1?function(b,c){return Ya(a(b),c)}:a)};
i.shuffle=function(a){for(var b=a.length,c,d;b;){d=Math.random()*b--|0;c=a[b];a[b]=a[d];a[d]=c}return a};i.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};i.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(c<0?0:c);b<c;)e[b]=[d,d=a[++b]];return e};i.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=i.min(arguments,Sg),c=Array(b);++a<b;)for(var d=-1,e,f=c[a]=Array(e);++d<e;)f[d]=arguments[d][a];return c};i.transpose=function(a){return i.zip.apply(i,
a)};i.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};i.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};i.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};i.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,f;++c<b;)d=d+a[c].length;for(e=Array(d);--b>=0;){f=a[b];for(c=f.length;--c>=0;)e[--d]=f[c]}return e};var B=Math.abs;i.range=function(a,b,c){if(arguments.length<3){c=1;if(arguments.length<2){b=a;a=0}}if((b-a)/c===Infinity)throw Error("infinite range");
var d=[],e;e=B(c);for(var f=1;e*f%1;)f=f*10;e=f;var f=-1,g,a=a*e,b=b*e,c=c*e;if(c<0)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};i.map=function(a){var b=new pa;if(a instanceof pa)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};var Tg="__proto__",Fc="\x00";Xd(pa,{has:Yd,get:function(a){return this._[qb(a)]},set:function(a,b){return this._[qb(a)]=b},remove:Zd,keys:$d,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},
entries:function(){var a=[],b;for(b in this._)a.push({key:Fb(b),value:this._[b]});return a},size:ae,empty:be,forEach:function(a){for(var b in this._)a.call(this,Fb(b),this._[b])}});i.nest=function(){function a(b,e,k){if(k>=d.length)return g?g.call(c,e):f?e.sort(f):e;for(var i=-1,l=e.length,m=d[k++],o,q,s=new pa,p;++i<l;)(p=s.get(o=m(q=e[i])))?p.push(q):s.set(o,[q]);if(b){q=b();e=function(c,d){q.set(c,a(b,d,k))}}else{q={};e=function(c,d){q[c]=a(b,d,k)}}s.forEach(e);return q}function b(a,c){if(c>=d.length)return a;
var f=[],g=e[c++];a.forEach(function(a,d){f.push({key:a,values:b(d,c)})});return g?f.sort(function(a,b){return g(a.key,b.key)}):f}var c={},d=[],e=[],f,g;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(i.map,c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};c.rollup=function(a){g=a;return c};return c};i.set=function(a){var b=new Gc;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};Xd(Gc,
{has:Yd,add:function(a){this._[qb(a=a+"")]=true;return a},remove:Zd,values:$d,size:ae,empty:be,forEach:function(a){for(var b in this._)a.call(this,Fb(b))}});i.behavior={};i.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=Ug(a,b,b[e]);return a};var ce="webkit ms moz Moz o O".split(" ");i.dispatch=function(){for(var a=new Ic,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=de(a);return a};Ic.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0){d=a.slice(c+1);a=
a.slice(0,c)}if(a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(arguments.length===2){if(b==null)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};i.event=null;i.requote=function(a){return a.replace(Ci,"\\$&")};var Ci=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Gb={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Mc=function(a,b){return b.querySelector(a)},Nc=function(a,b){return b.querySelectorAll(a)},Di=sa.matches||sa[Hc(sa,"matchesSelector")],
ne=function(a,b){return Di.call(a,b)};"function"===typeof Sizzle&&(Mc=function(a,b){return Sizzle(a,b)[0]||null},Nc=Sizzle,ne=Sizzle.matchesSelector);i.selection=function(){return sg};var C=i.selection.prototype=[];C.select=function(a){for(var b=[],c,d,e,f,a=Lc(a),g=-1,h=this.length;++g<h;){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var j=-1,k=e.length;++j<k;)if(f=e[j]){c.push(d=a.call(f,f.__data__,j,g));if(d&&"__data__"in f)d.__data__=f.__data__}else c.push(null)}return Ba(b)};C.selectAll=
function(a){for(var b=[],c,d,a=ee(a),e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,j=g.length;++h<j;)if(d=g[h]){b.push(c=Ca(a.call(d,d.__data__,h,e)));c.parentNode=d}return Ba(b)};var Od={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};i.ns={prefix:Od,qualify:function(a){var b=a.indexOf(":"),c=a;if(b>=0){c=a.slice(0,b);a=a.slice(b+1)}return Od.hasOwnProperty(c)?
{space:Od[c],local:a}:a}};C.attr=function(a,b){if(arguments.length<2){if(typeof a==="string"){var c=this.node(),a=i.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(fe(b,a[b]));return this}return this.each(fe(a,b))};C.classed=function(a,b){if(arguments.length<2){if(typeof a==="string"){var c=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return false}else for(b=c.getAttribute("class");++e<
d;)if(!he(a[e]).test(b))return false;return true}for(b in a)this.each(ie(b,a[b]));return this}return this.each(ie(a,b))};C.style=function(a,b,c){var d=arguments.length;if(d<3){if(typeof a!=="string"){d<2&&(b="");for(c in a)this.each(je(c,a[c],b));return this}if(d<2)return S.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(je(a,b,c))};C.property=function(a,b){if(arguments.length<2){if(typeof a==="string")return this.node()[a];for(b in a)this.each(ke(b,a[b]));return this}return this.each(ke(a,
b))};C.text=function(a){return arguments.length?this.each(typeof a==="function"?function(){var b=a.apply(this,arguments);this.textContent=b==null?"":b}:a==null?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};C.html=function(a){return arguments.length?this.each(typeof a==="function"?function(){var b=a.apply(this,arguments);this.innerHTML=b==null?"":b}:a==null?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};C.append=function(a){a=
le(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};C.insert=function(a,b){a=le(a);b=Lc(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};C.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};C.data=function(a,b){function c(a,c){var d,e=a.length,f=c.length,g=Math.min(e,f),i=Array(f),r=Array(f),w=Array(e),v,z;if(b){var g=new pa,y=Array(e),D;for(d=-1;++d<e;){g.has(D=
b.call(v=a[d],v.__data__,d))?w[d]=v:g.set(D,v);y[d]=D}for(d=-1;++d<f;){if(v=g.get(D=b.call(c,z=c[d],d))){if(v!==true){i[d]=v;v.__data__=z}}else r[d]={__data__:z};g.set(D,true)}for(d=-1;++d<e;)g.get(y[d])!==true&&(w[d]=a[d])}else{for(d=-1;++d<g;){v=a[d];z=c[d];if(v){v.__data__=z;i[d]=v}else r[d]={__data__:z}}for(;d<f;++d)r[d]={__data__:c[d]};for(;d<e;++d)w[d]=a[d]}r.update=i;r.parentNode=i.parentNode=w.parentNode=a.parentNode;h.push(r);j.push(i);k.push(w)}var d=-1,e=this.length,f,g;if(!arguments.length){for(a=
Array(e=(f=this[0]).length);++d<e;)if(g=f[d])a[d]=g.__data__;return a}var h=oe([]),j=Ba([]),k=Ba([]);if(typeof a==="function")for(;++d<e;)c(f=this[d],a.call(f,f.parentNode.__data__,d));else for(;++d<e;)c(f=this[d],a);j.enter=function(){return h};j.exit=function(){return k};return j};C.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};C.filter=function(a){var b=[],c,d,e;typeof a!=="function"&&(a=me(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);c.parentNode=
(d=this[f]).parentNode;for(var h=0,j=d.length;h<j;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return Ba(b)};C.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;--d>=0;)if(f=c[d]){e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e);e=f}return this};C.sort=function(a){for(var a=Wg.apply(this,arguments),b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};C.each=function(a){return qa(this,function(b,c,d){a.call(b,b.__data__,c,d)})};C.call=function(a){var b=
Ca(arguments);a.apply(b[0]=this,b);return this};C.empty=function(){return!this.node()};C.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};C.size=function(){var a=0;qa(this,function(){++a});return a};var ra=[];i.selection.enter=oe;i.selection.enter.prototype=ra;ra.append=C.append;ra.empty=C.empty;ra.node=C.node;ra.call=C.call;ra.size=C.size;ra.select=function(a){for(var b=[],c,d,e,f,g,h=-1,j=this.length;++h<j;){e=(f=this[h]).update;
b.push(c=[]);c.parentNode=f.parentNode;for(var k=-1,i=f.length;++k<i;)if(g=f[k]){c.push(e[k]=d=a.call(f.parentNode,g.__data__,k,h));d.__data__=g.__data__}else c.push(null)}return Ba(b)};ra.insert=function(a,b){if(arguments.length<2)var c=this,d,e,b=function(a,b,h){var a=c[h].update,j=a.length;if(h!=e){e=h;d=0}for(b>=d&&(d=b+1);!(b=a[d])&&++d<j;);return b};return C.insert.call(this,a,b)};C.transition=function(){for(var a=Va||++tg,b=[],c,d,e=pc||{time:Date.now(),ease:Jh,delay:0,duration:250},f=-1,g=
this.length;++f<g;){b.push(c=[]);for(var h=this[f],j=-1,k=h.length;++j<k;){(d=h[j])&&mc(d,j,a,e);c.push(d)}}return Eb(b,a)};C.interrupt=function(){return this.each(Hb)};i.select=function(a){a=[typeof a==="string"?Mc(a,ia):a];a.parentNode=sa;return Ba([a])};i.selectAll=function(a){a=Ca(typeof a==="string"?Nc(a,ia):a);a.parentNode=sa;return Ba([a])};var sg=i.select(sa);C.on=function(a,b,c){var d=arguments.length;if(d<3){if(typeof a!=="string"){d<2&&(b=false);for(c in a)this.each(pe(c,a[c],b));return this}if(d<
2)return(d=this.node()["__on"+a])&&d._;c=false}return this.each(pe(a,b,c))};var Oc=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});Oc.forEach(function(a){"on"+a in ia&&Oc.remove(a)});var rb="onselectstart"in ia?null:Hc(sa.style,"userSelect"),Yg=0;i.mouse=function(a){return Pc(a,Jc())};var Qc=/WebKit/.test(S.navigator.userAgent)?-1:0;i.touch=function(a,b,c){if(arguments.length<3){c=b;b=Jc().changedTouches}if(b)for(var d=0,e=b.length,f;d<e;++d)if((f=b[d]).identifier===c)return Pc(a,f)};i.behavior.drag=
function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,n){return function(){var l=i.event.target,m=this.parentNode,o=c.of(this,arguments),q=0,s=a(),p=".drag"+(s==null?"":"-"+s),r,w=i.select(e()).on(f+p,function(){var a=b(m,s),c,d;if(a){c=a[0]-z[0];d=a[1]-z[1];q=q|c|d;z=a;o({type:"drag",x:a[0]+r[0],y:a[1]+r[1],dx:c,dy:d})}}).on(n+p,function(){if(b(m,s)){w.on(f+p,null).on(n+p,null);v(q&&i.event.target===l);o({type:"dragend"})}}),v=Ib(),z=b(m,s);if(d){r=d.apply(this,
arguments);r=[r.x-z[0],r.y-z[1]]}else r=[0,0];o({type:"dragstart"})}}var c=Kc(a,"drag","dragstart","dragend"),d=null,e=b(L,i.mouse,ah,"mousemove","mouseup"),f=b(Zg,i.touch,$g,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return i.rebind(a,c,"on")};i.touches=function(a,b){if(arguments.length<2)b=Jc().touches;return b?Ca(b).map(function(b){var d=Pc(a,b);d.identifier=b.identifier;return d}):[]};var A=Math.PI,Y=2*A,Q=A/2,t=1E-6,qd=t*t,x=A/180,H=180/A,qc=Math.SQRT2,
Pd=2;i.interpolateZoom=function(a,b){function c(a){var b=a*q;if(o){var a=re(m),c=f/(Pd*i),g,k=qc*b+m;g=((k=Math.exp(2*k))-1)/(k+1);g=a*g;var l=m,k=((l=Math.exp(l))-1/l)/2,c=c*(g-k);return[d+c*h,e+c*j,f*a/re(qc*b+m)]}return[d+a*h,e+a*j,f*Math.exp(qc*b)]}var d=a[0],e=a[1],f=a[2],g=b[2],h=b[0]-d,j=b[1]-e,k=h*h+j*j,i=Math.sqrt(k),l=(g*g-f*f+4*k)/(2*f*Pd*i),k=(g*g-f*f-4*k)/(2*g*Pd*i),m=Math.log(Math.sqrt(l*l+1)-l),o=Math.log(Math.sqrt(k*k+1)-k)-m,q=(o||Math.log(g/f))/qc;c.duration=q*1E3;return c};i.behavior.zoom=
function(){function a(a){a.on(w,j).on(Ei+".zoom",n).on("dblclick.zoom",l).on(D,k)}function b(a){return[(a[0]-m.x)/m.k,(a[1]-m.y)/m.k]}function c(a){m.k=Math.max(r[0],Math.min(r[1],a))}function d(a,b){b=[b[0]*m.k+m.x,b[1]*m.k+m.y];m.x=m.x+(a[0]-b[0]);m.y=m.y+(a[1]-b[1])}function e(){t&&t.domain(I.range().map(function(a){return(a-m.x)/m.k}).map(I.invert));E&&E.domain(J.range().map(function(a){return(a-m.y)/m.k}).map(J.invert))}function f(a){a({type:"zoomstart"})}function g(a){e();a({type:"zoom",scale:m.k,
translate:[m.x,m.y]})}function h(a){a({type:"zoomend"})}function j(){var a=this,c=i.event.target,e=u.of(a,arguments),j=0,k=i.select(S).on(v,function(){j=1;d(i.mouse(a),n);g(e)}).on(z,function(){k.on(v,null).on(z,null);l(j&&i.event.target===c);h(e)}),n=b(i.mouse(a)),l=Ib();Hb.call(a);f(e)}function k(){function a(){var c=i.touches(v);r=m.k;c.forEach(function(a){a.identifier in s&&(s[a.identifier]=b(a))});return c}function e(){var b=i.event.target;i.select(b).on(z,n).on(y,l);J.push(b);for(var b=i.event.changedTouches,
f=0,h=b.length;f<h;++f)s[b[f].identifier]=null;h=a();f=Date.now();if(h.length===1){if(f-F<500){b=h[0];h=s[b.identifier];c(m.k*2);d(b,h);Aa();g(p)}F=f}else if(h.length>1){b=h[0];h=h[1];f=b[0]-h[0];b=b[1]-h[1];q=f*f+b*b}}function n(){for(var a=i.touches(v),b,e,f,h,j=0,k=a.length;j<k;++j,h=null){f=a[j];if(h=s[f.identifier]){if(e)break;b=f;e=h}}if(h){var l=(l=f[0]-b[0])*l+(l=f[1]-b[1])*l,a=q&&Math.sqrt(l/q);b=[(b[0]+f[0])/2,(b[1]+f[1])/2];e=[(e[0]+h[0])/2,(e[1]+h[1])/2];c(a*r)}F=null;d(b,e);g(p)}function l(){if(i.event.touches.length){for(var b=
i.event.changedTouches,c=0,d=b.length;c<d;++c)delete s[b[c].identifier];for(var e in s)return void a()}i.selectAll(J).on(o,null);E.on(w,j).on(D,k);I();h(p)}var v=this,p=u.of(v,arguments),s={},q=0,r,o=".zoom-"+i.event.changedTouches[0].identifier,z="touchmove"+o,y="touchend"+o,J=[],E=i.select(v),I=Ib();Hb.call(v);e();f(p);E.on(w,null).on(D,e)}function n(){var a=u.of(this,arguments);if(y)clearTimeout(y);else{o=b(q=s||i.mouse(this));Hb.call(this);f(a)}y=setTimeout(function(){y=null;h(a)},50);Aa();c(Math.pow(2,
rc()*0.002)*m.k);d(q,o);g(a)}function l(){var a=u.of(this,arguments),e=i.mouse(this),j=b(e),k=Math.log(m.k)/Math.LN2;f(a);c(Math.pow(2,i.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1));d(e,j);g(a);h(a)}var m={x:0,y:0,k:1},o,q,s,p=[960,500],r=ug,w="mousedown.zoom",v="mousemove.zoom",z="mouseup.zoom",y,D="touchstart.zoom",F,u=Kc(a,"zoomstart","zoom","zoomend"),I,t,J,E;a.event=function(a){a.each(function(){var a=u.of(this,arguments),b=m;if(Va)i.select(this).transition().each("start.zoom",function(){m=
this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=p[0],d=c/2,e=p[1]/2,f=i.interpolateZoom([(d-m.x)/m.k,(e-m.y)/m.k,c/m.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){var b=f(b),h=c/b[2];this.__chart__=m={x:d-b[0]*h,y:e-b[1]*h,k:h};g(a)}}).each("end.zoom",function(){h(a)});else{this.__chart__=m;f(a);g(a);h(a)}})};a.translate=function(b){if(!arguments.length)return[m.x,m.y];m={x:+b[0],y:+b[1],k:m.k};e();return a};a.scale=function(b){if(!arguments.length)return m.k;m={x:m.x,
y:m.y,k:+b};e();return a};a.scaleExtent=function(b){if(!arguments.length)return r;r=b==null?ug:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return s;s=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return p;p=b&&[+b[0],+b[1]];return a};a.x=function(b){if(!arguments.length)return t;t=b;I=b.copy();m={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return E;E=b;J=b.copy();m={x:0,y:0,k:1};return a};return i.rebind(a,u,"on")};var ug=[0,Infinity],rc,
Ei="onwheel"in ia?(rc=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ia?(rc=function(){return i.event.wheelDelta},"mousewheel"):(rc=function(){return-i.event.detail},"MozMousePixelScroll");i.color=La;La.prototype.toString=function(){return this.rgb()+""};i.hsl=ka;var Qd=ka.prototype=new La;Qd.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return new ka(this.h,this.s,this.l/a)};Qd.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return new ka(this.h,
this.s,a*this.l)};Qd.rgb=function(){return Sc(this.h,this.s,this.l)};i.hcl=ea;var Rd=ea.prototype=new La;Rd.brighter=function(a){return new ea(this.h,this.c,Math.min(100,this.l+sc*(arguments.length?a:1)))};Rd.darker=function(a){return new ea(this.h,this.c,Math.max(0,this.l-sc*(arguments.length?a:1)))};Rd.rgb=function(){return Tc(this.h,this.c,this.l).rgb()};i.lab=fa;var sc=18,ye=0.95047,ze=1,Ae=1.08883,Sd=fa.prototype=new La;Sd.brighter=function(a){return new fa(Math.min(100,this.l+sc*(arguments.length?
a:1)),this.a,this.b)};Sd.darker=function(a){return new fa(Math.max(0,this.l-sc*(arguments.length?a:1)),this.a,this.b)};Sd.rgb=function(){return xe(this.l,this.a,this.b)};i.rgb=T;var tc=T.prototype=new La;tc.brighter=function(a){var a=Math.pow(0.7,arguments.length?a:1),b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return new T(30,30,30);b&&b<30&&(b=30);c&&c<30&&(c=30);d&&d<30&&(d=30);return new T(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))};tc.darker=function(a){a=Math.pow(0.7,arguments.length?
a:1);return new T(a*this.r,a*this.g,a*this.b)};tc.hsl=function(){return ue(this.r,this.g,this.b)};tc.toString=function(){return"#"+$a(this.r)+$a(this.g)+$a(this.b)};var Kb=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,
silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Kb.forEach(function(a,b){Kb.set(a,new T(b>>16,b>>8&255,b&255))});i.functor=G;i.xhr=Zc(P);i.dsv=function(a,b){function c(a,c,f){if(arguments.length<3){f=c;c=null}var g=Lb(a,b,c==null?d:e(c),
f);g.row=function(a){return arguments.length?g.response((c=a)==null?d:e(a)):c};return g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=RegExp('["'+a+"\n]"),j=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+
": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(h>=g)return e;if(v)return v=false,d;var b=h;if(a.charCodeAt(b)===34){for(var f=b;f++<g;)if(a.charCodeAt(f)===34){if(a.charCodeAt(f+1)!==34)break;++f}h=f+2;var i=a.charCodeAt(f+1);if(i===13){v=true;a.charCodeAt(f+2)===10&&++h}else i===10&&(v=true);return a.slice(b+1,f).replace(/""/g,'"')}for(;h<g;){i=a.charCodeAt(h++);f=1;if(i===10)v=true;else if(i===13){v=true;if(a.charCodeAt(h)===10){++h;
++f}}else if(i!==j)continue;return a.slice(b,h-f)}return a.slice(b)}for(var d={},e={},f=[],g=a.length,h=0,i=0,w,v;(w=c())!==e;){for(var z=[];w!==d&&w!==e;){z.push(w);w=c()}b&&(z=b(z,i++))==null||f.push(z)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new Gc,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};
return c};i.csv=i.dsv(",","text/csv");i.tsv=i.dsv("\t","text/tab-separated-values");var Ob,Pb,Nb,Mb,ta,De=S[Hc(S,"requestAnimationFrame")]||function(a){setTimeout(a,17)};i.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0);d<3&&(c=Date.now());d={c:a,t:c+b,f:false,n:null};Pb?Pb.n=d:Ob=d;Pb=d;if(!Nb){Mb=clearTimeout(Mb);Nb=1;De($c)}};i.timer.flush=function(){Be();Ce()};i.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Fi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
b){var c=Math.pow(10,B(8-b)*3);return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}});i.formatPrefix=function(a,b){var c=0;if(a){a<0&&(a=a*-1);b&&(a=i.round(a,ad(a,b)));c=1+Math.floor(1E-12+Math.log(a)/Math.LN10);c=Math.max(-24,Math.min(24,Math.floor((c-1)/3)*3))}return Fi[8+c/3]};var Xf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Gi=i.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},
x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=i.round(a,ad(a,b))).toFixed(Math.max(0,Math.min(20,ad(a*(1+1E-15),b))))}}),u=i.time={},R=Date;ua.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ya.setUTCDate.apply(this._,arguments)},setDay:function(){ya.setUTCDay.apply(this._,arguments)},setFullYear:function(){ya.setUTCFullYear.apply(this._,
arguments)},setHours:function(){ya.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ya.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ya.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ya.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ya.setUTCSeconds.apply(this._,arguments)},setTime:function(){ya.setTime.apply(this._,arguments)}};var ya=Date.prototype;u.year=Ma(function(a){a=u.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+
b)},function(a){return a.getFullYear()});u.years=u.year.range;u.years.utc=u.year.utc.range;u.day=Ma(function(a){var b=new R(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});u.days=u.day.range;u.days.utc=u.day.utc.range;u.dayOfYear=function(a){var b=u.year(a);return Math.floor((a-b-(a.getTimezoneOffset()-b.getTimezoneOffset())*6E4)/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,
b){var b=7-b,c=u[a]=Ma(function(a){(a=u.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+Math.floor(b)*7)},function(a){var c=u.year(a).getDay();return Math.floor((u.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});u[a+"s"]=c.range;u[a+"s"].utc=c.utc.range;u[a+"OfYear"]=function(a){var c=u.year(a).getDay();return Math.floor((u.dayOfYear(a)+(c+b)%7)/7)}});u.week=u.sunday;u.weeks=u.sunday.range;u.weeks.utc=u.sunday.utc.range;u.weekOfYear=u.sundayOfYear;var vg={"-":"",_:" ",
"0":"0"},K=/^\s*\d+/,Ge=/^%/;i.locale=function(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],j=0;e>0&&h>0;){j+h+1>b&&(h=Math.max(1,b-j));f.push(a.substring(e=e-h,e+h));if((j=j+(h+1))>b)break;h=d[g=(g+1)%d.length]}return f.reverse().join(c)}:P,g=function(a){function b(d){for(var e=[],f=-1,g=0,h,j;++f<c;)if(a.charCodeAt(f)===37){e.push(a.slice(g,f));if((h=vg[g=a.charAt(++f)])!=null)g=a.charAt(++f);if(j=I[g])g=j(d,h==null?g==="e"?" ":
"0":h);e.push(g);g=f+1}e.push(a.slice(g,f));return e.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(c,a,b,0)!=b.length)return null;if("p"in c)c.H=c.H%12+c.p*12;var b=c.Z!=null&&R!==ua,d=new (b?ua:R);if("j"in c)d.setFullYear(c.y,0,c.j);else if("w"in c&&("W"in c||"U"in c)){d.setFullYear(c.y,0,1);d.setFullYear(c.y,0,"W"in c?(c.w+6)%7+c.W*7-(d.getDay()+5)%7:c.w+c.U*7-(d.getDay()+6)%7)}else d.setFullYear(c.y,c.m,c.d);d.setHours(c.H+(c.Z/100|0),c.M+c.Z%100,
c.S,c.L);return b?d._:d};b.toString=function(){return a};return b},h=function(a,b,c,d){for(var e,f=0,g=b.length,h=c.length;f<g;){if(d>=h)return-1;e=b.charCodeAt(f++);if(e===37){e=b.charAt(f++);e=x[e in vg?b.charAt(f++):e];if(!e||(d=e(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d},j=a.dateTime,k=a.date,n=a.time,l=a.periods,m=a.days,o=a.shortDays,q=a.months,s=a.shortMonths;g.utc=function(a){function b(a){try{R=ua;var d=new R;d._=a;return c(d)}finally{R=Date}}var c=g(a);b.parse=function(a){try{R=
ua;var b=c.parse(a);return b&&b._}finally{R=Date}};b.toString=c.toString;return b};g.multi=g.utc.multi=qh;var p=i.map(),r=Rb(m),w=Sb(m),v=Rb(o),z=Sb(o),y=Rb(q),D=Sb(q),F=Rb(s),t=Sb(s);l.forEach(function(a,b){p.set(a.toLowerCase(),b)});var I={a:function(a){return o[a.getDay()]},A:function(a){return m[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return q[a.getMonth()]},c:g(j),d:function(a,b){return U(a.getDate(),b,2)},e:function(a,b){return U(a.getDate(),b,2)},H:function(a,b){return U(a.getHours(),
b,2)},I:function(a,b){return U(a.getHours()%12||12,b,2)},j:function(a,b){return U(1+u.dayOfYear(a),b,3)},L:function(a,b){return U(a.getMilliseconds(),b,3)},m:function(a,b){return U(a.getMonth()+1,b,2)},M:function(a,b){return U(a.getMinutes(),b,2)},p:function(a){return l[+(a.getHours()>=12)]},S:function(a,b){return U(a.getSeconds(),b,2)},U:function(a,b){return U(u.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return U(u.mondayOfYear(a),b,2)},x:g(k),X:g(n),y:function(a,b){return U(a.getFullYear()%
100,b,2)},Y:function(a,b){return U(a.getFullYear()%1E4,b,4)},Z:oh,"%":function(){return"%"}},x={a:function(a,b,c){v.lastIndex=0;return(b=v.exec(b.slice(c)))?(a.w=z.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){r.lastIndex=0;return(b=r.exec(b.slice(c)))?(a.w=w.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){F.lastIndex=0;return(b=F.exec(b.slice(c)))?(a.m=t.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){y.lastIndex=0;return(b=y.exec(b.slice(c)))?(a.m=D.get(b[0].toLowerCase()),
c+b[0].length):-1},c:function(a,b,c){return h(a,I.c.toString(),b,c)},d:Ee,e:Ee,H:Fe,I:Fe,j:kh,L:nh,m:jh,M:lh,p:function(a,b,c){b=p.get(b.slice(c,c=c+2).toLowerCase());return b==null?-1:(a.p=b,c)},S:mh,U:eh,w:dh,W:fh,x:function(a,b,c){return h(a,I.x.toString(),b,c)},X:function(a,b,c){return h(a,I.X.toString(),b,c)},y:hh,Y:gh,Z:ih,"%":ph};return{numberFormat:function(a){var a=Xf.exec(a),c=a[1]||" ",d=a[2]||">",g=a[3]||"-",h=a[4]||"",j=a[5],k=+a[6],n=a[7],l=a[8],m=a[9],v=1,p="",s="",r=false,q=true;l&&
(l=+l.substring(1));if(j||c==="0"&&d==="="){j=c="0";d="="}switch(m){case "n":n=true;m="g";break;case "%":v=100;s="%";m="f";break;case "p":v=100;s="%";m="r";break;case "b":case "o":case "x":case "X":h==="#"&&(p="0"+m.toLowerCase());case "c":q=false;case "d":r=true;l=0;break;case "s":v=-1;m="r"}if(h==="$"){p=e[0];s=e[1]}m=="r"&&!l&&(m="g");if(l!=null)if(m=="g")l=Math.max(1,Math.min(21,l));else if(m=="e"||m=="f")l=Math.max(0,Math.min(20,l));var m=Gi.get(m)||ch,o=j&&n;return function(a){var e=s;if(r&&
a%1)return"";var h=a<0||a===0&&1/a<0?(a=-a,"-"):g==="-"?"":g;if(v<0){e=i.formatPrefix(a,l);a=e.scale(a);e=e.symbol+s}else a=a*v;var a=m(a,l),w=a.lastIndexOf("."),z;if(w<0){w=q?a.lastIndexOf("e"):-1;if(w<0){z=a;a=""}else{z=a.substring(0,w);a=a.substring(w)}}else{z=a.substring(0,w);a=b+a.substring(w+1)}!j&&n&&(z=f(z,Infinity));var w=p.length+z.length+a.length+(o?0:h.length),y=w<k?Array(w=k-w+1).join(c):"";o&&(z=f(y+z,y.length?k-a.length:Infinity));h=h+p;a=z+a;return(d==="<"?h+a+y:d===">"?y+h+a:d===
"^"?y.substring(0,w=w>>1)+h+a+y.substring(w):h+(o?a:y+a))+e}},timeFormat:g}};var wg=i.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
i.format=wg.numberFormat;i.geo={};bd.prototype={s:0,t:0,add:function(a){He(a,this.t,uc);He(uc.s,this.s,this);this.s?this.t=this.t+uc.t:this.s=uc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uc=new bd;i.geo.stream=function(a,b){if(a&&xg.hasOwnProperty(a.type))xg[a.type](a,b);else Tb(a,b)};var xg={Feature:function(a,b){Tb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Tb(c[d].geometry,b)}},Ie={Sphere:function(a,b){b.sphere()},
Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;){a=c[d];b.point(a[0],a[1],a[2])}},LineString:function(a,b){cd(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)cd(c[d],b,0)},Polygon:function(a,b){Je(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Je(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<
e;)Tb(c[d],b)}};i.geo.area=function(a){lb=0;i.geo.stream(a,W);return lb};var lb,Na=new bd,W={sphere:function(){lb=lb+4*A},point:L,lineStart:L,lineEnd:L,polygonStart:function(){Na.reset();W.lineStart=rh},polygonEnd:function(){var a=2*Na;lb=lb+(a<0?4*A+a:a);W.lineStart=W.lineEnd=W.point=L}},vc=function(a,b){Wa.push(Ja=[N=a,O=a]);b<ja&&(ja=b);b>oa&&(oa=b)},yg=function(a,b){var c=Oa([a*x,b*x]);if(mb){var d=ab(mb,c),d=ab([d[1],-d[0],0],d);Wb(d);var d=Xb(d),e=a-Xa,f=e>0?1:-1,g=d[0]*H*f,e=B(e)>180;if(e^
(f*Xa<g&&g<f*a)){d=d[1]*H;d>oa&&(oa=d)}else if(g=(g+360)%360-180,e^(f*Xa<g&&g<f*a)){d=-d[1]*H;d<ja&&(ja=d)}else{b<ja&&(ja=b);b>oa&&(oa=b)}if(e)a<Xa?$(N,a)>$(N,O)&&(O=a):$(a,O)>$(N,O)&&(N=a);else if(O>=N){a<N&&(N=a);a>O&&(O=a)}else a>Xa?$(N,a)>$(N,O)&&(O=a):$(a,O)>$(N,O)&&(N=a)}else vc(a,b);mb=c;Xa=a},zg=function(){za.point=yg},Ag=function(){Ja[0]=N;Ja[1]=O;za.point=vc;mb=null},Dg=function(a,b){if(mb){var c=a-Xa;nb=nb+(B(c)>180?c+(c>0?360:-360):c)}else{Bg=a;Cg=b}W.point(a,b);yg(a,b)},Hi=function(){W.lineStart()},
Ii=function(){Dg(Bg,Cg);W.lineEnd();B(nb)>t&&(N=-(O=180));Ja[0]=N;Ja[1]=O;mb=null},$=function(a,b){return(b=b-a)<0?b+360:b},Ji=function(a,b){return a[0]-b[0]},Eg=function(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a},N,ja,O,oa,Xa,Bg,Cg,mb,nb,Wa,Ja,za={point:vc,lineStart:zg,lineEnd:Ag,polygonStart:function(){za.point=Dg;za.lineStart=Hi;za.lineEnd=Ii;nb=0;W.polygonStart()},polygonEnd:function(){W.polygonEnd();za.point=vc;za.lineStart=zg;za.lineEnd=Ag;if(Na<0){N=-(O=180);ja=-(oa=90)}else nb>
t?oa=90:nb<-t&&(ja=-90);Ja[0]=N;Ja[1]=O}};i.geo.bounds=function(a){oa=O=-(N=ja=Infinity);Wa=[];i.geo.stream(a,za);if(a=Wa.length){Wa.sort(Ji);for(var b=1,c=Wa[0],d,e=[c];b<a;++b){d=Wa[b];if(Eg(d[0],c)||Eg(d[1],c)){$(c[0],d[1])>$(c[0],c[1])&&(c[1]=d[1]);$(d[0],c[1])>$(c[0],c[1])&&(c[0]=d[0])}else e.push(c=d)}for(var f=-Infinity,g,a=e.length-1,b=0,c=e[a];b<=a;c=d,++b){d=e[b];if((g=$(c[1],d[0]))>f){f=g;N=d[0];O=c[1]}}}Wa=Ja=null;return N===Infinity||ja===Infinity?[[NaN,NaN],[NaN,NaN]]:[[N,ja],[O,oa]]};
i.geo.centroid=function(a){tb=bb=va=wa=la=aa=ba=V=Da=Ea=ma=0;i.geo.stream(a,ga);var a=Da,b=Ea,c=ma,d=a*a+b*b+c*c;if(d<qd){a=aa;b=ba;c=V;if(bb<t){a=va;b=wa;c=la}d=a*a+b*b+c*c;if(d<qd)return[NaN,NaN]}return[Math.atan2(b,a)*H,Za(c/Math.sqrt(d))*H]};var tb,bb,va,wa,la,aa,ba,V,Da,Ea,ma,ga={sphere:L,point:ed,lineStart:Ke,lineEnd:Le,polygonStart:function(){ga.lineStart=sh},polygonEnd:function(){ga.lineStart=Ke}},df=Oe(cb,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},
point:function(f,g){var h=f>0?A:-A,j=B(f-b);if(B(j-A)<t){a.point(b,c=(c+g)/2>0?Q:-Q);a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);a.point(f,c);e=0}else if(d!==h&&j>=A){B(b-d)<t&&(b=b-d*t);B(f-h)<t&&(f=f-h*t);var j=b,k=c,i=f,l,m,o=Math.sin(j-i);c=B(o)>t?Math.atan((Math.sin(k)*(m=Math.cos(g))*Math.sin(i)-Math.sin(g)*(l=Math.cos(k))*Math.sin(j))/(l*m*o)):(k+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);e=0}a.point(b=f,c=g);d=h},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-
e}}},function(a,b,c,d){if(a==null){c=c*Q;d.point(-A,c);d.point(0,c);d.point(A,c);d.point(A,0);d.point(A,-c);d.point(0,-c);d.point(-A,-c);d.point(-A,0);d.point(-A,c)}else if(B(a[0]-b[0])>t){a=a[0]<b[0]?A:-A;c=c*a/2;d.point(-a,c);d.point(0,c);d.point(a,c)}else d.point(b[0],b[1])},[-A,-A/2]),ac=1E9;i.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){if(e)e.valid=false;e=f(a);e.valid=true;return e},extent:function(h){if(!arguments.length)return[[a,b],[c,d]];f=Ve(a=+h[0][0],b=+h[0][1],c=
+h[1][0],d=+h[1][1]);if(e){e.valid=false;e=null}return g}};return g.extent([[0,0],[960,500]])};(i.geo.conicEqualArea=function(){return hd(Xe)}).raw=Xe;i.geo.albers=function(){return i.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};i.geo.albersUsa=function(){function a(a){var b=a[0],a=a[1];e=null;(g(b,a),e)||(h(b,a),e)||j(b,a);return e}var b=i.geo.albers(),c=i.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=i.geo.conicEqualArea().rotate([157,
0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},g,h,j;a.invert=function(a){var e=b.scale(),f=b.translate(),g=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(e>=0.12&&e<0.234&&g>=-0.425&&g<-0.214?c:e>=0.166&&e<0.234&&g>=-0.214&&g<-0.115?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b);f.point(a,b);g.point(a,b)},sphere:function(){e.sphere();f.sphere();g.sphere()},lineStart:function(){e.lineStart();f.lineStart();
g.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();g.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();g.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();g.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(e*0.35);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();
var i=b.scale(),l=+e[0],m=+e[1];g=b.translate(e).clipExtent([[l-0.455*i,m-0.238*i],[l+0.455*i,m+0.238*i]]).stream(f).point;h=c.translate([l-0.307*i,m+0.201*i]).clipExtent([[l-0.425*i+t,m+0.12*i+t],[l-0.214*i-t,m+0.234*i-t]]).stream(f).point;j=d.translate([l-0.205*i,m+0.212*i]).clipExtent([[l-0.214*i+t,m+0.166*i+t],[l-0.115*i-t,m+0.234*i-t]]).stream(f).point;return a};return a.scale(1070)};var wc,bc,Fa={point:L,lineStart:L,lineEnd:L,polygonStart:function(){bc=0;Fa.lineStart=vh},polygonEnd:function(){Fa.lineStart=
Fa.lineEnd=Fa.point=L;wc=wc+B(bc/2)}},xc,yc,zc,Ac,Ki={point:function(a,b){a<xc&&(xc=a);a>zc&&(zc=a);b<yc&&(yc=b);b>Ac&&(Ac=b)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L},ha={point:Qa,lineStart:Ze,lineEnd:$e,polygonStart:function(){ha.lineStart=xh},polygonEnd:function(){ha.point=Qa;ha.lineStart=Ze;ha.lineEnd=$e}};i.geo.path=function(){function a(a){if(a){typeof c==="function"&&g.pointRadius(+c.apply(this,arguments));if(!h||!h.valid)h=f(g);i.geo.stream(a,h)}return g.result()}function b(){h=
null;return a}var c=4.5,d,e,f,g,h;a.area=function(a){wc=0;i.geo.stream(a,f(Fa));return wc};a.centroid=function(a){va=wa=la=aa=ba=V=Da=Ea=ma=0;i.geo.stream(a,f(ha));return ma?[Da/ma,Ea/ma]:V?[aa/V,ba/V]:la?[va/la,wa/la]:[NaN,NaN]};a.bounds=function(a){zc=Ac=-(xc=yc=Infinity);i.geo.stream(a,f(Ki));return[[xc,yc],[zc,Ac]]};a.projection=function(a){if(!arguments.length)return d;var c;if(d=a){if(!(c=a.stream)){var e=af(function(b,c){return a([b*H,c*H])});c=function(a){return ef(e(a))}}}else c=P;f=c;return b()};
a.context=function(a){if(!arguments.length)return e;g=(e=a)==null?new wh:new yh(a);typeof c!=="function"&&g.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;c=typeof b==="function"?b:(g.pointRadius(+b),+b);return a};return a.projection(i.geo.albersUsa()).context(null)};i.geo.transform=function(a){return{stream:function(b){var b=new cf(b),c;for(c in a)b[c]=a[c];return b}}};cf.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},
lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};i.geo.projection=Ga;i.geo.projectionMutator=id;(i.geo.equirectangular=function(){return Ga(ub)}).raw=ub.invert=ub;i.geo.rotation=function(a){function b(b){b=a(b[0]*x,b[1]*x);return b[0]=b[0]*H,b[1]=b[1]*H,b}a=jd(a[0]%360*x,a[1]*x,a.length>2?a[2]*x:0);b.invert=function(b){b=a.invert(b[0]*x,b[1]*x);return b[0]=b[0]*
H,b[1]=b[1]*H,b};return b};ff.invert=ub;i.geo.circle=function(){function a(){var a=typeof b==="function"?b.apply(this,arguments):b,c=jd(-a[0]*x,-a[1]*x,0).invert,d=[];e(null,null,1,{point:function(a,b){d.push(a=c(a,b));a[0]=a[0]*H;a[1]=a[1]*H}});return{type:"Polygon",coordinates:[d]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=kd((c=+b)*x,d*x);return a};a.precision=function(b){if(!arguments.length)return d;
e=kd(c*x,(d=+b)*x);return a};return a.angle(90)};i.geo.distance=function(a,b){var c=(b[0]-a[0])*x,d=a[1]*x,e=b[1]*x,f=Math.sin(c),c=Math.cos(c),g=Math.sin(d),d=Math.cos(d),h=Math.sin(e),e=Math.cos(e),j;return Math.atan2(Math.sqrt((j=e*f)*j+(j=d*h-g*e*c)*j),g*h+d*e*c)};i.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return i.range(Math.ceil(f/m)*m,e,m).map(p).concat(i.range(Math.ceil(k/o)*o,j,o).map(r)).concat(i.range(Math.ceil(d/n)*n,c,n).filter(function(a){return B(a%
m)>t}).map(q)).concat(i.range(Math.ceil(h/l)*l,g,l).filter(function(a){return B(a%o)>t}).map(s))}var c,d,e,f,g,h,j,k,n=10,l=n,m=90,o=360,q,s,p,r,w=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[p(f).concat(r(j).slice(1),p(e).reverse().slice(1),r(k).reverse().slice(1))]}};a.extent=function(b){return!arguments.length?a.minorExtent():a.majorExtent(b).minorExtent(b)};a.majorExtent=function(b){if(!arguments.length)return[[f,
k],[e,j]];f=+b[0][0];e=+b[1][0];k=+b[0][1];j=+b[1][1];if(f>e){b=f;f=e;e=b}if(k>j){b=k;k=j;j=b}return a.precision(w)};a.minorExtent=function(b){if(!arguments.length)return[[d,h],[c,g]];d=+b[0][0];c=+b[1][0];h=+b[0][1];g=+b[1][1];if(d>c){b=d;d=c;c=b}if(h>g){b=h;h=g;g=b}return a.precision(w)};a.step=function(b){return!arguments.length?a.minorStep():a.majorStep(b).minorStep(b)};a.majorStep=function(b){if(!arguments.length)return[m,o];m=+b[0];o=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[n,
l];n=+b[0];l=+b[1];return a};a.precision=function(b){if(!arguments.length)return w;w=+b;q=lf(h,g,90);s=mf(d,c,w);p=lf(k,j,90);r=mf(f,e,w);return a};return a.majorExtent([[-180,-90+t],[180,90-t]]).minorExtent([[-180,-80-t],[180,80+t]])};i.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=ld,c,d=md,e;a.distance=function(){return i.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;
b=d;c=typeof d==="function"?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e=typeof b==="function"?null:b;return a};a.precision=function(){return arguments.length?a:0};return a};i.geo.interpolate=function(a,b){var c=a[0]*x,d=a[1]*x,e=b[0]*x,f=b[1]*x,g=Math.cos(d),h=Math.sin(d),j=Math.cos(f),i=Math.sin(f),n=g*Math.cos(c),l=g*Math.sin(c),m=j*Math.cos(e),o=j*Math.sin(e),q=2*Math.asin(Math.sqrt(se(f-d)+g*j*se(e-c))),s=1/Math.sin(q),e=q?function(a){var b=Math.sin(a=a*q)*s,c=Math.sin(q-
a)*s,a=c*n+b*m,d=c*l+b*o,b=c*h+b*i;return[Math.atan2(d,a)*H,Math.atan2(b,Math.sqrt(a*a+d*d))*H]}:function(){return[c*H,d*H]};e.distance=q;return e};i.geo.length=function(a){Bc=0;i.geo.stream(a,ob);return Bc};var Bc,ob={sphere:L,point:L,lineStart:function(){function a(a,f){var g=Math.sin(f=f*x),h=Math.cos(f),j=B((a=a*x)-b),i=Math.cos(j);Bc=Bc+Math.atan2(Math.sqrt((j=h*Math.sin(j))*j+(j=d*g-c*h*i)*j),c*g+d*h*i);b=a;c=g;d=h}var b,c,d;ob.point=function(e,f){b=e*x;c=Math.sin(f=f*x);d=Math.cos(f);ob.point=
a};ob.lineEnd=function(){ob.point=ob.lineEnd=L}},lineEnd:L,polygonStart:L,polygonEnd:L},Fg=vb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(i.geo.azimuthalEqualArea=function(){return Ga(Fg)}).raw=Fg;var Gg=vb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},P);(i.geo.azimuthalEquidistant=function(){return Ga(Gg)}).raw=Gg;(i.geo.conicConformal=function(){return hd(nf)}).raw=nf;(i.geo.conicEquidistant=function(){return hd(of)}).raw=of;var Hg=vb(function(a){return 1/
a},Math.atan);(i.geo.gnomonic=function(){return Ga(Hg)}).raw=Hg;cc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Q]};(i.geo.mercator=function(){return pf(cc)}).raw=cc;var Ig=vb(function(){return 1},Math.asin);(i.geo.orthographic=function(){return Ga(Ig)}).raw=Ig;var Jg=vb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(i.geo.stereographic=function(){return Ga(Jg)}).raw=Jg;nd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Q]};(i.geo.transverseMercator=function(){var a=
pf(nd),b=a.center,c=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90])}).raw=nd;i.geom={};i.geom.hull=function(a){function b(a){if(a.length<3)return[];var b=G(c),g=G(d),h,j=a.length,i=[],n=[];for(h=0;h<j;h++)i.push([+b.call(this,a[h],h),+g.call(this,a[h],h),h]);i.sort(zh);for(h=0;h<j;h++)n.push([i[h][0],-i[h][1]]);var b=qf(i),n=qf(n),g=n[0]===b[0],j=n[n.length-
1]===b[b.length-1],l=[];for(h=b.length-1;h>=0;--h)l.push(a[i[b[h]][2]]);for(h=+g;h<n.length-j;++h)l.push(a[i[n[h]][2]]);return l}var c=fb,d=wb;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};i.geom.polygon=function(a){Gb(a,Cc);return a};var Cc=i.geom.polygon.prototype=[];Cc.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;){c=d;d=this[a];e=e+(c[1]*d[0]-c[0]*d[1])}return e*0.5};Cc.centroid=
function(a){var b=-1,c=this.length,d=0,e=0,f,g=this[c-1],h;for(arguments.length||(a=-1/(6*this.area()));++b<c;){f=g;g=this[b];h=f[0]*g[1]-g[0]*f[1];d=d+(f[0]+g[0])*h;e=e+(f[1]+g[1])*h}return[d*a,e*a]};Cc.clip=function(a){for(var b,c=sf(a),d=-1,e=this.length-sf(this),f,g,h=this[e-1],j,i,n;++d<e;){b=a.slice();a.length=0;j=this[d];i=b[(g=b.length-c)-1];for(f=-1;++f<g;){n=b[f];if(od(n,h,j)){od(i,h,j)||a.push(rf(i,n,h,j));a.push(n)}else od(i,h,j)&&a.push(rf(i,n,h,j));i=n}c&&a.push(a[0]);h=j}return a};
var jb,Ra,hb,uf=[],rd,xb,yf=[];wf.prototype.prepare=function(){for(var a=this.edges,b=a.length,c;b--;){c=a[b].edge;(!c.b||!c.a)&&a.splice(b,1)}a.sort(xf);return a.length};fc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else if(this._){a=Af(this._);b.P=null;b.N=
a;a.P=a.L=b;c=a}else{b.P=b.N=null;this._=b;c=null}b.L=b.R=null;b.U=c;b.C=true;for(a=b;c&&c.C;){d=c.U;if(c===d.L)if((e=d.R)&&e.C){c.C=e.C=false;d.C=true;a=d}else{if(a===c.R){zb(this,c);a=c;c=a.U}c.C=false;d.C=true;Ab(this,d)}else if((e=d.L)&&e.C){c.C=e.C=false;d.C=true;a=d}else{if(a===c.L){Ab(this,c);a=c;c=a.U}c.C=false;d.C=true;zb(this,d)}c=a.U}this._.C=false},remove:function(a){if(a.N)a.N.P=a.P;if(a.P)a.P.N=a.N;a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,f;e=c?d?Af(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;
if(c&&d){f=e.C;e.C=a.C;e.L=c;c.U=e;if(e!==d){b=e.U;e.U=a.U;a=e.R;b.L=a;e.R=d;d.U=e}else{e.U=b;b=e;a=e.R}}else{f=a.C;a=e}if(a)a.U=b;if(!f)if(a&&a.C)a.C=false;else{do{if(a===this._)break;if(a===b.L){a=b.R;if(a.C){a.C=false;b.C=true;zb(this,b);a=b.R}if(a.L&&a.L.C||a.R&&a.R.C){if(!a.R||!a.R.C){a.L.C=false;a.C=true;Ab(this,a);a=b.R}a.C=b.C;b.C=a.R.C=false;zb(this,b);a=this._;break}}else{a=b.L;if(a.C){a.C=false;b.C=true;Ab(this,b);a=b.L}if(a.L&&a.L.C||a.R&&a.R.C){if(!a.L||!a.L.C){a.R.C=false;a.C=true;zb(this,
a);a=b.L}a.C=b.C;b.C=a.L.C=false;Ab(this,b);a=this._;break}}a.C=true;a=b;b=b.U}while(!a.C);if(a)a.C=false}}};i.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];td(c(a),h).cells.forEach(function(c,h){var i=c.edges,r=c.site;(b[h]=i.length?i.map(function(a){a=a.start();return[a.x,a.y]}):r.x>=d&&r.x<=f&&r.y>=e&&r.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[]).point=a[h]});return b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/t)*t,y:Math.round(g(a,
b)/t)*t,i:b}})}var d=fb,e=wb,f=d,g=e,h=Dc;if(a)return b(a);b.links=function(a){return td(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};b.triangles=function(a){var b=[];td(c(a)).cells.forEach(function(c,d){for(var e=c.site,f=c.edges.sort(xf),g=-1,h=f.length,i,r=f[h-1].edge,r=r.l===e?r.r:r.l;++g<h;){i=r;r=f[g].edge;r=r.l===e?r.r:r.l;d<i.i&&(d<r.i&&(e.x-r.x)*(i.y-e.y)-(e.x-i.x)*(r.y-e.y)<0)&&b.push([a[d],a[i.i],a[r.i]])}});return b};b.x=function(a){return arguments.length?
(f=G(d=a),b):d};b.y=function(a){return arguments.length?(g=G(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return h===Dc?null:h;h=a==null?Dc:a;return b};b.size=function(a){return!arguments.length?h===Dc?null:h&&h[1]:b.clipExtent(a&&[[0,0],a])};return b};var Dc=[[-1E6,-1E6],[1E6,1E6]];i.geom.delaunay=function(a){return i.geom.voronoi().triangles(a)};i.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,g,h,j){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var k=a.x,m=a.y;if(k!=null){if(!(B(k-
c)+B(m-d)<0.01)){var n=a.point;a.x=a.y=a.point=null;i(a,n,k,m,e,g,h,j)}i(a,b,c,d,e,g,h,j)}else{a.x=c;a.y=d;a.point=b}}else i(a,b,c,d,e,g,h,j)}function i(a,b,c,d,e,g,h,j){var k=(e+h)*0.5,l=(g+j)*0.5,m=c>=k,p=d>=l,v=(p<<1)+m;a.leaf=false;a=a.nodes[v]||(a.nodes[v]=Bf());m?e=k:h=k;p?g=l:j=l;f(a,b,c,d,e,g,h,j)}var m,o=G(g),q=G(h),s,p,r,w,v,z,y,D;if(b!=null){v=b;z=c;y=d;D=e}else{y=D=-(v=z=Infinity);s=[];p=[];w=a.length;if(j)for(r=0;r<w;++r){m=a[r];if(m.x<v)v=m.x;if(m.y<z)z=m.y;if(m.x>y)y=m.x;if(m.y>D)D=
m.y;s.push(m.x);p.push(m.y)}else for(r=0;r<w;++r){var u=+o(m=a[r],r);m=+q(m,r);u<v&&(v=u);m<z&&(z=m);u>y&&(y=u);m>D&&(D=m);s.push(u);p.push(m)}}u=y-v;m=D-z;u>m?D=z+u:y=v+m;var t=Bf();t.add=function(a){f(t,a,+o(a,++r),+q(a,r),v,z,y,D)};t.visit=function(a){Bb(a,t,v,z,y,D)};r=-1;if(b==null){for(;++r<w;)f(t,a[r],s[r],p[r],v,z,y,D);--r}else a.forEach(t.add);s=p=a=m=null;return t}var g=fb,h=wb,j;if(j=arguments.length){g=Fh;h=Gh;if(j===3){e=c;d=b;c=b=0}return f(a)}f.x=function(a){return arguments.length?
(g=a,f):g};f.y=function(a){return arguments.length?(h=a,f):h};f.extent=function(a){if(!arguments.length)return b==null?null:[[b,c],[d,e]];if(a==null)b=c=d=e=null;else{b=+a[0][0];c=+a[0][1];d=+a[1][0];e=+a[1][1]}return f};f.size=function(a){if(!arguments.length)return b==null?null:[d-b,e-c];if(a==null)b=c=d=e=null;else{b=c=0;d=+a[0];e=+a[1]}return f};return f};i.interpolateRgb=ud;i.interpolateObject=Cf;i.interpolateNumber=xa;i.interpolateString=Df;var vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
wd=RegExp(vd.source,"g");i.interpolate=Sa;i.interpolators=[function(a,b){var c=typeof b;return(c==="string"?Kb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?ud:Df:b instanceof La?ud:Array.isArray(b)?gc:c==="object"&&isNaN(b)?Cf:xa)(a,b)}];i.interpolateArray=gc;var Kg=function(){return P},Li=i.map({linear:Kg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Hh},cubic:function(){return Ih},sin:function(){return Kh},exp:function(){return Lh},circle:function(){return Mh},elastic:function(a,
b){var c;arguments.length<2&&(b=0.45);if(arguments.length)c=b/Y*Math.asin(1/a);else{a=1;c=b/4}return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Y/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Nh}}),Mi=i.map({"in":P,out:Ef,"in-out":Ff,"out-in":function(a){return Ff(Ef(a))}});i.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,b=b>=0?a.slice(b+1):"in",c=Li.get(c)||Kg,b=Mi.get(b)||P,d=b(c.apply(null,pg.call(arguments,
1)));return function(a){return a<=0?0:a>=1?1:d(a)}};i.interpolateHcl=function(a,b){var a=i.hcl(a),b=i.hcl(b),c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;if(isNaN(g)){g=0;d=isNaN(d)?b.c:d}if(isNaN(f)){f=0;c=isNaN(c)?b.h:c}else f>180?f=f-360:f<-180&&(f=f+360);return function(a){return Tc(c+f*a,d+g*a,e+h*a)+""}};i.interpolateHsl=function(a,b){var a=i.hsl(a),b=i.hsl(b),c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;if(isNaN(g)){g=0;d=isNaN(d)?b.s:d}if(isNaN(f)){f=0;c=isNaN(c)?b.h:c}else f>180?f=f-360:f<-180&&
(f=f+360);return function(a){return Sc(c+f*a,d+g*a,e+h*a)+""}};i.interpolateLab=function(a,b){var a=i.lab(a),b=i.lab(b),c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return xe(c+f*a,d+g*a,e+h*a)+""}};i.interpolateRound=Gf;i.transform=function(a){var b=ia.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(a){if(a!=null){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new Hf(d?d.matrix:Ni)})(a)};Hf.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ni={a:1,b:0,c:0,d:1,e:0,f:0};i.interpolateTransform=Jf;i.layout={};i.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Qh(a[c]));return b}};i.layout.chord=function(){function a(){var a={},c=[],o=i.range(g),q=[],s,p,r,w,v;d=[];e=[];s=0;for(w=-1;++w<g;){p=0;for(v=-1;++v<g;)p=p+f[w][v];c.push(p);q.push(i.range(g));s=s+p}j&&o.sort(function(a,b){return j(c[a],c[b])});k&&q.forEach(function(a,
b){a.sort(function(a,c){return k(f[b][a],f[b][c])})});s=(Y-h*g)/s;p=0;for(w=-1;++w<g;){r=p;for(v=-1;++v<g;){var z=o[w],y=q[z][v],D=f[z][y],u=p,t=p=p+D*s;a[z+"-"+y]={index:z,subindex:y,startAngle:u,endAngle:t,value:D}}e[z]={index:z,startAngle:r,endAngle:p,value:(p-r)/s};p=p+h}for(w=-1;++w<g;)for(v=w-1;++v<g;){o=a[w+"-"+v];q=a[v+"-"+w];if(o.value||q.value)d.push(o.value<q.value?{source:q,target:o}:{source:o,target:q})}n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/
2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,g,h=0,j,k,n;c.matrix=function(a){if(!arguments.length)return f;g=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return j;j=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return k;k=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return n;n=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=
function(){e||a();return e};return c};i.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var d=b.cx-a.x,f=b.cy-a.y,c=e-c,e=d*d+f*f;if(c*c/o<e){if(e<l){c=b.charge/e;a.px=a.px-d*c;a.py=a.py-f*c}return true}if(b.point&&e&&e<l){c=b.pointCharge/e;a.px=a.px-d*c;a.py=a.py-f*c}}return!b.charge}}function b(a){a.px=i.event.x;a.py=i.event.y;c.resume()}var c={},d=i.dispatch("start","tick","end"),e=[1,1],f,g,h=0.9,j=Oi,k=Pi,n=-30,l=Qi,m=0.1,o=0.64,q=[],s=[],p,r,w;c.tick=function(){if((g=
g*0.99)<0.005){d.end({type:"end",alpha:g=0});return true}var b=q.length,c=s.length,f,j,k,l,o,u,t;for(f=0;f<c;++f){j=s[f];k=j.source;l=j.target;u=l.x-k.x;t=l.y-k.y;if(o=u*u+t*t){o=g*r[f]*((o=Math.sqrt(o))-p[f])/o;u=u*o;t=t*o;l.x=l.x-u*(o=k.weight/(l.weight+k.weight));l.y=l.y-t*o;k.x=k.x+u*(o=1-o);k.y=k.y+t*o}}if(o=g*m){u=e[0]/2;t=e[1]/2;f=-1;if(o)for(;++f<b;){j=q[f];j.x=j.x+(u-j.x)*o;j.y=j.y+(t-j.y)*o}}if(n){Lf(c=i.geom.quadtree(q),g,w);for(f=-1;++f<b;)(j=q[f]).fixed||c.visit(a(j))}for(f=-1;++f<b;){j=
q[f];if(j.fixed){j.x=j.px;j.y=j.py}else{j.x=j.x-(j.px-(j.px=j.x))*h;j.y=j.y-(j.py-(j.py=j.y))*h}}d.tick({type:"tick",alpha:g})};c.nodes=function(a){if(!arguments.length)return q;q=a;return c};c.links=function(a){if(!arguments.length)return s;s=a;return c};c.size=function(a){if(!arguments.length)return e;e=a;return c};c.linkDistance=function(a){if(!arguments.length)return j;j=typeof a==="function"?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return k;k=typeof a===
"function"?a:+a;return c};c.friction=function(a){if(!arguments.length)return h;h=+a;return c};c.charge=function(a){if(!arguments.length)return n;n=typeof a==="function"?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(l);l=a*a;return c};c.gravity=function(a){if(!arguments.length)return m;m=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(o);o=a*a;return c};c.alpha=function(a){if(!arguments.length)return g;a=+a;if(g)g=a>0?a:0;else if(a>0){d.start({type:"start",
alpha:g=a});i.timer(c.tick)}return c};c.start=function(){function a(c,e){if(!i){i=Array(d);for(g=0;g<d;++g)i[g]=[];for(g=0;g<h;++g){var f=s[g];i[f.source.index].push(f.target);i[f.target.index].push(f.source)}}for(var f=i[b],g=-1,h=f.length,j;++g<h;)if(!isNaN(j=f[g][c]))return j;return Math.random()*e}var b,d=q.length,f=s.length,g=e[0],h=e[1],i,l;for(b=0;b<d;++b){(l=q[b]).index=b;l.weight=0}for(b=0;b<f;++b){l=s[b];if(typeof l.source=="number")l.source=q[l.source];if(typeof l.target=="number")l.target=
q[l.target];++l.source.weight;++l.target.weight}for(b=0;b<d;++b){l=q[b];if(isNaN(l.x))l.x=a("x",g);if(isNaN(l.y))l.y=a("y",h);if(isNaN(l.px))l.px=l.x;if(isNaN(l.py))l.py=l.y}p=[];if(typeof j==="function")for(b=0;b<f;++b)p[b]=+j.call(this,s[b],b);else for(b=0;b<f;++b)p[b]=j;r=[];if(typeof k==="function")for(b=0;b<f;++b)r[b]=+k.call(this,s[b],b);else for(b=0;b<f;++b)r[b]=k;w=[];if(typeof n==="function")for(b=0;b<d;++b)w[b]=+n.call(this,q[b],b);else for(b=0;b<d;++b)w[b]=n;return c.resume()};c.resume=
function(){return c.alpha(0.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||(f=i.behavior.drag().origin(P).on("dragstart.force",Rh).on("drag.force",b).on("dragend.force",Sh));if(!arguments.length)return f;this.on("mouseover.force",Th).on("mouseout.force",Uh).call(f)};return i.rebind(c,d,"on")};var Oi=20,Pi=1,Qi=Infinity;i.layout.hierarchy=function(){function a(e){var f=[e],g=[],h;for(e.depth=0;(h=f.pop())!=null;){g.push(h);if((i=c.call(a,h,h.depth))&&(j=i.length)){for(var j,i,n;--j>=
0;){f.push(n=i[j]);n.parent=h;n.depth=h.depth+1}if(d)h.value=0;h.children=i}else{if(d)h.value=+d.call(a,h,h.depth)||0;delete h.children}}na(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b);if(d&&(e=a.parent))e.value=e.value+a.value});return g}var b=Yh,c=Wh,d=Xh;a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.children=function(b){if(!arguments.length)return c;c=b;return a};a.value=function(b){if(!arguments.length)return d;d=b;return a};a.revalue=function(b){if(d){Db(b,function(a){if(a.children)a.value=
0});na(b,function(b){var c;if(!b.children)b.value=+d.call(a,b,b.depth)||0;if(c=b.parent)c.value=c.value+b.value})}return b};return a};i.layout.partition=function(){function a(b,c,d,e){var i=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(i&&(l=i.length))for(var n=-1,l,m,d=b.value?d/b.value:0;++n<l;){a(m=i[n],c,b=m.value*d,e);c=c+b}}function b(a){var a=a.children,c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(c,g){var h=d.call(this,c,g);a(h[0],0,e[0],e[1]/
b(h[0]));return h}var d=i.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};return Cb(c,d)};i.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+(typeof d==="function"?d.apply(this,arguments):d),j=((typeof e==="function"?e.apply(this,arguments):e)-h)/i.sum(g),k=i.range(f.length);c!=null&&k.sort(c===Lg?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var n=[];k.forEach(function(a){var b;n[a]={data:f[a],
value:b=g[a],startAngle:h,endAngle:h=h+b*j}});return n}var b=Number,c=Lg,d=0,e=Y;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var Lg={};i.layout.stack=function(){function a(h,j){if(!(o=h.length))return h;var k=h.map(function(c,d){return b.call(a,c,d)}),n=k.map(function(b){return b.map(function(b,
c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,n,j),k=i.permute(k,l),n=i.permute(n,l),l=d.call(a,n,j),m=k[0].length,o,q,s,p;for(s=0;s<m;++s){e.call(a,k[0][s],p=l[s],n[0][s][1]);for(q=1;q<o;++q)e.call(a,k[q][s],p=p+n[q-1][s][1],n[q][s][1])}return h}var b=P,c=xd,d=yd,e=ai,f=Zh,g=$h;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c=typeof b==="function"?b:Ri.get(b)||xd;return a};a.offset=function(b){if(!arguments.length)return d;
d=typeof b==="function"?b:Si.get(b)||yd;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return g;g=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var Ri=i.map({"inside-out":function(a){for(var b=a.length,c,d=a.map(bi),e=a.map(ci),f=i.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,h=0,j=[],k=[],a=0;a<b;++a){c=f[a];if(g<h){g=g+e[c];j.push(c)}else{h=h+e[c];k.push(c)}}return k.reverse().concat(j)},reverse:function(a){return i.range(a.length).reverse()},
"default":xd}),Si=i.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,g,h,j=[];for(g=0;g<c;++g){for(h=f=0;f<b;f++)h=h+a[f][g][1];h>e&&(e=h);d.push(h)}for(g=0;g<c;++g)j[g]=(e-d[g])/2;return j},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,g,h,j,i,n,l,m,o=[];o[0]=l=m=0;for(f=1;f<d;++f){for(h=e=0;e<b;++e)h=h+a[e][f][1];j=e=0;for(n=c[f][0]-c[f-1][0];e<b;++e){g=0;for(i=(a[e][f][1]-a[e][f-1][1])/(2*n);g<e;++g)i=i+(a[g][f][1]-a[g][f-1][1])/n;j=j+i*a[e][f][1]}o[f]=l=l-(h?j/h*n:
0);l<m&&(m=l)}for(f=0;f<d;++f)o[f]=o[f]-m;return o},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,g,h=[];for(f=0;f<c;++f){for(g=e=0;e<b;e++)g=g+a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]=a[e][f][1]/g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)h[f]=0;return h},zero:yd});i.layout.histogram=function(){function a(a,g){for(var h=[],j=a.map(c,this),k=d.call(this,j,g),n=e.call(this,k,j,g),l,g=-1,m=j.length,o=n.length-1,q=b?1:1/m;++g<o;){l=h[g]=[];l.dx=n[g+1]-(l.x=n[g]);l.y=0}if(o>0)for(g=
-1;++g<m;){l=j[g];if(l>=k[0]&&l<=k[1]){l=h[i.bisect(n,l,1,o)-1];l.y=l.y+q;l.push(a[g])}}return h}var b=true,c=Number,d=fi,e=ei;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=G(b);return a};a.bins=function(b){if(!arguments.length)return e;e=typeof b==="number"?function(a){return Mf(a,b)}:G(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};i.layout.pack=function(){function a(a,g){var h=b.call(this,
a,g),j=h[0],i=d[0],n=d[1],l=e==null?Math.sqrt:typeof e==="function"?e:function(){return e};j.x=j.y=0;na(j,function(a){a.r=+l(a.value)});na(j,Of);if(c){var m=c*(e?1:Math.max(2*j.r/i,2*j.r/n))/2;na(j,function(a){a.r=a.r+m});na(j,Of);na(j,function(a){a.r=a.r-m})}Qf(j,i/2,n/2,e?1:1/Math.max(2*j.r/i,2*j.r/n));return h}var b=i.layout.hierarchy().sort(gi),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=b==null||typeof b===
"function"?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Cb(a,b)};i.layout.tree=function(){function a(a,i){var n=e.call(this,a,i),l=n[0],m;m={A:null,children:[l]};for(var o=[m],q;(q=o.pop())!=null;)for(var s=q.children,p,r=0,w=s.length;r<w;++r)o.push((s[r]=p={_:s[r],parent:q,children:(p=s[r].children)&&p.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:r}).a=p);m=m.children[0];na(m,b);m.parent.m=-m.z;Db(m,c);if(h)Db(l,d);else{var v=l,u=l,t=l;Db(l,function(a){a.x<
v.x&&(v=a);a.x>u.x&&(u=a);a.depth>t.depth&&(t=a)});var D=f(v,u)/2-v.x,F=g[0]/(u.x+f(u,v)/2+D),x=g[1]/(t.depth||1);Db(l,function(a){a.x=(a.x+D)*F;a.y=a.depth*x})}return n}function b(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){for(var e=0,g=0,h=a.children,i=h.length,p;--i>=0;){p=h[i];p.z=p.z+e;p.m=p.m+e;e=e+(p.s+(g=g+p.c))}b=(b[0].z+b[b.length-1].z)/2;if(d){a.z=d.z+f(a._,d._);a.m=a.z-b}else a.z=b}else if(d)a.z=d.z+f(a._,d._);b=a.parent;c=a.parent.A||c[0];if(d){g=e=a;h=e.parent.children[0];
i=e.m;p=g.m;for(var r=d.m,w=h.m,v;d=Bd(d),e=Ad(e),d&&e;){h=Ad(h);g=Bd(g);g.a=a;v=d.z+r-e.z-i+f(d._,e._);if(v>0){var u=d.a.parent===a.parent?d.a:c,t=a,D=v,F=D/(t.i-u.i);t.c=t.c-F;t.s=t.s+D;u.c=u.c+F;t.z=t.z+D;t.m=t.m+D;i=i+v;p=p+v}r=r+d.m;i=i+e.m;w=w+h.m;p=p+g.m}if(d&&!Bd(g)){g.t=d;g.m=g.m+(r-p)}if(e&&!Ad(h)){h.t=e;h.m=h.m+(i-w);c=a}}b.A=c}function c(a){a._.x=a.z+a.parent.m;a.m=a.m+a.parent.m}function d(a){a.x=a.x*g[0];a.y=a.depth*g[1]}var e=i.layout.hierarchy().sort(null).value(null),f=Rf,g=[1,1],
h=null;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return h?null:g;h=(g=b)==null?d:null;return a};a.nodeSize=function(b){if(!arguments.length)return h?g:null;h=(g=b)==null?null:d;return a};return Cb(a,e)};i.layout.cluster=function(){function a(a,g){var h=b.call(this,a,g),j=h[0],k,n=0;na(j,function(a){var b=a.children;if(b&&b.length){a.x=b.reduce(function(a,b){return a+b.x},0)/b.length;a.y=1+i.max(b,function(a){return a.y})}else{a.x=
k?n=n+c(a,k):0;a.y=0;k=a}});var l=Sf(j),m=Tf(j),o=l.x-c(l,m)/2,q=m.x+c(m,l)/2;na(j,e?function(a){a.x=(a.x-j.x)*d[0];a.y=(j.y-a.y)*d[1]}:function(a){a.x=(a.x-o)/(q-o)*d[0];a.y=(1-(j.y?a.y/j.y:1))*d[1]});return h}var b=i.layout.hierarchy().sort(null).value(null),c=Rf,d=[1,1],e=false;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=(d=b)==null;return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=(d=b)!=null;
return a};return Cb(a,b)};i.layout.treemap=function(){function a(a,b){for(var c=-1,d=a.length,e,f;++c<d;){f=(e=a[c]).value*(b<0?0:b);e.area=isNaN(f)||f<=0?0:f}}function b(c){var e=c.children;if(e&&e.length){var f=k(c),g=[],h=e.slice(),i=Infinity,j,l=m==="slice"?f.dx:m==="dice"?f.dy:m==="slice-dice"?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(h,f.dx*f.dy/c.value);for(g.area=0;(c=h.length)>0;){g.push(c=h[c-1]);g.area=g.area+c.area;if(!(c=m!=="squarify")){j=l;for(var c=g.area,n=void 0,u=0,t=Infinity,x=
-1,B=g.length;++x<B;)if(n=g[x].area){n<t&&(t=n);n>u&&(u=n)}c=c*c;j=j*j;c=(j=c?Math.max(j*u*o/c,c/(j*t*o)):Infinity)<=i}if(c){h.pop();i=j}else{g.area=g.area-g.pop().area;d(g,l,f,false);l=Math.min(f.dx,f.dy);g.length=g.area=0;i=Infinity}}if(g.length){d(g,l,f,true);g.length=g.area=0}e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=k(b),g=e.slice(),h=[];a(g,f.dx*f.dy/b.value);for(h.area=0;b=g.pop();){h.push(b);h.area=h.area+b.area;if(b.z!=null){d(h,b.z?f.dx:f.dy,f,!g.length);h.length=
h.area=0}}e.forEach(c)}}function d(a,b,c,d){var e=-1,f=a.length,h=c.x,j=c.y,i=b?g(a.area/b):0,k;if(b==c.dx){if(d||i>c.dy)i=c.dy;for(;++e<f;){k=a[e];k.x=h;k.y=j;k.dy=i;h=h+(k.dx=Math.min(c.x+c.dx-h,i?g(k.area/i):0))}k.z=true;k.dx=k.dx+(c.x+c.dx-h);c.y=c.y+i;c.dy=c.dy-i}else{if(d||i>c.dx)i=c.dx;for(;++e<f;){k=a[e];k.x=h;k.y=j;k.dx=i;j=j+(k.dy=Math.min(c.y+c.dy-j,i?g(k.area/i):0))}k.z=false;k.dy=k.dy+(c.y+c.dy-j);c.x=c.x+i;c.dx=c.dx-i}}function e(d){var d=l||f(d),e=d[0];e.x=0;e.y=0;e.dx=h[0];e.dy=h[1];
l&&f.revalue(e);a([e],e.dx*e.dy/e.value);(l?c:b)(e);n&&(l=d);return d}var f=i.layout.hierarchy(),g=Math.round,h=[1,1],j=null,k=Cd,n=false,l,m="squarify",o=0.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return h;h=a;return e};e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return d==null?Cd(c):Uf(c,typeof d==="number"?[d,d,d,d]:d)}function c(b){return Uf(b,a)}if(!arguments.length)return j;var d;k=(j=a)==null?Cd:(d=typeof a)==="function"?b:d==="number"?(a=[a,a,a,a],c):c;
return e};e.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return n;n=a;l=null;return e};e.ratio=function(a){if(!arguments.length)return o;o=a;return e};e.mode=function(a){if(!arguments.length)return m;m=a+"";return e};return Cb(e,f)};i.random={normal:function(a,b){var c=arguments.length;c<2&&(b=1);c<1&&(a=0);return function(){var c,e;do{c=Math.random()*2-1;e=Math.random()*2-1;e=c*c+e*e}while(!e||e>1);return a+b*c*
Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=i.random.normal.apply(i,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=i.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b=b+Math.random();return b}}};i.scale={};var ki={floor:P,ceil:P};i.scale.linear=function(){return Wf([0,1],[0,1],Sa,false)};var mi={s:1,g:1,p:1,r:1,e:1};i.scale.log=function(){return Yf(i.scale.linear().domain([0,1]),10,true,
[1,10])};var Zf=i.format(".0e"),ni={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};i.scale.pow=function(){return $f(i.scale.linear(),1,[0,1])};i.scale.sqrt=function(){return i.scale.pow().exponent(0.5)};i.scale.ordinal=function(){return ag([],{t:"range",a:[[]]})};i.scale.category10=function(){return i.scale.ordinal().range(Ti)};i.scale.category20=function(){return i.scale.ordinal().range(Ui)};i.scale.category20b=function(){return i.scale.ordinal().range(Vi)};i.scale.category20c=
function(){return i.scale.ordinal().range(Wi)};var Ti=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Jb),Ui=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Jb),Vi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,
14589654].map(Jb),Wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Jb);i.scale.quantile=function(){return bg([],[])};i.scale.quantize=function(){return cg(0,1,[0,1])};i.scale.threshold=function(){return dg([0.5],[0,1])};i.scale.identity=function(){return eg([0,1])};i.svg={};i.svg.arc=function(){function a(){var a=b.apply(this,arguments),g=c.apply(this,arguments),h=d.apply(this,
arguments)+Ta,i=e.apply(this,arguments)+Ta,k=(i<h&&(k=h,h=i,i=k),i-h),n=k<A?"0":"1",l=Math.cos(h),h=Math.sin(h),m=Math.cos(i),i=Math.sin(i);return k>=Xi?a?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":a?"M"+g*l+","+g*h+"A"+g+","+g+" 0 "+n+",1 "+g*m+","+g*i+"L"+a*m+","+a*i+"A"+a+","+a+" 0 "+n+",0 "+a*l+","+a*h+"Z":"M"+g*l+","+g*h+"A"+g+","+g+" 0 "+n+",1 "+
g*m+","+g*i+"L0,0Z"}var b=oi,c=pi,d=fg,e=gg;a.innerRadius=function(c){if(!arguments.length)return b;b=G(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=G(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=G(b);return a};a.endAngle=function(b){if(!arguments.length)return e;e=G(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,g=(d.apply(this,arguments)+e.apply(this,arguments))/2+Ta;return[Math.cos(g)*a,Math.sin(g)*
a]};return a};var Ta=-Q,Xi=Y-t;i.svg.line=function(){return hg(P)};var Fd=i.map({linear:Z,"linear-closed":function(a){return Z(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);c>1&&e.push("H",d[0]);return e.join("")},"step-before":Gd,"step-after":Hd,basis:ig,"basis-open":function(a){if(a.length<4)return Z(a);for(var b=[],c=-1,d=a.length,e,f=[0],g=[0];++c<3;){e=a[c];f.push(e[0]);g.push(e[1])}b.push(da(Ia,f)+","+da(Ia,g));for(--c;++c<
d;){e=a[c];f.shift();f.push(e[0]);g.shift();g.push(e[1]);Jd(b,f,g)}return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];++c<4;){f=a[c%d];g.push(f[0]);h.push(f[1])}b=[da(Ia,g),",",da(Ia,h)];for(--c;++c<e;){f=a[c%d];g.shift();g.push(f[0]);h.shift();h.push(f[1]);Jd(b,g,h)}return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,i,k;++h<=c;){i=a[h];k=h/c;i[0]=b*i[0]+(1-b)*(d+k*f);i[1]=b*i[1]+(1-b)*(e+k*
g)}return ig(a)},cardinal:function(a,b){return a.length<3?Z(a):a[0]+lc(a,Id(a,b))},"cardinal-open":function(a,b){return a.length<4?Z(a):a[1]+lc(a.slice(1,a.length-1),Id(a,b))},"cardinal-closed":function(a,b){return a.length<3?Z(a):a[0]+lc((a.push(a[0]),a),Id([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(a.length<3)a=Z(a);else{var b=a[0],c=[],d,e,f,g;d=0;e=a.length-1;var h=[];f=a[1];for(g=h[0]=Kd(a[0],f);++d<e;)h[d]=(g+(g=Kd(f,f=a[d+1])))/2;h[d]=g;for(var i=-1,k=a.length-1;++i<k;){d=
Kd(a[i],a[i+1]);if(B(d)<t)h[i]=h[i+1]=0;else{e=h[i]/d;f=h[i+1]/d;g=e*e+f*f;if(g>9){g=d*3/Math.sqrt(g);h[i]=g*e;h[i+1]=g*f}}}for(i=-1;++i<=k;){g=(a[Math.min(k,i+1)][0]-a[Math.max(0,i-1)][0])/(6*(1+h[i]*h[i]));c.push([g||0,h[i]*g||0])}a=b+lc(a,c)}return a}});Fd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var jg=[0,2/3,1/3,0],kg=[0,1/3,2/3,0],Ia=[0,1/6,2/3,1/6];i.svg.line.radial=function(){var a=hg(lg);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Gd.reverse=Hd;Hd.reverse=
Gd;i.svg.area=function(){return mg(P)};i.svg.area.radial=function(){var a=mg(lg);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};i.svg.chord=function(){function a(a,e){var f=b(this,c,a,e),g=b(this,d,a,e);return"M"+f.p0+("A"+f.r+","+f.r+" 0 "+ +(f.a1-f.a0>A)+",1 "+f.p1)+(f.a0==g.a0&&f.a1==g.a1?"Q 0,0 "+f.p0:"Q 0,0 "+g.p0+("A"+g.r+","+g.r+" 0 "+ +(g.a1-g.a0>A)+",1 "+g.p1)+
("Q 0,0 "+f.p0))+"Z"}function b(a,b,c,d){var i=b.call(a,c,d),b=e.call(a,i,d),c=f.call(a,i,d)+Ta,a=g.call(a,i,d)+Ta;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}var c=ld,d=md,e=qi,f=fg,g=gg;a.radius=function(b){if(!arguments.length)return e;e=G(b);return a};a.source=function(b){if(!arguments.length)return c;c=G(b);return a};a.target=function(b){if(!arguments.length)return d;d=G(b);return a};a.startAngle=function(b){if(!arguments.length)return f;f=G(b);return a};
a.endAngle=function(b){if(!arguments.length)return g;g=G(b);return a};return a};i.svg.diagonal=function(){function a(a,f){var g=b.call(this,a,f),h=c.call(this,a,f),i=(g.y+h.y)/2,g=[g,{x:g.x,y:i},{x:h.x,y:i},h],g=g.map(d);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=ld,c=md,d=ng;a.source=function(c){if(!arguments.length)return b;b=G(c);return a};a.target=function(b){if(!arguments.length)return c;c=G(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};i.svg.diagonal.radial=
function(){var a=i.svg.diagonal(),b=ng,c=a.projection;a.projection=function(a){var e;if(arguments.length){var f=b=a;e=c(function(){var a=f.apply(this,arguments),b=a[0],a=a[1]+Ta;return[b*Math.cos(a),b*Math.sin(a)]})}else e=b;return e};return a};i.svg.symbol=function(){function a(a,e){return(Mg.get(b.call(this,a,e))||og)(c.call(this,a,e))}var b=si,c=ri;a.type=function(c){if(!arguments.length)return b;b=G(c);return a};a.size=function(b){if(!arguments.length)return c;c=G(b);return a};return a};var Mg=
i.map({circle:og,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){var a=Math.sqrt(a/(2*Ng)),b=a*Ng;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){var a=Math.sqrt(a/Ec),b=a*Ec/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){var a=Math.sqrt(a/
Ec),b=a*Ec/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});i.svg.symbolTypes=Mg.keys();var Ec=Math.sqrt(3),Ng=Math.tan(30*x),M=[],tg=0,Va,pc;M.call=C.call;M.empty=C.empty;M.node=C.node;M.size=C.size;i.transition=function(a){return arguments.length?Va?a.transition():a:sg.transition()};i.transition.prototype=M;M.select=function(a){for(var b=this.id,c=[],d,e,f,a=Lc(a),g=-1,h=this.length;++g<h;){c.push(d=[]);for(var i=this[g],k=-1,n=i.length;++k<n;)if((f=i[k])&&(e=a.call(f,f.__data__,k,g))){if("__data__"in
f)e.__data__=f.__data__;mc(e,k,b,f.__transition__[b]);d.push(e)}else d.push(null)}return Eb(c,b)};M.selectAll=function(a){for(var b=this.id,c=[],d,e,f,g,a=ee(a),h=-1,i=this.length;++h<i;)for(var k=this[h],n=-1,l=k.length;++n<l;)if(d=k[n]){g=d.__transition__[b];e=a.call(d,d.__data__,n,h);c.push(d=[]);for(var m=-1,o=e.length;++m<o;){(f=e[m])&&mc(f,m,b,g);d.push(f)}}return Eb(c,b)};M.filter=function(a){var b=[],c,d,e;typeof a!=="function"&&(a=me(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);d=
this[f];for(var h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return Eb(b,this.id)};M.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):qa(this,b==null?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};M.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return a==null?c:(a=a+"",function(){var b=this.getAttribute(h),
c;return b!==a&&(c=g(b,a),function(a){this.setAttribute(h,c(a))})})}function f(a){return a==null?d:(a=a+"",function(){var b=this.getAttributeNS(h.space,h.local),c;return b!==a&&(c=g(b,a),function(a){this.setAttributeNS(h.space,h.local,c(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g=a=="transform"?Jf:Sa,h=i.ns.qualify(a);return Ld(this,"attr."+a,b,h.local?f:e)};M.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,
d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=i.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};M.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(e<3){if(typeof a!=="string"){e<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Ld(this,"style."+a,b,function(b){return b==null?d:(b=b+"",function(){var d=S.getComputedStyle(this,null).getPropertyValue(a),
e;return d!==b&&(e=Sa(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};M.styleTween=function(a,b,c){arguments.length<3&&(c="");return this.tween("style."+a,function(d,e){var f=b.call(this,d,e,S.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};M.text=function(a){return Ld(this,"text",a,ti)};M.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})};
M.ease=function(a){var b=this.id;if(arguments.length<1)return this.node().__transition__[b].ease;typeof a!=="function"&&(a=i.ease.apply(i,arguments));return qa(this,function(c){c.__transition__[b].ease=a})};M.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:qa(this,typeof a==="function"?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};M.duration=function(a){var b=this.id;return arguments.length<
1?this.node().__transition__[b].duration:qa(this,typeof a==="function"?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};M.each=function(a,b){var c=this.id;if(arguments.length<2){var d=pc,e=Va;Va=c;qa(this,function(b,d,e){pc=b.__transition__[c];a.call(b,b.__data__,d,e)});pc=d;Va=e}else qa(this,function(d){d=d.__transition__[c];(d.event||(d.event=i.dispatch("start","end"))).on(a,b)});return this};M.transition=
function(){for(var a=this.id,b=++tg,c=[],d,e,f,g,h=0,i=this.length;h<i;h++){c.push(d=[]);e=this[h];for(var k=0,n=e.length;k<n;k++){if(f=e[k]){g=Object.create(f.__transition__[a]);g.delay=g.delay+g.duration;mc(f,k,b,g)}d.push(f)}}return Eb(c,b)};i.svg.axis=function(){function a(a){a.each(function(){var a=i.select(this),k=this.__chart__||b,m=this.__chart__=b.copy(),o=h==null?m.ticks?m.ticks.apply(m,g):m.domain():h,q=j==null?m.tickFormat?m.tickFormat.apply(m,g):P:j,s=a.selectAll(".tick").data(o,m),o=
s.enter().insert("g",".domain").attr("class","tick").style("opacity",t),p=i.transition(s.exit()).style("opacity",t).remove(),r=i.transition(s.order()).style("opacity",1),w=Math.max(d,0)+f,v=hc(m),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),i.transition(a));o.append("line");o.append("text");var u=o.select("line"),y=r.select("line"),s=s.select("text").text(q),x=o.select("text"),B=r.select("text"),A=c==="top"||c==="left"?-1:1,I,C,J,E;if(c==="bottom"||c==="top"){q=
ui;I="x";J="y";C="x2";E="y2";s.attr("dy",A<0?"0em":".71em").style("text-anchor","middle");a.attr("d","M"+v[0]+","+A*e+"V0H"+v[1]+"V"+A*e)}else{q=vi;I="y";J="x";C="y2";E="x2";s.attr("dy",".32em").style("text-anchor",A<0?"end":"start");a.attr("d","M"+A*e+","+v[0]+"H0V"+v[1]+"H"+A*e)}u.attr(E,A*d);x.attr(J,A*w);y.attr(C,0).attr(E,A*d);B.attr(I,0).attr(J,A*w);if(m.rangeBand)var G=m,H=G.rangeBand()/2,k=m=function(a){return G(a)+H};else k.rangeBand?k=m:p.call(q,m,k);o.call(q,k,m);r.call(q,m,m)})}var b=
i.scale.linear(),c=Og,d=6,e=6,f=3,g=[10],h=null,j;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in Yi?b+"":Og;return a};a.ticks=function(){if(!arguments.length)return g;g=arguments;return a};a.tickValues=function(b){if(!arguments.length)return h;h=b;return a};a.tickFormat=function(b){if(!arguments.length)return j;j=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=
function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var Og="bottom",Yi={top:1,right:1,bottom:1,left:1};i.svg.brush=function(){function a(f){f.each(function(){var f=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",
e),j=f.selectAll(".background").data([0]);j.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var k=f.selectAll(".resize").data(q,P);k.exit().remove();k.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Zi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?
-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");k.style("display",a.empty()?"none":null);f=i.transition(f);j=i.transition(j);if(g){k=hc(g);j.attr("x",k[0]).attr("width",k[1]-k[0]);c(f)}if(h){k=hc(h);j.attr("y",k[0]).attr("height",k[1]-k[0]);d(f)}b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+j[+/e$/.test(a)]+","+k[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",j[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",
j[1]-j[0])}function d(a){a.select(".extent").attr("y",k[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function e(){function e(){var a=i.mouse(q),f=false;if(H){a[0]=a[0]+H[0];a[1]=a[1]+H[1]}if(!C)if(i.event.altKey){J||(J=[(j[0]+j[1])/2,(k[0]+k[1])/2]);E[0]=j[+(a[0]<J[0])];E[1]=k[+(a[1]<J[1])]}else J=null;if(A&&p(a,g,0)){c(t);f=true}if(B&&p(a,h,1)){d(t);f=true}if(f){b(t);u({type:"brush",mode:C?"move":"resize"})}}function p(a,b,c){var d=hc(b),b=d[0],e=d[1],d=E[c],f=c?k:j,g=f[1]-
f[0];if(C){b=b-d;e=e-(g+d)}a=(c?o:m)?Math.max(b,Math.min(e,a[c])):a[c];if(C)b=(a=a+d)+g;else{J&&(d=Math.max(b,Math.min(e,2*J[c]-a)));if(d<a){b=a;a=d}else b=d}if(f[0]!=a||f[1]!=b){c?l=null:n=null;f[0]=a;f[1]=b;return true}}function r(){e();t.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);i.select("body").style("cursor",null);K.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);G();u({type:"brushend"})}var q=this,v=i.select(i.event.target),u=f.of(q,arguments),t=i.select(q),x=v.datum(),A=!/^(n|s)$/.test(x)&&g,B=!/^(e|w)$/.test(x)&&h,C=v.classed("extent"),G=Ib(),J,E=i.mouse(q),H,K=i.select(S).on("keydown.brush",function(){if(i.event.keyCode==32){if(!C){J=null;E[0]=E[0]-j[1];E[1]=E[1]-k[1];C=2}Aa()}}).on("keyup.brush",function(){if(i.event.keyCode==32&&C==2){E[0]=E[0]+j[1];E[1]=E[1]+k[1];C=0;Aa()}});if(i.event.changedTouches)K.on("touchmove.brush",e).on("touchend.brush",
r);else K.on("mousemove.brush",e).on("mouseup.brush",r);t.interrupt().selectAll("*").interrupt();if(C){E[0]=j[0]-E[0];E[1]=k[0]-E[1]}else if(x){var L=+/w$/.test(x),x=+/^n/.test(x);H=[j[1-L]-E[0],k[1-x]-E[1]];E[0]=j[L];E[1]=k[x]}else i.event.altKey&&(J=E.slice());t.style("pointer-events","none").selectAll(".resize").style("display",null);i.select("body").style("cursor",v.style("cursor"));u({type:"brushstart"});e()}var f=Kc(a,"brushstart","brush","brushend"),g=null,h=null,j=[0,0],k=[0,0],n,l,m=true,
o=true,q=Td[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:j,y:k,i:n,j:l},c=this.__chart__||b;this.__chart__=b;if(Va)i.select(this).transition().each("start.brush",function(){n=c.i;l=c.j;j=c.x;k=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=gc(j,b.x),d=gc(k,b.y);n=l=null;return function(e){j=b.x=c(e);k=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){n=b.i;l=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})});else{a({type:"brushstart"});
a({type:"brush",mode:"resize"});a({type:"brushend"})}})};a.x=function(b){if(!arguments.length)return g;g=b;q=Td[!g<<1|!h];return a};a.y=function(b){if(!arguments.length)return h;h=b;q=Td[!g<<1|!h];return a};a.clamp=function(b){if(!arguments.length)return g&&h?[m,o]:g?m:h?o:null;if(g&&h){m=!!b[0];o=!!b[1]}else g?m=!!b:h&&(o=!!b);return a};a.extent=function(b){var c,d,e,f,i;if(!arguments.length){if(g)if(n){c=n[0];d=n[1]}else{c=j[0];d=j[1];if(g.invert){c=g.invert(c);d=g.invert(d)}if(d<c){i=c;c=d;d=i}}if(h)if(l){e=
l[0];f=l[1]}else{e=k[0];f=k[1];if(h.invert){e=h.invert(e);f=h.invert(f)}if(f<e){i=e;e=f;f=i}}return g&&h?[[c,e],[d,f]]:g?[c,d]:h&&[e,f]}if(g){c=b[0];d=b[1];if(h){c=c[0];d=d[0]}n=[c,d];if(g.invert){c=g(c);d=g(d)}if(d<c){i=c;c=d;d=i}if(c!=j[0]||d!=j[1])j=[c,d]}if(h){e=b[0];f=b[1];if(g){e=e[1];f=f[1]}l=[e,f];if(h.invert){e=h(e);f=h(f)}if(f<e){i=e;e=f;f=i}if(e!=k[0]||f!=k[1])k=[e,f]}return a};a.clear=function(){if(!a.empty()){j=[0,0];k=[0,0];n=l=null}return a};a.empty=function(){return!!g&&j[0]==j[1]||
!!h&&k[0]==k[1]};return i.rebind(a,f,"on")};var Zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Td=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Ud=u.format=wg.timeFormat,Pg=Ud.utc,Qg=Pg("%Y-%m-%dT%H:%M:%S.%LZ");Ud.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Md:Qg;Md.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Md.toString=Qg.toString;u.second=Ma(function(a){return new R(Math.floor(a/
1E3)*1E3)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*1E3)},function(a){return a.getSeconds()});u.seconds=u.second.range;u.seconds.utc=u.second.utc.range;u.minute=Ma(function(a){return new R(Math.floor(a/6E4)*6E4)},function(a,b){a.setTime(a.getTime()+Math.floor(b)*6E4)},function(a){return a.getMinutes()});u.minutes=u.minute.range;u.minutes.utc=u.minute.utc.range;u.hour=Ma(function(a){var b=a.getTimezoneOffset()/60;return new R((Math.floor(a/36E5-b)+b)*36E5)},function(a,b){a.setTime(a.getTime()+
Math.floor(b)*36E5)},function(a){return a.getHours()});u.hours=u.hour.range;u.hours.utc=u.hour.utc.range;u.month=Ma(function(a){a=u.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});u.months=u.month.range;u.months.utc=u.month.utc.range;var nc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Vd=[[u.second,1],[u.second,5],[u.second,15],[u.second,30],[u.minute,1],[u.minute,5],[u.minute,15],[u.minute,
30],[u.hour,1],[u.hour,3],[u.hour,6],[u.hour,12],[u.day,1],[u.day,2],[u.week,1],[u.month,1],[u.month,3],[u.year,1]],$i=Ud.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&a.getDate()!=1}],["%b %d",function(a){return a.getDate()!=1}],["%B",function(a){return a.getMonth()}],["%Y",cb]]),wi={range:function(a,b,c){return i.range(Math.ceil(a/
c)*c,+b,c).map(Ua)},floor:P,ceil:P};Vd.year=u.year;u.scale=function(){return Nd(i.scale.linear(),Vd,$i)};var Rg=Vd.map(function(a){return[a[0].utc,a[1]]}),aj=Pg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&a.getUTCDate()!=1}],["%b %d",function(a){return a.getUTCDate()!=1}],["%B",function(a){return a.getUTCMonth()}],
["%Y",cb]]);Rg.year=u.year.utc;u.scale.utc=function(){return Nd(i.scale.linear(),Rg,aj)};i.text=Zc(function(a){return a.responseText});i.json=function(a,b){return Lb(a,"application/json",xi,b)};i.html=function(a,b){return Lb(a,"text/html",yi,b)};i.xml=Zc(function(a){return a.responseXML});define("atlassian/libs/d3-3.4.13",i)}();;
;
/* module-key = 'com.atlassian.jira.gadgets:d3', location = 'static/lib/d3-amd.js' */
define("jira-dashboard-items/lib/d3",["atlassian/libs/d3-3.4.13"],function(a){return a}),AJS.namespace("d3",null,require("jira-dashboard-items/lib/d3"));;
;
/* module-key = 'com.atlassian.jira.gadgets:piechart', location = 'static/components/charts/piechart/PieChart.js' */
define("jira-dashboard-items/components/charts/piechart",["jquery","jira-dashboard-items/lib/d3"],function(t,i){function e(t,i){function e(e,a,s,r){var n=s%t.length,h=s+1===i,c=0===n,d=1===i;return h&&c&&!d&&(n=1),t[n]}return t=t||["#8eb021","#3b7fc4","#d04437","#f6c342","#654982","#f691b2","#999999","#815b3a","#f79232","#59afe1","#f15c75"],e}function a(){}return function(s,r){this.radius=r.radius,this.data=s,this.getValue=r.getValue||function(t){return t},this.centerChart=r.centerChart||!1,this.clickable=r.clickable||!1,this.colourPicker=r.colourPicker||e(r.colours,this.data.length),this.hoverExpansion=r.hoverExpansion||0,this.innerRadius=r.innerRadius||0,this.sectorGap=r.sectorGap||2,this.innerCirclePadding=Math.min(10,Math.max(this.innerRadius,0)),this.getPrimaryText=r.getPrimaryText||a,this.getSecondaryText=r.getSecondaryText||a,this.onClick=r.onClick||a,this.onEachArc=r.onEachArc||a,this.onMouseOver=r.onMouseOver||a,this.onMouseOut=r.onMouseOut||a,this.pieCenter=this.radius+this.hoverExpansion,this.width=2*this.pieCenter,this.height=2*this.pieCenter,this.render=function(e){var a=this,s=i.select(e[0]).append("svg").data([this.data]).classed({piechart:!0,centered:this.centerChart}).attr("width",this.width).attr("height",this.height);s.append("g").classed({"piechart-graph":!0}).attr("transform","translate("+this.pieCenter+","+this.pieCenter+")");var r={width:2*(this.innerRadius-this.innerCirclePadding),height:Math.sqrt(2*this.innerRadius*this.innerRadius),dx:this.pieCenter-this.innerRadius+this.innerCirclePadding,dy:this.pieCenter-this.innerRadius+2*this.innerCirclePadding},n=i.svg.arc().outerRadius(this.radius).innerRadius(this.innerRadius),h=i.svg.arc().outerRadius(this.radius+this.hoverExpansion).innerRadius(this.innerRadius),c=i.layout.pie().value(this.getValue);this.arcs=s.select("g.piechart-graph").selectAll("g").data(c).enter().append("g").classed({"piechart-arc":!0,clickable:this.clickable}).each(function(e,s){a.onEachArc(a,e.data,s,t(i.select(this).node()))}),this.arcs.append("text").attr("width",r.width).attr("text-anchor","middle").classed("piechart-center-primary",!0).attr("y",5).attr("fill",function(t,e){return a.colourPicker(a,t.data,e,i.select(this).node())}).text(function(t,i){return a.getPrimaryText(t.data,i)}),this.arcs.append("text").attr("width",r.width).attr("text-anchor","middle").classed("piechart-center-secondary",!0).attr("fill","#333333").attr("y",25).text(function(t,i){return a.getSecondaryText(t.data,i)}),this.arcs.append("path").attr("stroke","#fff").attr("stroke-width",this.sectorGap).attr("fill",function(t,e){return a.colourPicker(a,t.data,e,i.select(this).node())}).classed({"piechart-fill":!0}).attr("d",n),this.arcs.on("click",function(t,e){a.onClick(a,t.data,e,i.select(this).node())}),this.mouseOver=function(t){d.call(this.arcs[0][t],this.arcs.data()[t],t)},this.mouseOut=function(t){o.call(this.arcs[0][t],this.arcs.data()[t],t)};var d=function(t,e){i.select(this).classed({"piechart-arc-highlighted":!0}),i.select(this).select("path").transition().duration(100).attr("d",h),a.onMouseOver(a,t.data,e,i.select(this).node())},o=function(t,e){i.select(this).classed({"piechart-arc-highlighted":!1}),i.select(this).select("path").transition().duration(100).attr("d",n),a.onMouseOut(a,t.data,e,i.select(this).node())};this.arcs.on("mouseover",function(t,i){d.call(this,t,i)}),this.arcs.on("mouseout",function(t,i){o.call(this,t,i)})}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:piechart-with-legend', location = 'static/components/charts/piechart/piechart-with-legend.soy' */
// This file was automatically generated from piechart-with-legend.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Charts.PieChart.Legend.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Charts == 'undefined') { JIRA.Charts = {}; }
if (typeof JIRA.Charts.PieChart == 'undefined') { JIRA.Charts.PieChart = {}; }
if (typeof JIRA.Charts.PieChart.Legend == 'undefined') { JIRA.Charts.PieChart.Legend = {}; }
if (typeof JIRA.Charts.PieChart.Legend.Templates == 'undefined') { JIRA.Charts.PieChart.Legend.Templates = {}; }


JIRA.Charts.PieChart.Legend.Templates.Container = function(opt_data, opt_ignored) {
  return '<div class=\'piechart-with-legend\'><div class=\'piechart-wrapper\'></div><div class=\'legend-wrapper\'><div class="legend-title"></div><ul class=\'legend\'></ul></div></div>';
};
if (goog.DEBUG) {
  JIRA.Charts.PieChart.Legend.Templates.Container.soyTemplateName = 'JIRA.Charts.PieChart.Legend.Templates.Container';
}


JIRA.Charts.PieChart.Legend.Templates.ListItem = function(opt_data, opt_ignored) {
  return '<li class=\'legend-item\' data-piechartsector=\'' + soy.$$escapeHtml(opt_data.index) + '\'></li>';
};
if (goog.DEBUG) {
  JIRA.Charts.PieChart.Legend.Templates.ListItem.soyTemplateName = 'JIRA.Charts.PieChart.Legend.Templates.ListItem';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:piechart-with-legend', location = 'static/components/charts/piechart/PieChartWithLegend.js' */
define("jira-dashboard-items/components/charts/piechart-with-legend",["jquery","jira-dashboard-items/components/charts/piechart"],function(e,t){function n(){}var r=JIRA.Charts.PieChart.Legend.Templates;return function(i,a){function d(t){var n=e(".piechart-wrapper",t);s.PieChart.render(n)}function h(t){var n=e(".legend-wrapper",t),i=e(".legend-title",n);s.renderLegendTitle(i,s.data);for(var a=e("ul.legend",n),d=0;d<s.data.length;++d){var h=s.data[d],o=e(r.ListItem({index:d}));s.renderLegendItem(o,s.PieChart,h,d),a.append(o)}}a.legend=a.legend||{};var s=this;this.data=i,this.PieChart=new t(i,a.piechart),this.renderLegendItem=a.legend.renderLegendItem||n,this.renderLegendTitle=a.legend.renderLegendTitle||n,this.render=function(t){t=e(t),t.html(r.Container()),d(t),h(t),e(".legend .legend-item",t).each(function(t){e(this).mouseover(function(){s.PieChart.mouseOver(t)}),e(this).mouseleave(function(){s.PieChart.mouseOut(t)})})}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:resize', location = 'static/lib/jquery.resize/jquery.resize.js' */
!function(e){function i(e){var i=e.__resizeTriggers__,t=i.firstElementChild,r=i.lastElementChild,s=t.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,s.style.width=t.offsetWidth+1+"px",s.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(e){var r=this;i(this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=a(function(){t(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach(function(i){i.call(r,e)}))})}function s(){if(!o){var e='.resize-triggers { visibility: hidden; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),i.appendChild(t)}}var n=document.attachEvent,o=!1,_=e.fn.resize;if(e.fn.resize=function(e){return this.each(function(){this==window?_.call(jQuery(this),e):addResizeListener(this,e)})},e.fn.removeResize=function(e){return this.each(function(){removeResizeListener(this,e)})},!n)var a=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(i){return e(i)}}(),c=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(i){return e(i)}}();window.addResizeListener=function(e,t){n?e.attachEvent("onresize",t):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),s(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),i(e),e.addEventListener("scroll",r,!0)),e.__resizeListeners__.push(t))},window.removeResizeListener=function(e,i){n?e.detachEvent("onresize",i):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(i),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",r),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}(jQuery);;
;
/* module-key = 'com.atlassian.jira.gadgets:piechart-dashboard-item-resources', location = 'static/dashboarditem/piechart/PieChart.soy' */
// This file was automatically generated from PieChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.PieChart.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.PieChart == 'undefined') { JIRA.DashboardItem.PieChart = {}; }
if (typeof JIRA.DashboardItem.PieChart.Templates == 'undefined') { JIRA.DashboardItem.PieChart.Templates = {}; }


JIRA.DashboardItem.PieChart.Templates.Configuration = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField({prefix: opt_data.prefix, id: 'project-filter-picker', selectionType: opt_data.preferences.type, selectionID: opt_data.preferences.id, selectionName: opt_data.preferences.name}) + JIRA.DashboardItem.PieChart.Templates.statTypePicker({prefix: opt_data.prefix, id: 'stat-type', statTypes: opt_data.statTypes, value: opt_data.preferences.statType}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.Configuration';
}


JIRA.DashboardItem.PieChart.Templates.SuggestionDropdownSection = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml(opt_data.section) + '</h5><ul class="aui-list-section"></ul>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.SuggestionDropdownSection.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.SuggestionDropdownSection';
}


JIRA.DashboardItem.PieChart.Templates.statTypePicker = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy26 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy26) + '">' + soy.$$escapeHtml('Statistic Type') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><select id="' + soy.$$escapeHtml(prefixedId__soy26) + '" name="statType" class="select">';
  var typeList36 = opt_data.statTypes;
  var typeListLen36 = typeList36.length;
  for (var typeIndex36 = 0; typeIndex36 < typeListLen36; typeIndex36++) {
    var typeData36 = typeList36[typeIndex36];
    output += '<option value="' + soy.$$escapeHtml(typeData36.value) + '"' + ((typeData36.value == opt_data.value) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(typeData36.label) + '</option>';
  }
  output += '</select><div class="error"></div><div class="description">' + soy.$$escapeHtml('Select which type of statistic to display for this filter.') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.statTypePicker.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.statTypePicker';
}


JIRA.DashboardItem.PieChart.Templates.SectorInlineDialog = function(opt_data, opt_ignored) {
  return '<div class="piechart-inline-dialog"><h2 class="piechart-inline-dialog-title">' + soy.$$escapeHtml(opt_data.key) + '</h2><p><strong>' + soy.$$escapeHtml('Total Issues') + ':</strong> ' + soy.$$escapeHtml(opt_data.value) + ' (' + soy.$$escapeHtml(opt_data.percentage) + '%)</p><p>' + ((opt_data.url) ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.value) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.SectorInlineDialog.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.SectorInlineDialog';
}


JIRA.DashboardItem.PieChart.Templates.GroupedSectorInlineDialog = function(opt_data, opt_ignored) {
  var output = '<div class="piechart-inline-dialog grouped-sector-inline-dialog"><h2>' + soy.$$escapeHtml(opt_data.key) + ' (' + soy.$$escapeHtml(opt_data.percentage) + '%)</h2><p><strong>' + soy.$$escapeHtml('Total Issues') + ':</strong> ' + soy.$$escapeHtml(opt_data.value) + '</p><ul>';
  var resultList80 = opt_data.subResults;
  var resultListLen80 = resultList80.length;
  for (var resultIndex80 = 0; resultIndex80 < resultListLen80; resultIndex80++) {
    var resultData80 = resultList80[resultIndex80];
    output += '<li>' + ((resultData80.url) ? '<a class=\'grouped-list-label\' href=\'' + soy.$$escapeHtml(resultData80.url) + '\' title=\'' + soy.$$escapeHtml(resultData80.key) + '\'>' + soy.$$escapeHtml(resultData80.key) + '</a>' : '<span class=\'grouped-list-label\'>' + soy.$$escapeHtml(resultData80.key) + '</span>') + '<div class=\'item-value\'>' + soy.$$escapeHtml(resultData80.value) + '</div></li>';
  }
  output += '<ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.GroupedSectorInlineDialog.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.GroupedSectorInlineDialog';
}


JIRA.DashboardItem.PieChart.Templates.PieChart = function(opt_data, opt_ignored) {
  return '<div class=\'piechart-gadget\'></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.PieChart.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.PieChart';
}


JIRA.DashboardItem.PieChart.Templates.Errors = function(opt_data, opt_ignored) {
  var param105 = '<ul>';
  var errorList107 = opt_data.errors;
  var errorListLen107 = errorList107.length;
  for (var errorIndex107 = 0; errorIndex107 < errorListLen107; errorIndex107++) {
    var errorData107 = errorList107[errorIndex107];
    param105 += '<li>' + soy.$$escapeHtml(errorData107.message) + '</li>';
  }
  param105 += '</ul>';
  var output = '' + aui.message.error({titleContent: 'Looks like we can\x27t show you the content of this gadget due to its configuration.', closeable: 'false', content: param105});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.Errors.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.Errors';
}


JIRA.DashboardItem.PieChart.Templates.NoPieChartContent = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: 'No Data Available', closeable: 'false'});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.NoPieChartContent.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.NoPieChartContent';
}


JIRA.DashboardItem.PieChart.Templates.ErrorRenderingConfiguration = function(opt_data, opt_ignored) {
  return '' + aui.message.error({titleContent: 'Oops - an error has occurred', content: '', closeable: 'false'});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.ErrorRenderingConfiguration.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.ErrorRenderingConfiguration';
}


JIRA.DashboardItem.PieChart.Templates.LegendTitle = function(opt_data, opt_ignored) {
  var output = '<h3>' + soy.$$escapeHtml(opt_data.statType) + '</h3><a href=\'' + soy.$$escapeHtml(opt_data.filterUrl) + '\' title=\'' + soy.$$escapeHtml(opt_data.filterTitle) + '\'>';
  var boldedCount__soy131 = '<b>' + opt_data.issueCount + '</b>';
  output += soy.$$filterNoAutoescape(AJS.format('Total Issues: {0}',boldedCount__soy131)) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.LegendTitle.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.LegendTitle';
}


JIRA.DashboardItem.PieChart.Templates.LegendSection = function(opt_data, opt_ignored) {
  return '<div class=\'legend-content\'></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.LegendSection.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.LegendSection';
}


JIRA.DashboardItem.PieChart.Templates.LegendItem = function(opt_data, opt_ignored) {
  return '<div class="legend-item-wrapper"><div class="legend-item-value">' + soy.$$escapeHtml(opt_data.value) + '</div><div class="icon piechart-fill legend-icon" style="background-color: ' + soy.$$escapeHtml(opt_data.colour) + '"></div><div class="legend-item-label-wrapper">' + ((opt_data.url) ? '<a class=\'legend-item-label\' href=\'' + soy.$$escapeHtml(opt_data.url) + '\' ' + ((! opt_data.subResults) ? 'title=\'' + soy.$$escapeHtml(opt_data.key) + '\'' : '') + '>' + soy.$$escapeHtml(opt_data.key) + '</a>' : '<span class=\'legend-item-label\'>' + soy.$$escapeHtml(opt_data.key) + '</span>') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.LegendItem.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.LegendItem';
}


JIRA.DashboardItem.PieChart.Templates.LegendSubItem = function(opt_data, opt_ignored) {
  return '<div class="legend-item-wrapper"><div class="legend-item-value">' + soy.$$escapeHtml(opt_data.value) + '</div><div class="legend-item-label-wrapper">' + ((opt_data.url) ? '<a class=\'legend-item-label\' href=\'' + soy.$$escapeHtml(opt_data.url) + '\' title=\'' + soy.$$escapeHtml(opt_data.key) + '\'>' + soy.$$escapeHtml(opt_data.key) + '</a>' : '<span class=\'legend-item-label\'>' + soy.$$escapeHtml(opt_data.key) + '</span>') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.LegendSubItem.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.LegendSubItem';
}


JIRA.DashboardItem.PieChart.Templates.LegendMultiItem = function(opt_data, opt_ignored) {
  var output = '<div class="legend-sublist-container"><ul class="legend sublist" >';
  var itemList181 = opt_data.subResults;
  var itemListLen181 = itemList181.length;
  for (var itemIndex181 = 0; itemIndex181 < itemListLen181; itemIndex181++) {
    var itemData181 = itemList181[itemIndex181];
    output += '<li><div class=\'legend-content\'>' + JIRA.DashboardItem.PieChart.Templates.LegendSubItem(itemData181) + '</div></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.LegendMultiItem.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.LegendMultiItem';
}


JIRA.DashboardItem.PieChart.Templates.UpdateCenterBlock = function(opt_data, opt_ignored) {
  return '<div class=\'piechart-center-primary\' style=\'color: ' + soy.$$escapeHtml(opt_data.colour) + '\'>' + soy.$$escapeHtml(opt_data.header) + '</div><div class=\'piechart-center-secondary\'>' + soy.$$escapeHtml(opt_data.subheader) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.PieChart.Templates.UpdateCenterBlock.soyTemplateName = 'JIRA.DashboardItem.PieChart.Templates.UpdateCenterBlock';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:piechart-dashboard-item-resources', location = 'static/dashboarditem/piechart/PieChart.js' */
define("jira-dashboard-items/piechart",["jira/util/formatter","wrm/context-path","jquery","underscore","aui/inline-dialog","jira-dashboard-items/components/charts/piechart-with-legend","jira-dashboard-items/components/autocomplete/project-filter-autocomplete"],function(e,t,r,n,i,a,s){"use strict";function o(e){var t=[],r=JSON.parse(e);for(var n in r)r.hasOwnProperty(n)&&t.push({key:n,message:r[n]});return t}function l(e){if(e.projectOrFilterId){var t=e.projectOrFilterId.split("-");e.type=t[0],e.id=t[1],delete e.projectOrFilterId}return e}var d=function(e,t){this.API=e,this.options=t||{}};return d.prototype.SECTOR_LIMIT=11,d.prototype._renderChart=function(t,s){var o=this;if(s.filterTitle?o.API.setTitle(e.format("Pie Chart: {0}",s.filterTitle)):o.API.setTitle("Pie Chart"),s.results&&0!==s.results.length){var l=o.SECTOR_LIMIT;if(s.results.length>l){var d={key:"Other",percentage:0,value:0,url:"#",subResults:[]},u=s.results.length-l+1;d.subResults=s.results.splice(l-1,u),d.value=n.reduce(d.subResults,function(e,t){return e+t.value},0),d.percentage=Math.floor(100*d.value/s.issueCount),s.results.push(d)}for(var c=0;c<s.results.length;++c)s.results[c].percentage=Math.floor(100*s.results[c].value/s.issueCount),0===s.results[c].percentage&&(s.results[c].percentage="<1");var h=Math.min(200,t.width()/2),p=function(t,r){for(var n=t.text();t[0].getBBox().width>r&&n.length>0;)n=n.substr(0,n.length-1),t.text(e.format("{0}...",n));return t.text()},f=Math.max(40,Math.min(h/2,75)),g=f-40,m=g/35,I=28+20*m,v={piechart:{radius:h,innerRadius:f,hoverExpansion:0,centerChart:!0,clickable:!0,getValue:function(e){return e.value},onEachArc:function(e,t,r,n){new i(n,"piechart-sector-"+o.API.getGadgetId()+"-"+r,function(e,r,n){return t.subResults?e.html(JIRA.DashboardItem.PieChart.Templates.GroupedSectorInlineDialog(t)):e.html(JIRA.DashboardItem.PieChart.Templates.SectorInlineDialog(t)),n(),!1},{gravity:"w",hideDelay:1e3,closeOnTriggerClick:!0})},getPrimaryText:function(e){return e.percentage+"%"},getSecondaryText:function(e){return e.key},onMouseOver:function(e,t,n,i){r(i).find(".piechart-center-primary").css("font-size",I+"px");var a=r(i).find(".piechart-center-secondary");p(a,a.attr("width"))}},legend:{renderLegendTitle:function(e,t){e.html(JIRA.DashboardItem.PieChart.Templates.LegendTitle(s))},renderLegendItem:function(e,t,a,s){e.html(JIRA.DashboardItem.PieChart.Templates.LegendSection()),a.colour=t.colourPicker(t,a,s);var l=r(".legend-content",e);if(l.html(JIRA.DashboardItem.PieChart.Templates.LegendItem(a)),a.subResults){var d=l.find("a");d.append("...");var u="piechart-legend-"+o.API.getGadgetId()+"-"+s,c=new i(d,u,function(e,t,r){return e.css({padding:"20px"}).html(JIRA.DashboardItem.PieChart.Templates.LegendMultiItem(a)),r(),e.focus(),!1},{onHover:!0,gravity:"n",width:175,hideDelay:500,isRelativeToMouse:!0});d.click(function(e){e.preventDefault()});var h=function(e){return 13===e.keyCode},p=function(e){return 9===e.keyCode&&!0===e.shiftKey},f=function(e){return 9===e.keyCode&&!1===e.shiftKey};d.keydown(function(e){if(h(e)){c.show();var t=r("#inline-dialog-"+u);n.defer(function(){var e=t.find(":focusable"),r=e.first();r.focus(),r.keydown(function(e){p(e)&&(e.preventDefault(),c.hide(),d.focus())}),e.last().keydown(function(e){f(e)&&(c.hide(),d.focus())})})}})}}}};new a(s.results,v).render(t),o.API.resize()}else t.html(JIRA.DashboardItem.PieChart.Templates.NoPieChartContent()),o.API.resize()},d.prototype.render=function(e,i){var a=r(".piechart-gadget",e),s=this;i=l(i),s.API.initRefresh(i,n.bind(s.render,s,e,i)),s.API.showLoadingBar();var d;d="filter"===i.type?{filterId:i.id,statType:i.statType}:{jql:i.type+"="+i.id,statType:i.statType},r.ajax({method:"GET",url:t()+"/rest/gadget/1.0/statistics",dataType:"json",data:d}).done(function(t){t.filterTitle&&(s.filterTitleForEditScreen=t.filterTitle),s.API.hideLoadingBar(),s.resizeHandler=n.throttle(n.bind(s._renderChart,s,a,t),100),r(e).resize(s.resizeHandler),s._renderChart(a,t)}).fail(function(e){s.API.hideLoadingBar();var t=o(e.responseText);a.html(JIRA.DashboardItem.PieChart.Templates.Errors({errors:t}))})},d.prototype.renderEdit=function(n,i){var a=this,o=r(".piechart-gadget",n);a.resizeHandler&&(r(n).removeResize(a.resizeHandler),delete a.resizeHandler),a.API.showLoadingBar(),r.ajax({method:"GET",url:t()+"/rest/gadget/1.0/statTypes"}).done(function(t){function n(t,n){return!(!t.id||!t.type)||(r(".projectOrFilter-error",n).text("No project or filter specified.").show(),!1)}var d=a.API.getGadgetId()+"-";i=l(i),i.name=a.filterTitleForEditScreen,a.API.setTitle("Pie Chart"),o.html(JIRA.DashboardItem.PieChart.Templates.Configuration({prefix:d,statTypes:t.stats,preferences:i}));var u={fieldID:d+"project-filter-picker",parentElement:o,maxHeight:140};a.options.delay&&(u.delay=a.options.delay),s(u);var c=r("form",o),h=r(".cancel",c);h&&h.click(function(){a.API.closeEdit()}),c.on("submit",function(e){e.preventDefault();var t=r(e.target),i={name:t.find("input[name=name]").val(),type:t.find("input[name=type]").val(),id:t.find("input[name=id]").val(),statType:t.find("select[name=statType]").val(),refresh:a.API.getRefreshFieldValue("refresh-interval"),projectOrFilterId:""};n(i,t)&&a.API.savePreferences(i)}),a.API.resize()}).fail(function(){o.html(JIRA.DashboardItem.PieChart.Templates.ErrorRenderingConfiguration())}).always(function(){a.API.hideLoadingBar()})},d});;
;
/* module-key = 'com.atlassian.jira.gadgets:c3', location = 'static/lib/c3.js' */
define("jira-dashboard-items/lib/c3",["jira-dashboard-items/lib/d3","underscore"],function(t,e){var n={};return n.defaults={x:function(t){return t[0]},y:function(t){return t[1]}},n.checkIsNumber=function(t){if("number"!=typeof t)throw new Error("Expected a number, but received: "+t);return t},n.isEmpty=function(t){return!t||!t.length},n.prop=function(t){function e(t){return 0===arguments.length?i.call(this,n):(n=r.call(this,t,n),this)}var n=t,i=function(t){return t},r=function(t,e){return t};return e.get=function(t){return i=t,this},e.set=function(t){return r=t,this},e},n.inherit=function(t,e){var i,r=n.prop().get(function(n){if(null!=n)return n;for(var r=this.parent();r;r=r.parent())if("function"==typeof r[t]&&null!=(n=r[t]()))return n;return i?i.call(this):e});return r.onDefault=function(t){return i=t,this},r},n.event=function(t){function n(t,e){s.push({handler:t,context:e})}function i(n){var i=this;n=n||{},e.each(s,function(t){t.handler.call(t.context||i,n)}),t&&t.call(this,n)}function r(){return"function"==typeof arguments[0]?n.apply(this,arguments):i.apply(this,arguments),this}var s=[];return r.off=function(t,n){return s=e.reject(s,function(e){var i=null==t||e.handler==t,r=null==n||e.context==n;return i&&r}),this},r},n.areaPlot=function(){return n.component("areaPlot").extend(n.drawable()).extend(n.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).extend({areaConstructor:n.prop(t.svg.area)}).update(function(t){var e=this.areaConstructor()().x(this.x());this.cartesian()?e.y0(this.height()).y1(this.y()):e.y0(this.y()).y1(0),t.selection.attr("d",e(this.data()))})},n.axis=function(){return n.component("axis").extend(n.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:n.inherit("axisConstructor",t.svg.axis),orient:n.prop("bottom"),horizontal:function(){var t=this.orient();return"bottom"===t||"top"===t},axis:function(){var t=this.horizontal();return this.axisConstructor().call(this).scale(t?this.xScale():this.yScale()).orient(this.orient())}})},n.borderLayout=function(){var i=function(){return n.prop().set(function(t){return t.parent(this)})},r=n.drawable().extend({data:function(){return s.occupiedRegions()}}).dataKey(function(t){return t.name}).update(function(e){var n=s.positions();e.selection.each(function(e){var i=t.select(this),r=n[e.name];i.attr("transform","translate("+r.left+","+r.top+")"),e.component.width(r.width).height(r.height),e.component(i)})}),s=n.component("borderLayout").extend(n.plottable()).extend(function(){r(this.selection())}).extend({center:i(),north:i(),south:i(),west:i(),east:i(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var t=this;return e.compact(e.map(["north","south","west","east","center"],function(e){return t[e]()?{name:e,component:t[e]()}:null}))},positions:function(){var t={top:n.checkIsNumber(this.north()?this.north().height():0),bottom:n.checkIsNumber(this.south()?this.south().height():0),left:n.checkIsNumber(this.west()?this.west().width():0),right:n.checkIsNumber(this.east()?this.east().width():0)},e=n.checkIsNumber(this.width()),i=n.checkIsNumber(this.height()),r={},s=r.center={left:t.left,top:t.top,width:e-t.left-t.right,height:i-t.top-t.bottom};return this.north()&&(r.north={top:t.top,left:t.left,height:t.top,width:s.width}),this.south()&&(r.south={top:i-t.bottom,left:t.left,height:t.bottom,width:s.width}),this.west()&&(r.west={top:t.top,left:t.left,height:s.height,width:t.left}),this.east()&&(r.east={top:t.top,left:e-t.right,height:s.height,width:t.right}),r}});return s},n.circlePlot=function(){return n.component("circlePlot").extend(n.drawable()).extend(n.plottable()).elementTag("circle").update(function(t){t.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:n.prop(function(){return 4})})},n.clippable=function(){var t=0;return function(){return n.component("clippable").extend({clipped:n.prop(!1)}).extend(function(){if(this.clipped()){var e=this;n.singular().elementTag("clipPath").enter(function(n){var i="c3clip"+t;t++,e.selection().attr("clip-path","url(#"+i+")"),n.selection.attr("id",i).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(t){t.selection.select("rect").attr("width",e.width()).attr("height",e.height())})(this.selection())}})}}(),function(t){function i(t){return t.point[0]}function r(t){return t.point[1]}function s(t){var n=e.extend({},{point:[this.xScale().invert(t.centroid[0]),this.yScale().invert(t.centroid[1])],size:t.size,distance:t.dist,isCluster:!1});return(t.left||t.right)&&(n.isCluster=!0),n.label=o(t),n}function o(t){var e=[];return t&&-1==t.label?(e.push.apply(e,o(t.left)),e.push.apply(e,o(t.right))):e.push(t.label),e}function a(t,e,n){if(t)if(t.dist&&t.dist>this.threshold())a.call(this,t.left,e,n),a.call(this,t.right,e,n);else{var i=s.call(this,t);i.isCluster?e.push(i):n.push(i)}}function c(){var n=[],i=[],r=this.x(),s=this.y(),o=e.map(this.data(),this.labelAccessor()),c=e.map(this.data(),function(t){return[r(t),s(t)]},this),h=t.agglomerate(o,c,t.MAX_DISTANCE,t.COMPLETE_LINKAGE);a.call(this,h,n,i),this.getLayer("clusteredLayer").data(n),this.getLayer("unclusteredLayer").data(i)}t&&(n.clusteredCirclePlot=function(){var t=n.component().extend({clustered:n.prop([]),unclustered:n.prop([]),clusterRadiusAccessor:n.prop(function(){return 10}),singletonRadiusAccessor:n.prop(function(){return 5})});return t.extend(c).extend(n.layerable().addLayer("clusteredLayer",n.circlePlot().xAccessor(i).yAccessor(r).elementClass("cluster").radiusAccessor(function(e){return t.clusterRadiusAccessor()(e)})).addLayer("unclusteredLayer",n.circlePlot().xAccessor(i).yAccessor(r).elementClass("singleton").radiusAccessor(function(e){return t.singletonRadiusAccessor()(e)})).extend({labelAccessor:n.prop(function(t){return t.issue}),threshold:n.prop(10)})),t})}(window.figue),n.component=function(t){function i(t,e,n){for(var i in e)n&&i in n||(t[i]=e[i]);return t}var r=[],s=function(){var t=function(e){return t.applyTo(t,e)};return t}(),o={displayName:t,selection:n.prop(null),parent:n.prop(null),applyTo:function(t,n){return n&&s.selection(n),e.each(r,function(e){e.applyTo?e.applyTo(t,n):e.call(t,n)}),s},extend:function(t){return"function"==typeof t&&(t.parent&&t.parent(s),r.push(t)),i(s,t,o)}};return e.extend(s,o)},n.deviationPlot=function(){return n.component("deviationPlot").extend(n.drawable()).extend(n.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).update(function(e){var n=this.yAccessor(),i=this.deviationAccessor(),r=this.yScale(),s=t.svg.area().x(this.x()).y0(function(t){return r(n(t)+i(t))}).y1(function(t){return r(Math.max(n(t)-i(t),0))});e.selection.attr("d",s(this.data()))}).extend({deviationAccessor:n.prop(function(t){return t[2]})})},n.drawable=function(){return n.component("drawable").extend(n.withData()).extend(n.withElements()).extend(function(){var t=this.dataBinding();this.enter({selection:this.drawEnter(t.enter())}),this.exit({selection:this.drawExit(t.exit())}),this.update({selection:t})}).extend({enter:n.event(),exit:n.event(),update:n.event(),dataFilter:n.prop(e.identity),dataBinding:function(){var t=this.dataFilter()(this.data());return this.elements().data(t,this.dataKey())},drawEnter:function(t){var e=t.append(this.elementTag()),n=this.elementClass();return n&&e.classed(n,!0),e},drawExit:function(t){return t.remove()}})},n.fitToParent=function(){return n.component("fitToParent").extend({width:n.prop(),height:n.prop()}).extend(function(){var t=this.selection().node().domNode.parentElement;this.height(n.checkIsNumber(t.clientHeight)),this.width(n.checkIsNumber(t.clientWidth))})},n.gridLines=function(){return n.component("gridLines").extend(n.axis()).axisConstructor(function(){var e;switch(this.orient()){case"left":e=-this.width();break;case"right":e=this.width();break;case"top":e=-this.height();break;case"bottom":e=this.height()}return t.svg.axis().tickSize(e).tickFormat("")})},n.ieDimensions=function(){if(document.documentMode&&document.documentMode<9)return n.component("ieDimensions").extend(n.fitToParent())},n.labelledAxis=function(){return n.component("labelledAxis").extend(n.axis()).extend({text:n.prop("")}).extend(function(){var t=this.text(),e=n.singular().elementTag("text").elementClass("axis-label").enter(function(t){t.selection.attr("text-anchor","middle")}).update(function(e){e.selection.text(t)}),i=e(this.selection()).elements(),r=0,s=0,o=0,a=i.node().getBBox();switch(this.orient()){case"left":o=270,r=-1*this.width()+a.height,s=this.height()/2;break;case"right":o=90,r=this.width()-a.height,s=this.height()/2;break;case"top":o=0,r=this.width()/2,s=-1*this.height()+a.height;break;default:o=0,r=this.width()/2,s=this.height()-a.height/2}i.attr("transform","translate("+r+", "+s+") rotate("+o+", 0, 0)")})},n.layerable=function(){var i=n.drawable().elementClass("layer").update(function(e){e.selection.each(function(e,n){e.component(t.select(this).classed(e.name,!0))})});return n.component("layerable").extend(function(){i(this.selection())}).extend(n.plottable()).extend({layers:function(){return i.data()},getLayer:function(t){var n=e.findWhere(this.layers(),{name:t});return n?n.component:void 0},addLayer:function(t,e){return this.getLayer(t)||this.layers().push({name:t,component:e.parent(this)}),this},prependLayer:function(t,e){return this.getLayer(t)||this.layers().unshift({name:t,component:e.parent(this)}),this},removeLayer:function(t){var n=this.layers(),i=e.reject(n,function(e){return e.name===t});return i.length!==n.length&&this.layers(i),this}})},n.linePlot=function(){return n.component("linePlot").extend(n.drawable()).extend(n.plottable()).elementTag("path").elementClass("line").dataFilter(function(t){return[t]}).extend({lineConstructor:n.prop(t.svg.line)}).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})},n.plottable=function(){return n.component("plottable").extend(n.withData()).extend(n.withDimensions()).extend(n.clippable()).extend({x:function(){var t=this.xScale(),e=this.xAccessor();return function(n,i){return t(e(n,i))}},y:function(){var t=this.yScale(),e=this.yAccessor();return function(n,i){return t(e(n,i))}},xAccessor:n.inherit("xAccessor",n.defaults.x),yAccessor:n.inherit("yAccessor",n.defaults.y),xScaleConstructor:n.inherit("xScaleConstructor",t.scale.linear),yScaleConstructor:n.inherit("yScaleConstructor",t.scale.linear),xDomain:n.inherit("xDomain").onDefault(function(){if(!n.isEmpty(this.data())){return[n.checkIsNumber(t.min(this.data(),this.xAccessor())),n.checkIsNumber(t.max(this.data(),this.xAccessor()))]}}),yDomain:n.inherit("yDomain").onDefault(function(){if(!n.isEmpty(this.data())){return[n.checkIsNumber(t.min(this.data(),this.yAccessor())),n.checkIsNumber(t.max(this.data(),this.yAccessor()))]}}),xRange:n.inherit("xRange").onDefault(function(){return[0,n.checkIsNumber(this.width())]}),yRange:n.inherit("yRange").onDefault(function(){var t=n.checkIsNumber(this.height());return this.cartesian()?[t,0]:[0,t]}),xScale:function(){return this.xScaleConstructor()().domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor()().domain(this.yDomain()).range(this.yRange())},cartesian:n.prop(!0)})},n.singular=function(){return n.component("singular").extend(n.withElements()).extend({enter:n.event(),update:n.event()}).extend(function(){var t=this.elements();t.node()||(t=this.selection().append(this.elementTag()),this.elementClass()&&t.classed(this.elementClass(),!0),this.enter({selection:t})),this.update({selection:t})})},n.withData=function(){return n.component("withData").extend({data:n.inherit("data",[]),dataKey:n.inherit("dataKey")})},n.withDimensions=function(){return n.component("withDimensions").extend({width:n.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:n.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})},n.withElements=function(){return n.component("withElements").extend({elementTag:n.prop("g"),elementClass:n.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var t=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===t})}})},n}),AJS.namespace("c3",null,require("jira-dashboard-items/lib/c3"));;
;
/* module-key = 'com.atlassian.jira.gadgets:dual-plottable', location = 'static/components/charts/components/DualPlottable.js' */
define("jira-dashboard-items/components/charts/components/dualplottable",["jira-dashboard-items/lib/c3","jira-dashboard-items/lib/d3"],function(t,n){return t.component("dualPlottable").extend(t.plottable()).extend({y0:function(){var t=this.yScale(),n=this.y0Accessor();return function(r,e){return t(n(r,e))}},y1:function(){var t=this.yScale(),n=this.y1Accessor();return function(r,e){return t(n(r,e))}},y0Accessor:function(){var t=this.yAccessor();return function(n,r){return t(n,r)[0]}},y1Accessor:function(){var t=this.yAccessor();return function(n,r){return t(n,r)[1]}},yDomain:function(){if(!t.isEmpty(this.data())){var r=this.y0Accessor(),e=this.y1Accessor();return[t.checkIsNumber(n.min(this.data(),function(t,c){var s=r(t,c),i=e(t,c);return n.min([s,i])})),t.checkIsNumber(n.max(this.data(),function(t,c){var s=r(t,c),i=e(t,c);return n.max([s,i])}))]}}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:area-between-plot', location = 'static/components/charts/components/AreaBetweenPlot.js' */
define("jira-dashboard-items/components/charts/components/area-between-plot",["jira-dashboard-items/components/charts/components/dualplottable","jira-dashboard-items/lib/c3"],function(t,e){return function(){return e.component("areaBetweenPlot").extend(e.areaPlot()).extend(t()).extend({areaBottom:function(){var t=this.y0();return function(e){return t(e)}},areaTop:function(){var t=this.y1();return function(e){return t(e)}},update:function(t){var e=this.areaConstructor()().x(this.x());e.y0(this.areaBottom()),e.y1(this.areaTop()),t.selection.attr("d",e)}})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:area-between-plot-one-way', location = 'static/components/charts/components/AreaBetweenPlotOneWay.js' */
define("jira-dashboard-items/components/charts/components/area-between-plot-one-way",["jira-dashboard-items/components/charts/components/area-between-plot","jira-dashboard-items/lib/c3"],function(n,r){function t(n,r){return n<0&&r>0||n>0&&r<0}function e(n,r,e){var o=[];return n.forEach(function(a,c){var i=r(a),u=e(a);if(c>0){var s=n[c-1],f=r(s),h=e(s),d=h[0],v=h[1],p=u[0],m=u[1];if(t(d-v,p-m)){var y,A,b=(p-d)/(i-f),l=(m-v)/(i-f),w=p-b*i;y=(m-l*i-w)/(b-l),A=b*y+w,o.push([y,[A,A]])}}o.push([i,u])}),o}var o=function(t){return r.component("areaBetweenPlotOneWay").extend(n()).extend({dataFilter:function(){var n=this;return function(r){return[e(r,n.xAccessor(),n.yAccessor())]}},x:function(){var n=this.xScale(),r=function(n){return n[0]};return function(t){return n(r(t))}},areaBottom:function(){var n=this;return function(r){return n.y0Accessor()(r)>n.y1Accessor()(r)?n.y1()(r):n.y0()(r)}},areaTop:function(){var n=this;return function(r){if(0===t)return n.y0()(r);if(1===t)return n.y1()(r);throw"SHOULD HAVE A VALID DIRECTION"}}})};return{firstAbove:function(){return o(0)},secondAbove:function(){return o(1)}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:linecomparison-graph', location = 'static/components/charts/components/LineComparisonGraph.js' */
define("jira-dashboard-items/components/charts/components/linecomparison-graph",["jquery","jira-dashboard-items/components/charts/components/area-between-plot-one-way","jira-dashboard-items/lib/c3"],function(e,r,a){var n={first:function(){return a.layerable().addLayer("area",r.firstAbove()).addLayer("line",a.linePlot().yAccessor(function(e){return e[1][0]}))},second:function(){return a.layerable().addLayer("area",r.secondAbove()).addLayer("line",a.linePlot().yAccessor(function(e){return e[1][1]}))}};return function(e){return a.layerable().addLayer(e.firstName,n.first()).addLayer(e.secondName,n.second())}});;
;
/* module-key = 'com.atlassian.jira.gadgets:date-range', location = 'static/components/dates/DateRange.js' */
define("jira-dashboard-items/components/dates/daterange",["jira/util/formatter","jira/moment"],function(e,t){return{rangeToText:function(a,r){if(a===r)return t(a).format("Do MMM YYYY");if(a=t(a),r=t(r),a.year()!==r.year()){var o=a.format("Do MMM YYYY"),n=r.format("Do MMM YYYY");return e.format("Between {0} and {1}",o,n)}return a.month()!==r.month()?(o=a.format("Do MMM"),n=r.format("Do MMM YYYY"),e.format("Between {0} and {1}",o,n)):a.dayOfYear()!==r.dayOfYear()?(o=a.format("Do"),n=r.format("Do MMM YYYY"),e.format("Between {0} and {1}",o,n)):0===a.get("hour")&&0===a.get("minute")&&23===r.get("hour")&&59===r.get("minute")?t(a).format("Do MMM YYYY"):(o=t(a).format("HH:mm"),n=t(r).format("HH:mm Do MMM YYYY"),e.format("Between {0} and {1}",o,n))}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:binary-search', location = 'static/components/search/BinarySearch.js' */
define("jira-dashboard-items/components/search/binary-search",["underscore"],function(n){function r(n,r){return n-r}function e(e){return e&&n.isFunction(e)?e:r}return{search:function(n,r,t){t=e(t);for(var i=0,u=n.length;i<u;){var c=u+i>>1,o=t(r,n[c]);if(0===o)return c;o<0?u=c:i=c+1}return-1}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:markers', location = 'static/components/charts/components/Markers.js' */
define("jira-dashboard-items/components/charts/components/markers",["jira-dashboard-items/lib/c3"],function(t){return function(){return t.component("marker").extend(t.drawable()).extend(t.plottable()).elementTag("line").elementClass("marker-line").extend({y1:t.prop(0),y2:function(){var t=this;return function(){return t.height()}}}).update(function(t){t.selection.attr("x1",this.x()).attr("x2",this.x()).attr("y1",this.y1()).attr("y2",this.y2())}).extend(function(){this.selection().style("pointer-events","none")})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:marker-following-mouse', location = 'static/components/charts/components/MarkerFollowingMouse.js' */
define("jira-dashboard-items/components/charts/components/marker-following-mouse",["underscore","jira-dashboard-items/components/charts/components/interactive","jira-dashboard-items/components/charts/components/markers","jira-dashboard-items/lib/c3"],function(e,t,n,o){return function(s){var r=[[0]],a=n().data(r).xAccessor(function(){return 0});a.extend(function(){this.selection().classed("following-marker",!0)}),a.extend({showCallback:o.event(),refreshCallback:o.event(),hideCallback:o.event(),show:function(){h()&&(d=!0,a.elements().style("visibility",""),a.showCallback())},refresh:function(){var e=c.mouseCoordinates();a.elements().attr("x1",e[0]).attr("x2",e[0]).attr("y1",s.yTopOffset||0),!h()&&d?this.hide():!d&&h()&&this.show(),a.refreshCallback(a.parent().xScale().invert(e[0]))},hide:function(){d=!1,a.elements().style("visibility","hidden"),a.hideCallback()}});var i=s.domContext,c=s.region,l=t().domContext(i).region(c);c.extend(l),c.mouseenter(function(){a.show()}),c.mousemove(function(){a.refresh()}),c.mouseout(function(){a.hide()});var h=s.canShow||e.constant(!0),d=!1;return a}});;
;
/* module-key = 'com.atlassian.jira.gadgets:marker-following-mouse-with-dialog', location = 'static/components/charts/components/MarkerFollowingMouseWithDialog.js' */
define("jira-dashboard-items/components/charts/components/marker-following-mouse-with-dialog",["jquery","aui/inline-dialog","jira-dashboard-items/components/charts/components/marker-following-mouse"],function(e,n,o){return function(t){function r(o,t){a=new n(e(o),"marker-following-mouse",function(e,n,o){return e.parent().addClass("marker-following-mouse-dialog"),e.html(t),o(),!1},{fadeTime:0,cacheContent:!1,hideDelay:6e4,gravity:"s",persistent:!0,offsetX:-20})}var a,i=t.generateContent;t.domContext=e(t.domContextSelector);var s=o(t);return s.showCallback(function(){r(s.elements()[0],""),a.show()}),s.refreshCallback(function(e){var n=i(e);n?a?(a.find(".contents").first().html(n),a.refresh()):r(s.elements()[0],n):s.hide()}),s.hideCallback(function(){a&&(a.hide(),a.remove(),a=null)}),s}});;
;
/* module-key = 'com.atlassian.jira.gadgets:labels', location = 'static/components/charts/components/Labels.js' */
define("jira-dashboard-items/components/charts/components/labels",["jquery","underscore","jira-dashboard-items/lib/c3"],function(e,t,n){function a(e,t){return e-t/2}var r=function(){return n.component("labels").extend(n.drawable()).extend(n.plottable()).elementTag("text").elementClass("label").extend({textGenerator:n.prop(function(e){return String(e)}),mouseenter:n.event(),mouseleave:n.event(),centerXValue:function(e,t){e=a(e,t);var n=this.xRange()[1],r=Math.max(0,n-t);return Math.max(0,Math.min(e,r))},sortLabelsByXValue:function(){e(this.elements()[0]).sort(function(t,n){return parseFloat(e(t).attr("x"))>parseFloat(e(n).attr("x"))}).appendTo(this.selection())}}).update(function(e){var t=this;e.selection.text(this.textGenerator()).attr("data-index",function(e,t){return t}).attr("x",function(e){var n=t.x()(e),a=this.getBBox().width;return t.centerXValue(n,a)}).attr("y",this.y())}).extend(self.sortLabelsByXValue)};return r.INDEX_ATTR="data-index",r});;
;
/* module-key = 'com.atlassian.jira.gadgets:grouped-labels', location = 'static/components/charts/components/GroupedLabels.js' */
define("jira-dashboard-items/components/charts/components/grouped-labels",["underscore","jira-dashboard-items/components/charts/components/labels","jira-dashboard-items/lib/d3"],function(e,t,r){var n=function(n){return n=n||{},n.groupTextGenerator=n.groupTextGenerator||e.identity,t().extend({getGroupedIndexes:function(e){return e.attr(t.INDEX_ATTR).split(",")},getMiddleXCoordinate:function(e){var t=this.getGroupedIndexes(e),r=t.length-1,n=this.x(),o=this.data(),a=n(o[t[0]]);return(n(o[t[r]])+a)/2}}).extend(function(){for(var o=this,a=!0;a;){a=!1;for(var i=this.selection().selectAll(".label"),s=0;s<i.size();){for(var d=r.select(i[0][s]),l=s+1;l<i.size();){var u=r.select(i[0][l]);if(!(parseFloat(d.attr("x"))+d.node().getBBox().width>parseFloat(u.attr("x"))))break;var c=e.union(o.getGroupedIndexes(d),o.getGroupedIndexes(u));a=!0,d.attr(t.INDEX_ATTR,c.join(","));var x=o.getMiddleXCoordinate(d);d.text(n.groupTextGenerator(c.length));var p=d.node().getBBox().width;d.attr("x",o.centerXValue(x,p)),u.remove(),++l}s=l}}})};return n.GROUPING_DATA_ATTR=t.INDEX_ATTR,n});;
;
/* module-key = 'com.atlassian.jira.gadgets:chart-interactions', location = 'static/components/charts/components/interactive.js' */
define("jira-dashboard-items/components/charts/components/interactive",["jquery","jira-dashboard-items/lib/c3","underscore"],function(e,o,n){return function(){function t(e){var o=r(e),n=o[0],t=o[1];return i.mouseCoordinates([n,t]),n>0&&t>0&&n<=i.region().selection().node().getBBox().width&&t<=i.region().selection().node().getBBox().height}function r(e){return m(),[e.pageX-s.left,e.pageY-s.top]}function u(){var e=!1;i.domContext().on("mousemove",function(o){t(o)?(e||(i.mouseenter(o),e=!0),i.mousemove(o)):e&&(i.mouseout(o),e=!1)}).on("mouseleave",function(e){i.mouseout(e)})}var s,i=o.component(),m=n.throttle(function(){s=e(i.region().selection().node()).offset()},200);return i.extend(o.withDimensions()).extend(n.once(u)).extend({mouseCoordinates:o.prop(),domContext:o.prop(),region:o.prop(),mousedown:o.event(),mouseup:o.event(),mousemove:o.event(),mouseover:o.event(),mouseout:o.event(),mouseenter:o.event(),mouseleave:o.event()})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:number-factor-generator', location = 'static/components/factors/NumberFactorGenerator.js' */
define("jira-dashboard-items/components/factors/number-factor-generator",function(){return{generate:function(r){if(r<1)throw new Error("JIRA.NumberFactorGenerator.generate: number must be >= 1");if(1===r)return[1];for(var e=[1],n=2;n<=r/2;++n)r%n==0&&e.push(n);return e.push(r),e}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:overlap-remover', location = 'static/components/overlap-remover/OverlapRemover.js' */
define("jira-dashboard-items/components/overlap-remover/overlap-remover",["jira/util/logger","underscore","jira-dashboard-items/components/factors/number-factor-generator"],function(r,e,n){return{reduce:function(o,t){if(e.isUndefined(t))throw new Error("No comparison function provided");var i=n.generate(o.length-1),a=e.find(i,function(r){var n=e.range(0,o.length,r);return e.all(e.rest(n),function(e){return!t(o[e-r],o[e])})});e.isUndefined(a)&&(a=e.last(i)),r.log("JUMP: "+a);var u=e.range(0,o.length,a);return e.filter(o,function(r,n){return e.contains(u,n)})}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:non-overlapping-horizontal-axis', location = 'static/components/charts/components/NonOverlappingHorizontalAxis.js' */
define("jira-dashboard-items/components/charts/components/non-overlapping-horizontal-axis",["jquery","jira-dashboard-items/components/overlap-remover/overlap-remover","jira-dashboard-items/lib/c3","underscore"],function(e,n,o,r){return function(){return o.labelledAxis().extend(function(){var o=this.selection().selectAll(".tick")[0],t=n.reduce(o,function(n,o){var r=e(n),t=e(o);return r.position().left+r[0].getBBox().width+5>t.position().left});r.each(r.difference(o,t),function(n){e(n).remove()})})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:chart', location = 'static/components/charts/components/Chart.js' */
define("jira-dashboard-items/components/charts/components/chart",["jira-dashboard-items/components/charts/components/non-overlapping-horizontal-axis","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3"],function(t,i,e){return function(n,s){s=s||{};var r=e.borderLayout(),o=e.layerable().extend(function(){this.selection().classed("graph",!0)}).addLayer("grid",e.gridLines().orient("left")).addLayer("graph",n);if(r.center(o),s.yAxisValue){var a=e.labelledAxis().axisConstructor(function(){return i.svg.axis().ticks(5).tickFormat(function(t){return s.yAxisValue(t)})}).extend(function(){this.selection().classed("yAxis",!0)}).extend({yDomain:function(){var t=this.parent().yDomain();return t[0]===t[1]?[t[0],t[0]+1]:t}}).width(60).orient("left");r.west(a)}else r.west(e.withDimensions().width(10));if(s.xAxisValue){var c=t().axisConstructor(function(){return i.svg.axis().tickFormat(function(t){return s.xAxisValue(t)})}).extend(function(){this.selection().classed("xAxis",!0)}).height(30).orient("bottom");r.south(c)}else r.south(e.withDimensions().height(10));return r.north(e.withDimensions().height(10)).east(e.withDimensions().width(10)),r}});;
;
/* module-key = 'com.atlassian.jira.gadgets:createdvsresolved-chart', location = 'static/components/charts/createdvsresolved/CreatedVsResolvedChart.js' */
define("jira-dashboard-items/components/charts/createdvsresolved-chart",["jquery","backbone","aui/inline-dialog","jira/moment","jira/util/formatter","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3","jira-dashboard-items/components/charts/components/linecomparison-graph","jira-dashboard-items/components/charts/components/chart","jira-dashboard-items/components/charts/components/interactive","jira-dashboard-items/components/charts/components/dualplottable","jira-dashboard-items/components/dates/daterange","jira-dashboard-items/components/search/binary-search","jira-dashboard-items/components/charts/components/marker-following-mouse-with-dialog","jira-dashboard-items/components/charts/components/markers","jira-dashboard-items/components/charts/components/grouped-labels","underscore"],function(t,e,i,a,r,n,s,o,c,l,h,d,u,g,p,m,v){return e.View.extend({CLASS_NAME:"CreatedVsResolvedChart",LINE_TYPE:{CREATED:"created",RESOLVED:"resolved"},INLINE_DIALOG_CLASS:"created-vs-resolved-inline-dialog",Templates:JIRA.DashboardItem.CreatedVsResolvedChart.Templates,initialize:function(t){t=t||{},this.parseOptions(t)},parseOptions:function(t){if(t=t||{},!t.id)throw new Error(this.CLASS_NAME+": Should have supplied an ID");if(!t.data)throw new Error(this.CLASS_NAME+": No data passed into options");if(!t.data.created)throw new Error(this.CLASS_NAME+": No created data passed into options");if(!t.data.resolved)throw new Error(this.CLASS_NAME+": No resolved data passed into options");if(!t.data.domain)throw new Error(this.CLASS_NAME+": No domain data passed into options");this.id=t.id,this.cumulative=t.cumulative,this.days=t.days,this.period=t.period,this.rawData=t.data,this.data=this._formatData(t.data),this.hasVersionData=t.versionData&&t.versionData.length>0,this.versionData=t.versionData,this.chartHeight=t.chartHeight,this.axisOptions=t.axisOptions||{}},render:function(){this.$el.html(this.Templates.Container({id:this.id})),this._chartContainerSelector="#"+this.id+"-createdvsresolved-chart-wrapper",this._generateGraph(),this._overlayVersionGraphics(),this._generateMouseFollowingMarker(),this._generateChart(),this.chart.yDomain(h().yDomain());var t=this.$(".createdvsresolved-chart",this.$el);t.height(this.chartHeight),this.chart(n.select(t[0]))},_formatData:function(t){var e=t.domain[1].start-t.domain[0].end,i=t.domain[0].end-t.domain[0].start,a=t.domain[0].start-e,r=a-i,n=[[{start:r,end:a},[0,0]]];return t.domain.forEach(function(e,i){n.push([e,[t.created[i].count,t.resolved[i].count]])}),n},_createCirclePlot:function(t){var e=this;return s.circlePlot().radiusAccessor(function(){return 5}).extend({hoverRadiusAccessor:function(){return 1.75*this.radiusAccessor()}}).enter(function(i){var a=this;i.selection.each(function(t,e){n.select(this).attr("stroke-width",2)}),i.selection.on("click",function(i,a){if(a>0){e._createCirclePlotInlineDialog(this,"circle-plot-"+a,i,a-1,t).show()}}),i.selection.on("mouseover",function(){n.select(this).transition().duration(100).attr("r",a.hoverRadiusAccessor())}),i.selection.on("mouseleave",function(){n.select(this).transition().duration(100).attr("r",a.radiusAccessor())})}).extend(function(){var t=this.selection().selectAll("circle"),e=n.select(t[0][0]).attr("cx"),i=n.select(t[0][1]).attr("cx"),a=i-e,r=Math.max(2,Math.min((a-1)/2,5));this.radiusAccessor(r),t.attr("r",this.radiusAccessor()),t.attr("stroke-width",this.radiusAccessor()/1.5)})},_generateGraph:function(){this.graph=o({firstName:"created",secondName:"resolved"}),this._modifyLineWidth();var t=this._createCirclePlot(this.LINE_TYPE.CREATED).yAccessor(function(t){return t[1][0]}),e=this._createCirclePlot(this.LINE_TYPE.RESOLVED).yAccessor(function(t){return t[1][1]});this.graph.addLayer("created-points",t).addLayer("resolved-points",e)},_modifyLineWidth:function(){function t(t){var e=t.attr("d").split(/[a-zA-Z]/);if(e.shift(),e.length<2)return null;var i=e[0].split(",")[0];return e[1].split(",")[0]-i}function e(){var e=this.selection().selectAll("path"),i=t(e);if(i){var a=Math.max(2,Math.min(i/2,5));e.attr("stroke-width",a)}else e.attr("stroke-width",5)}this.graph.extend(e)},_generateMouseFollowingMarker:function(){var e=this;this.markerFollowingMouse=g({region:this.graph,domContextSelector:"#"+this.id+"-createdvsresolved-chart-wrapper",canShow:function(){return!t("."+e.INLINE_DIALOG_CLASS).is(":visible")},yTopOffset:e.hasVersionData?-35:-10,generateContent:function(t){var i=u.search(e.data,t,function(t,e){var i=e[0].start,a=e[0].end;return i<=t&&t<=a?0:t<i?-1:1});if(i<0||i>=e.data.length)return null;var a;return a=e.cumulative?d.rangeToText(e._getFirstDate(),e.data[i][0].end):d.rangeToText(e.data[i][0].start,e.data[i][0].end),e.Templates.renderScrubberDialogContent({indicatedTime:a,created:e.data[i][1][0],resolved:e.data[i][1][1]})}}),this.graph.prependLayer("following-marker",this.markerFollowingMouse)},_overlayVersionGraphics:function(){var e=this;if(this.hasVersionData){var i=s.layerable();i.addLayer("lines",p().data(this.versionData).xDomain(this.graph.xDomain()).xAccessor(function(t){return t[0]}).extend({y1:function(){return-12}}));var a=m({groupTextGenerator:function(t){return r.format("{0} versions",t)}}).data(this.versionData).xDomain(this.graph.xDomain()).xAccessor(function(t){return t[0]}).extend({y:function(){return function(){return-25}},textGenerator:function(){return function(t){return t[1].name}}}).extend(function(){var t=this,i=t.data(),a=0;this.elements().each(function(){var t=n.select(this).attr(m.GROUPING_DATA_ATTR);e._createVersionInlineDialog(this,"version-info-"+e.id+"-"+a++,i,t.split(","))})});i.addLayer("labels",a),i.extend(function(){var e=t(".lines",this.selection().node()),i=t(".marker-line",e),a=t(".labels .label",this.selection().node());a.each(function(r){var n=t(a.get(r)),s=n.attr(m.GROUPING_DATA_ATTR).split(","),o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("class","multiple-lines");var c=parseFloat(t(i.get(s[0])).attr("x1")),l=parseFloat(t(i.get(s[s.length-1])).attr("x1")),h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("class","horizontal-line"),h.setAttribute("x1",c),h.setAttribute("x2",l),h.setAttribute("y1",-12),h.setAttribute("y2",-12),o.appendChild(h);var d=c+(l-c)/2,u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("class","nub-line"),u.setAttribute("x1",d),u.setAttribute("x2",d),u.setAttribute("y1",-12),u.setAttribute("y2",-22),o.appendChild(u),v.each(s,function(e){o.appendChild(t(i.get(parseInt(e))).remove().get(0))}),e.append(o)})}),i.extend(function(){var e=t(".lines .marker-line",this.selection().node()),i=t(".lines .horizontal-line",this.selection().node()),a=t(".lines .nub-line",this.selection().node()),r=t(".labels .label",this.selection().node());r.mouseenter(function(){var s=r.index(this);n.select(i.get(s)).classed("line-highlighted",!0),n.select(a.get(s)).classed("line-highlighted",!0),t(this).attr(m.GROUPING_DATA_ATTR).split(",").forEach(function(t){n.select(e.get(t)).classed("line-highlighted",!0)})}),r.mouseleave(function(){var s=r.index(this);n.select(i.get(s)).classed("line-highlighted",!1),n.select(a.get(s)).classed("line-highlighted",!1),t(this).attr(m.GROUPING_DATA_ATTR).split(",").forEach(function(t){n.select(e.get(t)).classed("line-highlighted",!1)})})}),this.graph.prependLayer("versions",i)}},_createInlineDialog:function(e,a,r){var n=this;return t(e).click(function(){n.markerFollowingMouse.hide()}),new i(t(e),a,function(e,i,a){return e.parent().addClass("created-vs-resolved-inline-dialog"),e.html(r),t(e).click(function(t){t.stopPropagation()}),a(),!1},{fadeTime:0,cacheContent:!1,hideDelay:6e4,gravity:"w",width:350})},_createCirclePlotInlineDialog:function(t,e,i,a,r){var n="";return i[1][0]===i[1][1]?n=this._createdAndResolvedClickDialogContent(i,a):r===this.LINE_TYPE.CREATED?n=this._createdClickDialogContent(i,a):r===this.LINE_TYPE.RESOLVED&&(n=this._resolvedClickDialogContent(i,a)),this._createInlineDialog(t,e,n)},_createVersionInlineDialog:function(t,e,i,a){var r=i[a[0]][0],n=i[a[a.length-1]][0],s=d.rangeToText(r,n),o=this.Templates.VersionDialog({dateRange:s,data:i,groupedIndexes:a});this._createInlineDialog(t,e,o)},_generateChart:function(){var t=this,e={};this.axisOptions.includeXAxis&&(e.xAxisValue=function(e){return"hourly"===t.period?a(e).format("ha DD MMM YYYY"):a(e).format("DD MMM YYYY")}),this.axisOptions.includeYAxis&&(e.yAxisValue=function(t){var e=n.format("d")(t);return e?r.formatNumber(parseInt(e)):e}),this.chart=c(this.graph,e).data(this.data).extend({xAccessor:function(){return function(t){return t[0].end}}}),this.chart.east(s.withDimensions().width(50)),this.hasVersionData&&this.chart.north(s.withDimensions().height(35))},_getSectionUrl:function(t,e){return this.rawData[e][t].searchUrl},_createdClickDialogContent:function(t,e){return this._createClickDialogContent(t,e,!0,!1)},_resolvedClickDialogContent:function(t,e){return this._createClickDialogContent(t,e,!1,!0)},_createdAndResolvedClickDialogContent:function(t,e){return this._createClickDialogContent(t,e,!0,!0)},_createClickDialogContent:function(t,e,i,a){var n=[];i&&n.push({label:r.format("{0} created",t[1][0]),url:this._getSectionUrl(e,this.LINE_TYPE.CREATED),value:t[1][0]}),a&&n.push({label:r.format("{0} resolved",t[1][1]),url:this._getSectionUrl(e,this.LINE_TYPE.RESOLVED),value:t[1][1]});var s;return s=this.cumulative?d.rangeToText(this._getFirstDate(),t[0].end):d.rangeToText(t[0].start,t[0].end),this.Templates.pointDialogMulti({title:s,values:n})},_getFirstDate:function(){return this.data[1][0].start}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:createdvsresolved-chart', location = 'static/components/charts/createdvsresolved/CreatedVsResolvedChart.soy' */
// This file was automatically generated from CreatedVsResolvedChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.CreatedVsResolvedChart.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.CreatedVsResolvedChart == 'undefined') { JIRA.DashboardItem.CreatedVsResolvedChart = {}; }
if (typeof JIRA.DashboardItem.CreatedVsResolvedChart.Templates == 'undefined') { JIRA.DashboardItem.CreatedVsResolvedChart.Templates = {}; }


JIRA.DashboardItem.CreatedVsResolvedChart.Templates.Container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '-createdvsresolved-chart-wrapper" class="createdvsresolved-chart-wrapper"><svg class="createdvsresolved-chart"/></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolvedChart.Templates.Container.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolvedChart.Templates.Container';
}


JIRA.DashboardItem.CreatedVsResolvedChart.Templates.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="scrubber-dialog-heading"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span> ' + soy.$$escapeHtml(opt_data.indicatedTime) + '</div><table class="scrubber-dialog-table"><tr><td class="content-label">' + soy.$$escapeHtml('Created') + '</td><td class="content-value">' + soy.$$escapeHtml(opt_data.created) + '</td></tr><tr><td class="content-label">' + soy.$$escapeHtml('Resolved') + '</td><td class="content-value">' + soy.$$escapeHtml(opt_data.resolved) + '</td></tr></table>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolvedChart.Templates.renderScrubberDialogContent.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolvedChart.Templates.renderScrubberDialogContent';
}


JIRA.DashboardItem.CreatedVsResolvedChart.Templates.pointDialogMulti = function(opt_data, opt_ignored) {
  var output = '<div class="createdvsresolved-point-inline-dialog"><h3 class="createdvsresolved-point-title">' + soy.$$escapeHtml(opt_data.title) + '</h3>';
  var valueList22 = opt_data.values;
  var valueListLen22 = valueList22.length;
  for (var valueIndex22 = 0; valueIndex22 < valueListLen22; valueIndex22++) {
    var valueData22 = valueList22[valueIndex22];
    output += '<p><span class="createdvsresolved-point-label">' + soy.$$escapeHtml(valueData22.label) + '</span>' + ((valueData22.value > 0) ? ' <a href="' + soy.$$escapeHtml(valueData22.url) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>' : '') + '</p>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolvedChart.Templates.pointDialogMulti.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolvedChart.Templates.pointDialogMulti';
}


JIRA.DashboardItem.CreatedVsResolvedChart.Templates.VersionDialog = function(opt_data, opt_ignored) {
  var output = '<h3>' + soy.$$escapeHtml(opt_data.dateRange) + '</h3><ul class="version-list">';
  var indexList40 = opt_data.groupedIndexes;
  var indexListLen40 = indexList40.length;
  for (var indexIndex40 = 0; indexIndex40 < indexListLen40; indexIndex40++) {
    var indexData40 = indexList40[indexIndex40];
    output += '<li class="version-information"><div class="version-name"><a href="' + soy.$$escapeHtml(opt_data.data[indexData40][1].url) + '">' + soy.$$escapeHtml(opt_data.data[indexData40][1].name) + '</a>' + ((opt_data.groupedIndexes.length > 1) ? '<span class="version-date">' + soy.$$escapeHtml(opt_data.data[indexData40][1].releaseDatePretty) + '</span>' : '') + '</div>' + ((opt_data.data[indexData40][1].description) ? '<div class="version-description">' + soy.$$escapeHtml(opt_data.data[indexData40][1].description) + '</div>' : '') + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolvedChart.Templates.VersionDialog.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolvedChart.Templates.VersionDialog';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:unresolvedtrend-chart', location = 'static/components/charts/unresolvedtrend/UnresolvedTrendChart.js' */
define("jira-dashboard-items/components/charts/unresolved-trend-chart",["jquery","backbone","jira/util/formatter","jira-dashboard-items/components/charts/components/chart","jira-dashboard-items/components/charts/components/markers","jira-dashboard-items/components/charts/components/marker-following-mouse-with-dialog","jira-dashboard-items/components/dates/daterange","jira-dashboard-items/components/search/binary-search","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3","jira/moment"],function(t,e,r,a,n,i,s,o,d,h,c){function l(t,e){var r=e[1].start-e[0].end,a=e[0].end-e[0].start,n=e[0].start-r,i=n-a,s=[[{start:i,end:n},0]];return e.forEach(function(e,r){s.push([e,t[r]])}),s}return e.View.extend({Templates:JIRA.DashboardItem.UnresolvedChart.Templates,initialize:function(t){t=t||{},this._parseOptions(t)},_parseOptions:function(t){this.id=t.id,this.data=t.data,this.domain=t.domain,this.versionData=t.versionData,this.chartHeight=t.chartHeight,this.period=t.period,this.axisOptions=t.axisOptions||{}},render:function(){var e=this;this.$el.html(e.Templates.Container({id:this.id}));var m=t("svg.unresolvedtrend-chart",this.$el),u=l(this.data,this.domain),p=h.layerable();if(p.addLayer("line",h.linePlot().elementClass("unresolved-trend")).addLayer("movingMarker",i({region:p,domContextSelector:"#"+this.id+"-unresolvedtrend-chart-wrapper",canShow:function(){return!t(".created-vs-resolved-inline-dialog").is(":visible")},generateContent:function(t){var r=o.search(u,t,function(t,e){var r=e[0].start,a=e[0].end;return r<=t&&t<=a?0:t<r?-1:1});return r<0||r>=u.length?null:e.Templates.renderScrubberDialogContent({indicatedTime:s.rangeToText(u[r][0].start,u[r][0].end),unresolved:u[r][1]})}})),this.versionData&&this.versionData.length>0){var v=n().data(this.versionData).xDomain(p.xDomain()).xAccessor(function(t){return t[0]});p.prependLayer("versions",v)}var f={};this.axisOptions.includeXAxis&&(f.xAxisValue=function(t){return"hourly"===this.period?c(t).format("ha DD MMM YYYY"):c(t).format("DD MMM YYYY")}),this.axisOptions.includeYAxis&&(f.yAxisValue=function(t){var e=d.format("d")(t);return e?r.formatNumber(parseInt(e)):e});var b=a(p,f).data(u).extend({xAccessor:function(){return function(t){return t[0].end}}});m.height(this.chartHeight),b(d.select(m.get(0)))}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:unresolvedtrend-chart', location = 'static/components/charts/unresolvedtrend/UnresolvedTrendChart.soy' */
// This file was automatically generated from UnresolvedTrendChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.UnresolvedChart.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.UnresolvedChart == 'undefined') { JIRA.DashboardItem.UnresolvedChart = {}; }
if (typeof JIRA.DashboardItem.UnresolvedChart.Templates == 'undefined') { JIRA.DashboardItem.UnresolvedChart.Templates = {}; }


JIRA.DashboardItem.UnresolvedChart.Templates.Container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '-unresolvedtrend-chart-wrapper" class="unresolvedtrend-chart-wrapper"><svg class="unresolvedtrend-chart"/></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.UnresolvedChart.Templates.Container.soyTemplateName = 'JIRA.DashboardItem.UnresolvedChart.Templates.Container';
}


JIRA.DashboardItem.UnresolvedChart.Templates.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="scrubber-dialog-heading"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span> ' + soy.$$escapeHtml(opt_data.indicatedTime) + '</div><table class="scrubber-dialog-table"><tr><td class="content-label">' + soy.$$escapeHtml('Unresolved') + '</td><td class="content-value">' + soy.$$escapeHtml(opt_data.unresolved) + '</td></tr></table>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.UnresolvedChart.Templates.renderScrubberDialogContent.soyTemplateName = 'JIRA.DashboardItem.UnresolvedChart.Templates.renderScrubberDialogContent';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:createdvsresolved-dashboard-item-resources', location = 'static/dashboarditem/createdvsresolved/CreatedVsResolved.js' */
define("jira-dashboard-items/createdvsresolved",["jira/util/formatter","wrm/context-path","jquery","jira/moment","jira-dashboard-items/createdvsresolved-config-view","jira-dashboard-items/components/charts/createdvsresolved-chart","jira-dashboard-items/components/charts/unresolved-trend-chart","jira-dashboard-items/common-functions","underscore"],function(e,r,t,a,o,n,i,s,d){function l(e){var r=[];try{var t=JSON.parse(e)}catch(e){return r}for(var a in t)t.hasOwnProperty(a)&&r.push({key:a,message:t[a]});return r}var u=JIRA.DashboardItem.CreatedVsResolved.Templates,c={hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quarterly:"Quarterly",yearly:"Yearly"},p=function(e,r){this.API=e,this.options=r||{}};return p.prototype.renderEdit=function(r,a){var n=this;n.resizeHandler&&(t(r).removeResize(n.resizeHandler),delete n.resizeHandler);var i=n._backwardCompatability(a),s=n._dashboardToConfigViewPreferences(i);t(".createdvsresolved-gadget",r).html(u.ConfigContainer()),n.API.setTitle("Created vs Resolved Chart"),this.configView=new o({id:n.API.getGadgetId(),el:t(".createdvsresolved-config-container",r),projectFilterDelay:this.options.delay}),this.configView.render(s),this.configView.bind("cancel",function(){n.API.closeEdit()}),this.configView.bind("submit",function(e){n.API.resize();var r=n._configViewToDashboardPreferences(e);n.API.savePreferences(r).fail(function(e){if(401===e.status)n.configView.unauthorisedFormSave();else{var r=l(e.responseText);n.configView.errorSavingForm(r)}})}),this.configView.bind("layoutUpdate",function(){n.API.resize()}),this.API.once("afterRender",function(){r.width()<350&&t(r).find("form.aui").addClass("top-label"),n.API.resize()})},p.prototype.render=function(e,r){var a=this,o=t(".createdvsresolved-gadget",e);o.html(u.RenderChart({showUnresolvedTrend:r.showUnresolvedTrend})),a.API.initRefresh(r,d.bind(a.render,a,e,r)),a.API.showLoadingBar(),r=a._backwardCompatability(r);var n=this._requestDateData(r);t.when(n).done(function(n){a.API.hideLoadingBar();var i=a._generateCreatedVsResolvedData(n.results),s=a._generateVersionData(r.type,r.versionLabel,n.versions,i.domain);a.initialRender=!0,a._renderChart(t(e).attr("id"),o,r,n,i,s),a.resizeHandler=function(){a.initialRender?a.initialRender=!1:d.bind(a._renderChart,a,t(e).attr("id"),o,r,n,i,s)()},t(e).resize(d.throttle(a.resizeHandler,600))}).fail(function(e){if("timeout"===e.statusText)o.html(JIRA.DashboardItem.CreatedVsResolved.Templates.Timeout());else if(400===e.status){var r=l(e.responseText);o.html(JIRA.DashboardItem.CreatedVsResolved.Templates.Errors({errors:r}))}else o.html(JIRA.DashboardItem.CreatedVsResolved.Templates.ServerError());a.API.hideLoadingBar(),a.API.resize()})},p.prototype._requestDateData=function(e){var a={jql:e.type+"="+e.id,period:e.periodName,daysprevious:e.daysprevious,operation:e.operation,field:["created","resolved"],includeVersions:e.versionLabel&&"none"!==e.versionLabel};return e.showUnresolvedTrend&&a.field.push("unresolvedTrend"),t.ajax({method:"GET",url:r()+"/rest/gadget/1.0/dateCountInPeriod",dataType:"json",data:a})},p.prototype._generateCreatedVsResolvedData=function(e){var r=[],t=[],a=[],o=[];return e.forEach(function(e){r.push({start:e.start,end:e.end}),t.push(e.data.created),a.push(e.data.resolved),e.data.unresolvedTrend&&o.push(e.data.unresolvedTrend.count)}),{domain:r,created:t,resolved:a,unresolvedTrend:o}},p.prototype._generateVersionData=function(e,r,t,o){var n=this,i=o[0].start,s=o[o.length-1].end,l=[];return t.forEach(function(t){var o=!!t.releaseDate,d=i<=t.releaseDate&&t.releaseDate<=s,u=n._isValidVersionName(r,t.name);o&&d&&u&&("filter"===e&&(t.name=t.project.key+":"+t.name),t.releaseDatePretty=a(t.releaseDate).format("DD-MMM-YYYY"),l.push([t.releaseDate,t]))}),d.sortBy(l,function(e){return e[0]})},p.prototype._backwardCompatability=function(e){return!d.isUndefined(e.isCumulative)&&function(e){return null===e||void 0===e||""===e}(e.operation)&&(e.isCumulative?e.operation="cumulative":e.operation="count",delete e.isCumulative),s.projectFilterBackwardCompatible(e)},p.prototype._dashboardToConfigViewPreferences=function(e){return{name:e.name,id:e.id,type:e.type,periodName:e.periodName,range:e.daysprevious,operation:e.operation,showUnresolvedTrend:e.showUnresolvedTrend,versionLabel:e.versionLabel,refresh:e.refresh,isConfigured:e.isConfigured}},p.prototype._configViewToDashboardPreferences=function(e){var r=!1;return!0===e.refresh&&(r="15"),{name:e.name,id:e.id,type:e.type,periodName:e.periodName,daysprevious:e.range,operation:e.operation,showUnresolvedTrend:e.showUnresolvedTrend,versionLabel:e.versionLabel,refresh:r}},p.prototype._isValidVersionName=function(e,r){return"all"===e||"major"===e&&!this._isMinorVersion(r)},p.prototype._isMinorVersion=function(e){if(e){var r=(e.match(/\./g)||[]).length,t=e.indexOf("alpha")>=0||e.indexOf("beta")>=0;return r>1||t}return!1},p.prototype._renderChart=function(r,t,a,o,s,d){var l=this,p=t.find(".createdvsresolved-chart-container"),v=p.outerWidth(),h=2*v/3,m=a.showUnresolvedTrend?3*h/4:h+20,f=Math.max(h/4,80),g={id:r,data:s,versionData:d,el:p,filterUrl:o.filterUrl,axisOptions:{includeXAxis:!0,includeYAxis:!0},cumulative:"cumulative"===a.operation,days:a.daysprevious,period:a.periodName,chartHeight:m};(new n(g).render(),a.showUnresolvedTrend)&&new i({el:t.find(".unresolvedtrend-chart-container").get(0),id:r,data:s.unresolvedTrend,domain:s.domain,versionData:d,period:a.periodName,chartHeight:f,axisOptions:{includeXAxis:!0,includeYAxis:!0}}).render();t.find(".createdvsresolved-chart-info").html(u.ChartDetailsContent({createdCount:o.totals.created,resolvedCount:o.totals.resolved,dayCount:e.formatNumber(parseInt(a.daysprevious)),period:c[a.periodName],filterUrl:o.filterUrl})),l.API.setTitle(e.format("Created vs Resolved Chart: {0}",o.filterTitle)),l.API.resize()},p});;
;
/* module-key = 'com.atlassian.jira.gadgets:createdvsresolved-dashboard-item-resources', location = 'static/dashboarditem/createdvsresolved/CreatedVsResolved.soy' */
// This file was automatically generated from CreatedVsResolved.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.CreatedVsResolved.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.CreatedVsResolved == 'undefined') { JIRA.DashboardItem.CreatedVsResolved = {}; }
if (typeof JIRA.DashboardItem.CreatedVsResolved.Templates == 'undefined') { JIRA.DashboardItem.CreatedVsResolved.Templates = {}; }


JIRA.DashboardItem.CreatedVsResolved.Templates.Container = function(opt_data, opt_ignored) {
  return '<div class=\'createdvsresolved-gadget\'></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Container.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Container';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ConfigContainer = function(opt_data, opt_ignored) {
  return '<div class=\'createdvsresolved-config-container\'></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ConfigContainer.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ConfigContainer';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.RenderChart = function(opt_data, opt_ignored) {
  return '' + JIRA.DashboardItem.CreatedVsResolved.Templates.ChartContainer(opt_data) + JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContainer(null);
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.RenderChart.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.RenderChart';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ChartContainer = function(opt_data, opt_ignored) {
  return '<div class=\'chart-container\'><div class=\'createdvsresolved-chart-container\'></div>' + ((opt_data.showUnresolvedTrend) ? '<div class=\'unresolvedtrend-chart-container\'></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ChartContainer.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ChartContainer';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContainer = function(opt_data, opt_ignored) {
  return '<div class=\'createdvsresolved-chart-info\'></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContainer.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContainer';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContent = function(opt_data, opt_ignored) {
  return '<div class=\'createdvsresolved-chart-details-header\'><div class=\'createdvsresolved-chart-details-title\'>' + soy.$$escapeHtml(AJS.format('Issues in the last {0} days',opt_data.dayCount)) + '</div><div class=\'createdvsresolved-chart-details-grouping\'>' + soy.$$escapeHtml(AJS.format('(grouped {0})',opt_data.period)) + '</div><a class=\'createdvsresolved-chart-details-link\' href="' + soy.$$escapeHtml(opt_data.filterUrl) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a></div><div class=\'createdvsresolved-chart-details-totals\'><div class=\'created-totals\'><svg height="16" width="16" class="created-point"><circle cx="8" cy="8" r="5"></circle></svg>' + soy.$$escapeHtml(AJS.format('Created issues ({0})',opt_data.createdCount)) + '</div><div class=\'resolved-totals\'><svg height="16" width="16" class="resolved-point"><circle cx="8" cy="8" r="5"></circle></svg>' + soy.$$escapeHtml(AJS.format('Resolved issues ({0})',opt_data.resolvedCount)) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContent.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ChartDetailsContent';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Configuration = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField({prefix: opt_data.prefix, id: 'project-filter-picker', selectionType: opt_data.preferences.type, selectionID: opt_data.preferences.id, selectionName: opt_data.preferences.name}) + JIRA.DashboardItem.CreatedVsResolved.Templates.PeriodField({prefix: opt_data.prefix, options: opt_data.periodOptions.options, value: opt_data.preferences.periodName}) + JIRA.DashboardItem.CreatedVsResolved.Templates.RangeField({prefix: opt_data.prefix, label: 'Days Previously', value: opt_data.preferences.range}) + JIRA.DashboardItem.CreatedVsResolved.Templates.Operations({prefix: opt_data.prefix, options: opt_data.chartValueOptions.options, value: opt_data.preferences.operation}) + JIRA.DashboardItem.CreatedVsResolved.Templates.Unresolved({prefix: opt_data.prefix, options: opt_data.unresolvedOptions.options, value: opt_data.preferences.showUnresolvedTrend}) + JIRA.DashboardItem.CreatedVsResolved.Templates.Versions({prefix: opt_data.prefix, options: opt_data.versionsOptions.options, value: opt_data.preferences.versionLabel}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Configuration';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Errors = function(opt_data, opt_ignored) {
  var param69 = '<ul>';
  var errorList71 = opt_data.errors;
  var errorListLen71 = errorList71.length;
  for (var errorIndex71 = 0; errorIndex71 < errorListLen71; errorIndex71++) {
    var errorData71 = errorList71[errorIndex71];
    param69 += '<li>' + soy.$$escapeHtml(errorData71.message) + '</li>';
  }
  param69 += '</ul>';
  var output = '' + aui.message.error({titleContent: 'Unfortunately, one or more of your preferences are now unavailable. Please update your preferences, or remove gadget by clicking delete from the title bar above.', closeable: 'false', content: param69});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Errors.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Errors';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ServerError = function(opt_data, opt_ignored) {
  return '' + aui.message.error({titleContent: 'The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.', closeable: 'false', content: ''});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ServerError.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ServerError';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Timeout = function(opt_data, opt_ignored) {
  return '' + aui.message.error({titleContent: 'The Jira server could not be contacted. This may be a temporary glitch or the server may be down.', closeable: 'false', content: ''});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Timeout.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Timeout';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.ErrorSaving = function(opt_data, opt_ignored) {
  var param91 = '<ul>';
  var errorList93 = opt_data.errors;
  var errorListLen93 = errorList93.length;
  for (var errorIndex93 = 0; errorIndex93 < errorListLen93; errorIndex93++) {
    var errorData93 = errorList93[errorIndex93];
    param91 += '<li>' + soy.$$escapeHtml(errorData93.message) + '</li>';
  }
  param91 += '</ul>';
  var output = '' + aui.message.error({titleContent: 'The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.', closeable: 'false', content: param91});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.ErrorSaving.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.ErrorSaving';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.UnauthorisedFormSave = function(opt_data, opt_ignored) {
  return '' + aui.message.error({titleContent: 'You are not authorised to perform this operation. Please log in.', closeable: 'false', content: ''});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.UnauthorisedFormSave.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.UnauthorisedFormSave';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.PeriodField = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy106 = opt_data.prefix + 'period';
  output += aui.form.selectField({id: id__soy106, name: 'periodName', value: opt_data.value, labelContent: 'Period', options: opt_data.options, isRequired: true, descriptionText: 'The length of periods represented on the graph.'});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.PeriodField.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.PeriodField';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.RangeField = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy116 = opt_data.prefix + 'range';
  output += aui.form.textField({id: id__soy116, name: 'range', labelContent: opt_data.label, value: opt_data.value, isRequired: true, descriptionText: 'Days in the past to collect data for the selected period.'});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.RangeField.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.RangeField';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Operations = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy125 = opt_data.prefix + 'operation';
  output += aui.form.selectField({id: id__soy125, name: 'operation', value: opt_data.value, labelContent: 'Collection Operation', options: opt_data.options, isRequired: true, descriptionText: 'Progressively add totals (1.. 2.. 3), or show individual values (1.. 1.. 1).'});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Operations.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Operations';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Unresolved = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy135 = opt_data.prefix + 'showUnresolvedTrend';
  var showUnresolved__soy136 = opt_data.value ? 'true' : 'false';
  output += aui.form.selectField({id: id__soy135, name: 'showUnresolvedTrend', value: showUnresolved__soy136, labelContent: 'Display the Trend of Unresolved', options: opt_data.options, isRequired: true, descriptionText: 'Show the number of unresolved issues over time in a subplot.'});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Unresolved.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Unresolved';
}


JIRA.DashboardItem.CreatedVsResolved.Templates.Versions = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy146 = opt_data.prefix + 'versionLabel';
  output += aui.form.selectField({id: id__soy146, name: 'versionLabel', value: opt_data.value, labelContent: 'Display Versions', options: opt_data.options, isRequired: true, descriptionText: 'Show when versions were released on the chart.'});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.CreatedVsResolved.Templates.Versions.soyTemplateName = 'JIRA.DashboardItem.CreatedVsResolved.Templates.Versions';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:createdvsresolved-dashboard-item-resources', location = 'static/dashboarditem/createdvsresolved/CreatedVsResolvedConfigView.js' */
define("jira-dashboard-items/createdvsresolved-config-view",["jira/util/formatter","jquery","backbone","jira-dashboard-items/components/autocomplete/project-filter-autocomplete"],function(e,t,r,i){var a=r.View.extend({templates:JIRA.DashboardItem.CreatedVsResolved.Templates,events:{"click .cancel":"cancel",submit:"submit"},initialize:function(e){this.id=e.id,this.projectFilterDelay=e.projectFilterDelay},render:function(e){e=e||{};this.$el.html(this.templates.Configuration({prefix:this.id+"-",preferences:e,periodOptions:l,chartValueOptions:d,unresolvedOptions:s,versionsOptions:m})),this._bindProjectFilterAutocomplete()},_bindProjectFilterAutocomplete:function(){var e=this,r={field:t("#"+this.id+"-project-filter-picker",this.$el),completeField:function(t){t&&(e.$el.find("input[name=type]").val(t.type),e.$el.find("input[name=id]").val(t.id),e.$el.find("input[name=name]").val(t.name),e.$el.find(".filterpicker-value-name").text(t.name).addClass("success"),this.field.val(""),this.field.trigger("change"))},maxHeight:140};this.projectFilterDelay&&(r.delay=this.projectFilterDelay),r.parentElement=this.$el.find("form"),r.fieldID=r.field.attr("id"),i(r)},submit:function(e){e.preventDefault(),this._validate()&&this.trigger("submit",this.getFields())},cancel:function(){this.trigger("cancel")},getFields:function(){return{name:this.$el.find("input[name=name]").val(),type:this.$el.find("input[name=type]").val(),id:this.$el.find("input[name=id]").val(),periodName:this.$el.find("select[name=periodName]").val(),range:this.$el.find("input[name=range]").val(),operation:this.$el.find("select[name=operation]").val(),showUnresolvedTrend:"true"===this.$el.find("select[name=showUnresolvedTrend]").val(),versionLabel:this.$el.find("select[name=versionLabel]").val(),refresh:this.$el.find("input[name=refresh-interval]").prop("checked")}},_validate:function(){var r=this.getFields(),i=!0;if(r.id&&r.type?t(".projectOrFilter-error",this.$el).hide():(t(".projectOrFilter-error",this.$el).text("No project or filter specified.").show(),i=!1),!n[r.periodName])throw"Period invalid";var a=r.range,l=t("input[name=range]",this.$el).closest(".field-group");return/^\s*$/.test(r.range)?(this._addError(l,"Days previously is a required field."),i=!1):isNaN(r.range)?(this._addError(l,"Field must be a number"),i=!1):r.range<=0?(this._addError(l,"Field must be positive"),i=!1):/^\d+$/.test(r.range)?a>n[r.periodName]?(this._addError(l,e.format("Maximum allowed value is {0} days for the \'\'{1}\'\' period.",n[r.periodName],o[r.periodName])),i=!1):this._removeError(l):(this._addError(l,"Field must be a number"),i=!1),this.trigger("layoutUpdate"),i},_removeError:function(e){t(e).find(".error").remove()},_addError:function(e,r){this._removeError(e),e=t(e);var i=t("<div class='error'/>");i.html(r),e.append(i),i.show()},unauthorisedFormSave:function(){this.removeErrors(),this.$el.append(this.templates.UnauthorisedFormSave()),this.trigger("layoutUpdate")},errorSavingForm:function(e){e=e||[],this.removeErrors(),this.$el.append(this.templates.ErrorSaving({errors:e})),this.trigger("layoutUpdate")},removeErrors:function(){this.$el.find(".aui-message").remove(),this.trigger("layoutUpdate")}}),n={hourly:10,daily:300,weekly:1750,monthly:7500,quarterly:22500,yearly:36500},o={hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",quarterly:"Quarterly",yearly:"Yearly"},l={options:[{value:"hourly",text:o.hourly},{value:"daily",text:o.daily},{value:"weekly",text:o.weekly},{value:"monthly",text:o.monthly},{value:"quarterly",text:o.quarterly},{value:"yearly",text:o.yearly}]},d={options:[{value:"count",text:"Count"},{value:"cumulative",text:"Cumulative"}]},s={options:[{value:"false",text:"No"},{value:"true",text:"Yes"}]},m={options:[{value:"all",text:"All versions"},{value:"major",text:"Only major versions"},{value:"none",text:"None"}]};return a});;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-picker-component', location = 'static/components/filterpicker/FilterPicker.soy' */
// This file was automatically generated from FilterPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Common.Config.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Common == 'undefined') { JIRA.DashboardItem.Common = {}; }
if (typeof JIRA.DashboardItem.Common.Config == 'undefined') { JIRA.DashboardItem.Common.Config = {}; }
if (typeof JIRA.DashboardItem.Common.Config.Templates == 'undefined') { JIRA.DashboardItem.Common.Config.Templates = {}; }


JIRA.DashboardItem.Common.Config.Templates.filterPicker = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy3 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group ' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(prefixedId__soy3) + '">' + soy.$$escapeHtml('Saved Filter') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><select class="select" id="' + soy.$$escapeHtml(prefixedId__soy3) + '" name="' + soy.$$escapeHtml(opt_data.id) + '"></select><div class="error">' + soy.$$escapeHtml('No Filter selected') + '</div><input class="hidden" id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_id"/><input class="hidden" id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_name"/><div class="description"><a id="filter_' + soy.$$escapeHtml(prefixedId__soy3) + '_advance" class="advanced-search" href="#" title="' + soy.$$escapeHtml('Click here to select/change filter or project.') + '" target="_parent">' + soy.$$escapeHtml('Advanced Search') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.Config.Templates.filterPicker.soyTemplateName = 'JIRA.DashboardItem.Common.Config.Templates.filterPicker';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-picker-component', location = 'static/components/filterpicker/FilterPicker.js' */
define("jira-dashboard-items/components/filter-picker",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","wrm/context-path","underscore","jquery","jira/ajs/ajax/smart-ajax","jira/ajs/select/single-select","jira/analytics"],function(e,t,i,r,n,s,a,l){"use strict";return function(){var c,o=function(e){return n("#"+e.model.$element.attr("id")+"-single-select").attr("data-query")},d=function(e){return/[?*~]$/.test(e)},u=function(e){var t={EMPTY:"empty",REGULAR:"doesNotEndWithWildcard",WILDCARD:"endsWithWildcard"},i=o(e);return r.isUndefined(i)||r.isEmpty(i)?t.EMPTY:d(i)?t.WILDCARD:t.REGULAR},f=function(t,r,s){var a=function(){var t=n("#filter_"+r+"_id").attr("value");0===t.indexOf("filter-")&&(t=t.substr(7));var i=n("#filter_"+r+"_name").text(),a=new e({value:t,label:i});s.setSelection(a,!0)},o=t.find("#filter_"+r+"_id");c=new MutationObserver(a),c.observe(o[0],{attributes:!0}),t.find("#filter_"+r+"_advance").click(function(e){var t=i()+"/secure/FilterPickerPopup.jspa?showProjects=false&field="+r,n="filter_"+r.replace(new RegExp("-","g"),"")+"_window",a=u(s);l.send({name:"jira.dashboard.gadgets.components.filter-picker.advanced-search.clicked",data:{quickSearchInput:a}}),window.open(t,n,"width=800, height=500, resizable, scrollbars=yes").focus(),e.preventDefault()})};return{init:function(n){var c=n.element,d=n.selectedValue,p=this;return this.select=new a({element:c,itemAttrDisplayed:"label",revertOnInvalid:!0,removeDuplicates:!0,submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,ajaxOptions:{url:i()+"/rest/gadget/1.0/pickers/filters",query:!0,data:{fieldName:"quickfind"},formatResponse:function(i){var n=[];if(i.filters&&i.filters.length){var s=new t;r.each(i.filters,function(t){s.addItem(new e({value:t.id,label:t.name}))}),n.push(s)}return n}}}),this.select.model.$element.bind("selected",function(e,t,i,n){if(!r.isUndefined(n)&&"blur"!==n.type){var s=o(i);if(!r.isUndefined(s)){var a,c=u(i);a=i.lastSelection.label()===s?"jira.dashboard.gadgets.components.filter-picker.exact-match.selected":"jira.dashboard.gadgets.components.filter-picker.suggestion.selected",l.send({name:a,data:{quickSearchInput:c}})}}}),d&&(p.select.disable(),s.makeRequest({method:"GET",url:i()+"/rest/api/2/filter/"+d,success:function(t){p.select.setSelection(new e({value:d,label:t.name}))},complete:function(){p.select.enable()}})),f(n.parentElement,c.attr("id"),p.select),this.errorField=c.parents(".field-group").find(".error"),p.select.hideErrorMessage=function(){},p.select.showErrorMessage=function(){},this},getValue:function(){return this.select.lastSelection?{id:this.select.lastSelection.value(),label:this.select.lastSelection.label()}:null},validate:function(){return this.select.lastSelection&&this.select.lastSelection.value()?(this.errorField.hide(),!0):(this.errorField.show(),!1)},disconnectObserver:function(){c&&c.disconnect()}}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:two-dimensional-stats-dashboard-item-resources', location = 'static/dashboarditem/two-dimensional-stats/TwoDimensionalStats.js' */
define("jira-dashboard-items/two-dimensional-stats",["jira/analytics","jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/filter-picker"],function(e,t,r,i,a,s){"use strict";function n(e){a.each(e.firstRow.cells,function(e){e.classes&&e.classes.join&&(e.classes=e.classes.join(" "))}),a.each(e.rows,function(e){a.each(e.cells,function(e){e.classes&&e.classes.join&&(e.classes=e.classes.join(" "))})})}function o(){var e={};return e.sortByOptions=[{text:"Natural",value:"natural"},{text:"Total",value:"total"}],e.sortDirectionOptions=[{text:"Ascending",value:"asc"},{text:"Descending",value:"desc"}],e}var l=function(e,t){this.API=e,this.options=t||{},this.fields=o(),this.filterPicker=new s};return l.prototype.render=function(s,o){var l=i(s),d=this;d.API.initRefresh(o,a.bind(d.render,d,s,o)),d.API.showLoadingBar();var f=void 0!==o.filterId?o.filterId.replace("filter-",""):o.filterId;i.ajax({method:"GET",url:r()+"/rest/gadget/1.0/twodimensionalfilterstats/generate",dataType:"json",data:{filterId:"filter-"+f,xstattype:o.xstattype,ystattype:o.ystattype,sortDirection:o.sortDirection,sortBy:o.sortBy,numberToShow:o.more?1e3:o.numberToShow}}).done(function(c){if(c.filter?d.API.setTitle(t.format("Two Dimensional Filter Statistics: {0}",c.filter.filterTitle)):d.API.setTitle("Two Dimensional Filter Statistics"),0===c.totalRows)return void l.html(JIRA.DashboardItem.TwoDimensionalStats.Templates.EmptyResultMessage({href:r()+"/issues/?filter="+f}));n(c),l.html(JIRA.DashboardItem.TwoDimensionalStats.Templates.Table({yAxisLabel:c.yHeading,xHeaderLabels:c.firstRow.cells,contentRows:c.rows,totalRows:c.totalRows,xHeading:c.xHeading,filterUrl:c.filter.filterUrl,filterTitle:a.escape(c.filter.filterTitle),visibleContentRows:c.rows.length-1,showMore:o.more})),e.send({name:"jira.dashboard.gadgets.twodstats.rowscount",data:{value:c.rows.length}}),e.send({name:"jira.dashboard.gadgets.twodstats.colscount",data:{value:c.firstRow.cells.length}}),l.find(".content-control-link").click(function(e){o.more=i(e.target).data("more"),d.API.isEditable()?d.API.savePreferences(o):d.render(s,o)})}).fail(function(){l.html(JIRA.DashboardItem.TwoDimensionalStats.Templates.ServerErrorMessage({filterId:f}))}).always(function(){d.API.hideLoadingBar(),d.API.resize(),l.find(".two-d-container").toggleClass("h-scrollbar",l.find(".table-container").width()<l.find(".table-container > .extra-container > table").width())})},l.prototype.renderEdit=function(e,a){var s=i(e),n=this;n.API.setTitle("Two Dimensional Filter Statistics"),n.API.showLoadingBar(),i.ajax({method:"GET",url:r()+"/rest/gadget/1.0/statTypes",dataType:"json"}).done(function(e){n.fields.statTypeOptions=n._updateStatTypeFieldNames(e.stats),s.html(JIRA.DashboardItem.TwoDimensionalStats.Templates.Form({prefix:n.API.getGadgetId()+"-",preferences:a,fields:n.fields})),n.filterPicker.init({gadgetErrorContainer:s.find(".dashboard-item-error"),element:s.find("#"+n.API.getGadgetId()+"-filterId"),selectedValue:void 0!==a.filterId?a.filterId.replace("filter-",""):a.filterId,parentElement:s}),s.find(".buttons-container .cancel").click(n.API.closeEdit.bind(n.API)),s.find("form").on("submit",function(e){e.preventDefault();var t=i(e.target),r=n._getPreferencesObject(t);r.filterId="filter-"+(n.filterPicker.validate()?n.filterPicker.getValue().id:""),r.refresh=n.API.getRefreshFieldValue(),r.more=!1,n._validPreferences(t,r)?n.API.savePreferences(r):n.API.resize()})}).fail(function(){s.html(JIRA.DashboardItem.TwoDimensionalStats.Templates.ServerErrorMessage())}).always(function(){n.API.hideLoadingBar(),n.API.resize()})},l.prototype._getPreferencesObject=function(e){var t=e.serializeArray(),r=["filterId","numberToShow","sortBy","sortDirection","xstattype","ystattype"],i={};return a.each(t,function(e){-1!==a.indexOf(r,e.name)&&(i[e.name]=e.value)}),i},l.prototype._updateStatTypeFieldNames=function(e){for(var t=e.length;t--;)e[t].text=e[t].label,delete e[t].label;return e},l.prototype._validPreferences=function(e,r){if(e.find(".error").remove(),""===r.filterId||"filter-"===r.filterId){var i=e.find("[name=filterId]");i.parent().append('<div class="error">'+"No Filter selected"+"</div>")}if(!this._validNumberToShow(r.numberToShow)){var i=e.find("input[name=numberToShow]");i.after('<div class="error">'+"The value must be an integer greater than 0 and less than or equal to 50"+"</div>")}return e.find(".error").show(),0===e.find(".error").size()},l.prototype._validNumberToShow=function(e){return!0===/^\d+$/.test(e)&&e>=1&&e<=50},l});;
;
/* module-key = 'com.atlassian.jira.gadgets:two-dimensional-stats-dashboard-item-resources', location = 'static/dashboarditem/two-dimensional-stats/TwoDimensionalStats.soy' */
// This file was automatically generated from TwoDimensionalStats.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.TwoDimensionalStats.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.TwoDimensionalStats == 'undefined') { JIRA.DashboardItem.TwoDimensionalStats = {}; }
if (typeof JIRA.DashboardItem.TwoDimensionalStats.Templates == 'undefined') { JIRA.DashboardItem.TwoDimensionalStats.Templates = {}; }


JIRA.DashboardItem.TwoDimensionalStats.Templates.Table = function(opt_data, opt_ignored) {
  var output = '<div class="two-d-container"><div class="table-container"><div class="extra-container"><table class="aui aui-table-interactive"><thead><tr><th class="axis">' + soy.$$escapeHtml(opt_data.yAxisLabel) + '</th>';
  var labelList6 = opt_data.xHeaderLabels;
  var labelListLen6 = labelList6.length;
  for (var labelIndex6 = 0; labelIndex6 < labelListLen6; labelIndex6++) {
    var labelData6 = labelList6[labelIndex6];
    output += '<th ' + ((labelData6.classes) ? 'class="' + soy.$$escapeHtml(labelData6.classes) + '"' : '') + '>' + soy.$$filterNoAutoescape(labelData6.markup) + '</th>';
  }
  output += '</thead><tbody>';
  var rowList19 = opt_data.contentRows;
  var rowListLen19 = rowList19.length;
  for (var rowIndex19 = 0; rowIndex19 < rowListLen19; rowIndex19++) {
    var rowData19 = rowList19[rowIndex19];
    output += '<tr>';
    var dataList21 = rowData19.cells;
    var dataListLen21 = dataList21.length;
    for (var dataIndex21 = 0; dataIndex21 < dataListLen21; dataIndex21++) {
      var dataData21 = dataList21[dataIndex21];
      output += (dataIndex21 == 0) ? '<th class="scope ' + ((dataData21.classes) ? soy.$$escapeHtml(dataData21.classes) : '') + '">' + soy.$$filterNoAutoescape(dataData21.markup) + '</th>' : '<td ' + ((dataData21.classes) ? 'class="' + soy.$$escapeHtml(dataData21.classes) + '"' : '') + '>' + soy.$$filterNoAutoescape(dataData21.markup) + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table></div></div> <!-- .table-container --><div class="data-footer"><p class="numbers">' + soy.$$filterNoAutoescape(AJS.format('Showing {0} of {1} statistics.','<strong>' + opt_data.visibleContentRows + '</strong>','<a href="' + opt_data.filterUrl + '" title="' + opt_data.filterTitle + '">' + '<strong>' + opt_data.totalRows + '</strong></a>')) + ((opt_data.showMore) ? ' <a class="content-control-link" data-more="false">' + soy.$$escapeHtml('Show less') + '</a>' : (opt_data.visibleContentRows < opt_data.totalRows) ? ' <a class="content-control-link" data-more="true">' + soy.$$escapeHtml('Show more') + '</a>' : '') + '</p><p class="grouped-by">' + soy.$$escapeHtml(AJS.format('Grouped by: {0}',opt_data.xHeading)) + '</p></div></div> <!-- .two-d-container -->';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.TwoDimensionalStats.Templates.Table.soyTemplateName = 'JIRA.DashboardItem.TwoDimensionalStats.Templates.Table';
}


JIRA.DashboardItem.TwoDimensionalStats.Templates.Form = function(opt_data, opt_ignored) {
  return '<div class="two-d-container">' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.Common.Config.Templates.filterPicker({prefix: opt_data.prefix, id: 'filterId'}) + aui.form.selectField({id: opt_data.prefix + 'xstattype', name: 'xstattype', labelContent: 'XAxis', isRequired: true, options: opt_data.fields.statTypeOptions, value: opt_data.preferences.xstattype}) + aui.form.selectField({id: opt_data.prefix + 'ystattype', name: 'ystattype', labelContent: 'YAxis', isRequired: true, options: opt_data.fields.statTypeOptions, value: opt_data.preferences.ystattype}) + aui.form.selectField({id: opt_data.prefix + 'sortBy', name: 'sortBy', labelContent: 'Sort By', isRequired: true, options: opt_data.fields.sortByOptions, value: '' + opt_data.preferences.sortBy, descriptionContent: 'Sort by row total or natural field order.'}) + aui.form.selectField({id: opt_data.prefix + 'sortDirection', name: 'sortDirection', labelContent: 'Sort Direction', isRequired: true, options: opt_data.fields.sortDirectionOptions, value: opt_data.preferences.sortDirection}) + aui.form.textField({id: opt_data.prefix + 'numberToShow', name: 'numberToShow', labelContent: 'Number of Results', isRequired: true, value: opt_data.preferences.numberToShow, descriptionContent: 'Number of results to display.'}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured}) + '</div> <!-- .two-d-container -->';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.TwoDimensionalStats.Templates.Form.soyTemplateName = 'JIRA.DashboardItem.TwoDimensionalStats.Templates.Form';
}


JIRA.DashboardItem.TwoDimensionalStats.Templates.EmptyResultMessage = function(opt_data, opt_ignored) {
  var output = '<div class="two-d-container"><div class="empty-results search-results-dashboard-item">';
  var filterLink__soy112 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '">';
  output += soy.$$filterNoAutoescape(AJS.format('No matching {0}issues{1} found.',filterLink__soy112,'</a>')) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.TwoDimensionalStats.Templates.EmptyResultMessage.soyTemplateName = 'JIRA.DashboardItem.TwoDimensionalStats.Templates.EmptyResultMessage';
}


JIRA.DashboardItem.TwoDimensionalStats.Templates.ServerErrorMessage = function(opt_data, opt_ignored) {
  var output = '<div class="two-d-container">';
  var filterLink__soy121 = '<a href="' + soy.$$escapeHtml("") + '/issues/?filter=' + soy.$$escapeHtml(opt_data.filterId) + '">';
  output += aui.message.error({content: '<p>' + soy.$$filterNoAutoescape(AJS.format('The filter configured for this gadget could not be retrieved. Please verify it is still valid on the {0}issue navigator{1}.',filterLink__soy121,'</a>')) + '</p>'}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.TwoDimensionalStats.Templates.ServerErrorMessage.soyTemplateName = 'JIRA.DashboardItem.TwoDimensionalStats.Templates.ServerErrorMessage';
}
;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--37ccb8d673', location = 'aui.chunk.4b05cf846e0e94d77dfd--5d9e973ef896189af966.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--37ccb8d673"],{D3y7:function(e,i,a){var n,o;void 0===(o="function"==typeof(n=["jquery","./data","./disable-selection","./focusable","./form","./ie","./keycode","./labels","./jquery-1-7","./plugin","./safe-active-element","./safe-blur","./scroll-parent","./tabbable","./unique-id","./version"])?n.call(i,a,i,e):n)||(e.exports=o)}}]);
//# sourceMappingURL=aui.chunk.4b05cf846e0e94d77dfd--5d9e973ef896189af966.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.16f099a0da', location = 'aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.16f099a0da"],{jJ4L:function(i,n,o){"use strict";o("FStl"),o("Q0fs"),o("oTK+"),o("S3ao"),o("HNID"),o("YQ7q"),o("xjlV")},xjlV:function(i,n,o){}}]);
//# sourceMappingURL=aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.restful-table', location = 'aui.chunk.7cfb006e493d8523a32c--d5a44e16a3b7bfa2e178.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.restful-table"],{"47Al":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=u(s("+x/D"));s("lyon");var a=u(s("qT0E")),o=u(s("vRZA")),r=u(s("oLrn")),l=u(s("HOn5")),d=(u(s("HH5i")),s("t6J+"));function u(e){return e&&e.__esModule?e:{default:e}}var c=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");t.default=a.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(e){var t=this;this.$el=(0,n.default)(this.el),this._event=l.default,this.classNames=o.default,this.dataKeys=r.default,this.columns=e.columns,this.isCreateRow=e.isCreateRow,this.allowReorder=e.allowReorder,this.events["click ."+this.classNames.CANCEL]="_cancel",this.delegateEvents(),e.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=e.model,this.model=new this._modelClass),this.fieldFocusSelector=e.fieldFocusSelector,this.on(this._event.CANCEL,function(){return t.disabled=!0}).on(this._event.SAVE,function(e){return!t.disabled&&t.submit(e)}).on(this._event.FOCUS,function(e){return t.focus(e)}).on(this._event.BLUR,function(){t.$el.removeClass(t.classNames.FOCUSED),t.disable()}).on(this._event.SUBMIT_STARTED,function(){return t._submitStarted()}).on(this._event.SUBMIT_FINISHED,function(){return t._submitFinished()})},defaultColumnRenderer:function(e){return!1!==e.allowEdit?(0,n.default)("<input type='text' />").addClass("text").attr({name:e.name,value:e.value}):e.value?document.createTextNode(e.value):void 0},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(e){27===e.keyCode&&this.trigger(this._event.CANCEL)},_cancel:function(e){return this.trigger(this._event.CANCEL),e.preventDefault(),this},_submitStarted:function(){return this.submitting=!0,this.showLoading().disable().delegateEvents({}),this},_submitFinished:function(){return this.submitting=!1,this.hideLoading().enable().delegateEvents(this.events),this},_focus:function(e){return this.hasFocus()||this.trigger(this._event.FOCUS,e.target.name),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(e){var t,s;return this.enable(),t=e?this.$el.find(this.fieldFocusSelector(e)):0===(s=this.$el.find(this.classNames.ERROR+":first")).length?this.$el.find(":input:text:first"):s.parent().find(":input"),this.$el.addClass(this.classNames.FOCUSED),t.focus().trigger("select"),this},disable:function(){var e,t;return c&&(t=this.$el.find(":submit")).length&&(e=(0,n.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(t.attr("class")).val(t.val()).data(this.dataKeys.ENABLED_SUBMIT,t),t.replaceWith(e)),this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled"),this},enable:function(){var e,t;return c&&(t=(e=this.$el.find(this.classNames.SUBMIT)).data(this.dataKeys.ENABLED_SUBMIT))&&e.length&&e.replaceWith(t),this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled"),this},showLoading:function(){return(0,d.appendStatusSpinner)(this.$el),this},hideLoading:function(){return(0,d.removeStatusSpinner)(this.$el),this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var e=this.$el;return e.serializeObject?e.serializeObject():e.serialize()},mapSubmitParams:function(e){return this.model.changedAttributes(e)},submit:function(e){var t,s=this;if(document.activeElement!==window&&(0,n.default)(document.activeElement).blur(),this.isUpdateMode){if(!(t=this.mapSubmitParams(this.serializeObject())))return s.trigger(s._event.CANCEL)}else this.model.clear(),t=this.mapSubmitParams(this.serializeObject());return this.trigger(this._event.SUBMIT_STARTED),this.model.save(t,{success:function(){s.isUpdateMode?s.trigger(s._event.UPDATED,s.model,e):(s.trigger(s._event.CREATED,s.model.toJSON()),s.model=new s._modelClass,s.render({errors:{},values:{}}),s.trigger(s._event.FOCUS)),s.trigger(s._event.SUBMIT_FINISHED)},error:function(e,t,i){400===i.status&&(s.renderErrors(t.errors),s.trigger(s._event.VALIDATION_ERROR,t.errors)),s.trigger(s._event.SUBMIT_FINISHED)},silent:!0}),this},renderError:function(e,t){return(0,n.default)("<div />").attr("data-field",e).addClass(this.classNames.ERROR).text(t)},renderErrors:function(e){var t=this;return this.$("."+this.classNames.ERROR).remove(),e&&n.default.each(e,function(e,s){t.$el.find("[name='"+e+"']").closest("td").append(t.renderError(e,s))}),this},render:function(e){var t=this;return this.$el.empty(),this.allowReorder&&(0,n.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(t.$el),n.default.each(this.columns,function(s,a){var o,r,l=e.values[a.id],d=[{name:a.id,value:l,allowEdit:a.allowEdit},e.values,t.model];l&&t.$el.attr("data-"+a.id,l),o=t.isCreateRow&&a.createView?new a.createView({model:t.model}).render(d[0]):a.editView?new a.editView({model:t.model}).render(d[0]):t.defaultColumnRenderer.apply(t,d),r=(0,n.default)("<td />"),"object"===(void 0===o?"undefined":i(o))&&o.done?o.done(function(e){r.append(e)}):r.append(o),a.styleClass&&r.addClass(a.styleClass),r.appendTo(t.$el)}),this.$el.append(this.renderOperations(e.update,e.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW),this.trigger(this._event.RENDER,this.$el,e.values),this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]),this},renderOperations:function(e){var t=(0,n.default)('<td class="aui-restfultable-operations" />');return e?t.append((0,n.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,n.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):t.append((0,n.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"})),t.add((0,n.default)('<td class="'+this.classNames.STATUS+'" />'))}}),e.exports=t.default},"5G0d":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=d(s("+x/D")),a=s("anNl"),o=d(s("QFBp")),r=d(s("qT0E")),l=d(s("HOn5"));function d(e){return e&&e.__esModule?e:{default:e}}var u=r.default.Model.extend({sync:function(e,t,s){var i=this,n=s.error;return s.error=function(e){i._serverErrorHandler(e,this),n&&n.apply(this,arguments)},r.default.sync.apply(r.default,arguments)},save:function(e,t){var s,i=this,a=(t=t||{}).error,o=t.success;t.error=function(e,t){var s=n.default.parseJSON(t.responseText||t.data);a&&a.call(i,i,s,t)},this.isNew()?r.default.Model.prototype.save.call(this,e,t):e&&((s=new(u.extend({url:this.url()}))({id:this.id})).save=r.default.Model.prototype.save,t.success=function(e,t){i.clear().set(e.toJSON()),o&&o.call(i,i,t)},s.save(e,t))},destroy:function(e){e=e||{};var t=this,s=this.url();return n.default.ajax({url:s,type:"DELETE",dataType:"json",data:e.data||{},contentType:"application/json",success:function(s){t.collection&&t.collection.remove(t),e.success&&e.success.call(t,s)},error:function(s){t._serverErrorHandler(s,this),e.error&&e.error.call(t,s)}}),this},changedAttributes:function(e){var t={},s=this.toJSON();if(n.default.each(e,function(e,a){s[e]?s[e]&&s[e]!==a&&("object"===(void 0===a?"undefined":i(a))&&o.default.isEqual(a,s[e])||(t[e]=a)):"string"==typeof a?""!==n.default.trim(a)&&(t[e]=a):n.default.isArray(a)?0!==a.length&&(t[e]=a):t[e]=a}),!o.default.isEmpty(t))return this.addExpand(t),t},addExpand:function(e){},_serverErrorHandler:function(e,t){var s;400!==e.status&&(s=n.default.parseJSON(e.responseText||e.data),(0,a.triggerEvtForInst)(l.default.SERVER_ERROR,this,[s,e,t]))},fetch:function(e){e=e||{},this.clear(),r.default.Model.prototype.fetch.call(this,e)}});t.default=u,e.exports=t.default},"6kG1":function(e,t,s){},G3cN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestfulTable=void 0;var i=s("JSE0");Object.defineProperty(t,"RestfulTable",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(i).default}}),s("jJ4L"),s("6kG1")},HOn5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"},e.exports=t.default},JSE0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=R(s("+x/D"));s("D3y7"),s("yIBB"),s("XPYc"),s("z+ct"),s("xTPO");var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s("JFi+")),a=R(s("qT0E")),o=R(s("vRZA")),r=R(s("fW/A")),l=R(s("i/Md")),d=R(s("t8cq")),u=R(s("oLrn")),c=R(s("47Al")),h=R(s("5G0d")),f=s("anNl"),p=R(s("HOn5")),m=R(s("KloK")),v=R(s("xqHC")),E=(R(s("HH5i")),s("t6J+"));function R(e){return e&&e.__esModule?e:{default:e}}var _=a.default.View.extend({initialize:function(e){var t=this;if(t.options=i.default.extend(!0,t._getDefaultOptions(e),e),t.id=this.options.id,t._event=p.default,t.classNames=o.default,t.dataKeys=u.default,this.$table=(0,i.default)(e.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui"),this.$table.wrapAll("<form class='aui' action='#' />"),this.$thead=(0,i.default)("<thead/>"),this.$theadRow=(0,i.default)("<tr />").appendTo(this.$thead),this.$tbody=(0,i.default)("<tbody/>"),!this.$table.length)throw new Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw new Error("RestfulTable: Init failed! You haven't provided any columns to render.");if(this.options.deleteConfirmationCallback&&!(this.options.deleteConfirmationCallback instanceof Function))throw new Error("RestfulTable: Init failed! deleteConfirmationCallback is not a function");this.showGlobalLoading(),this.options.columns.forEach(function(e){var s=i.default.isFunction(e.header)?e.header():e.header;void 0===s&&(n.warn("You have not specified [header] for column ["+e.id+"]. Using id for now..."),s=e.id),t.$theadRow.append("<th>"+s+"</th>")}),t.$theadRow.append("<th></th><th></th>"),this._models=this._createCollection(),this._rowClass=this.options.views.row,this.editRows=[],this.$table.closest("form").submit(function(e){t.focusedRow&&t.focusedRow.trigger(t._event.SAVE),e.preventDefault()}),this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(e,s){var n=(0,i.default)("<div/>").attr("class",s.attr("class")).addClass(t.classNames.MOVEABLE);return s.children().each(function(){var e=(0,i.default)(this),t=parseInt(0+e.css("border-left-width"),10),s=parseInt(0+e.css("border-right-width"),10),a=e[0].clientWidth+t+s;n.append((0,i.default)("<div/>").html(e.html()).attr("class",e.attr("class")).width(a))}),n=(0,i.default)("<div class='aui-restfultable-readonly'/>").append(n),n.css({left:s.offset().left}),n.appendTo(document.body),n},start:function(e,s){var n=s.helper[0].clientHeight,a=s.placeholder.find("td");s.item.addClass(t.classNames.MOVEABLE).children().each(function(e){(0,i.default)(this).width(a.eq(e).width())});var o='<td colspan="'+t.getColumnCount()+'">&nbsp;</td>';s.placeholder.html(o).css({height:n,visibility:"visible"}),t.getRowFromElement(s.item[0]).trigger(t._event.MODAL)},stop:function(e,s){(0,i.default)(s.item[0]).is(":visible")&&(s.item.removeClass(t.classNames.MOVEABLE).children().attr("style",""),s.placeholder.removeClass(t.classNames.ROW),t.getRowFromElement(s.item[0]).trigger(t._event.MODELESS))},update:function(e,s){var i={row:t.getRowFromElement(s.item[0]),item:s.item,nextItem:s.item.next(),prevItem:s.item.prev()};t.move(i)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3}),this.$tbody.on("selectstart mousedown",function(e){return!(0,i.default)(e.target).is("."+t.classNames.DRAG_HANDLE)})),!1!==this.options.allowCreate&&(this._createRow=new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return t.options.resources.self}}),cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector}),this._createRow.on(this._event.CREATED,function(e){void 0===t.options.addPosition&&"bottom"===t.options.createPosition||"bottom"===t.options.addPosition?t.addRow(e):t.addRow(e,0)}),this._createRow.on(this._event.VALIDATION_ERROR,function(){this.trigger(t._event.FOCUS)}),this._createRow.render({errors:{},values:{}}),this.$create=(0,i.default)('<tbody class="'+this.classNames.CREATE+'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS)),this._models.on("remove",function(e){t.getRows().forEach(function(s){s.model===e&&(s.hasFocus()&&t._createRow&&t._createRow.trigger(t._event.FOCUS),t.removeRow(s))})}),this.fetchInitialResources()},fetchInitialResources:function(){var e=this;i.default.isFunction(this.options.resources.all)?this.options.resources.all(function(t){e.populate(t)}):i.default.get(this.options.resources.all,function(t){e.populate(t)})},move:function(e){var t=this,s=function(e){return e.length?{after:t.getRowFromElement(e).model.url()}:{position:"First"}};if(e.row){var n=t.options.reverseOrder?s(e.nextItem):s(e.prevItem);i.default.ajax({url:e.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n),complete:function(){e.row.hideLoading()},success:function(e){(0,f.triggerEvtForInst)(t._event.REORDER_SUCCESS,t,[e])},error:function(e){var s=i.default.parseJSON(e.responseText||e.data);(0,f.triggerEvtForInst)(t._event.SERVER_ERROR,t,[s,e,this])}}),e.row.showLoading()}},_createCollection:function(){var e=this;return new(this.options.Collection.extend({sort:function(t){if(t||(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.tableRows=e.getRows(),this.models=this.sortBy(this.comparator,this),this.tableRows=void 0,t.silent||this.trigger("refresh",this,t),this},remove:function(){this.tableRows=e.getRows();for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];return a.default.Collection.prototype.remove.apply(this,s),this.tableRows=void 0,this}}))([],{comparator:function(t){var s;return(this&&void 0!==this.tableRows?this.tableRows:e.getRows()).some(function(e,i){if(e.model.id===t.id)return s=i,!0}),s}})},populate:function(e){this.options.reverseOrder&&e.reverse(),this.hideGlobalLoading(),e&&e.length?(this._models.reset([],{silent:!0}),this.renderRows(e),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg(),this.$table.append(this.$thead),"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):this.$table.append(this.$create).append(this.$tbody),this.$table.trigger(this._event.INITIALIZED,[this]),(0,f.triggerEvtForInst)(this._event.INITIALIZED,this,[this]),this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){return this.$loading||(this.$loading=(0,i.default)('<div class="aui-restfultable-init"><span class="aui-restfultable-loading">'+E.spinner+this.options.loadingMsg+"</span></div>")),this.$loading.is(":visible")||this.$loading.insertAfter(this.$table),this},hideGlobalLoading:function(){return this.$loading&&this.$loading.remove(),this},addRow:function(e,t){var s,i;if(!e.id)throw new Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(e));return i=new this.options.model(e),s=this._renderRow(i,t),this._models.add(i),this.removeNoEntriesMsg(),(0,f.triggerEvtForInst)(this._event.ROW_ADDED,this,[s,this]),this},removeRow:function(e){this._models.remove(e.model),e.remove(),this.isEmpty()&&this.showNoEntriesMsg(),(0,f.triggerEvtForInst)(this._event.ROW_REMOVED,this,[e,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var e=2;return this.allowReorder&&++e,this.options.columns.length+e},getRowFromElement:function(e){return(0,i.default)(e).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){return this.$noEntries&&this.$noEntries.remove(),this.$noEntries=(0,i.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,i.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody),this},removeNoEntriesMsg:function(){return this.$noEntries&&this._models.length>0&&this.$noEntries.remove(),this},getRows:function(){var e=this,t=[];return this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var s=(0,i.default)(this).data(e.dataKeys.ROW_VIEW);s&&t.push(s)}),t},_renderRow:function(e,t){var s,i,n=this,a=this.$tbody.find("."+this.classNames.READ_ONLY);return i=new this._rowClass({model:e,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmationCallback:this.options.deleteConfirmationCallback}),this.removeNoEntriesMsg(),i.on(this._event.ROW_EDIT,function(e){(0,f.triggerEvtForInst)(this._event.EDIT_ROW,{},[this,n]),n.edit(this,e)}),s=i.render().$el,-1!==t&&("number"==typeof t&&0!==a.length?s.insertBefore(a[t]):this.$tbody.append(s)),s.data(this.dataKeys.ROW_VIEW,i),i.on(this._event.MODAL,function(){n.$table.removeClass(n.classNames.ALLOW_HOVER),n.$tbody.sortable("disable"),n.getRows().forEach(function(e){n.isRowBeingEdited(e)||e.delegateEvents({})})}),i.on(this._event.MODELESS,function(){n.$table.addClass(n.classNames.ALLOW_HOVER),n.$tbody.sortable("enable"),n.getRows().forEach(function(e){n.isRowBeingEdited(e)||e.delegateEvents()})}),this._applyFocusCoordinator(i),this.trigger(this._event.ROW_INITIALIZED,i),i},isRowBeingEdited:function(e){var t=!1;return this.editRows.some(function(s){if(s.el===e.el)return t=!0,!0}),t},_applyFocusCoordinator:function(e){var t=this;return e.hasFocusBound||(e.hasFocusBound=!0,e.on(this._event.FOCUS,function(){t.focusedRow&&t.focusedRow!==e&&t.focusedRow.trigger(t._event.BLUR),t.focusedRow=e,e instanceof v.default&&t._createRow&&t._createRow.enable()})),this},_removeEditRow:function(e){var t=i.default.inArray(e,this.editRows);return this.editRows.splice(t,1),this},_shiftFocusAfterEdit:function(){return this.editRows.length>0?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS),this},_saveEditRowOnBlur:function(){return this.editRows.length<=1},dismissEditRows:function(){this.editRows.forEach(function(e){e.hasUpdates()||e.trigger(this._event.FINISHED_EDITING)},this)},edit:function(e,t){var s=this,i=new this.options.views.editRow({el:e.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector,model:e.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),n=e.model.toJSON();return n.update=!0,i.render({errors:{},update:!0,values:n}).on(s._event.UPDATED,function(t,i){s._removeEditRow(this),this.off(),e.render().delegateEvents(),e.trigger(s._event.UPDATED),!1!==i&&s._shiftFocusAfterEdit()}).on(s._event.VALIDATION_ERROR,function(){this.trigger(s._event.FOCUS)}).on(s._event.FINISHED_EDITING,function(){s._removeEditRow(this),e.render().delegateEvents(),this.off()}).on(s._event.CANCEL,function(){s._removeEditRow(this),this.off(),e.render().delegateEvents(),s._shiftFocusAfterEdit()}).on(s._event.BLUR,function(){s.dismissEditRows(),s._saveEditRowOnBlur()&&this.trigger(s._event.SAVE,!1)}),this._applyFocusCoordinator(i),i.trigger(s._event.FOCUS,t),s._createRow&&s._createRow.disable(),this.editRows.push(i),i},renderRows:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=this._models.comparator,i=[];this._models.comparator=void 0;var n=t.map(function(t){var s=new e.options.model(t);return i.push(e._renderRow(s,-1).el),s});return this._models.add(n,{silent:!0}),this._models.comparator=s,this.removeNoEntriesMsg(),this.$tbody.append(i),this},_getDefaultOptions:function(e){return{model:e.model||h.default,allowEdit:!0,views:{editRow:c.default,row:v.default},Collection:a.default.Collection.extend({url:e.resources.self,model:e.model||h.default}),allowReorder:!1,fieldFocusSelector:function(e){return":input[name="+e+"], #"+e},loadingMsg:e.loadingMsg||"Loading"}}});_.ClassNames=o.default,_.CustomCreateView=r.default,_.CustomEditView=l.default,_.CustomReadView=d.default,_.DataKeys=u.default,_.EditRow=c.default,_.EntryModel=h.default,_.Events=p.default,_.Row=v.default,(0,m.default)("RestfulTable",_),t.default=_,e.exports=t.default},anNl:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerEvtForInst=t.triggerEvt=t.bindEvt=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(s("+x/D"));var n=document||{},a=(0,i.default)(n);function o(e,t){a.trigger(e,t)}t.bindEvt=function(e,t){a.bind(e,t)},t.triggerEvt=o,t.triggerEvtForInst=function(e,t,s){(0,i.default)(t).trigger(e,s),o(e,s),t.id&&o(t.id+"-"+e,s)}},"fW/A":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(s("qT0E"));t.default=i.default.View,e.exports=t.default},"i/Md":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(s("qT0E"));t.default=i.default.View,e.exports=t.default},lyon:function(e,t){jQuery.fn.serializeObject=function(){var e={};return this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),e[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)}),this.find("input:radio:checked").each(function(){e[this.name]=this.value}),this.find("select[multiple]").each(function(){var t=jQuery(this),s=t.val();t.data("aui-ss")?e[this.name]=s?s[0]:"":e[this.name]=null!==s?s:[]}),e}},oLrn:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"},e.exports=t.default},"t6J+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spinner=void 0,t.appendStatusSpinner=function(e){0===e.find(a).length&&e.find("."+i.default.STATUS).append(n)},t.removeStatusSpinner=function(e){e.find("."+i.default.STATUS+" "+a).remove()},s("tYoR");var i=function(e){return e&&e.__esModule?e:{default:e}}(s("vRZA"));var n=t.spinner='<aui-spinner size="small"></aui-spinner>',a="aui-spinner"},t8cq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(s("qT0E"));t.default=i.default.View,e.exports=t.default},vRZA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",STATUS:"aui-restfultable-status"},e.exports=t.default},xqHC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(s("+x/D")),n=d(s("qT0E")),a=d(s("vRZA")),o=d(s("oLrn")),r=d(s("HOn5")),l=s("t6J+");function d(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(e){var t=this;if(e=e||{},this._event=r.default,this.classNames=a.default,this.dataKeys=o.default,this.columns=e.columns,this.allowEdit=e.allowEdit,this.allowDelete=e.allowDelete,!this.events["click .aui-restfultable-editable"])throw new Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");this.index=e.index||0,this.deleteConfirmationCallback=e.deleteConfirmationCallback,this.allowReorder=e.allowReorder,this.$el=(0,i.default)(this.el),this.on(this._event.CANCEL,function(){return t.disabled=!0}).on(this._event.FOCUS,function(e){return t.focus(e)}).on(this._event.BLUR,function(){return t.unfocus()}).on(this._event.MODAL,function(){return t.$el.addClass(t.classNames.ACTIVE)}).on(this._event.MODELESS,function(){return t.$el.removeClass(t.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(e){if(e.value)return document.createTextNode(e.value.toString())},sync:function(e){var t=this;return this.model.addExpand(e),this.showLoading(),this.model.save(e,{success:function(){t.hideLoading().render(),t.trigger(t._event.UPDATED)},error:function(){t.hideLoading()}}),this},refresh:function(e,t){var s=this;return this.showLoading(),this.model.fetch({success:function(){s.hideLoading().render(),e&&e.apply(this,arguments)},error:function(){s.hideLoading(),t&&t.apply(this,arguments)}}),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){return(0,i.default)(this.el).addClass(this.classNames.FOCUSED),this},unfocus:function(){return(0,i.default)(this.el).removeClass(this.classNames.FOCUSED),this},showLoading:function(){return(0,l.appendStatusSpinner)(this.$el),this},hideLoading:function(){return(0,l.removeStatusSpinner)(this.$el),this},edit:function(e){var t;return t=(0,i.default)(e.target).is("."+this.classNames.EDITABLE)?(0,i.default)(e.target).attr("data-field-name"):(0,i.default)(e.target).closest("."+this.classNames.EDITABLE).attr("data-field-name"),this.trigger(this._event.ROW_EDIT,t),this},renderOperations:function(){var e=this;if(!1!==this.allowDelete)return(0,i.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(t){t.preventDefault(),e.destroy()})},destroy:function(){var e=this;if(this.deleteConfirmationCallback){var t=this.deleteConfirmationCallback(this.model.toJSON());if(!t||!t.then)throw new Error("deleteConfirmationCallback needs to return a Promise");t.then(function(){return e.model.destroy()},function(){})}else this.model.destroy()},render:function(){var e=this,t=this.model.toJSON(),s=(0,i.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},t)),n=(0,i.default)('<td class="'+this.classNames.STATUS+'" />');return this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty(),this.allowReorder&&(0,i.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(e.$el),this.$el.attr("data-id",this.model.id),i.default.each(this.columns,function(s,n){var a,o=(0,i.default)("<td />"),r=t[n.id],l=n.fieldName||n.id,d=[{name:l,value:r,allowEdit:n.allowEdit},t,e.model];if(r&&e.$el.attr("data-"+n.id,r),a=n.readView?new n.readView({model:e.model}).render(d[0]):e.defaultColumnRenderer.apply(e,d),!1!==e.allowEdit&&!1!==n.allowEdit){var u=(0,i.default)("<span />").addClass(e.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(a).attr("data-field-name",l);o=(0,i.default)("<td />").append(u).appendTo(e.$el),a&&i.default.trim(a)||(o.addClass(e.classNames.NO_VALUE),u.html((0,i.default)("<em />").text(this.emptyText||"Enter value")))}else o.append(a);n.styleClass&&o.addClass(n.styleClass),o.appendTo(e.$el)}),this.$el.append(s).append(n).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY),this.trigger(this._event.RENDER,this.$el,t),this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]),this}}),e.exports=t.default}},[["G3cN","runtime","aui.splitchunk.vendors--1df5b34e16","aui.splitchunk.vendors--95c789edf5","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--20e849aab3","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--6ce18a1d80","aui.splitchunk.vendors--37ccb8d673","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.54d3f16c20","aui.splitchunk.336ae4f9e7","aui.splitchunk.1659111a3c","aui.splitchunk.1df5b34e16","aui.splitchunk.fb15cffa72","aui.splitchunk.9c48cc20a9","aui.splitchunk.cd8d39be78","aui.splitchunk.ed80e00f15","aui.splitchunk.ed86a19e01","aui.splitchunk.53839a15cf","aui.splitchunk.b2ecdd4179","aui.splitchunk.20e849aab3","aui.splitchunk.16f099a0da"]]]);
//# sourceMappingURL=aui.chunk.7cfb006e493d8523a32c--d5a44e16a3b7bfa2e178.js.map;
;
/* module-key = 'jira.webresources:aui-restfultable-amd-shim', location = '/static/lib/amd-shims/aui-restfultable-amd.js' */
define("aui/restful-table",function(){return AJS.RestfulTable});;
;
/* module-key = 'com.atlassian.jira.gadgets:column-picker-component', location = 'static/components/columnpicker/ColumnPicker.soy' */
// This file was automatically generated from ColumnPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Common.Config.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Common == 'undefined') { JIRA.DashboardItem.Common = {}; }
if (typeof JIRA.DashboardItem.Common.Config == 'undefined') { JIRA.DashboardItem.Common.Config = {}; }
if (typeof JIRA.DashboardItem.Common.Config.Templates == 'undefined') { JIRA.DashboardItem.Common.Config.Templates = {}; }


JIRA.DashboardItem.Common.Config.Templates.columnPicker = function(opt_data, opt_ignored) {
  var output = '';
  var tableId__soy3 = opt_data.id + '-table';
  var selectId__soy4 = opt_data.id + '-select';
  var prefixedTableId__soy5 = opt_data.prefix + tableId__soy3;
  var prefixedSelectId__soy6 = opt_data.prefix + selectId__soy4;
  output += '<div class="field-group ' + soy.$$escapeHtml(tableId__soy3) + '"><label for="' + soy.$$escapeHtml(prefixedTableId__soy5) + '">' + soy.$$escapeHtml('Columns to display') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><table class="column-picker-order" id="' + soy.$$escapeHtml(prefixedTableId__soy5) + '"></table><div class="description">' + soy.$$escapeHtml('Drag-drop to reorder the fields.') + '</div><div class="error">' + soy.$$escapeHtml('You must select at least one field.') + '</div></div><div class="field-group ' + soy.$$escapeHtml(selectId__soy4) + '"><select class="select" id="' + soy.$$escapeHtml(prefixedSelectId__soy6) + '" name="' + soy.$$escapeHtml(opt_data.id) + '"></select><div class="description">' + soy.$$escapeHtml('Add fields to the list above by selecting them.') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.Config.Templates.columnPicker.soyTemplateName = 'JIRA.DashboardItem.Common.Config.Templates.columnPicker';
}


JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton = function(opt_data, opt_ignored) {
  return '<button class="aui-button aui-button-subtle"><span class="aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('Delete') + '</span></button>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton.soyTemplateName = 'JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:column-picker-component', location = 'static/components/columnpicker/ColumnPicker.js' */
define("jira-dashboard-items/components/column-picker",["aui/restful-table","aui/message","jira/util/formatter","jira/ajs/list/item-descriptor","wrm/context-path","underscore","jquery","jira/ajs/ajax/smart-ajax","jira/ajs/select/single-select"],function(e,t,n,a,l,o,i,r,s){"use strict";var d=function(e,a){i(e).empty(),t.error(e,{title:"Error",body:"<p>"+r.buildSimpleErrorContent(a)+"</p>",closeable:!1}),i(e).show()},u=function(t){var n=e.EntryModel.extend({destroy:function(){this.collection.remove(this)}}),a=e.Row.extend({initialize:function(t){t=o.extend({},t,{allowReorder:!0}),e.Row.prototype.initialize.call(this,t)},renderOperations:function(){return i(JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton()).click(o.bind(function(e){e.preventDefault(),this.destroy()},this))}}),l=new e({el:t,allowReorder:!1,allowEdit:!1,allowCreate:!1,autoFocus:!1,model:n,resources:{all:function(e){e([])}},columns:[{id:"label",header:""}],views:{row:a}});return l.$thead.detach(),l.$theadRow.prepend("<th />"),l.$tbody.sortable({handle:"."+l.classNames.DRAG_HANDLE,helper:function(e,t){var n=i("<div/>").addClass(l.classNames.MOVEABLE+" "+t.attr("class"));return t.children().each(function(e){var t=i(this),a=parseInt(0+t.css("border-left-width"),10),l=parseInt(0+t.css("border-right-width"),10),o=t[0].clientWidth+a+l;n.append(i("<div/>").html(t.html()).addClass(t.attr("class")).width(o))}),n=i("<div class='aui-restfultable-readonly'/>").append(n),n.css({left:t.offset().left}),n.appendTo(document.body),n},start:function(e,t){var n=t.helper[0].clientHeight,a=t.placeholder.find("td");t.item.addClass(l.classNames.MOVEABLE).children().each(function(e){i(this).width(a.eq(e).width())});var o='<td colspan="'+l.getColumnCount()+'">&nbsp;</td>';t.placeholder.html(o).css({height:n,visibility:"visible"}),l.getRowFromElement(t.item[0]).trigger(l._event.MODAL)},stop:function(e,t){i(t.item[0]).is(":visible")&&(t.item.removeClass(l.classNames.MOVEABLE).children().attr("style",""),t.placeholder.removeClass(l.classNames.ROW),l.getRowFromElement(t.item[0]).trigger(l._event.MODELESS))},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3}),l.$tbody.bind("selectstart mousedown",function(e){return!i(e.target).is("."+l.classNames.DRAG_HANDLE)}),l},c=function(e,t){var n=e.errorContainer,i=e.columnNames,u=[];r.makeRequest({url:l()+"/rest/gadget/1.0/availableColumns",method:"GET",success:function(e){if(e.availableColumns&&e.availableColumns.length&&o.each(e.availableColumns,function(e){u.push(new a(e))}),"--Default--"===i)o.each(e.defaultColumns,function(e){t.addRow({id:e.value,label:e.label})});else{var n=i.split("|");o.each(n,function(e){var n=o.find(u,function(t){return t.value()===e});n&&t.addRow({id:n.value(),label:n.label()})})}c.enable()},error:function(e){d(n,e)},complete:function(){e.onContentLoaded&&e.onContentLoaded()}});var c=new s({element:e.fieldElement,itemAttrDisplayed:"label",revertOnInvalid:!0,submitInputVal:!1,showDropdownButton:!0,suggestions:function(e){return o.filter(u,function(n){var a=t._models.get(n.value()),l=n.label().toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1;return!a&&l})}});return c.disable(),c.model.$element.on("selected",function(n,a){c.clear(),a.value()&&(t._models.get(a.value())||(t.addRow({id:a.value(),label:a.label()}),e.onContentLoaded&&e.onContentLoaded()))}),c};return function(){return{init:function(e){var t=this;return this.tableElement=e.tableElement,this.table=u(e.tableElement),this.select=c(e,this.table),this.table.getColumnValues=function(){return o.map(t.table.$table.find("tr"),function(e){return i(e).attr("data-id")})},this},getValue:function(){return this.table.getColumnValues().join("|")},validate:function(){var e=this.tableElement.parents(".field-group").find(".error");return this.table._models.length>0?(e.hide(),!0):(e.show(),!1)}}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'static/components/searchresults/SearchResults.soy' */
// This file was automatically generated from SearchResults.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Common.SearchResults.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Common == 'undefined') { JIRA.DashboardItem.Common = {}; }
if (typeof JIRA.DashboardItem.Common.SearchResults == 'undefined') { JIRA.DashboardItem.Common.SearchResults = {}; }
if (typeof JIRA.DashboardItem.Common.SearchResults.Templates == 'undefined') { JIRA.DashboardItem.Common.SearchResults.Templates = {}; }


JIRA.DashboardItem.Common.SearchResults.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('Error occurred running search.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.errorResult';
}


JIRA.DashboardItem.Common.SearchResults.Templates.noResults = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + soy.$$escapeHtml('Search returned no results.') + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.noResults';
}


JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable = function(opt_data, opt_ignored) {
  return '<div class="results-wrap search-results-dashboard-item"><div class="search-results-dashboard-item-issue-table ' + ((opt_data.pagination == true) ? 'paging-table' : '') + '">' + soy.$$filterNoAutoescape(opt_data.table) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable';
}


JIRA.DashboardItem.Common.SearchResults.Templates.searchLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '" ' + ((opt_data.title) ? 'title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.issueCount) + '</a>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.searchLink.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.searchLink';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'static/components/searchresults/SearchResults.js' */
define("jira-dashboard-items/components/search-results",["jira/fragments/issueActionsFragment","jira/ajs/dropdown/dropdown","wrm/context-path","jquery","underscore","backbone"],function(e,t,a,r,s,n){"use strict";var o=function(e){var t=s.indexOf(e.columnNames,"--Default--");-1!==t&&(e.addDefault=!0,e.columnNames.splice(t,1))};return function(l){function i(s,n,o){var i,u;if(c.empty(),s.table="<div>"+s.table+"</div>",u=r(s.table),u.find("#issuetable").removeAttr("id").addClass("issue-table"),u.find("[id]").removeAttr("id"),s.table=u.html(),0!=s.displayed){var p=s.displayed===s.total;c.append(JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable({pagination:p,table:s.table})),i=c.find(".results-count-link");var h;s.url?h=a()+s.url:m.jql&&(h=a()+"/issues/?jql="+encodeURIComponent(m.jql)),h&&i.replaceWith(JIRA.DashboardItem.Common.SearchResults.Templates.searchLink({href:h,title:s.title,issueCount:i.html()})),r("th.sortable",c).each(function(){this.onclick=null}).click(function(e){e.preventDefault(),c.find(".search-results-dashboard-item-issue-table").addClass("loading"),m.sortBy=r(this).attr("rel"),f.trigger("sorted",{sortBy:m.sortBy})}),r(".pagination a",c).click(function(e){e.preventDefault(),c.find(".search-results-dashboard-item-issue-table").addClass("loading"),m.startIndex=r(this).attr("rel"),d()}),t.create({trigger:".issue-actions-trigger",autoScroll:!1,ajaxOptions:{dataType:"json",cache:!1,formatSuccess:e}}),l.onContentLoaded&&setTimeout(l.onContentLoaded,500)}else l.onEmptyResult?l.onEmptyResult(s,n,o):c.empty().append(JIRA.DashboardItem.Common.SearchResults.Templates.noResults())}function d(){return r.ajax({url:u,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",data:r.extend({},p,{sortBy:m.sortBy&&""!==m.sortBy?m.sortBy:"",startIndex:m.startIndex?m.startIndex:0}),error:function(e,t,a){l.onError?l.onError(e,t,a):c.empty().append(JIRA.DashboardItem.Common.SearchResults.Templates.errorResult())},success:i,complete:l.onContentLoaded})}var u,c=l.context,m=l.preferences,p={num:m.num,tableContext:l.tableContext||"jira.table.cols.dashboard",addDefault:!1,columnNames:m.columnNames.split("|"),enableSorting:!0,paging:!0,showActions:!0};o(p);var f=s.extend({render:function(){if(m.filterId)return u=a()+"/rest/gadget/1.0/issueTable/filter",p.filterId=m.filterId,d();if(m.jql)return u=a()+"/rest/gadget/1.0/issueTable/jql",p.jql=m.jql,d();throw new Error("Unable to render search results. filterId or jql are required.")}},n.Events);return f}});;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'static/components/searchresults/SearchResultsConfig.soy' */
// This file was automatically generated from SearchResultsConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Common.SearchResults.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Common == 'undefined') { JIRA.DashboardItem.Common = {}; }
if (typeof JIRA.DashboardItem.Common.SearchResults == 'undefined') { JIRA.DashboardItem.Common.SearchResults = {}; }
if (typeof JIRA.DashboardItem.Common.SearchResults.Templates == 'undefined') { JIRA.DashboardItem.Common.SearchResults.Templates = {}; }


JIRA.DashboardItem.Common.SearchResults.Templates.config = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({isConfigured: opt_data.preferences.isConfigured, fields: '<fieldset>' + JIRA.DashboardItem.Common.SearchResults.Templates.numberResults({prefix: opt_data.prefix, id: 'number-results', value: opt_data.preferences.num}) + JIRA.DashboardItem.Common.Config.Templates.columnPicker({prefix: opt_data.prefix, id: 'fields-to-display'}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}) + '</fieldset>'});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.config.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.config';
}


JIRA.DashboardItem.Common.SearchResults.Templates.numberResults = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy20 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group ' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(prefixedId__soy20) + '">' + soy.$$escapeHtml('Number of Results') + '<span class="aui-icon icon-required"> ' + soy.$$escapeHtml('required') + '</span></label><input class="text" type="text" id="' + soy.$$escapeHtml(prefixedId__soy20) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" value="' + soy.$$escapeHtml(opt_data.value) + '"><div class="error">' + soy.$$escapeHtml('The value must be an integer greater than 0 and less than or equal to 50') + '</div><div class="description">' + soy.$$escapeHtml('Number of results to display (maximum of 50).') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Common.SearchResults.Templates.numberResults.soyTemplateName = 'JIRA.DashboardItem.Common.SearchResults.Templates.numberResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'static/components/searchresults/SearchResultsConfig.js' */
define("jira-dashboard-items/components/search-results-config",["jira-dashboard-items/components/column-picker","jquery","underscore"],function(e,n,r){"use strict";return function(t){var i=n(t.context),o=t.preferences;return{renderConfig:function(){function a(){var e=u.find("input[name=number-results]"),n=e.val();return n>0&&n<=50?(e.parents(".field-group").find(".error").hide(),!0):(e.parents(".field-group").find(".error").show(),!1)}function s(){var e=a(),n=f.validate();return e&&n}var d=(Math.random()+1).toString(36).substring(7)+"-";i.empty().html(JIRA.DashboardItem.Common.SearchResults.Templates.config({prefix:d,preferences:{num:o.num,refresh:o.refresh,isConfigured:o.isConfigured}}));var u=i.find("form"),f=(new e).init({errorContainer:i.find(".dashboard-item-error"),tableElement:u.find("#"+d+"fields-to-display-table"),fieldElement:u.find("#"+d+"fields-to-display-select"),columnNames:o.columnNames,onContentLoaded:t.onContentLoaded});return u.on("submit",r.bind(function(e){if(e.preventDefault(),!s())return void t.onContentLoaded();var r=n(e.target);t.onSave({num:r.find("input[name=number-results]").val(),refresh:t.gadgetAPI.getRefreshFieldValue("refresh-interval"),columnNames:f.getValue()})},this)),u.find(".buttons-container .cancel").on("click",r.bind(function(){t.onCancel()},this)),u}}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-results-dashboard-item-resources', location = 'static/dashboarditem/filterresults/FilterResults.soy' */
// This file was automatically generated from FilterResults.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.FilterResults.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.FilterResults == 'undefined') { JIRA.DashboardItem.FilterResults = {}; }
if (typeof JIRA.DashboardItem.FilterResults.Templates == 'undefined') { JIRA.DashboardItem.FilterResults.Templates = {}; }


JIRA.DashboardItem.FilterResults.Templates.filterErrorResult = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy4 = '<a href="' + soy.$$escapeHtml("") + '/issues/?filter=' + soy.$$escapeHtml(opt_data.filterId) + '">';
  output += aui.message.error({content: '<p>' + soy.$$filterNoAutoescape(AJS.format('The filter configured for this gadget could not be retrieved. Please verify it is still valid on the {0}issue navigator{1}.',filterLink__soy4,'</a>')) + '</p>'}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FilterResults.Templates.filterErrorResult.soyTemplateName = 'JIRA.DashboardItem.FilterResults.Templates.filterErrorResult';
}


JIRA.DashboardItem.FilterResults.Templates.noResults = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy19 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '" ' + ((opt_data.title) ? 'title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>';
  output += soy.$$filterNoAutoescape(AJS.format('No matching {0}issues{1} found.',filterLink__soy19,'</a>')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FilterResults.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.FilterResults.Templates.noResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-results-dashboard-item-resources', location = 'static/dashboarditem/filterresults/FilterResults.js' */
define("jira-dashboard-items/filter-results",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/filter-picker","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results"],function(e,t,r,i,s,n,d){"use strict";var a=function(e){this.API=e};return a.prototype.render=function(s,n){var a=this;a.API.showLoadingBar();var o=r.extend({},n);o.filterId=void 0!==o.filterId?o.filterId.replace("filter-",""):o.filterId,this.searchResults=new d({context:s,preferences:o,onContentLoaded:this.API.resize.bind(this.API),onEmptyResult:function(){s.append(JIRA.DashboardItem.FilterResults.Templates.noResults({href:t()+"/issues/?filter="+o.filterId})),a.API.resize()},onError:function(){s.empty().append(JIRA.DashboardItem.FilterResults.Templates.filterErrorResult({filterId:o.filterId})),a.API.resize()}}),this.searchResults.render().done(function(t){t&&t.title&&a.API.setTitle(e.format("Filter Results: {0}",t.title))}).always(this.API.hideLoadingBar.bind(this.API)),this.searchResults.on("sorted",function(e){n.sortBy=e.sortBy,a.API.isEditable()?a.API.savePreferences(n):a.render(s,n)}),a.API.initRefresh(o,i.bind(a.render,a,s,o))},a.prototype.renderEdit=function(e,t){var r=this,i=new n({context:e,preferences:t,onContentLoaded:function(){r.API.hideLoadingBar(),r.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:function(e){if(r.filterPicker.validate()){var t=r.filterPicker.getValue();e.filterId=t.id,r.API.savePreferences(e)}else r.API.resize()},gadgetAPI:r.API}),d=i.renderConfig(),a=r.API.getGadgetId()+"-";d.find("fieldset:first").prepend(JIRA.DashboardItem.Common.Config.Templates.filterPicker({prefix:a,id:"saved-filter"})),this.filterPicker=(new s).init({errorContainer:e.find(".dashboard-item-error"),element:d.find("#"+a+"saved-filter"),selectedValue:void 0!==t.filterId?t.filterId.replace("filter-",""):t.filterId,parentElement:d}),this.API.once("afterRender",function(){e.width()<350&&d.addClass("top-label"),r.API.showLoadingBar()})},a});;
;
/* module-key = 'com.atlassian.jira.gadgets:assigned-to-me-dashboard-item-resources', location = 'static/dashboarditem/assignedtome/AssignedToMe.soy' */
// This file was automatically generated from AssignedToMe.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.AssignedToMe.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.AssignedToMe == 'undefined') { JIRA.DashboardItem.AssignedToMe = {}; }
if (typeof JIRA.DashboardItem.AssignedToMe.Templates == 'undefined') { JIRA.DashboardItem.AssignedToMe.Templates = {}; }


JIRA.DashboardItem.AssignedToMe.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('An unknown error occurred while trying to perform a search.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.AssignedToMe.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.AssignedToMe.Templates.errorResult';
}


JIRA.DashboardItem.AssignedToMe.Templates.noResults = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy12 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '">';
  output += soy.$$filterNoAutoescape(AJS.format('You currently have no {0}issues{1} assigned to you. Enjoy your day!',filterLink__soy12,'</a>')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.AssignedToMe.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.AssignedToMe.Templates.noResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:assigned-to-me-dashboard-item-resources', location = 'static/dashboarditem/assignedtome/AssignedToMe.js' */
define("jira-dashboard-items/assigned-to-me",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results"],function(e,t,s,r,n,o){"use strict";var i=function(e){this.API=e};return i.prototype.render=function(r,n){var i=this;i.API.showLoadingBar(),i.API.setTitle("Assigned to Me");var a=s.extend({},n);a.jql="assignee = currentUser() AND resolution = unresolved ORDER BY priority DESC, created ASC",a.sortColumn&&(a.sortBy=a.sortColumn),this.searchResults=new o({context:r,preferences:a,onContentLoaded:this.API.resize.bind(this.API),onEmptyResult:function(){r.append(JIRA.DashboardItem.AssignedToMe.Templates.noResults({href:t()+"/issues/?jql="+encodeURIComponent(a.jql)})),i.API.resize()},onError:function(){r.empty().append(JIRA.DashboardItem.AssignedToMe.Templates.errorResult()),i.API.resize()}}),this.searchResults.on("sorted",function(e){n.sortBy=n.sortColumn=e.sortBy,i.API.isEditable()?i.API.savePreferences(n):i.render(r,n)}),this.searchResults.render().always(this.API.hideLoadingBar.bind(this.API)),i.API.initRefresh(a,this.searchResults.render)},i.prototype.renderEdit=function(e,t){var s=this,r=new n({context:e,preferences:t,onContentLoaded:function(){s.API.hideLoadingBar(),s.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:this.API.savePreferences.bind(this.API),gadgetAPI:s.API}),o=r.renderConfig();this.API.once("afterRender",function(){e.width()<350&&o.addClass("top-label"),s.API.showLoadingBar()})},i});;
;
/* module-key = 'com.atlassian.jira.gadgets:in-progress-dashboard-item-resources', location = 'static/dashboarditem/inprogress/InProgress.soy' */
// This file was automatically generated from InProgress.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.InProgress.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.InProgress == 'undefined') { JIRA.DashboardItem.InProgress = {}; }
if (typeof JIRA.DashboardItem.InProgress.Templates == 'undefined') { JIRA.DashboardItem.InProgress.Templates = {}; }


JIRA.DashboardItem.InProgress.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('An unknown error occurred while trying to perform a search.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.InProgress.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.InProgress.Templates.errorResult';
}


JIRA.DashboardItem.InProgress.Templates.noResults = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy12 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '">';
  output += soy.$$filterNoAutoescape(AJS.format('You currently have no {0}issues{1} in progress.',filterLink__soy12,'</a>')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.InProgress.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.InProgress.Templates.noResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:in-progress-dashboard-item-resources', location = 'static/dashboarditem/inprogress/InProgress.js' */
define("jira-dashboard-items/in-progress",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results"],function(e,s,t,r,n,i){"use strict";var o=function(e){this.API=e};return o.prototype.render=function(r,n){var o=this;o.API.showLoadingBar(),o.API.setTitle("Issues in progress");var a=t.extend({},n);a.jql="status = 'In Progress' AND resolution is EMPTY AND assignee = currentUser() ORDER BY priority DESC, created ASC",this.searchResults=new i({context:r,preferences:a,onContentLoaded:this.API.resize.bind(this.API),onEmptyResult:function(){r.append(JIRA.DashboardItem.InProgress.Templates.noResults({href:s()+"/issues/?jql="+encodeURIComponent(a.jql)})),o.API.resize()},onError:function(){r.empty().append(JIRA.DashboardItem.InProgress.Templates.errorResult()),o.API.resize()}}),this.searchResults.render().always(this.API.hideLoadingBar.bind(this.API)),this.searchResults.on("sorted",function(e){n.sortBy=e.sortBy,o.API.isEditable()?o.API.savePreferences(n):o.render(r,n)}),o.API.initRefresh(a,this.searchResults.render)},o.prototype.renderEdit=function(e,s){var t=this,r=new n({context:e,preferences:s,onContentLoaded:function(){t.API.hideLoadingBar(),t.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:this.API.savePreferences.bind(this.API),gadgetAPI:t.API}),i=r.renderConfig();this.API.once("afterRender",function(){e.width()<350&&i.addClass("top-label"),t.API.showLoadingBar()})},o});;
;
/* module-key = 'com.atlassian.jira.gadgets:voted-dashboard-item-resources', location = 'static/dashboarditem/voted/Voted.soy' */
// This file was automatically generated from Voted.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Voted.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Voted == 'undefined') { JIRA.DashboardItem.Voted = {}; }
if (typeof JIRA.DashboardItem.Voted.Templates == 'undefined') { JIRA.DashboardItem.Voted.Templates = {}; }


JIRA.DashboardItem.Voted.Templates.extraConfig = function(opt_data, opt_ignored) {
  return '' + aui.form.checkboxField({legendContent: '', fields: opt_data.checkboxes});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Voted.Templates.extraConfig.soyTemplateName = 'JIRA.DashboardItem.Voted.Templates.extraConfig';
}


JIRA.DashboardItem.Voted.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('An unknown error occurred while trying to perform a search.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Voted.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.Voted.Templates.errorResult';
}


JIRA.DashboardItem.Voted.Templates.noResults = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy16 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '">';
  output += soy.$$filterNoAutoescape(AJS.format('You are not currently voting for any {0}issues{1}.',filterLink__soy16,'</a>')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Voted.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.Voted.Templates.noResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:voted-dashboard-item-resources', location = 'static/dashboarditem/voted/Voted.js' */
define("jira-dashboard-items/voted",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results"],function(e,t,s,o,n,r){"use strict";var d=function(e){this.API=e};return d.prototype.render=function(o,n){var d=this;d.API.showLoadingBar(),d.API.setTitle("Voted Issues");var a=s.extend({},n);a.jql=a.showResolved?"issue in votedIssues() order by votes desc":"issue in votedIssues() AND resolution = EMPTY order by votes desc",a.showTotalVotes&&(a.columnNames+="|votes"),this.searchResults=new r({context:o,tableContext:"jira.table.cols.voted",preferences:a,onContentLoaded:this.API.resize.bind(this.API),onEmptyResult:function(){o.append(JIRA.DashboardItem.Voted.Templates.noResults({href:t()+"/issues/?jql="+encodeURIComponent(a.jql)})),d.API.resize()},onError:function(){o.empty().append(JIRA.DashboardItem.Voted.Templates.errorResult()),d.API.resize()}}),this.searchResults.render().always(this.API.hideLoadingBar.bind(this.API)),this.searchResults.on("sorted",function(e){n.sortBy=e.sortBy,d.API.isEditable()?d.API.savePreferences(n):d.render(o,n)}),d.API.initRefresh(a,this.searchResults.render)},d.prototype.renderEdit=function(t,s){var o=this,r=new n({context:t,preferences:s,onContentLoaded:function(){o.API.hideLoadingBar(),o.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:function(e){e.showResolved=t.find("input[name=showResolved]").is(":checked"),e.showTotalVotes=t.find("input[name=showTotalVotes]").is(":checked"),o.API.savePreferences(e)},gadgetAPI:o.API}),d=r.renderConfig(),a=o.API.getGadgetId()+"-";d.find(".field-group:last").before(JIRA.DashboardItem.Voted.Templates.extraConfig({checkboxes:[{id:a+"show-resolved",name:"showResolved",labelText:"Include resolved issues",isChecked:!!s.showResolved},{id:a+"show-totals",name:"showTotalVotes",labelText:"Show the total votes per issue",isChecked:!!s.showTotalVotes}]})),this.API.once("afterRender",function(){t.width()<350&&d.addClass("top-label"),o.API.showLoadingBar()})},d});;
;
/* module-key = 'com.atlassian.jira.gadgets:watched-dashboard-item-resources', location = 'static/dashboarditem/watched/Watched.soy' */
// This file was automatically generated from Watched.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Watched.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Watched == 'undefined') { JIRA.DashboardItem.Watched = {}; }
if (typeof JIRA.DashboardItem.Watched.Templates == 'undefined') { JIRA.DashboardItem.Watched.Templates = {}; }


JIRA.DashboardItem.Watched.Templates.extraConfig = function(opt_data, opt_ignored) {
  return '' + aui.form.checkboxField({legendContent: '', fields: opt_data.checkboxes});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Watched.Templates.extraConfig.soyTemplateName = 'JIRA.DashboardItem.Watched.Templates.extraConfig';
}


JIRA.DashboardItem.Watched.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="empty-results search-results-dashboard-item">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('An unknown error occurred while trying to perform a search.') + '</p>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Watched.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.Watched.Templates.errorResult';
}


JIRA.DashboardItem.Watched.Templates.noResults = function(opt_data, opt_ignored) {
  var output = '<div class="empty-results search-results-dashboard-item">';
  var filterLink__soy16 = '<a href="' + soy.$$escapeHtml(opt_data.href) + '">';
  output += soy.$$filterNoAutoescape(AJS.format('You are not currently watching any {0}issues{1}.',filterLink__soy16,'</a>')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Watched.Templates.noResults.soyTemplateName = 'JIRA.DashboardItem.Watched.Templates.noResults';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:watched-dashboard-item-resources', location = 'static/dashboarditem/watched/Watched.js' */
define("jira-dashboard-items/watched",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results"],function(e,t,s,o,a,n){"use strict";var r=function(e){this.API=e};return r.prototype.render=function(o,a){var r=this;r.API.showLoadingBar(),r.API.setTitle("Watched Issues");var d=s.extend({},a);d.jql=d.showResolved?"issue in watchedIssues() order by watchers desc":"issue in watchedIssues() AND resolution = EMPTY order by watchers desc",d.showTotalWatches&&(d.columnNames+="|watches"),this.searchResults=new n({context:o,tableContext:"jira.table.cols.watched",preferences:d,onContentLoaded:this.API.resize.bind(this.API),onEmptyResult:function(){o.append(JIRA.DashboardItem.Watched.Templates.noResults({href:t()+"/issues/?jql="+encodeURIComponent(d.jql)})),r.API.resize()},onError:function(){o.empty().append(JIRA.DashboardItem.Watched.Templates.errorResult()),r.API.resize()}}),this.searchResults.render().always(this.API.hideLoadingBar.bind(this.API)),this.searchResults.on("sorted",function(e){a.sortBy=e.sortBy,r.API.isEditable()?r.API.savePreferences(a):r.render(o,a)}),r.API.initRefresh(d,this.searchResults.render)},r.prototype.renderEdit=function(t,s){var o=this,n=new a({context:t,preferences:s,onContentLoaded:function(){o.API.hideLoadingBar(),o.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:function(e){e.showResolved=t.find("input[name=showResolved]").is(":checked"),e.showTotalWatches=t.find("input[name=showTotalWatches]").is(":checked"),o.API.savePreferences(e)},gadgetAPI:o.API}),r=n.renderConfig(),d=o.API.getGadgetId()+"-";r.find(".field-group:last").before(JIRA.DashboardItem.Watched.Templates.extraConfig({checkboxes:[{id:d+"show-resolved",name:"showResolved",labelText:"Include resolved issues",isChecked:!!s.showResolved},{id:d+"show-totals",name:"showTotalWatches",labelText:"Show watchers per issue",isChecked:!!s.showTotalWatches}]})),this.API.once("afterRender",function(){t.width()<350&&r.addClass("top-label"),o.API.showLoadingBar()})},r});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.progressbar', location = 'aui.chunk.dc3aa5b92ce945e793fe--ae817073c07c20003cd8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.progressbar"],{JeHW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBarEl=void 0;var r=l(a("+x/D")),n=l(a("QFBp")),i=l(a("4dFR")),u=a("Ioyv"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("bPPT")),o=l(a("KloK"));function l(e){return e&&e.__esModule?e:{default:e}}var d="aui-progress-indicator-after-update",c="aui-progress-indicator-before-update",f="transitionend webkitTransitionEnd";function v(e,t,a){var n=a.currentProgress,i=a.value,s=(0,r.default)(e),o=(0,r.default)(t);"number"==typeof i&&i<=1&&i>=0&&(o.trigger(c,[n,i]),s.one(f,function(){o.trigger(d,[n,i])}),function(e,t,a){(0,u.recomputeStyle)(e),e.css("width",100*a+"%"),t.attr("data-value",a)}(s,o,i))}function p(e){var t=(0,r.default)(e).first(),a=t.children(".aui-progress-indicator-value");t.removeAttr("data-value"),(0,u.recomputeStyle)(t),a.css("width","")}var m={indeterminate:!1,max:1,val:0};function g(e){return n.default.isNumber(e)&&n.default.isFinite(e)&&!n.default.isNaN(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(e);return g(a)?a:Number(t)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number(parseFloat(e).toFixed(t))}function _(e){var t=e.val,a=function(e){return e>0?e:m.max}(e.max),r=function(e,t){return Math.max(0,Math.min(e,t))}(t,a),n=h(r/a,6);return{max:a,val:r,valAsFraction:n,valAsPercent:h(100*n,2)}}function x(e){var t=_(e._data),a=t.val,r=t.valAsFraction,n=t.max,i=e.querySelector(".aui-progress-indicator"),u=i.getAttribute("data-value");e.indeterminate?(i.removeAttribute("aria-valuenow"),p(i)):(i.setAttribute("aria-valuenow",a),i.setAttribute("aria-valuemax",n),v(i.querySelector(".aui-progress-indicator-value"),i,{currentProgress:u,value:r}))}function w(e,t){e._data.val=b(t.newValue,t.oldValue||m.val),x(e)}function y(e,t){e._data.max=b(t.newValue,t.oldValue||m.max),x(e)}var A=(0,i.default)("aui-progressbar",{template:function(e){e._data.max=b(e.getAttribute("max"),m.max),e._data.val=b(e.getAttribute("value"),m.val),e._data.indeterminate=e.hasAttribute("indeterminate");var t=_(e._data),a=t.val,r=t.max,n=t.valAsFraction,i=t.valAsPercent,u=e._data.indeterminate?"":'data-value="'+n+'"';e.innerHTML='<div class="aui-progress-indicator"\n         '+u+'\n         role="progressbar"\n         aria-valuemin="0"\n         aria-valuenow="'+a+'"\n         aria-valuemax="'+r+'"\n         tabindex="0"\n     >\n        <span class="aui-progress-indicator-value" style="width: '+i+'%"></span>\n    </div>'},attached:function(e){x(e)},attributes:{indeterminate:{created:function(e){e.indeterminate=!0},removed:function(e){e.indeterminate=!1}},value:{value:m.val,fallback:function(e,t){if(e._updating)return!1;w(e,t)}},max:{value:m.max,fallback:function(e,t){if(e._updating)return!1;y(e,t)}}},prototype:{get _data(){return this.__data||(this._data=n.default.defaults({},m))},set _data(e){return this.__data=e},get indeterminate(){return this._data.indeterminate},set indeterminate(e){this._data.indeterminate=!!e,x(this)},get value(){return _(this._data).val},set value(e){if(!g(e))return!1;var t={newValue:h(e,6)};this._updating=!0,this.setAttribute("value",t.newValue),this._updating=!1,w(this,t)},get max(){return _(this._data).max},set max(e){if(!g(e))return!1;var t={newValue:h(e,6)};this._updating=!0,this.setAttribute("max",t.newValue),this._updating=!1,y(this,t)}}}),P={update:s.fn(function(e,t){if("string"==typeof e){var a=document.getElementById(e);a&&(e=a)}var n=(0,r.default)(e).first(),i=n.children(".aui-progress-indicator-value"),u=n.attr("data-value"),s=!u,o=parseFloat(u)||0,l=u&&o===t;if(l&&(l=o===100*(parseFloat(i.get(0).style.width)||0)),!l)return s&&i.css("width",0),v(i,n,{currentProgress:o,value:t}),n},"AJS.progressBars.update",{sinceVersion:"7.7.0",removeInVersion:"9.0.0",extraInfo:"Use the <aui-progressbar> web component instead"}),setIndeterminate:s.fn(p,"AJS.progressBars.setIndeterminate",{sinceVersion:"7.7.0",removeInVersion:"9.0.0",extraInfo:"Use the <aui-progressbar> web component instead"})};(0,o.default)("progressBars",P),t.default=P,t.ProgressBarEl=A},NQOw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBarEl=t.progressBars=void 0;var r=a("JeHW");Object.defineProperty(t,"progressBars",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(r).default}}),Object.defineProperty(t,"ProgressBarEl",{enumerable:!0,get:function(){return r.ProgressBarEl}}),a("FStl"),a("Q0fs"),a("Nb/K")},"Nb/K":function(e,t,a){}},[["NQOw","runtime","aui.splitchunk.vendors--1df5b34e16","aui.splitchunk.vendors--95c789edf5","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.1df5b34e16","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9"]]]);
//# sourceMappingURL=aui.chunk.dc3aa5b92ce945e793fe--ae817073c07c20003cd8.js.map;
;
/* module-key = 'com.atlassian.jira.gadgets:stats-dashboard-item-resources', location = 'static/dashboarditem/stats/stats.soy' */
// This file was automatically generated from stats.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Stats.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Stats == 'undefined') { JIRA.DashboardItem.Stats = {}; }
if (typeof JIRA.DashboardItem.Stats.Templates == 'undefined') { JIRA.DashboardItem.Stats.Templates = {}; }


JIRA.DashboardItem.Stats.Templates.render = function(opt_data, opt_ignored) {
  var output = '<table class="aui">';
  var statTypeId__soy4 = opt_data.prefix + 'stats-category';
  var countId__soy5 = opt_data.prefix + 'stats-count';
  var percentageId__soy6 = opt_data.prefix + 'stats-percentage';
  output += '<thead><tr class="stats-gadget-table-header"><th id="' + soy.$$escapeHtml(statTypeId__soy4) + '" class="cell-type-collapsed">' + soy.$$escapeHtml(opt_data.data.statTypeDescription) + '</th><th id="' + soy.$$escapeHtml(countId__soy5) + '" class="stats-gadget-numeric">' + soy.$$escapeHtml('Count') + '</th><th id="' + soy.$$escapeHtml(percentageId__soy6) + '" colspan="2">' + soy.$$escapeHtml('Percentage') + '</th></tr></thead><tbody>';
  var rowList20 = opt_data.data.rows;
  var rowListLen20 = rowList20.length;
  for (var rowIndex20 = 0; rowIndex20 < rowListLen20; rowIndex20++) {
    var rowData20 = rowList20[rowIndex20];
    output += '<tr><td class="cell-type-collapsed" headers="' + soy.$$escapeHtml(statTypeId__soy4) + '">' + soy.$$filterNoAutoescape(rowData20.html) + '</td><td class="cell-type-collapsed stats-gadget-numeric" headers="' + soy.$$escapeHtml(countId__soy5) + '"><a href="' + soy.$$escapeHtml(rowData20.url) + '">' + soy.$$escapeHtml(rowData20.count) + '</a></td><td class="stats-gadget-progress-indicator"><div class="aui-progress-indicator" data-value="1"><span class="aui-progress-indicator-value" style="width: ' + soy.$$escapeHtml(rowData20.percentage) + '%"></span></div></td><td class="cell-type-collapsed stats-gadget-numeric" headers="' + soy.$$escapeHtml(percentageId__soy6) + '">' + soy.$$escapeHtml(rowData20.percentage) + '%</td></tr>';
  }
  output += '<tr class="stats-gadget-final-row"><td headers="' + soy.$$escapeHtml(statTypeId__soy4) + '">' + soy.$$escapeHtml('Total') + '</td><td headers="' + soy.$$escapeHtml(countId__soy5) + '" class="cell-type-collapsed stats-gadget-numeric"><a href="' + soy.$$escapeHtml(opt_data.data.filterOrProjectLink) + '">' + soy.$$escapeHtml(opt_data.data.totalIssueCount) + '</a></td><td colspan="2"></td></tr></tbody></table>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.render.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.render';
}


JIRA.DashboardItem.Stats.Templates.NoStatsContent = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: 'No Data Available', closeable: 'false'});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.NoStatsContent.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.NoStatsContent';
}


JIRA.DashboardItem.Stats.Templates.Errors = function(opt_data, opt_ignored) {
  var output = '';
  var filterLink__soy56 = '<a href="' + soy.$$escapeHtml(opt_data.filterUrl) + '">';
  output += aui.message.error({content: '' + ((opt_data.queryType == 'project') ? '<p>' + soy.$$filterNoAutoescape(AJS.format('The project configured for this gadget could not be retrieved. Please verify it is still valid on the {0}issue navigator{1}.',filterLink__soy56,'</a>')) + '</p>' : '<p>' + soy.$$filterNoAutoescape(AJS.format('The filter configured for this gadget could not be retrieved. Please verify it is still valid on the {0}issue navigator{1}.',filterLink__soy56,'</a>')) + '</p>')});
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.Errors.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.Errors';
}


JIRA.DashboardItem.Stats.Templates.Configuration = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField({prefix: opt_data.prefix, id: 'project-filter-picker', selectionType: opt_data.preferences.type, selectionID: opt_data.preferences.id, selectionName: opt_data.preferences.name}) + JIRA.DashboardItem.Stats.Templates.statTypePicker({prefix: opt_data.prefix, id: 'stat-type', statTypes: opt_data.statTypes, value: opt_data.preferences.statType}) + JIRA.DashboardItem.Stats.Templates.sortBy({prefix: opt_data.prefix, value: opt_data.preferences.sortBy}) + JIRA.DashboardItem.Stats.Templates.sortDirection({prefix: opt_data.prefix, value: opt_data.preferences.sortDirection}) + JIRA.DashboardItem.Stats.Templates.showResolvedIssuesStats({prefix: opt_data.prefix, id: 'stat-type', statTypes: opt_data.statTypes, value: opt_data.preferences.includeResolvedIssues}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.Configuration';
}


JIRA.DashboardItem.Stats.Templates.sortBy = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy104 = opt_data.prefix + 'stats-sort-by';
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy104) + '">' + soy.$$escapeHtml('Sort By') + '</label><select class="select" id="' + soy.$$escapeHtml(prefixedId__soy104) + '" name="sortBy"><option value="natural"' + ((opt_data.value == 'natural') ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('Natural') + '</option><option value="total"' + ((opt_data.value == 'total') ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('Total') + '</option></select><div class="description">' + soy.$$escapeHtml('Sort by row total or natural field order.') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.sortBy.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.sortBy';
}


JIRA.DashboardItem.Stats.Templates.sortDirection = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy127 = opt_data.prefix + 'stats-sort-direction';
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy127) + '">' + soy.$$escapeHtml('Sort Direction') + '</label><select class="select" id="' + soy.$$escapeHtml(prefixedId__soy127) + '" name="sortDirection"><option value="asc"' + ((opt_data.value == 'asc') ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('Ascending') + '</option><option value="desc"' + ((opt_data.value == 'desc') ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('Descending') + '</option></select></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.sortDirection.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.sortDirection';
}


JIRA.DashboardItem.Stats.Templates.showResolvedIssuesStats = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy148 = opt_data.prefix + 'stats-show-resolved';
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy148) + '">' + soy.$$escapeHtml('Show Resolved Issue Statistics') + '</label><select class="select" id="' + soy.$$escapeHtml(prefixedId__soy148) + '" name="includeResolvedIssues"><option value="false"' + ((opt_data.value == false) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('No') + '</option><option value="true"' + ((opt_data.value == true) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml('Yes') + '</option></select><div class="description">' + soy.$$escapeHtml('Include resolved issues in the set of issues from which statistics are calculated.') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.showResolvedIssuesStats.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.showResolvedIssuesStats';
}


JIRA.DashboardItem.Stats.Templates.statTypePicker = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy171 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group"><label for="' + soy.$$escapeHtml(prefixedId__soy171) + '">' + soy.$$escapeHtml('Statistic Type') + '</label><select id="' + soy.$$escapeHtml(prefixedId__soy171) + '" name="statType" class="select">';
  var typeList179 = opt_data.statTypes;
  var typeListLen179 = typeList179.length;
  for (var typeIndex179 = 0; typeIndex179 < typeListLen179; typeIndex179++) {
    var typeData179 = typeList179[typeIndex179];
    output += '<option value="' + soy.$$escapeHtml(typeData179.value) + '"' + ((typeData179.value == opt_data.value) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(typeData179.label) + '</option>';
  }
  output += '</select><div class="error"></div><div class="description">' + soy.$$escapeHtml('Select which type of statistic to display for this filter.') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.statTypePicker.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.statTypePicker';
}


JIRA.DashboardItem.Stats.Templates.ErrorRenderingConfiguration = function(opt_data, opt_ignored) {
  return '' + aui.message.error({titleContent: 'Oops - an error has occurred', content: '', closeable: 'false'});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.ErrorRenderingConfiguration.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.ErrorRenderingConfiguration';
}


JIRA.DashboardItem.Stats.Templates.title = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Issue Statistics') + ': ' + soy.$$escapeHtml(opt_data.data.filterOrProjectName) + ' (' + soy.$$escapeHtml(opt_data.data.statTypeDescription) + ')';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Stats.Templates.title.soyTemplateName = 'JIRA.DashboardItem.Stats.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:stats-dashboard-item-resources', location = 'static/dashboarditem/stats/stats.js' */
define("jira-dashboard-items/stats",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/autocomplete/project-filter-autocomplete","jira-dashboard-items/common-functions"],function(e,t,r,a,i,o){"use strict";function n(e){if(e.projectOrFilterId&&(!e.type||!e.id)){var t=e.projectOrFilterId.split("-");e.type=t[0],e.id=t[1]}}function s(e){var t=e.serializeArray(),r=["name","type","id","statType","refresh-interval","sortBy","sortDirection","includeResolvedIssues"],i={};return a.each(t,function(e){-1!==a.indexOf(r,e.name)&&("refresh-interval"===e.name?i.refresh=e.value:i[e.name]=e.value)}),i}function d(e){e.projectOrFilterId=e.type+"-"+e.id}function l(t){var r="";return r+="Issue Statistics"+": ",r+=t.filterOrProjectName+" ("+t.statTypeDescription+")"}var c=function(e,t){this.API=e,this.options=t||{}};return c.prototype.render=function(e,i){var s=this,d=r(e);d.addClass("stats-gadget"),s.API.showLoadingBar(),n(i),s.API.initRefresh(i,a.bind(s.render,s,e,i)),i=o.projectFilterBackwardCompatible(i),r.ajax({method:"GET",url:t()+"/rest/gadget/1.0/stats/generate",dataType:"json",data:{includeResolvedIssues:i.includeResolvedIssues,projectOrFilterId:i.type+"-"+i.id,sortBy:i.sortBy,sortDirection:i.sortDirection,statType:i.statType}}).done(function(e){if(e.totalIssueCount&&0!==e.totalIssueCount){var t=s.API.getGadgetId()+"-";d.html(JIRA.DashboardItem.Stats.Templates.render({data:e,prefix:t}))}else d.html(JIRA.DashboardItem.Stats.Templates.NoStatsContent());s.API.setTitle(l(e))}).fail(function(e){var r=t()+"/issues/";"project"===i.type?r+="?jql="+encodeURIComponent("project = "+i.id):r+="?filter="+encodeURIComponent(i.id),d.html(JIRA.DashboardItem.Stats.Templates.Errors({queryType:i.type,filterUrl:r}))}).always(function(){s.API.hideLoadingBar(),s.API.resize()})},c.prototype.renderEdit=function(a,l){var c=this,p=r(a);p.addClass("stats-gadget"),c.API.showLoadingBar(),l=o.projectFilterBackwardCompatible(l),r.ajax({method:"GET",url:t()+"/rest/gadget/1.0/statTypes"}).done(function(t){function a(t,a){return!(!t.id||!t.type)||(r(".projectOrFilter-error",a).text("No project or filter specified.").show(),!1)}var o=c.API.getGadgetId()+"-";n(l),!l.name&&l.type&&l.id&&(l.name=l.type+"-"+l.id),l.name&&(l.name=soydata.VERY_UNSAFE.ordainSanitizedHtml(l.name)),p.html(JIRA.DashboardItem.Stats.Templates.Configuration({prefix:o,statTypes:t.stats,preferences:l}));var u={fieldID:o+"project-filter-picker",parentElement:p,maxHeight:140};c.options.delay&&(u.delay=c.options.delay),i(u);var m=r("form",p),f=r(".cancel",m);f&&f.click(function(){c.API.closeEdit()}),m.on("submit",function(e){e.preventDefault();var t=r(e.target),i=s(t);d(i),a(i,t)&&c.API.savePreferences(i)})}).fail(function(){p.html(JIRA.DashboardItem.Stats.Templates.ErrorRenderingConfiguration())}).always(function(){c.API.hideLoadingBar(),c.API.resize()})},c});;
;
/* module-key = 'com.atlassian.jira.gadgets:favourite-filters-dashboard-item-resources', location = 'static/dashboarditem/favourite-filters/FavouriteFilters.soy' */
// This file was automatically generated from FavouriteFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.FavouriteFilters.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.FavouriteFilters == 'undefined') { JIRA.DashboardItem.FavouriteFilters = {}; }
if (typeof JIRA.DashboardItem.FavouriteFilters.Templates == 'undefined') { JIRA.DashboardItem.FavouriteFilters.Templates = {}; }


JIRA.DashboardItem.FavouriteFilters.Templates.favouriteFilters = function(opt_data, opt_ignored) {
  var output = '<div class="favourite-filters-item"><div class="favourite-filters-view"><div class="filter-list-content"><table class="aui"><tbody>';
  var filterList4 = opt_data.filters;
  var filterListLen4 = filterList4.length;
  for (var filterIndex4 = 0; filterIndex4 < filterListLen4; filterIndex4++) {
    var filterData4 = filterList4[filterIndex4];
    var filterLink__soy5 = soy.$$escapeHtml("") + '/issues/?filter=' + soy.$$escapeHtml(filterData4.value);
    output += '<tr><td><a href="' + soy.$$escapeHtml(filterLink__soy5) + '" ' + ((filterData4.description) ? 'title="' + soy.$$escapeHtml(filterData4.description) + '"' : '') + '>' + soy.$$escapeHtml(filterData4.label) + '</a></td>' + ((opt_data.showCounts) ? '<td class="counts">' + aui.badges.badge({text: '' + soy.$$escapeHtml(filterData4.count)}) + '</td>' : '') + '</tr>';
  }
  output += '</tbody></table></div>' + JIRA.DashboardItem.FavouriteFilters.Templates.configOptions(null) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FavouriteFilters.Templates.favouriteFilters.soyTemplateName = 'JIRA.DashboardItem.FavouriteFilters.Templates.favouriteFilters';
}


JIRA.DashboardItem.FavouriteFilters.Templates.noFavouriteFilters = function(opt_data, opt_ignored) {
  return '<div class="favourite-filters-item"><div class="empty-container"><p class="empty-msg">' + soy.$$escapeHtml('Looks like you haven\x27t selected any favourite filters yet. You can either create a new filter, or add an existing filter to display them here on the dashboard.') + '</p><div>' + aui.buttons.button({text: '' + soy.$$escapeHtml('Create Filter'), href: soy.$$escapeHtml("") + '/issues/?jql='}) + aui.buttons.button({text: '' + soy.$$escapeHtml('Manage Filters'), type: 'link', href: soy.$$escapeHtml("") + '/secure/ManageFilters.jspa'}) + '</div></div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FavouriteFilters.Templates.noFavouriteFilters.soyTemplateName = 'JIRA.DashboardItem.FavouriteFilters.Templates.noFavouriteFilters';
}


JIRA.DashboardItem.FavouriteFilters.Templates.errorResult = function(opt_data, opt_ignored) {
  return '<div class="favourite-filters-item"><div class="empty-container">' + aui.message.error({content: '<p>' + soy.$$escapeHtml('Looks like something went wrong retrieving your filters :(.  Please try reloading this dashboard.') + '</p>'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FavouriteFilters.Templates.errorResult.soyTemplateName = 'JIRA.DashboardItem.FavouriteFilters.Templates.errorResult';
}


JIRA.DashboardItem.FavouriteFilters.Templates.configOptions = function(opt_data, opt_ignored) {
  return '<div class="config-options"><ul class="operations-list"><li><a href="' + soy.$$escapeHtml("") + '/issues/?jql=">' + soy.$$escapeHtml('Create Filter') + '</a>&nbsp;</li><li><a href="' + soy.$$escapeHtml("") + '/secure/ManageFilters.jspa">' + soy.$$escapeHtml('Manage Filters') + '</a></li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FavouriteFilters.Templates.configOptions.soyTemplateName = 'JIRA.DashboardItem.FavouriteFilters.Templates.configOptions';
}


JIRA.DashboardItem.FavouriteFilters.Templates.configuration = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + aui.form.checkboxField({legendContent: '', fields: opt_data.checkboxes}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.FavouriteFilters.Templates.configuration.soyTemplateName = 'JIRA.DashboardItem.FavouriteFilters.Templates.configuration';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:favourite-filters-dashboard-item-resources', location = 'static/dashboarditem/favourite-filters/FavouriteFilters.js' */
define("jira-dashboard-items/favourite-filters",["jira/util/formatter","wrm/context-path","jquery","underscore"],function(e,t,r,s){var o=function(e){this.API=e};return o.prototype.render=function(e,o){var i=r(e),n=this;n.API.showLoadingBar(),r.ajax({method:"GET",url:t()+"/rest/gadget/1.0/favfilters",dataType:"json",data:{showCounts:o.showCounts}}).done(function(e){e.filters.length>0?i.html(JIRA.DashboardItem.FavouriteFilters.Templates.favouriteFilters({filters:e.filters,showCounts:o.showCounts})):i.html(JIRA.DashboardItem.FavouriteFilters.Templates.noFavouriteFilters())}).fail(function(){i.html(JIRA.DashboardItem.FavouriteFilters.Templates.errorResult())}).always(function(){n.API.hideLoadingBar(),n.API.resize()}),n.API.initRefresh(o,s.bind(n.render,n,e,o))},o.prototype.renderEdit=function(t,s){var o=this,i=r(t),n=o.API.getGadgetId()+"-";i.html(JIRA.DashboardItem.FavouriteFilters.Templates.configuration({prefix:n,preferences:s,checkboxes:[{id:n+"show-counts",name:"showCounts",labelText:"Show issue counts",descriptionText:"Display the number issues the filter returns (may impact performance).",isChecked:!!s.showCounts}]}));var a=r("form",i);a.on("submit",function(e){e.preventDefault(),o.API.resize();var t={showCounts:a.find("input[name=showCounts]").is(":checked"),refresh:o.API.getRefreshFieldValue()};o.API.savePreferences(t)}),r(".cancel",a).click(function(){o.API.closeEdit()}),o.API.resize(),this.API.once("afterRender",function(){o.API.resize()})},o});;
;
/* module-key = 'com.atlassian.jira.gadgets:labels-dashboard-item-resources', location = 'static/dashboarditem/labels/Labels.soy' */
// This file was automatically generated from Labels.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Labels.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Labels == 'undefined') { JIRA.DashboardItem.Labels = {}; }
if (typeof JIRA.DashboardItem.Labels.Templates == 'undefined') { JIRA.DashboardItem.Labels.Templates = {}; }


JIRA.DashboardItem.Labels.Templates.Labels = function(opt_data, opt_ignored) {
  var output = '<div class="labels-dashboard-item labels-display">';
  var groupList4 = opt_data.groups;
  var groupListLen4 = groupList4.length;
  for (var groupIndex4 = 0; groupIndex4 < groupListLen4; groupIndex4++) {
    var groupData4 = groupList4[groupIndex4];
    output += JIRA.DashboardItem.Labels.Templates.LabelGroup({key: groupData4.key, labels: groupData4.labels});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.Labels.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.Labels';
}


JIRA.DashboardItem.Labels.Templates.LabelGroup = function(opt_data, opt_ignored) {
  var output = '<div class="label-group"><h3>' + soy.$$escapeHtml(opt_data.key) + '</h3><p class="label-alphabetical">';
  var labelList14 = opt_data.labels;
  var labelListLen14 = labelList14.length;
  for (var labelIndex14 = 0; labelIndex14 < labelListLen14; labelIndex14++) {
    var labelData14 = labelList14[labelIndex14];
    output += '<a class="aui-label" href="' + soy.$$escapeHtml("" + labelData14.searchUrl) + '">' + soy.$$escapeHtml(labelData14.label) + '</a>';
  }
  output += '</p></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.LabelGroup.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.LabelGroup';
}


JIRA.DashboardItem.Labels.Templates.Configuration = function(opt_data, opt_ignored) {
  return '<div class="labels-dashboard-item labels-config">' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.Labels.Templates.ProjectSelectPicker({prefixedId: opt_data.prefix + 'projects-select', label: opt_data.projectsLabel, projects: opt_data.projects, currentValue: opt_data.preferences.projectid}) + JIRA.DashboardItem.Labels.Templates.FieldSelectPicker({prefixedId: opt_data.prefix + 'labels-field', fields: opt_data.fields, currentValue: opt_data.preferences.fieldId}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.Configuration';
}


JIRA.DashboardItem.Labels.Templates.NoLabels = function(opt_data, opt_ignored) {
  return '<div class="labels-dashboard-item">' + aui.message.info({titleContent: 'This field does not contain any labels yet!', content: 'When users start adding labels to this field, the labels will appear here.'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.NoLabels.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.NoLabels';
}


JIRA.DashboardItem.Labels.Templates.Error = function(opt_data, opt_ignored) {
  return '<div class="labels-dashboard-item">' + aui.message.error({titleContent: 'Oops - an error has occurred', content: '', closeable: 'false'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.Error.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.Error';
}


JIRA.DashboardItem.Labels.Templates.FieldSelectPicker = function(opt_data, opt_ignored) {
  return '<div class="field-group">' + JIRA.DashboardItem.Labels.Templates.SelectPicker({prefixedId: opt_data.prefixedId, label: 'Field', name: 'fieldId', options: opt_data.fields, currentValue: opt_data.currentValue}) + '<div class="error"></div><div class="description">' + soy.$$escapeHtml('Select the field which you wish to show labels from.') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.FieldSelectPicker.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.FieldSelectPicker';
}


JIRA.DashboardItem.Labels.Templates.ProjectSelectPicker = function(opt_data, opt_ignored) {
  return '<div class="field-group">' + JIRA.DashboardItem.Labels.Templates.SelectPicker({prefixedId: opt_data.prefixedId, label: opt_data.label, name: 'projectid', options: opt_data.projects, currentValue: opt_data.currentValue}) + '<div class="error"></div><div class="description">' + soy.$$escapeHtml('Show Labels from Project') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.ProjectSelectPicker.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.ProjectSelectPicker';
}


JIRA.DashboardItem.Labels.Templates.SelectPicker = function(opt_data, opt_ignored) {
  var output = '<label for="' + soy.$$escapeHtml(opt_data.prefixedId) + '">' + soy.$$escapeHtml(opt_data.label) + '</label><select id="' + soy.$$escapeHtml(opt_data.prefixedId) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" class="select">';
  var optionList85 = opt_data.options;
  var optionListLen85 = optionList85.length;
  for (var optionIndex85 = 0; optionIndex85 < optionListLen85; optionIndex85++) {
    var optionData85 = optionList85[optionIndex85];
    output += '<option value="' + soy.$$escapeHtml(optionData85.value) + '"' + ((optionData85.value == opt_data.currentValue) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData85.label) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Labels.Templates.SelectPicker.soyTemplateName = 'JIRA.DashboardItem.Labels.Templates.SelectPicker';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:labels-dashboard-item-resources', location = 'static/dashboarditem/labels/Labels.js' */
define("jira-dashboard-items/labels",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/autocomplete/project-filter-autocomplete","jira-dashboard-items/common-functions"],function(e,t,r,a,i,s){"use strict";function o(e){var t=e.serializeArray(),r=["name","type","id","refresh-interval","fieldId","projectid"],i={};return a.each(t,function(e){-1!==a.indexOf(r,e.name)&&("refresh-interval"===e.name?i.refresh=!0:i[e.name]=e.value)}),i}function n(){this.API.resize(),this.API.hideLoadingBar()}function l(e){e.html(JIRA.DashboardItem.Labels.Templates.Error())}var d=function(e,t){this.API=e,this.options=t||{}};return d.prototype.isValidProjectId=function(e){return/^project-\d+$/.test(e)},d.prototype.render=function(i,o){function c(t,r){if(0===r.groups.length||1===r.groups.length&&0===r.groups[0].labels.length)return void t.html(JIRA.DashboardItem.Labels.Templates.NoLabels());t.html(JIRA.DashboardItem.Labels.Templates.Labels({groups:r.groups}));var a=r.field,i=r.project;a&&i?this.API.setTitle(e.format("Labels: {0} in {1}",a,i)):this.API.setTitle("Labels Gadget")}if(o.projectid&&!d.prototype.isValidProjectId(o.projectid))return l(r(i));this.API.showLoadingBar(),this.API.initRefresh(o,a.bind(this.render,this,i,o)),o=s.projectFilterBackwardCompatible(o);var h="/rest/gadget/1.0/labels/gadget/"+o.projectid+"/"+encodeURIComponent(o.fieldId);r.ajax({method:"GET",url:t()+h,dataType:"json"}).done(a.bind(c,this,r(i))).fail(function(e){404===e.status?r(i).html(JIRA.DashboardItem.Labels.Templates.NoLabels()):l(r(i))}).always(a.bind(n,this))},d.prototype.renderEdit=function(i,d){function c(t,i,s){if(!i[0].labelFields&&s[0].labelFields||!s[0].label&&i[0].label){var n=s;s=i,i=n}if(!i[0].labelFields||!s[0].label||!s[0].options)return void l(t);var c=this.API.getGadgetId()+"-",p=i[0].labelFields,f=s[0].label,b=s[0].options,u=JIRA.DashboardItem.Labels.Templates.Configuration({prefix:c,preferences:d,fields:p,projectsLabel:e.I18n.getText(f),projects:b});t.html(u);var m=r("form",t),g=r(".cancel",m);g&&g.click(a.bind(function(){this.API.closeEdit()},this)),m.on("submit",a.bind(function(e){e.preventDefault();var t=r(e.target),a=o(t);h(a,t)&&this.API.savePreferences(a)},this))}function h(t,a){return!(!t.projectid||!t.fieldId)||(r(".projectOrFilter-error",a).text("No project or filter specified.").show(),!1)}var p=r(i);this.API.showLoadingBar(),d=s.projectFilterBackwardCompatible(d);var f=r.ajax(t()+"/rest/gadget/1.0/labels/gadget/fields"),b=r.ajax(t()+"/rest/gadget/1.0/filtersAndProjects?showFilters=false");r.when(f,b).done(a.bind(c,this,p)).fail(a.partial(l,p)).always(a.bind(n,this))},d});;
;
/* module-key = 'com.atlassian.jira.gadgets:colorable', location = 'static/components/charts/components/Colorable.js' */
define("jira-dashboard-items/components/charts/components/colorable",["jira-dashboard-items/lib/c3","jira-dashboard-items/lib/d3"],function(o,r){"use strict";return function(){var t=["red","blue"];return o.component("colorable").extend(o.withData()).extend({color:function(){var o=this.colorScale(),r=this.colorAccessor();return function(t,c){return o(r(t,c))}},colorAccessor:o.prop(function(){return 4}),colorScaleConstructor:o.inherit("colorScaleConstructor",r.scale.linear),colorDomain:o.inherit("colorDomain").onDefault(function(){if(!o.isEmpty(this.data())){return[o.checkIsNumber(r.min(this.data(),this.colorAccessor())),o.checkIsNumber(r.max(this.data(),this.colorAccessor()))]}}),colorRange:o.inherit("colorRange").onDefault(function(){return t}),colorScale:function(){return this.colorScaleConstructor()().domain(this.colorDomain()).range(this.colorRange())}})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:colored-circle-plot', location = 'static/components/charts/components/ColoredCirclePlot.js' */
define("jira-dashboard-items/components/charts/components/colored-circle-plot",["jquery","jira-dashboard-items/components/charts/components/colorable","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3"],function(r,t,i,s){"use strict";return function(){return s.component("colored-circle-plot").extend(s.circlePlot()).extend(t()).update(function(r){r.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radius()).attr("fill",this.color()).attr("stroke",this.strokeColor())}).extend({radius:function(){var r=this.radiusScale(),t=this.radiusAccessor();return function(i,s){return r(t(i,s))}},radiusAccessor:s.prop(function(){return 4}),radiusDomain:s.inherit("radiusDomain").onDefault(function(){if(!s.isEmpty(this.data())){return[s.checkIsNumber(i.min(this.data(),this.radiusAccessor())),s.checkIsNumber(i.max(this.data(),this.radiusAccessor()))]}}),radiusRange:s.inherit("radiusRange").onDefault(function(){return[10,30]}),radiusScaleConstructor:s.inherit("radiusScaleConstructor",i.scale.linear),radiusScale:function(){return this.radiusScaleConstructor()().domain(this.radiusDomain()).range(this.radiusRange())},strokeColor:function(){var r=this.color();return function(t,s){return i.rgb(r(t,s)).darker()}}})}});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart-component', location = 'static/components/charts/bubble-chart/BubbleChartComponent.js' */
define("jira-dashboard-items/components/charts/bubble-chart/bubble-chart-component",["wrm/context-path","jquery","backbone","aui/inline-dialog","jira/analytics","jira-dashboard-items/components/charts/components/chart","jira-dashboard-items/components/charts/components/colored-circle-plot","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3"],function(e,t,i,s,o,r,n,l,c){"use strict";return i.View.extend({template:JIRA.DashboardItem.BubbleChartComponent.Templates.Container,initialize:function(e){this.options=e||{},this.colors=e.colors||["red","blue"],this.model=e.model,this.xAxisTitleLabel=this.model.get("xAxisLabel"),this.yAxisTitleLabel=this.model.get("yAxisLabel"),this.xScaleConstructor=this.model.get("useLogarithmicScale")?l.scale.log:l.scale.linear,this.yScaleConstructor=this.model.get("useLogarithmicScale")?l.scale.log:l.scale.linear,this.AMOUNT_TO_INCREASE_CHART_TO_PREVENT_CLIPPING=10,this.X_TITLE_LABEL_BUFFER=25,this.HOVER_STATE_CLASS_NAME="hovered",this.SELECTED_CIRCLE_CLASS="selected",this.BACKING_CIRCLE_CLASS="backing",this.TOOLTIP_DELAY_APPEAR_TIME=0,this.TOOLTIP_CLASS="bubble-chart-component-tooltip",this.inlineDialog=null},render:function(){var e=this._handleDocumentClick.bind(this),i=this._handleShowLayer.bind(this);t(document).on("click",e),t(document).on("showLayer",i),this.$el.on("remove",function(){t(document).off("click",e),t(document).off("showLayer",i)}.bind(this)),this.listenTo(this.model,{"change:highlightedCircle":this._changeHighlight,"change:selectedCircle":this._changeSelection}),this.$el.html(this.template({id:this.options.id}));var s=this._createBubblePlot(),o=c.layerable().data(this.model.get("data")).addLayer("bubble-plot",s),r=this._createChart(o),n=this.$(".bubble-chart-component-plot");this._setInitialHeightOfChart(n),l.select(n.get(0)).call(r),this._preventClippingTheTopMostLabelOnYAxis(n),this._addGridLinesToChart(n),this._removeTicksWithoutText(n)},_circleForIssueKey:function(e){return this.$('circle:data("'+e+'")').get(0)},_removeAllBackingCircles:function(){this.$("circle."+this.BACKING_CIRCLE_CLASS).remove()},_handleDocumentClick:function(){this.model.get("highlightedCircle")&&this.model.get("highlightedCircle").issueKey||this.model.get("selectedCircle")&&this.model.get("selectedCircle").issueKey&&(this._removeSelectedClassFromAllCircles(),this.model.unset("selectedCircle"))},_handleShowLayer:function(e,t,i){i.popup&&i.popup.dashboardItemId!==this.options.id&&this.inlineDialog&&this.model.unset("selectedCircle")},_changeHighlight:function(e,t){if(!t.issueKey)return void l.selectAll("."+this.HOVER_STATE_CLASS_NAME).classed(this.HOVER_STATE_CLASS_NAME,!1).attr("r",function(){return Number(l.select(this).attr("r"))-1});var i=this._circleForIssueKey(t.issueKey),s=Number(l.select(i).attr("r"));l.select(i).classed(this.HOVER_STATE_CLASS_NAME,!0),l.select(i).attr("r",s+1),this._positionToolTipForCircle(i,t.index)},_changeSelection:function(e,i){if(this.inlineDialog&&(this.inlineDialog.hide(),this.inlineDialog=void 0),this._removeAllBackingCircles(),i){this._removeSelectedClassFromAllCircles();var s=this._circleForIssueKey(i.issueKey);t(s).tipsy("hide"),this._addBackingCircleForSelectedCircle(s),e.set("isSelectedCircleInTopColorBucket",i.isTopColorBucket);var o=e.getIssueForIssueKey(i.issueKey),r=this._createInlineDialogContent(i.issueKey,o.bubbleDomain,o.bubbleRange,o.bubbleRadius,o.bubbleColorValue),n=this._createInlineDialog(t(s),"bubble-chart-dialog-"+i.issueKey,r);this.inlineDialog=n,this.inlineDialog.show()}},_removeSelectedClassFromAllCircles:function(){l.select(this.el).selectAll("circle."+this.SELECTED_CIRCLE_CLASS).classed(this.SELECTED_CIRCLE_CLASS,!1)},_removeTicksWithoutText:function(e){e.find("g.tick").each(function(e){""===t("text",this).text()&&t(this).remove()})},_preventClippingTheTopMostLabelOnYAxis:function(e){var t=this.AMOUNT_TO_INCREASE_CHART_TO_PREVENT_CLIPPING;e.children("g").each(function(e,i){l.select(i).attr("transform",function(){return"translate("+l.transform(l.select(i).attr("transform")).translate[0]+", "+(l.transform(l.select(i).attr("transform")).translate[1]+t)+")"})}),e.height("+="+t)},_addGridLinesToChart:function(e){function t(e){l.selectAll(e).selectAll("line").classed("value-tick",!0)}var i=e.find(".xAxis g.tick"),s=(l.select(e.get(0)).select(".graph"),e.find(".xAxis").get(0),e.find(".graph-border").attr("width")),o=e.find(".graph-border").attr("height"),r=e.find(".yAxis g.tick");t(i),t(r),this._addVerticalGridLines(i,-o,"grid-tick"),this._addHorizontalGridLines(r,s,"grid-tick")},_addHorizontalGridLines:function(e,t,i){return l.selectAll(e).append("line").attr("x2",t).classed(i,!0)},_addVerticalGridLines:function(e,t,i){return l.selectAll(e).append("line").attr("y2",t).attr("x2",0).classed(i,!0)},_setInitialHeightOfChart:function(e){var t=this.$el.width();e.width(t),e.height(.5*t)},_createChart:function(e){var t=c.borderLayout().xAccessor(function(e){return e.bubbleDomain}).yAccessor(function(e){return e.bubbleRange}),i=this._createGraphContentLayer(e),s=this._createXAxis(),o=this._createYAxis();return t.center(i),t.west(o),t.south(s),t.data(this.model.get("data"))},_createXAxis:function(){return c.labelledAxis().orient("bottom").height(2*this.X_TITLE_LABEL_BUFFER).extend(function(){this.selection().classed("xAxis",!0)}).xAccessor(function(e){return e.bubbleDomain}).xScaleConstructor(this.xScaleConstructor).axisConstructor(function(){return l.svg.axis().ticks(4,",d")}).text(this.xAxisTitleLabel)},_createYAxis:function(){return c.labelledAxis().orient("left").width(60).extend(function(){this.selection().classed("yAxis",!0)}).yAccessor(function(e){return e.bubbleRadius}).yScaleConstructor(this.yScaleConstructor).axisConstructor(function(){return l.svg.axis().ticks(5,",d")}).text(this.yAxisTitleLabel)},_createGraphContentLayer:function(e){return c.layerable().extend(function(){this.selection().classed("graph",!0)}).addLayer("graph",e)},_tooltipTitleSpanIdForIndex:function(e){return"bubble-chart-"+this.options.id+"-tooltip-"+e},_addTooltipsToCircles:function(e,i,s){var o=this;this.$("circle").each(function(s,r){t(r).tooltip({html:!0,title:function(){return'<span id="'+o._tooltipTitleSpanIdForIndex(s)+'">'+i(e[s])+"</span>"},trigger:"manual",gravity:"w",className:o.TOOLTIP_CLASS})})},_addClipToHideCirclesOutsideBorder:function(e,t,i){var s="bubble-chart-component-clip-"+this.options.id;l.select(this.$("g.layer.graph").get(0)).insert("defs").append("svg:clipPath").attr("id",s).append("rect").attr("width",t).attr("height",i),e.attr("clip-path","url(#"+s+")")},_addBorderToFrameOfSize:function(e,t){l.select(this.$("g.layer.graph").get(0)).insert("rect").classed("graph-border",!0).attr("width",e).attr("height",t)},_createBubblePlot:function(){var e=this;return n().extend(function(){e._addTooltipsToCircles(e.model.get("data"),this.titleAccessor(),this.radius()),e._addClipToHideCirclesOutsideBorder(this.selection(),this.width(),this.height()),e._addBorderToFrameOfSize(this.width(),this.height())}).xScaleConstructor(this.xScaleConstructor).yScaleConstructor(this.yScaleConstructor).xAccessor(function(e){return e.bubbleDomain}).yAccessor(function(e){return e.bubbleRange}).radiusAccessor(function(e){return e.bubbleRadius}).colorAccessor(function(e){return e.bubbleColorValue}).update(function(e,i){var s=this.titleAccessor();e.selection.each(function(e,i){t(this).data(s(e),"true")}).on("click",this.click()).on("mouseenter",this.mouseenter()).on("mouseleave",this.mouseleave())}).extend({colorScaleConstructor:c.inherit("colorScaleConstructor",l.scale.quantile),colorRange:c.inherit("colorRange").onDefault(function(){return e.model.get("colors")}),colorDomain:c.inherit("colorDomain").onDefault(function(){return e.model.get("colorDomain")}),titleAccessor:c.prop(function(e){return e.key}),xRange:function(){return[0,c.checkIsNumber(this.width())-c.checkIsNumber(l.max(e.model.get("data"),this.radius()))-5]},yRange:function(){return[c.checkIsNumber(this.height()),c.checkIsNumber(l.max(e.model.get("data"),this.radius()))+5]},click:function(){var t=this.titleAccessor(),i=this.color(),s=this.colorRange();return function(r){var n=s.indexOf(i(r));o.send({name:"jira.dashboard.gadgets.bubble-chart.bubble-clicked",data:{colorBucket:n}}),e.model.set("selectedCircle",{issueKey:t(r),colorBucket:n,isTopColorBucket:n===s.length-1})}},mouseenter:function(){var i=this.colorRange(),s=this.color(),o=this.titleAccessor();return function(r,n){var l=i.indexOf(s(r));t(this).tipsy("show"),e.model.set("highlightedCircle",{issueKey:o(r),colorBucket:l,index:n})}},mouseleave:function(){return function(){t(this).tipsy("hide"),e.model.set("highlightedCircle",{issueKey:void 0,colorBucket:void 0})}}})},_positionToolTipForCircle:function(e,i){setTimeout(function(){var s=this._tooltipTitleSpanIdForIndex(i),o=t("#"+s).parent().parent(),r=Number(t(e).attr("r")),n=e.getBoundingClientRect().left+window.pageXOffset,c=e.getBoundingClientRect().top+window.pageYOffset;o.css({top:c+r-20,left:n+2*r}),l.select(o.get(0)).classed(this.TOOLTIP_CLASS,!1)}.bind(this),this.TOOLTIP_DELAY_APPEAR_TIME+10)},_createInlineDialogContent:function(t,i,s,o,r){return JIRA.DashboardItem.BubbleChartComponent.Templates.InlineDialog({url:e()+"/browse/"+t,title:t,x:i,xLabel:this.model.get("xAxisLabel"),y:s,yLabel:this.model.get("yAxisLabel"),radius:o,radiusLabel:this.model.get("sizeAxisLabel"),color:r,colorLabel:this.model.get("colorAxisLabel"),isTopColorBucket:this.model.get("isSelectedCircleInTopColorBucket")})},_createInlineDialog:function(e,i,o){var r=new s(t(e),i,function(e,t,i){return e.addClass("bubble-chart-inline-dialog"),e.css({padding:"10px"}),e.html(o),i(),!1},{hideDelay:6e4,gravity:"w",cacheContent:!1,width:350,fadeTime:0});return r.dashboardItemId=this.options.id,r},_addBackingCircleForSelectedCircle:function(e){var i=e.cloneNode(!0),s=Number(t(i).attr("r"));l.select(e).classed(this.SELECTED_CIRCLE_CLASS,!0),l.select(i).classed(this.BACKING_CIRCLE_CLASS,!0),t(i).attr("r",s+3),t(e).before(i)}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart-component', location = 'static/components/charts/bubble-chart/BubbleChartComponent.soy' */
// This file was automatically generated from BubbleChartComponent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.BubbleChartComponent.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.BubbleChartComponent == 'undefined') { JIRA.DashboardItem.BubbleChartComponent = {}; }
if (typeof JIRA.DashboardItem.BubbleChartComponent.Templates == 'undefined') { JIRA.DashboardItem.BubbleChartComponent.Templates = {}; }


JIRA.DashboardItem.BubbleChartComponent.Templates.Container = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '-bubble-chart-component-wrapper" class="bubble-chart-component-wrapper"><svg class="bubble-chart-component-plot" /></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChartComponent.Templates.Container.soyTemplateName = 'JIRA.DashboardItem.BubbleChartComponent.Templates.Container';
}


JIRA.DashboardItem.BubbleChartComponent.Templates.InlineDialog = function(opt_data, opt_ignored) {
  return '<div class="bubble-chart-inline-dialog-container"><h4>' + soy.$$escapeHtml(opt_data.title) + '<a href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + aui.buttons.button({text: 'View'}) + '</a></h4><table><tr class="chartHeader"><td>' + soy.$$escapeHtml(opt_data.xLabel) + '</td><td>' + soy.$$escapeHtml(opt_data.yLabel) + '</td><td>' + soy.$$escapeHtml(opt_data.radiusLabel) + '</td><td>' + soy.$$escapeHtml(opt_data.colorLabel) + '</td></tr><tr class="chartInfo"><td>' + soy.$$escapeHtml(opt_data.x) + '</td><td>' + soy.$$escapeHtml(opt_data.y) + '</td><td>' + soy.$$escapeHtml(opt_data.radius) + '</td><td class="hot">' + ((opt_data.isTopColorBucket) ? '<span class=\'d4-is-top\'>' + soy.$$escapeHtml(opt_data.color) + '</span>&nbsp;<div class="hot-icon" />' : soy.$$escapeHtml(opt_data.color)) + '</td></tr></table></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChartComponent.Templates.InlineDialog.soyTemplateName = 'JIRA.DashboardItem.BubbleChartComponent.Templates.InlineDialog';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:relative-distribution', location = 'static/components/charts/components/RelativeDistribution.js' */
define("jira-dashboard-items/components/charts/components/relative-distribution",function(){"use strict";return{sortedArraySliceForUniqueValueCount:function(r,t){for(var e=0,n=0;n<r.length;n++)if(0===n&&e++,n>0&&r[n]!==r[n-1]&&e++,e>t)return n-1;return r.length-1},distribute:function(r,t){if(1!==parseFloat(t.reduce(function(r,t){return r+t}).toPrecision(3)))throw new Error("Percentages given to RelativeDistribution#distribute do not add up to 1.");for(var e=r.sort(function(r,t){return r-t}),n={},i=0;i<e.length;i++)n[e[i]]?n[e[i]]=n[e[i]]++:n[e[i]]=0;for(var o=Object.keys(n).length,u={},i=0;i<t.length;i++){var a=t[i]*o;a=Math.ceil(a),u[t[i]]=a}for(var s=[],c=0,l=0;l<t.length;l++){var f=e.slice(c),h=u[t[l]],d=c+this.sortedArraySliceForUniqueValueCount(f,h);s[l]=[],e.slice(c,d+1).forEach(function(r){s[l].push(r)}),c=d+1}return s}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart-model', location = 'static/dashboarditem/bubble-chart/BubbleChartModel.js' */
define("jira-dashboard-items/bubble-chart-model",["jira/util/formatter","wrm/context-path","jquery","underscore","backbone","jira-dashboard-items/components/charts/components/relative-distribution","jira-dashboard-items/lib/d3"],function(e,t,i,r,o,n,l){"use strict";return o.Model.extend({urlRoot:t()+"/rest/gadget/1.0/bubblechart",defaults:{useLogarithmicScale:!1,useRelativeColoring:!0,colors:["#28892C","#95B436","#F5C342","#F1A256","#F79232","#D04436"],issueLimit:200,sizeAxis:"participants"},url:function(){return this.urlRoot+"/generate?projectOrFilterId="+this.get("projectOrFilterId")+"&bubbleType="+this.get("bubbleType")+"&recentCommentsPeriod="+this.get("recentCommentsPeriod")},parse:function(t){var i={};i.keyLabel="Issue key",i.xAxisLabel="Days open",i.yAxisLabel="Comments",i.sizeAxisLabel="participants"===this.get("bubbleType")?"Participants":"Votes",i.colorAxisLabel="Recent comments",i.filterTitle=t.filterTitle,i.issueCount=t.issueCount;var r=t.data;return this.get("useLogarithmicScale")&&(r=this._filterZeroesForLogarithmicScale(r)),t.warning&&t.issueCount>=this.get("issueLimit")||r.length>this.get("issueLimit")?i.exceedsIssueLimit=!0:i.exceedsIssueLimit=!1,i.colorDomain=this.get("useRelativeColoring")?this._domainForRelativeColorDistribution(r):this._domainForAbsoluteColorDistribution(r),i.legendData=this.get("useRelativeColoring")?this._legendDataForRelativeColoring(this.get("colors")):this._legendDataForAbsoluteColoring(this.get("colors")),i.data=r,i},getIssueForIssueKey:function(e){return r.findWhere(this.get("data"),{key:e})},indexInDomainForValue:function(e){var t=l.scale.quantile().domain(this.get("colorDomain")).range(this.get("colors"));return this.get("colors").indexOf(t(e))},_domainForAbsoluteColorDistribution:function(e){return[l.min(e,function(e){return e.bubbleColorValue}),l.max(e,function(e){return e.bubbleColorValue})]},_domainForRelativeColorDistribution:function(e){var t=e.map(function(e){return e.bubbleColorValue});return n.distribute(t,[.1,.2,.4,.2,.1]).map(function(e){return e[0]}).filter(Number)},_filterZeroesForLogarithmicScale:function(e){return e.filter(function(e){return 0!==e.bubbleDomain&&0!==e.bubbleRange})},_legendDataForRelativeColoring:function(t){var i=t.map(function(e,t){return""});return i[0]="Low",i[i.length-1]="High",i},_legendDataForAbsoluteColoring:function(e){return this._legendDataForRelativeColoring(e)}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:discrete-legend', location = 'static/components/charts/components/discrete-legend/DiscreteLegend.js' */
define("jira-dashboard-items/components/charts/components/discrete-legend/discrete-legend",["underscore","jquery","jira-dashboard-items/components/charts/components/colorable","jira-dashboard-items/lib/d3","jira-dashboard-items/lib/c3","backbone"],function(t,e,n,i,s,r){"use strict";var l=function(){return s.component("discrete-legend").extend(s.layerable()).extend(s.drawable()).extend(n()).extend(function(){var t=20/this.data().length,e=this.width()/this.data().length-t,n=this.height(),i=this.selection().append("svg").attr("class","discrete-legend-svg"),s=i.append("g").attr("transform","translate(2, 2)").selectAll("rect").data(this.data()).enter().append("g").attr("data-segment-id",function(t,e){return e}).classed("segment-group",!0);s.append("rect").classed("original-segment",!0).attr("width",e).attr("height",n).attr("rx",3).attr("x",function(n,i){return i*e+i*t}).attr("y",0).attr("fill",this.color()),s.append("rect").classed("backing-segment",!0).attr("width",e+2).attr("height",n+2).attr("x",function(n,i){return i*e+i*t-1.25}).attr("y",-1.25).attr("fill",this.color()).attr("rx",3),s.append("rect").classed("selected-segment",!0).attr("width",e-2.5).attr("height",n-2.5).attr("x",function(n,i){return i*e+i*t+1}).attr("y",1).attr("rx",1).attr("fill",this.color()),i.append("g").selectAll("text").data(this.data()).enter().append("text").text(function(t,e){return t}).attr("transform",function(n,i){return"translate("+(i*e+e/2+i*t)+", 30)"})}).extend({colorAccessor:s.inherit("colorAccessor",function(t){return t}),colorScaleConstructor:s.inherit("colorScaleConstructor",i.scale.quantize)})};return r.View.extend({initialize:function(t){this.options=t||{},this.model=t.model,this.listenTo(this.model,"change:selectedSegment",this._selectedSegmentDidChange),this.listenTo(this.model,"change:highlightedSegment",this._highlightedSegmentDidChange)},_selectedSegmentDidChange:function(t,e){void 0!==e?(this._deselectAllSegments(),this._selectSegment(e)):this._deselectAllSegments()},_highlightedSegmentDidChange:function(t,e){void 0!==e?this._highlightSegment(e):this._unhighlightAllSegments()},render:function(){var t=this.model.get("data").map(function(t,e){return e}),e=this.$el.attr("width"),n=l().data(this.model.get("data")).colorScaleConstructor(i.scale.ordinal).colorDomain(t).colorRange(this.model.get("colors")).colorAccessor(function(t,e){return e}).height(10).width(e);i.select(this.el).append("div").attr("class","discrete-legend-component").call(n)},_selectSegment:function(t){i.select(this._segmentWithIndex(t)).classed("selected",!0)},_deselectAllSegments:function(){i.select(this.el).selectAll(".segment-group").classed("selected",!1)},_highlightSegment:function(t){i.select(this._segmentWithIndex(t)).classed("highlighted",!0)},_unhighlightAllSegments:function(){i.select(this.el).selectAll(".segment-group").classed("highlighted",!1)},_segmentWithIndex:function(t){return e('g.segment-group[data-segment-id="'+t+'"]',this.$el).get(0)}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart', location = 'static/dashboarditem/bubble-chart/BubbleChart.js' */
define("jira-dashboard-items/bubble-chart",["jira/util/formatter","jquery","underscore","backbone","jira-dashboard-items/components/charts/bubble-chart/bubble-chart-component","jira-dashboard-items/bubble-chart-model","jira-dashboard-items/components/charts/components/discrete-legend/discrete-legend"],function(e,t,i,s,r,n,h){"use strict";return s.View.extend({template:JIRA.DashboardItem.BubbleChart.Templates,initialize:function(e){this.RESIZE_RATE_LIMIT=300,this.setTitle=e.setTitle,this.hideLoadingBar=e.hideLoadingBar,this.resize=e.resize,this.discreteLegendModel=new s.Model({data:e.model.get("legendData"),colors:e.model.get("colors")}),this.listenTo(e.model,{"change:legendData":function(e,t){this.discreteLegendModel.set("data",t)},"change:colors":function(e,t){this.discreteLegendModel.set("colors",t)}})},render:function(){this.listenTo(this.model,{"change:data":this._renderBubbleChart,"change:filterTitle":function(e,t){this.setGadgetTitleForFilter(t)},"change:highlightedCircle":function(e,t){this.discreteLegendModel.set("highlightedSegment",t.colorBucket)},"change:selectedCircle":function(e,t){this.discreteLegendModel.set("selectedSegment",t?t.colorBucket:void 0)}}),this.resizeHandler=i.debounce(this._renderBubbleChart.bind(this),this.RESIZE_RATE_LIMIT),t(window).resize(this.resizeHandler),this.$el.on("remove",function(){t(window).off("resize",this.resizeHandler)}.bind(this))},_renderBubbleChart:function(){this._removeExistingBubbleChartIfItExists(),this.hideLoadingBar();var e=this.model.get("data");if(e){if(e&&0===e.length)return void this._displayNoDataInfoMessage();var i=(this.model.get("bubbleType"),this.model.get("exceedsIssueLimit"));this.$el.html(this.template.Container({type:this.model.get("bubbleType"),displayWarning:i}));var s=this.$(".bubble-chart-component-container");this.bubbleChart=this._createBubbleChart(s,this.model.get("data"),this.model.get("colors")),this.bubbleChart.render();var r=this.$(".discrete-legend-component-container"),n=t(".graph-border",s).attr("width"),h=t(".graph-border",s).attr("height");r.attr("width",n),r.attr("height",h),this.legend=this._createLegend(r.get(0)),this.legend.render(),this.resize(),this.setGadgetTitleForFilter(this.model.get("filterTitle"))}},_removeExistingBubbleChartIfItExists:function(){this.bubbleChart&&(this.bubbleChart.stopListening(),this.bubbleChart.$el.remove(),this.bubbleChart=null)},_displayNoDataInfoMessage:function(){this.setTitle("Bubble Chart"),this.$el.html(this.template.NoDataInfo()),this.resize()},_createBubbleChart:function(e){return new r({model:this.model,el:e,id:this.id})},_createLegend:function(e){return new h({el:e,model:this.discreteLegendModel})},setGadgetTitleForFilter:function(t){this.setTitle(e.format("Bubble Chart: {0}",t))}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart', location = 'static/dashboarditem/bubble-chart/BubbleChart.soy' */
// This file was automatically generated from BubbleChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.BubbleChart.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.BubbleChart == 'undefined') { JIRA.DashboardItem.BubbleChart = {}; }
if (typeof JIRA.DashboardItem.BubbleChart.Templates == 'undefined') { JIRA.DashboardItem.BubbleChart.Templates = {}; }


JIRA.DashboardItem.BubbleChart.Templates.Container = function(opt_data, opt_ignored) {
  return '<div class="bubble-chart-gadget-container"><h3>' + soy.$$escapeHtml(AJS.format('Correlation between days open, number of comments, and {0}',opt_data.type)) + '</h3><div class="bubble-chart-gadget-plot-container"><div class="discrete-legend-component-container" /><div class="bubble-chart-component-container" /></div>' + ((opt_data.displayWarning) ? aui.message.warning({title: 'Too many issues', closeable: 'false', content: '<p>' + soy.$$escapeHtml('This chart can display only the first 200 matching issues. Refine your search to return fewer issues.') + '</p>'}) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChart.Templates.Container.soyTemplateName = 'JIRA.DashboardItem.BubbleChart.Templates.Container';
}


JIRA.DashboardItem.BubbleChart.Templates.ConfigurationContainer = function(opt_data, opt_ignored) {
  return '<div class="bubble-chart-config-container"></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChart.Templates.ConfigurationContainer.soyTemplateName = 'JIRA.DashboardItem.BubbleChart.Templates.ConfigurationContainer';
}


JIRA.DashboardItem.BubbleChart.Templates.Configuration = function(opt_data, opt_ignored) {
  return '' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + JIRA.DashboardItem.ProjectFilterAutoComplete.Templates.ConfigurationField({prefix: opt_data.prefix, id: 'project-filter-picker', selectionType: opt_data.preferences.type, selectionID: opt_data.preferences.id, selectionName: opt_data.preferences.name}) + aui.form.selectField({id: opt_data.prefix, labelContent: 'Bubble size', name: 'bubbleType', options: opt_data.types, value: opt_data.preferences.bubbleType, descriptionText: 'Select the basis for the size of the bubbles.'}) + aui.form.selectField({id: opt_data.prefix, labelContent: 'Interval', name: 'recentCommentsPeriod', options: opt_data.intervals, value: opt_data.preferences.recentCommentsPeriod, descriptionText: 'You can set the interval at which an issue comment is deemed recent.'}) + aui.form.checkboxField({legendContent: 'Relative coloring', fields: opt_data.relativeColoringCheckboxes}) + aui.form.checkboxField({legendContent: 'Logarithmic scale', fields: opt_data.logarithmicScaleCheckboxes}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh}), isConfigured: opt_data.preferences.isConfigured});
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChart.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.BubbleChart.Templates.Configuration';
}


JIRA.DashboardItem.BubbleChart.Templates.Error = function(opt_data, opt_ignored) {
  return '<div class="bubble-chart-gadget-container">' + aui.message.error({titleContent: opt_data.title, content: opt_data.content, closeable: 'false'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChart.Templates.Error.soyTemplateName = 'JIRA.DashboardItem.BubbleChart.Templates.Error';
}


JIRA.DashboardItem.BubbleChart.Templates.NoDataInfo = function(opt_data, opt_ignored) {
  return '<div class="bubble-chart-gadget-container">' + aui.message.info({titleContent: 'No issues', content: 'The project or filter did not return any issues'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.BubbleChart.Templates.NoDataInfo.soyTemplateName = 'JIRA.DashboardItem.BubbleChart.Templates.NoDataInfo';
}
;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.4331a05956', location = 'aui.chunk.5deaa78ecf5552de0030--5f7dca8db060287e74de.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.4331a05956"],{LTUc:function(i,u,n){"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.INPUT_SUFFIX="-input"}}]);
//# sourceMappingURL=aui.chunk.5deaa78ecf5552de0030--5f7dca8db060287e74de.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.form.toggle', location = 'aui.chunk.633e74ae78e0b1dcbc5a--6af04f29cd16d0e2d37c.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.form.toggle"],{"+QCq":function(t,e,i){},KKmC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleEl=void 0;var u=i("Rhx1");Object.defineProperty(e,"ToggleEl",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(u).default}}),i("6fSn"),i("eSvk"),i("+QCq")},Rhx1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("oSOL"),i("XphB");var u=i("kdZR"),n=p(i("+x/D")),a=p(i("fVKi")),c=p(i("+ay7")),s=p(i("gjsO")),l=p(i("4dFR")),o=i("LTUc"),r=p(i("P3rJ")),d=i("tYoR"),f=p(d),h=p(i("HH5i"));function p(t){return t&&t.__esModule?t:{default:t}}function b(t){t._canFireEventsNow&&t.dispatchEvent(new r.default("change",{bubbles:!0}))}function k(t){return t._input||(t._input=t.querySelector("input"))}function _(t,e){k(e).removeAttribute(t)}function g(t,e,i){k(e).setAttribute(t,i.newValue)}function v(t){return{removed:_.bind(this,t),fallback:g.bind(this,t)}}var m={removed:function(t){_.call(this,"form",t),t._formId=null},fallback:function(t,e){g.call(this,"form",t,e),t._formId=e.newValue}},A={removed:_.bind(void 0,"id"),fallback:function(t,e){var i=""+e.newValue+o.INPUT_SUFFIX;k(t).setAttribute("id",i)}},y={removed:function(t){_.call(this,"value",t),k(t).value="on"},fallback:function(t,e){g.call(this,"value",t,e)}},w={removed:function(t){k(t).checked=!1,b(t)},fallback:function(t){k(t).checked=!0,b(t)}},x={removed:function(t){k(t).removeAttribute("aria-label")},fallback:function(t,e){k(t).setAttribute("aria-label",e.newValue)}};var E=(0,l.default)("aui-toggle",{template:(0,s.default)('<input type="checkbox" class="aui-toggle-input assistive">','<span class="aui-toggle-view">','<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(t){k(t),t._tick=t.querySelector(".aui-toggle-tick"),t._cross=t.querySelector(".aui-toggle-cross"),t._spinner=new f.default,t._spinner.setAttribute("size",d.SIZE.SMALL.name),(0,n.default)(t._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1}),function(t){t._input.addEventListener("keydown",function(e){t.busy&&e.keyCode===c.default.SPACE&&e.preventDefault()}),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t._input.addEventListener("click",function(e){t.busy&&e.preventDefault()})}(t),t.hasAttribute("checked")&&k(t).setAttribute("checked",""),t._canFireEventsNow=!0},attached:function(t){(0,a.default)(t).attributeExists("label")},events:{click:function(t,e){t.disabled||t.busy||e.target===t._input||(t._input.checked=!t._input.checked),(0,u.setBooleanAttribute)(t,"checked",k(t).checked)}},attributes:{id:A,checked:w,disabled:v("disabled"),form:m,name:v("name"),value:y,"tooltip-on":{value:h.default.getText("aui.toggle.on"),fallback:function(t,e){k(t).setAttribute("tooltip-on",e.newValue||h.default.getText("aui.toggle.on"))}},"tooltip-off":{value:h.default.getText("aui.toggle.off"),fallback:function(t,e){k(t).setAttribute("tooltip-off",e.newValue||h.default.getText("aui.toggle.off"))}},label:x},prototype:{focus:function(){return this._input.focus(),this},get checked(){return this._input.checked},set checked(t){this._input.checked!==t&&(this._input.checked=t,(0,u.setBooleanAttribute)(this,"checked",t))},get disabled(){return this._input.disabled},set disabled(t){return(0,u.setBooleanAttribute)(this,"disabled",t)},get form(){return document.getElementById(this._formId)},set form(t){return m.fallback.call(this,this,{newValue:t||null}),this.form},get name(){return this._input.name},set name(t){return this.setAttribute("name",t),t},get value(){return this._input.value},set value(t){var e=null===t?"":t;return this.setAttribute("value",e),e},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(t){return(0,u.setBooleanAttribute)(this,"busy",t),t?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,n.default)(this._input).addClass("indeterminate-checked"),(0,n.default)(this._tick).append(this._spinner)):(0,n.default)(this._cross).append(this._spinner)):((0,n.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),this._spinner.parentNode&&this._spinner.parentNode.removeChild(this._spinner)),function(t,e){t.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+t.id+'"]'),function(t){t.disabled=e})}(this,!!t),t}}});e.default=E,t.exports=e.default}},[["KKmC","runtime","aui.splitchunk.vendors--1df5b34e16","aui.splitchunk.vendors--95c789edf5","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.vendors--be1eb78c1a","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.54d3f16c20","aui.splitchunk.336ae4f9e7","aui.splitchunk.1659111a3c","aui.splitchunk.bc4873e5f9","aui.splitchunk.1df5b34e16","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.9c48cc20a9","aui.splitchunk.908fe798b4","aui.splitchunk.cd8d39be78","aui.splitchunk.462ee5f9ef","aui.splitchunk.afa5039e04","aui.splitchunk.ed86a19e01","aui.splitchunk.50dca3e042","aui.splitchunk.53839a15cf","aui.splitchunk.be1eb78c1a","aui.splitchunk.5b7fdbd666","aui.splitchunk.8a641c03a4","aui.splitchunk.86ad04cc86","aui.splitchunk.4331a05956","aui.splitchunk.c45b2e0bc3"]]]);
//# sourceMappingURL=aui.chunk.633e74ae78e0b1dcbc5a--6af04f29cd16d0e2d37c.js.map;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart-dashboard-item-resources', location = 'static/dashboarditem/bubble-chart/BubbleChartConfigView.js' */
define("jira-dashboard-items/bubble-chart-config-view",["jira/util/formatter","jquery","backbone","underscore","jira-dashboard-items/components/autocomplete/project-filter-autocomplete"],function(e,t,i,r,l){"use strict";return i.View.extend({events:{"click .cancel":"cancel",submit:"submit"},initialize:function(t){this.id=t.id,this.intervals=t.intervals,this.types=t.types,this.projectFilterDelay=t.projectFilterDelay,this.intervalOptions=[{value:"1",text:"1 day"},{value:"7",text:"1 week"},{value:"14",text:"2 weeks"},{value:"28",text:"4 weeks"},{value:"57",text:"8 weeks"},{value:"84",text:"12 weeks"}],this.typeOptions=[{value:"participants",text:"Participants"},{value:"votes",text:"Votes"}]},render:function(e){var t=r.clone(e||{});t=r.defaults(t,this._defaultPreferences),t.refresh="15"===t.refresh,this.$el.html(JIRA.DashboardItem.BubbleChart.Templates.Configuration({prefix:this.id+"-",preferences:t,intervals:this.intervalOptions,types:this.typeOptions,relativeColoringCheckboxes:this._relativeColoringCheckboxes(t),logarithmicScaleCheckboxes:this._logarithmicScaleCheckboxes(t)})),this._bindProjectFilterAutocomplete()},_defaultPreferences:{isConfigured:!1,useRelativeColoring:!0,recentCommentsPeriod:7,refresh:"15",useLogarithmicScale:!1},_bindProjectFilterAutocomplete:function(){var e=this,i={field:t("#"+this.id+"-project-filter-picker",this.$el),completeField:function(t){t&&(e.$el.find("input[name=type]").val(t.type),e.$el.find("input[name=id]").val(t.id),e.$el.find("input[name=name]").val(t.name),e.$el.find(".filterpicker-value-name").text(t.name).addClass("success"),this.field.val(""),this.field.trigger("change"))},maxHeight:140};this.projectFilterDelay&&(i.delay=this.projectFilterDelay),i.parentElement=this.$el.find("form"),i.fieldID=i.field.attr("id"),l(i)},submit:function(e){var i=t("form",this.$el).serializeArray();e.preventDefault();var r=this._getPreferencesObjectFromSerializedArray(i);this.validPreferences(r)&&this.trigger("submit",r)},cancel:function(e){e.preventDefault(),this.trigger("cancel")},_getPreferencesObjectFromSerializedArray:function(e){var t=e.reduce(function(e,t){return e[t.name]=t.value,e},{});return this._mapFormFieldsToCorrectPreferenceNamesAndValues(t)},_mapFormFieldsToCorrectPreferenceNamesAndValues:function(e){var i=t.extend({},e);return i.refresh=e["refresh-interval"],i.useLogarithmicScale="on"===e.useLogarithmicScale,i.useRelativeColoring="on"===e.useRelativeColoring,delete i["refresh-interval"],i},validPreferences:function(i){var r=!0;return i.id&&i.type?t(".projectOrFilter-error",this.$el).hide():(t(".projectOrFilter-error",this.$el).text("No project or filter specified.").show(),r=!1),this.trigger("layoutUpdate"),r},_relativeColoringCheckboxes:function(t){return[{id:"bubble-chart-relative-color-"+this.id,name:"useRelativeColoring",labelText:"When enabled/selected, issues are grouped/distributed in different colors, to better distinguish the issues that receive more recent comments from the ones that receive fewer recent comments.",isChecked:t.useRelativeColoring}]},_logarithmicScaleCheckboxes:function(t){return[{id:"bubble-chart-log-scale-"+this.id,name:"useLogarithmicScale",labelText:"Distribute bubbles closer to or farther apart from each other.",descriptionText:"This also filters any issue that has been open for zero days or has zero recent comments.",isChecked:t.useLogarithmicScale}]}})});;
;
/* module-key = 'com.atlassian.jira.gadgets:bubble-chart-dashboard-item-resources', location = 'static/dashboarditem/bubble-chart/BubbleChartDashboardItem.js' */
define("jira-dashboard-items/bubble-chart-dashboard-item",["jira/analytics","jira/util/formatter","jira-dashboard-items/bubble-chart","jira-dashboard-items/bubble-chart-config-view","jira-dashboard-items/bubble-chart-model","jquery","underscore"],function(e,t,i,r,n,s,a){"use strict";var o=function(e,i){this.API=e,this.options=i||{},this.errors={GENERIC:"Oops - an error has occurred",UNAUTHORIZED_TITLE:"You do not have permission to view this project or filter.",UNAUTHORIZED_CONTENT:"",NOT_FOUND_TITLE:"Not found",NOT_FOUND_CONTENT:"This project or filter could not be found."},this.model=new n({})};return o.prototype.render=function(t,r){e.send({name:"jira.dashboard.gadgets.bubble-chart.loaded",data:{bubbleType:r.bubbleType,useLogarithmicScale:r.useLogarithmicScale,useRelativeColoring:r.useRelativeColoring}}),this.API.initRefresh(r,a.bind(this.render,this,t,r)),this.API.showLoadingBar(),this.bubbleChart||(this.bubbleChart=new i({model:this.model,id:this.API.getGadgetId(),setTitle:function(e){this.API.setTitle(e)}.bind(this),hideLoadingBar:function(){this.API.hideLoadingBar()}.bind(this),resize:function(){this.API.resize()}.bind(this),el:t})),this.bubbleChart.render(),this.model.set({data:void 0,projectOrFilterId:r.type+"-"+r.id,bubbleType:r.bubbleType,recentCommentsPeriod:r.recentCommentsPeriod,useLogarithmicScale:r.useLogarithmicScale,useRelativeColoring:r.useRelativeColoring}),this.model.fetch().always(function(){this.API.hideLoadingBar()}.bind(this)).fail(function(e){this._displayErrorMessage(t,e)}.bind(this))},o.prototype._displayErrorMessage=function(e,t){var i={};try{var r=JSON.parse(t.responseText).errors;i.title=r.projectOrFilterId,i.content=""}catch(e){i.title=this.errors.GENERIC,i.content=""}e.html(JIRA.DashboardItem.BubbleChart.Templates.Error(i)),this.API.resize()},o.prototype.renderEdit=function(e,i){this.bubbleChart&&this.bubbleChart.resizeHandler&&s(window).off("resize",this.bubbleChart.resizeHandler),s(e).html(JIRA.DashboardItem.BubbleChart.Templates.ConfigurationContainer()),this.configView=new r({id:this.API.getGadgetId(),el:s(".bubble-chart-config-container",e),projectFilterDelay:this.options.delay}),i.name&&(i.name=soydata.VERY_UNSAFE.ordainSanitizedHtml(i.name)),this.configView.render(i),this.configView.bind("cancel",a.bind(function(){this.API.closeEdit()},this)),this.configView.bind("submit",a.bind(function(e){this.configViewFormDidSubmit(e)},this)),this.configView.bind("layoutUpdate",function(){this.API.resize()}.bind(this)),this.API.once("afterRender",function(){this.API.resize()}.bind(this)),this.API.setTitle("Bubble Chart")},o.prototype.configViewFormDidSubmit=function(e){this.API.resize(),this.API.savePreferences(e)},o});;
;
/* module-key = 'com.atlassian.jira.gadgets:text-dashboard-item-resource', location = 'static/dashboarditem/text/Text.soy' */
// This file was automatically generated from Text.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.Text.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.Text == 'undefined') { JIRA.DashboardItem.Text = {}; }
if (typeof JIRA.DashboardItem.Text.Templates == 'undefined') { JIRA.DashboardItem.Text.Templates = {}; }


JIRA.DashboardItem.Text.Templates.Content = function(opt_data, opt_ignored) {
  return '<div class="text-dashboard-item-container"><iframe src="about:blank"></iframe></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Text.Templates.Content.soyTemplateName = 'JIRA.DashboardItem.Text.Templates.Content';
}


JIRA.DashboardItem.Text.Templates.Configuration = function(opt_data, opt_ignored) {
  return '<div class="text-dashboard-item-config-container">' + Atlassian.DashboardItem.Common.Templates.config({fields: '' + aui.form.textField({name: 'title', labelContent: 'Title', value: opt_data.preferences.title, descriptionText: 'The text to be displayed as the title of this gadget.'}) + aui.form.textareaField({name: 'html', labelContent: 'HTML', value: opt_data.preferences.html, descriptionText: 'The HTML to display in the body of this gadget.'}), isConfigured: opt_data.preferences.isConfigured}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.Text.Templates.Configuration.soyTemplateName = 'JIRA.DashboardItem.Text.Templates.Configuration';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:text-dashboard-item-resource', location = 'static/dashboarditem/text/Text.js' */
define("jira-dashboard-items/text",["jquery","underscore"],function(i,e){"use strict";function t(i,e){i.contentWindow.document.open(),i.contentWindow.document.write(e),i.contentWindow.document.close()}function r(i){var e=i.serializeArray(),t={};return e.forEach(function(i){t[i.name]=i.value}),t}function a(e){i(e.contentWindow.document.head).prepend(i("<style></style>").append('html,body,p,div,h1,h2,h3,h4,h5,h6,img,pre,form,fieldset{margin:0;padding:0}ul,ol,dl{margin:0}img,fieldset{border:0}img:-moz-broken{font-size:inherit}details,main,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}input[type="button"],input[type="submit"],input[type="reset"]{-webkit-appearance:button}[lang|=en],body{font-family:Arial,sans-serif}body{color:#333;font-size:14px;line-height:1.4285714285714}[lang|=ja]{font-family:"Hiragino Kaku Gothic Pro","?????? Pro W3","????",Meiryo,"?? ?????",Verdana,Arial,sans-serif}.aui-group,.aui-panel,.aui-tabs,blockquote,dl,form.aui,h1,h2,h3,h4,h5,h6,ol,p,pre,table.aui,ul{margin:10px 0 0}.aui-group:first-child,.aui-panel:first-child,.aui-tabs:first-child,blockquote:first-child,dl:first-child,form.aui:first-child,h1:first-child,h2:first-child,h3:first-child,h4:first-child,h5:first-child,h6:first-child,ol:first-child,p:first-child,pre:first-child,table.aui:first-child,ul:first-child{margin-top:0}.aui-page-header-hero .aui-page-header-main h1,.aui-page-header-hero .aui-page-header-main h2,.aui-page-header-marketing .aui-page-header-main h1,.aui-page-header-marketing .aui-page-header-main h2,h1{color:#333;font-size:32px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.aui-page-header-hero .aui-page-header-main p,.aui-page-header-marketing .aui-page-header-main p,h3{color:#333;font-size:20px;font-weight:400;line-height:1.5;text-transform:none;margin:30px 0 0}h4,h5,h6{font-weight:700;margin:20px 0 0}h6,small{font-size:12px}blockquote,h6,q,small{color:#707070}h4{color:#333;font-size:16px;line-height:1.25;text-transform:none}h5{color:#333;font-size:14px;line-height:1.42857143;text-transform:none}h6{line-height:1.66666667;text-transform:uppercase}h1:first-child,h2:first-child,h3:first-child,h4:first-child,h5:first-child,h6:first-child{margin-top:0}h1+h2,h2+h3,h3+h4,h4+h5,h5+h6{margin-top:10px}.aui-group>.aui-item>h1:first-child,.aui-group>.aui-item>h2:first-child,.aui-group>.aui-item>h3:first-child,.aui-group>.aui-item>h4:first-child,.aui-group>.aui-item>h5:first-child,.aui-group>.aui-item>h6:first-child{margin-top:20px}.aui-group:first-child>.aui-item>h1:first-child,.aui-group:first-child>.aui-item>h2:first-child,.aui-group:first-child>.aui-item>h3:first-child,.aui-group:first-child>.aui-item>h4:first-child,.aui-group:first-child>.aui-item>h5:first-child,.aui-group:first-child>.aui-item>h6:first-child{margin-top:0}small{line-height:1.3333333333333}code,kbd{font-family:monospace}address,cite,dfn,var{font-style:italic}blockquote{border-left:1px solid #ccc;margin-left:19px;padding:10px 20px}blockquote>cite{display:block;margin-top:10px}q:before{content:open-quote}q:after{content:close-quote}abbr{border-bottom:1px #707070 dotted;cursor:help}'))}function n(e){i(e).css("height",e.contentWindow.document.body.scrollHeight)}var o=function(i,e){this.API=i,this.options=e};o.prototype.render=function(r,o){i(r).html(JIRA.DashboardItem.Text.Templates.Content()),this.API.setTitle(h(o.title));var l=this;this.API.once("afterRender",function(){var h=i(".text-dashboard-item-container iframe",i(r)).get(0);t(h,e.unescape(o.html)),a(h),n(h),l.API.resize()})};var h=function(e){return i("<div>").html(e).html()};return o.prototype.renderEdit=function(t,a){var n=this;a.html=h(e.unescape(a.html)),a.title=e.escape(h(a.title)),i(t).html(JIRA.DashboardItem.Text.Templates.Configuration({preferences:a})),this.API.once("afterRender",this.API.resize);var o=i("form",i(t));i(".cancel",o).click(function(){n.API.closeEdit()}),o.submit(function(i){i.preventDefault();var e=r(o);n.API.savePreferences(e)})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-gadget-common', location = 'includes/js/gadgets/rapid/greenhopper-rapid-common.soy' */
// This file was automatically generated from greenhopper-rapid-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.gadgets.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.gadgets == 'undefined') { GH.tpl.gadgets = {}; }


GH.tpl.gadgets.renderBasicHeader = function(opt_data, opt_ignored) {
  return '' + ((opt_data.title && opt_data.showTitle) ? '<h2 class="gg-name">' + soy.$$escapeHtml(opt_data.title) + ((opt_data.subtitle && opt_data.showSubtitle) ? '<span class="gg-divider">:&nbsp;</span>' : '') + '</h2>' : '') + ((opt_data.subtitle && opt_data.showSubtitle) ? '<h3 class="gg-subtitle">' + ((opt_data.subtitleLabel) ? '<span class="gg-subtitle-label">' + soy.$$escapeHtml(opt_data.subtitleLabel) + ':</span> ' : '') + ((opt_data.subtitleLink) ? '<a href="' + soy.$$escapeHtml(opt_data.subtitleLink) + '" title="' + soy.$$escapeHtml(opt_data.subtitle) + '" class="version-link">' + soy.$$escapeHtml(opt_data.subtitle) + '</a>' : soy.$$escapeHtml(opt_data.subtitle)) + '<span class=\'ghx-version-report-version-status\'></span></h3>' : '');
};
if (goog.DEBUG) {
  GH.tpl.gadgets.renderBasicHeader.soyTemplateName = 'GH.tpl.gadgets.renderBasicHeader';
}
;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.mouse', location = 'aui.chunk.b05a49c51c2c704c0a53--b1810dc49c5eafca33b8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.mouse"],{mz4i:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("XPYc"),e.default="jquery",u.exports=e.default}},[["mz4i","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.b05a49c51c2c704c0a53--b1810dc49c5eafca33b8.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--7c76061134', location = 'aui.chunk.ec257084264be2137aff--47070070a0c5ff93b8b0.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--7c76061134"],{TRfs:function(e,t,s){},iCCw:function(e,t,s){var l,i,n;i=[s("oDIA"),s("XPYc"),s("O+lX"),s("yIBB")],void 0===(n="function"==typeof(l=function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var s=e(this),l=s.offset(),i={left:l.left-t.elementPos.left,top:l.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:s,left:i.left,top:i.top,right:i.left+s.outerWidth(),bottom:i.top+s.outerHeight(),startselected:!1,selected:s.hasClass("ui-selected"),selecting:s.hasClass("ui-selecting"),unselecting:s.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var s=this,l=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(l.filter,this.element[0]),this._trigger("start",t),e(l.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),l.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var l=e.data(this,"selectable-item");l.startselected=!0,t.metaKey||t.ctrlKey||(s._removeClass(l.$element,"ui-selected"),l.selected=!1,s._addClass(l.$element,"ui-unselecting"),l.unselecting=!0,s._trigger("unselecting",t,{unselecting:l.element}))}),e(t.target).parents().addBack().each(function(){var l,i=e.data(this,"selectable-item");if(i)return l=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),s._removeClass(i.$element,l?"ui-unselecting":"ui-selected")._addClass(i.$element,l?"ui-selecting":"ui-unselecting"),i.unselecting=!l,i.selecting=l,i.selected=l,l?s._trigger("selecting",t,{selecting:i.element}):s._trigger("unselecting",t,{unselecting:i.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var s,l=this,i=this.options,n=this.opos[0],c=this.opos[1],a=t.pageX,o=t.pageY;return n>a&&(s=a,a=n,n=s),c>o&&(s=o,o=c,c=s),this.helper.css({left:n,top:c,width:a-n,height:o-c}),this.selectees.each(function(){var s=e.data(this,"selectable-item"),r=!1,u={};s&&s.element!==l.element[0]&&(u.left=s.left+l.elementPos.left,u.right=s.right+l.elementPos.left,u.top=s.top+l.elementPos.top,u.bottom=s.bottom+l.elementPos.top,"touch"===i.tolerance?r=!(u.left>a||u.right<n||u.top>o||u.bottom<c):"fit"===i.tolerance&&(r=u.left>n&&u.right<a&&u.top>c&&u.bottom<o),r?(s.selected&&(l._removeClass(s.$element,"ui-selected"),s.selected=!1),s.unselecting&&(l._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1),s.selecting||(l._addClass(s.$element,"ui-selecting"),s.selecting=!0,l._trigger("selecting",t,{selecting:s.element}))):(s.selecting&&((t.metaKey||t.ctrlKey)&&s.startselected?(l._removeClass(s.$element,"ui-selecting"),s.selecting=!1,l._addClass(s.$element,"ui-selected"),s.selected=!0):(l._removeClass(s.$element,"ui-selecting"),s.selecting=!1,s.startselected&&(l._addClass(s.$element,"ui-unselecting"),s.unselecting=!0),l._trigger("unselecting",t,{unselecting:s.element}))),s.selected&&(t.metaKey||t.ctrlKey||s.startselected||(l._removeClass(s.$element,"ui-selected"),s.selected=!1,l._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,l._trigger("unselecting",t,{unselecting:s.element})))))}),!1}},_mouseStop:function(t){var s=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var l=e.data(this,"selectable-item");s._removeClass(l.$element,"ui-unselecting"),l.unselecting=!1,l.startselected=!1,s._trigger("unselected",t,{unselected:l.element})}),e(".ui-selecting",this.element[0]).each(function(){var l=e.data(this,"selectable-item");s._removeClass(l.$element,"ui-selecting")._addClass(l.$element,"ui-selected"),l.selecting=!1,l.selected=!0,l.startselected=!0,s._trigger("selected",t,{selected:l.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})?l.apply(t,i):l)||(e.exports=n)}}]);
//# sourceMappingURL=aui.chunk.ec257084264be2137aff--47070070a0c5ff93b8b0.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.selectable', location = 'aui.chunk.8715bd0c6e6a21be6cc9--b41682505f14b08b8b9c.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.selectable"],{FvNQ:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("TRfs"),i("iCCw"),e.default="jquery",u.exports=e.default}},[["FvNQ","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--7c76061134","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.8715bd0c6e6a21be6cc9--b41682505f14b08b8b9c.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--85718a7eef', location = 'aui.chunk.ae3c4b97fc5a1976668b--c6988b4dfd3c4a3d1198.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--85718a7eef"],{"2V+C":function(t,i,e){},XnJT:function(t,i,e){var s,h,n;h=[e("oDIA"),e("XPYc"),e("zq/Y"),e("lSwU"),e("O+lX"),e("yIBB")],void 0===(n="function"==typeof(s=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(i,e){if("hidden"===t(i).css("overflow"))return!1;var s,h=e&&"left"===e?"scrollLeft":"scrollTop";return i[h]>0||(i[h]=1,s=i[h]>0,i[h]=0,s)},_create:function(){var i,e=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,i={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(i),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(i),this._proportionallyResize()),this._setupHandles(),e.autoHide&&t(this.element).on("mouseenter",function(){e.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){e.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var i,e=function(i){t(i).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,i){switch(this._super(t,i),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var i,e,s,h,n,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},e=0;e<s.length;e++)h="ui-resizable-"+(i=t.trim(s[e])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+h),n.css({zIndex:o.zIndex}),this.handles[i]=".ui-resizable-"+i,this.element.append(n);this._renderAxis=function(i){var e,s,h,n;for(e in i=i||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=t(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[e],this.element),n=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),i.css(h,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(i){var e,s,h=!1;for(e in this.handles)((s=t(this.handles[e])[0])===i.target||t.contains(s,i.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(i){var e,s,h,n=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(e+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:s},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,h=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===h?this.axis+"-resize":h),this._addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(i){var e,s,h=this.originalMousePosition,n=this.axis,o=i.pageX-h.left||0,a=i.pageY-h.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(e=l.apply(this,[i,o,a]),this._updateVirtualBoundaries(i.shiftKey),(this._aspectRatio||i.shiftKey)&&(e=this._updateRatio(e,i)),e=this._respectSize(e,i),this._updateCache(e),this._propagate("resize",i),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",i,this.ui()),this._applyChanges()),!1)},_mouseStop:function(i){this.resizing=!1;var e,s,h,n,o,a,l,r=this.options;return this._helper&&(h=(s=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:this.sizeDiff.height,n=s?0:this.sizeDiff.width,o={width:this.helper.width()-n,height:this.helper.height()-h},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",i),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var i,e,s,h,n,o=this.options;n={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(i=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,h=n.maxWidth/this.aspectRatio,i>n.minWidth&&(n.minWidth=i),s>n.minHeight&&(n.minHeight=s),e<n.maxWidth&&(n.maxWidth=e),h<n.maxHeight&&(n.maxHeight=h)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var i=this.position,e=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=i.left+(e.width-t.width),t.top=null),"nw"===s&&(t.top=i.top+(e.height-t.height),t.left=i.left+(e.width-t.width)),t},_respectSize:function(t){var i=this._vBoundaries,e=this.axis,s=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,h=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,n=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,o=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,r=/sw|nw|w/.test(e),p=/nw|ne|n/.test(e);return n&&(t.width=i.minWidth),o&&(t.height=i.minHeight),s&&(t.width=i.maxWidth),h&&(t.height=i.maxHeight),n&&r&&(t.left=a-i.minWidth),s&&r&&(t.left=a-i.maxWidth),o&&p&&(t.top=l-i.minHeight),h&&p&&(t.top=l-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var i=0,e=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],h=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];i<4;i++)e[i]=parseFloat(s[i])||0,e[i]+=parseFloat(h[i])||0;return{height:e[0]+e[2],width:e[1]+e[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,i=0,e=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)t=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:e.height()-this.outerDimensions.height||0,width:e.width()-this.outerDimensions.width||0})},_renderProxy:function(){var i=this.element,e=this.options;this.elementOffset=i.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,i){return{width:this.originalSize.width+i}},w:function(t,i){var e=this.originalSize;return{left:this.originalPosition.left+i,width:e.width-i}},n:function(t,i,e){var s=this.originalSize;return{top:this.originalPosition.top+e,height:s.height-e}},s:function(t,i,e){return{height:this.originalSize.height+e}},se:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},sw:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[i,e,s]))},ne:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},nw:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[i,e,s]))}},_propagate:function(i,e){t.ui.plugin.call(this,i,[e,this.ui()]),"resize"!==i&&this._trigger(i,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(i){var e=t(this).resizable("instance"),s=e.options,h=e._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&e._hasScroll(h[0],"left")?0:e.sizeDiff.height,a=n?0:e.sizeDiff.width,l={width:e.size.width-a,height:e.size.height-o},r=parseFloat(e.element.css("left"))+(e.position.left-e.originalPosition.left)||null,p=parseFloat(e.element.css("top"))+(e.position.top-e.originalPosition.top)||null;e.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(e.element.css("width")),height:parseFloat(e.element.css("height")),top:parseFloat(e.element.css("top")),left:parseFloat(e.element.css("left"))};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),e._updateCache(s),e._propagate("resize",i)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,e,s,h,n,o,a,l=t(this).resizable("instance"),r=l.options,p=l.element,d=r.containment,g=d instanceof t?d.get(0):/parent/.test(d)?p.parent().get(0):d;g&&(l.containerElement=t(g),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(g),e=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){e[t]=l._num(i.css("padding"+s))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-e[3],width:i.innerWidth()-e[1]},s=l.containerOffset,h=l.containerSize.height,n=l.containerSize.width,o=l._hasScroll(g,"left")?g.scrollWidth:n,a=l._hasScroll(g)?g.scrollHeight:h,l.parentData={element:g,left:s.left,top:s.top,width:o,height:a}))},resize:function(i){var e,s,h,n,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||i.shiftKey,d={top:0,left:0},g=o.containerElement,u=!0;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio,u=!1),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio,u=!1),o.position.top=o._helper?l.top:0),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-l.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-l.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,p&&(o.size.height=o.size.width/o.aspectRatio,u=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio,u=!1)),u||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var i=t(this).resizable("instance"),e=i.options,s=i.containerOffset,h=i.containerPosition,n=i.containerElement,o=t(i.helper),a=o.offset(),l=o.outerWidth()-i.sizeDiff.width,r=o.outerHeight()-i.sizeDiff.height;i._helper&&!e.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),i._helper&&!e.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var i=t(this).resizable("instance").options;t(i.alsoResize).each(function(){var i=t(this);i.data("ui-resizable-alsoresize",{width:parseFloat(i.width()),height:parseFloat(i.height()),left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})})},resize:function(i,e){var s=t(this).resizable("instance"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(h.alsoResize).each(function(){var i=t(this),s=t(this).data("ui-resizable-alsoresize"),h={},n=i.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,i){var e=(s[i]||0)+(a[i]||0);e&&e>=0&&(h[i]=e||null)}),i.css(h)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var i=t(this).resizable("instance"),e=i.size;i.ghost=i.originalElement.clone(),i.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),i._addClass(i.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof i.options.ghost&&i.ghost.addClass(this.options.ghost),i.ghost.appendTo(i.helper)},resize:function(){var i=t(this).resizable("instance");i.ghost&&i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})},stop:function(){var i=t(this).resizable("instance");i.ghost&&i.helper&&i.helper.get(0).removeChild(i.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var i,e=t(this).resizable("instance"),s=e.options,h=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,r=l[0]||1,p=l[1]||1,d=Math.round((h.width-n.width)/r)*r,g=Math.round((h.height-n.height)/p)*p,u=n.width+d,f=n.height+g,c=s.maxWidth&&s.maxWidth<u,m=s.maxHeight&&s.maxHeight<f,z=s.minWidth&&s.minWidth>u,w=s.minHeight&&s.minHeight>f;s.grid=l,z&&(u+=r),w&&(f+=p),c&&(u-=r),m&&(f-=p),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.top=o.top-g):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):((f-p<=0||u-r<=0)&&(i=e._getPaddingPlusBorderDimensions(this)),f-p>0?(e.size.height=f,e.position.top=o.top-g):(f=p-i.height,e.size.height=f,e.position.top=o.top+n.height-f),u-r>0?(e.size.width=u,e.position.left=o.left-d):(u=r-i.width,e.size.width=u,e.position.left=o.left+n.width-u))}}),t.ui.resizable})?s.apply(i,h):s)||(t.exports=n)},"zq/Y":function(t,i,e){var s,h,n;h=[e("oDIA"),e("O+lX")],void 0===(n="function"==typeof(s=function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})?s.apply(i,h):s)||(t.exports=n)}}]);
//# sourceMappingURL=aui.chunk.ae3c4b97fc5a1976668b--c6988b4dfd3c4a3d1198.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.resizable', location = 'aui.chunk.a312bad5b76741024fb4--5eca985b02b335e904e5.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.resizable"],{kW2n:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("2V+C"),i("XnJT"),e.default="jquery",u.exports=e.default}},[["kW2n","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--85718a7eef","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.a312bad5b76741024fb4--5eca985b02b335e904e5.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--825acd7236', location = 'aui.chunk.30cfc3ee698da81b10f9--0731854b3b05e314e279.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--825acd7236"],{PTCr:function(e,t,i){var s,o,n;o=[i("oDIA"),i("z+ct"),i("XPYc"),i("O+lX"),i("yIBB")],void 0===(n="function"==typeof(s=function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(i,s){var o=s||e.ui.ddmanager.current,n=!1;return!(!o||(o.currentItem||o.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var s=e(this).droppable("instance");if(s.options.greedy&&!s.options.disabled&&s.options.scope===o.options.scope&&s.accept.call(s.element[0],o.currentItem||o.element)&&t(o,e.extend(s,{offset:s.element.offset()}),s.options.tolerance,i))return n=!0,!1}),!n&&!!this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",i,this.ui(o)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,s,o){if(!i.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,a=n+t.helperProportions.width,l=r+t.helperProportions.height,p=i.offset.left,c=i.offset.top,d=p+i.proportions().width,h=c+i.proportions().height;switch(s){case"fit":return p<=n&&a<=d&&c<=r&&l<=h;case"intersect":return p<n+t.helperProportions.width/2&&a-t.helperProportions.width/2<d&&c<r+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,c,i.proportions().height)&&e(o.pageX,p,i.proportions().width);case"touch":return(r>=c&&r<=h||l>=c&&l<=h||r<c&&l>h)&&(n>=p&&n<=d||a>=p&&a<=d||n<p&&a>d);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var s,o,n=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<n.length;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===n[s].element[0]){n[s].proportions().height=0;continue e}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(i,s){var o=!1;return e.each((e.ui.ddmanager.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(i,this,this.options.tolerance,s)&&(o=this._drop.call(this,s)||o),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,s)))}),o},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(i,s){i.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(i,s),e.each(e.ui.ddmanager.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o,n,r,a=t(i,this,this.options.tolerance,s),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(n=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n})).length&&((o=e(r[0]).droppable("instance")).greedyChild="isover"===l)),o&&"isover"===l&&(o.isover=!1,o.isout=!0,o._out.call(o,s)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,s),o&&"isout"===l&&(o.isout=!1,o.isover=!0,o._over.call(o,s)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable})?s.apply(t,o):s)||(e.exports=n)}}]);
//# sourceMappingURL=aui.chunk.30cfc3ee698da81b10f9--0731854b3b05e314e279.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.droppable', location = 'aui.chunk.5976981f3956e6072e63--b76bd90276ad9a25b9fb.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.droppable"],{qe8r:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("PTCr"),e.default="jquery",u.exports=e.default}},[["qe8r","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--825acd7236","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.5976981f3956e6072e63--b76bd90276ad9a25b9fb.js.map;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' aui-message-' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.js' */
define("jira-agile/rapid/ui/notification",["require"],function(e){"use strict";function a(e,a,r){return s(n({body:e,title:r.showTitle?a:void 0,close:r.autoHide?"auto":r.closeable?"manual":"never",type:r.type}))}function s(e){var a=r(e).find(".title");return""===r.trim(a.text())&&a.remove(),e}var r=e("jquery"),t=e("underscore"),n=e("aui/flag"),o=e("jira/util/logger"),i={showErrors:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],r="Error",t=GH.tpl.rapid.notification.renderErrorMessages(e);i.showError(r,t,a,s)},showError:function(e,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3],o={autoHide:!1,closeable:r,showTitle:!0,type:"error"};n=t.extend({},o,n),a(s,e,n)},showWarnings:function(e,s){var r={preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"};s=t.extend({},r,s);var n=void 0;n=s.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),a(n,"Warning",s)},showWarning:function(e){i.showWarnings(e,{preRendered:!0})},showSuccess:function(e,s){var r={closeable:!0,autoHide:!0,showTitle:!1,type:"success"};s=t.extend({},r,s),a(e,null,s)},clear:function(){r("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="Advanced Settings",a+="</a>";var s=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",a);i.showWarnings(s,{autoHide:!1,preRendered:!0})},auiMessage:function(){o.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a=JIRA.SessionStorage,s=null,r=null;e||(e=a.getItem("selectedIssueId")),e&&(r=a.getItem("selectedIssueKey"),s=a.getItem("selectedIssueMsg"),i.showIssueMessageImpl(e,s,r)),a.removeItem("selectedIssueId"),a.removeItem("selectedIssueKey"),a.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a||(a="thanks_issue_updated");var r=AJS.params[a];r&&s&&(r=AJS.format(r,s),i.showSuccess(r))},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"}),GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";switch(t.each(e,function(e){s.length>0&&(s+="<br>"),s+=e.message}),a){case"warning":i.showWarning(s);break;case"success":default:i.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){i.clearBoardUpdatedMessage();var e=r.Deferred(),a=r(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");return a.data("deferred",e),a.find(".js-refresh-now").click(function(s){s.preventDefault(),a.removeData("deferred"),i.clearBoardUpdatedMessage(),e.resolve()}),a.find(".js-ignore-refresh").click(function(e){e.preventDefault(),i.clearBoardUpdatedMessage()}),e.promise()},clearBoardUpdatedMessage:function(){var e=r("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject(),e.remove()}},isBoardUpdatedMessageVisible:function(){var e=r("#ghx-update-message");return e.length>0}};return i}),AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification")),AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
define("jira-agile/config",[],function(){"use strict";var i={};return i.isSampleDataAvailable=!1,i}),AJS.namespace("GH.Config",null,require("jira-agile/config"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",["jira/util/formatter","jira/ajs/ajax/smart-ajax","jira/util/data/meta","underscore","wrm/context-path","jquery","jira/jquery/deferred"],function(e,r,t,n,o,a,s){var u={};return u.CONTEXT_PATH=o(),u.REST_URL_BASE="/rest/greenhopper/1.0",u.PUBLIC_REST_URL_BASE="/rest/agile/1.0",u.xhrRegistery={},u.stallTimeout=300,u.get=function(e,r){a.extend(e,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!n.isUndefined(GH.gadget)}});var t=u._executeGet(e,r);return t.pipe(function(e,r,t){return s().resolveWith(this,[e.success,r,t])})},u.post=function(e){return e=u._getSettings(e,!0),a.extend(e,{type:"POST",contentType:"application/json"}),u._executeStore(e)},u.put=function(e){return e=u._getSettings(e,!0),e.type="PUT",u._executeStore(e)},u.del=function(e){return e=u._getSettings(e,!0),e.type="DELETE",u._executeStore(e)},u._getSettings=function(e,r){return!e.bareUrl&&e.url&&(e.bareUrl=u.buildRestUrl(e.url)),e.bareUrl&&(e.url=e.bareUrl),e.dataType||(e.dataType="json"),e.data&&r&&(e.data=JSON.stringify(e.data)),e.contentType="application/json",e},u._getXhrData=function(e){var r={timestamp:0};return e&&(r=u.xhrRegistery[e]?u.xhrRegistery[e]:u.xhrRegistery[e]=r),r},u._executeGet=function(e,r){e=u._getSettings(e);var t=u._getXhrData(r);t.xhr&&(GH.log("aborting request for "+r,GH.Logger.Contexts.ajax),t.xhr.abort(),delete t.xhr,delete t.xhrAbort,delete t.timeoutId);var n=t.timestamp;if(t.timestamp=(new Date).getTime(),t.timestamp-n<u.stallTimeout){GH.log("stalling request for "+r+", time since last request: "+(t.timestamp-n),GH.Logger.Contexts.ajax);var o,a=s(),i=function(){o=u._executeGet(e,r),o.done(a.resolve).fail(a.reject)};t.timeoutId=window.setTimeout(i,u.stallTimeout),t.xhr=a.promise(),t.xhr.abort=function(){o?o.abort.apply(o,arguments):clearTimeout(t.timeoutId)}}else GH.log("executing request for "+r,GH.Logger.Contexts.ajax),t.xhr=u.makeRequest(e);return t.xhrAbort=t.xhr.abort,t.xhr.abort=function(){var e=t.xhr,r=t.xhrAbort;if(e&&r)return r.apply(e,arguments)},t.xhr.done(function(){t.xhr&&delete t.xhr}).fail(function(){t.xhr&&delete t.xhr}),t.xhr},u._executeStore=function(e){if(e=e||{},e.data&&"string"==typeof e.data&&/\?\?/.test(e.data)){var r="\\u003F\\u003F";e.data=e.data.replace(/\?\?/g,r)}return e.dataType="json",u.makeRequest(e)},u.makeRequest=function(e){var t=s();e=n.extend(e,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var o=t.promise(r.makeRequest(e)),a=o.abort;o.abort=function(e){return o.abortMarker="timeout"!=e,a.apply(o,arguments)};var i=o.pipe(u._generateDoneInterceptor(),u._generateFailInterceptor(e.errorsNoAutoEscape));return e.deferErrorHandling||i.fail(u._generateErrorHandler(e.onGlobalError,e.errorContextMap,e.contextualErrorRenderer,e.globalErrorDismissable)),i},u._generateDoneInterceptor=function(){return function(e,r,t){return e=e||{},e=u._createExtendedResult(e),u.matchesCurrentUser(t)?e.isSuccess()?s().resolveWith(this,[e,r,t]):s().rejectWith(this,[e,t,r,null]):u._handleCurrentUserChanged(t)}},u._generateFailInterceptor=function(e){return function(r,t,n){if(r.abortMarker)return s();if(!u.matchesCurrentUser(r))return u._handleCurrentUserChanged(r);var o={},a=null;if(r.responseText)try{o=JSON.parse(r.responseText)}catch(e){}return o.errors||o.errorMessages?a=u._convertJiraErrors(o,e):o.message&&(a=u._convertFrameworkErrors(o)),a||(a=u._convertGenericErrors(r,n)),s().rejectWith(this,[a,r,t,n])}},u.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(a(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(a.isFunction(s))s(o,e);else{s=a(s),s.siblings(".ghx-error").remove();var u;u=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(u)}else a(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},u.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},u.buildRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.REST_URL_BASE+e)},u.buildPublicRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.PUBLIC_REST_URL_BASE+e)},u.buildBareRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.CONTEXT_PATH+e},u._createExtendedResult=function(e){return e?u._extendResult({success:e}):u._extendResult({success:!0})},u._extendResult=function(e){return a.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},u._generateErrorHandler=function(e,r,t,n){return function(o){u.handleContextualErrors(o,r,t),u.handleGlobalErrors(o,e,n)}},u._convertJiraErrors=function(e,r){var t=e.errorMessages?e.errorMessages:[];t=n.map(t,function(e){return{message:e,noAutoescape:r}});var o=e.errors?e.errors:{};o=n.map(o,function(e,t){return{contextId:t,errors:[{message:e,noAutoescape:r}]}});var a={error:{errors:t,contextualErrors:o}};return u._extendResult(a)},u._convertFrameworkErrors=function(e){var r={error:{errors:[{message:e.message}],contextualErrors:[]}};return u._extendResult(r)},u._convertGenericErrors=function(r,t){var n=u._extendResult({});return r.responseText&&GH.log("Got an error response with text that we don't know how to parse: "+r.responseText),504===r.status||0===r.status&&a.contains(["abort","timeout"],t)?n.addGlobalError({status:504,message:"Request timed out"}):t?n.addGlobalError({status:r.status,message:t}):GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging"),n},u._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},u._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},u.getUserFromAJS=function(){var e=t.get("remote-user");return e?e:"anonymous"},u.matchesCurrentUser=function(e){return!e.getResponseHeader||!e.getAllResponseHeaders||!u._hasUsernameResponseHeader(e)||u.getUserFromAJS()===u._getUserForResponse(e)||204===e.status&&!e.getAllResponseHeaders()&&a.browser.msie},u._handleCurrentUserChanged=function(e){var r=u.getUserFromAJS(),t=u._getUserForResponse(e);return"anonymous"!==r&&"anonymous"===t?(GH.log("User changed. original: "+r+" new: "+t+". Redirecting to the login page"),location.href=GH.Navigation.getLoginUrl()):(GH.log("User changed. original: "+r+" new: "+t+". Reloading the page"),location.reload()),s()},u}),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Logger.js' */
define("jira-agile/rapid/logger",["jira/util/logger","underscore"],function(e,t){var a={};return a.Contexts={},a.Contexts.ajax="ajax",a.Contexts.event="event",a.Contexts.state="state",a.Contexts.ui="ui",a.Contexts.callback="callback",a.Contexts.refresh="refresh",a.enabledContexts=[a.Contexts.ajax,a.Contexts.event,a.Contexts.state,a.Contexts.ui,a.Contexts.callback,a.Contexts.refresh],a.log=function(n,o){if(!o||t.contains(a.enabledContexts,o)){var i=o?a.pad(o,6)+": "+n:n;e.log(i)}},a.pad=function(e,t){return e.length<t?e+"                               ".substr(0,t-e.length):e},a.timeMap={},a.timeStart=function(e){if(!e)throw"start: If starting a timer manually a name must be set";a.timeMap[e]=(new Date).getTime()},a.timeStop=function(e){if(!(e in a.timeMap))throw"stop:"+e+" not found";var t=(new Date).getTime()-a.timeMap[e];delete a.timeMap[e],a.log(t+"ms on "+e,a.Contexts.ui)},a}),AJS.namespace("GH.Logger",null,require("jira-agile/rapid/logger")),AJS.namespace("GH.log",null,require("jira-agile/rapid/logger").log);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
define("jira-agile/rapid/state/storage",[],function(){"use strict";var e={};return e.get=function(e,t){var r=void 0;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(e){return GH.log("GH.storage: Caught error: "+e),void GH.log("GH.storage: Cannot parse json string retrieved from "+(t?"session":"local")+" storage. Ignoring value "+r)}},e.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}return!0},window.localStorage&&window.sessionStorage||(e.get=function(){return null},e.put=function(){return!1}),e}),AJS.namespace("GH.storage",null,require("jira-agile/rapid/state/storage"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
define("jira-agile/rapid/validation",["jira/util/formatter","jquery"],function(r,t){var n={};return n.notBlank=function(r,e,a){var i=n.applyRules(r,e,a,function(){return t.trim(t(r).val()).length>0});return i},n.maxLength=function(r,e,a,i){var o=n.applyRules(r,a,i,function(){return t.trim(t(r).val()).length<=e});return o},n.isPositiveInteger=function(r,e,a){var i=n.applyRules(r,e,a,function(){return/^\d*$/.test(t.trim(t(r).val()))});return i},n.applyRules=function(r,e,a,i){r=t(r);var o=a?t(a):r,l=i.call(this);return!!l||(n.showContextualErrors(o,e),!1)},n.showContextualErrors=function(t,e,a,i,o){n.clearContextualErrors(t),t.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:r.I18n.getText(e,a,i,o)}]}))},n.clearContextualErrors=function(r){r=t(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()},n}),AJS.namespace("GH.Validation",null,require("jira-agile/rapid/validation"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
define("jira-agile/message",["jira/util/logger"],function(e){"use strict";var a={};return a.showIssueMessage=function(){e.warn("[deprecated] GH.Message.showIssueMessage has no effect, @see module:jira-agile/rapid/ui/notification")},a.showSuccess=function(){e.warn("[deprecated] GH.Message.showSuccess has no effect, @see module:jira-agile/rapid/ui/notification")},a.showWarning=function(){e.warn("[deprecated] GH.Message.showWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a.showPersistentWarning=function(){e.warn("[deprecated] GH.Message.showPersistentWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a}),AJS.namespace("GH.Message",null,require("jira-agile/message"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
define("jira-agile/rapid/util",["underscore","jquery"],function(e,r){var n={};return n.getPluginKey=function(){return r('meta[name="ghx-plugin-key"]').attr("content")},n.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},n.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},n.andThen=function(n){var t=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return r.Deferred(function(r){e.each(t,function(t){var i=t.on,a=t.trigger,o=e.isFunction(t.filter)&&t.filter;n[i](function(){var n=o&&o.apply(this,arguments);if(n&&e.isFunction(n.promise))n.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var t;t=n&&e.isArray(n._needsSplice)?n._needsSplice:o?[n]:arguments,r[a](e.isFunction(this.promise)?r.promise():this,t)}})})}).promise()},r._OriginalDeferred=r.Deferred,r.Deferred=function(e){return r._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.andThen.apply(this,e)};var t=r.promise;r.promise=function(){var e=t.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),n.andThen.apply(this,r)},e},e&&e.call(r,r)})},n.indexOf=function(r,n,t){var i=-1;return t&&(r=r.slice().reverse()),e.some(r,function(e,a){return!!n(e,a)&&(i=t?r.length-1-a:a,!0)}),i},n.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},n.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),a=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),a>5||!t&&5===a){var o=/^0*/.exec(i[1])[0];i[1]=o+(+i[1]+1),i[1].length>r&&(o?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))},n}),AJS.namespace("GH.Util",null,require("jira-agile/rapid/util"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.userConfig=e.userConfig,r.userConfig&&r.userConfig.canCreateProject&&(r.userConfig.canCreateProject=!GH.Features.DISABLE_CREATE_PROJECT.isEnabled())},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-features.js' */
define("jira-agile/gh-features",["jira/ajs/dark-features"],function(e){"use strict";function a(e){this.featureKey=e,this.featureEmergencyDisabledKey=e+".emergencyDisabled"}return a.prototype.isEnabled=function(){return e.isEnabled(this.featureKey)&&!e.isEnabled(this.featureEmergencyDisabledKey)},Object.freeze({DISABLE_CREATE_PROJECT:new a("jag.DISABLE_CREATE_PROJECT"),EDITABLE_DETAIL_VIEW_ENABLED:new a("com.atlassian.jira.agile.darkfeature.editable.detailsview"),SPLIT_ISSUE:new a("com.atlassian.jira.agile.darkfeature.splitissue")})}),AJS.namespace("GH.Features",null,require("jira-agile/gh-features"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
AJS.namespace("GH.Navigation"),GH.Navigation={},GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(a){return GH.Ajax.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a},GH.Navigation.getLoginUrl=function(){return GH.Ajax.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:number-formatting', location = '/includes/js/rapid/NumberFormat.js' */
define("jira-agile/rapid/number-format",["underscore","jira-agile/rapid/util"],function(r,a){var e={};return e.groupingSeparator=",",e.decimalSeparator=".",e.format=function(i){if(r.isNumber(i)){i=a.roundToDecimalPlaces(i,2);var t=i<<0,n=i.toString().split(".")[1],o=function(r){return r.split("").reverse().join("")},u=o(o(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+e.groupingSeparator));return u+(n?e.decimalSeparator+n:"")}},e.formatExponential=function(a){if(r.isNumber(a)){var i=Math.abs(a).toFixed(0).length-1,t=a/Math.pow(10,i);return e.format(t)+"e"+e.format(i)}},e}),AJS.namespace("GH.NumberFormat",null,require("jira-agile/rapid/number-format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-format-duration-units', location = '/includes/js/rapid/TimeFormatDurationUnits.js' */
define("jira-agile/rapid/time-format-duration-units",[],function(){var i={};return i.SECONDS="seconds",i.MILLISECONDS="millis",i}),AJS.namespace("GH.TimeFormatDurationUnits",null,require("jira-agile/rapid/time-format-duration-units"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-format-displays', location = '/includes/js/rapid/TimeFormatDisplays.js' */
define("jira-agile/rapid/time-format-displays",[],function(){var i={};return i.PRETTY="pretty",i.DAYS="days",i.HOURS="hours",i.MOST_SIGNIFICANT="most-significant",i}),AJS.namespace("GH.TimeFormatDisplays",null,require("jira-agile/rapid/time-format-displays"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-formatting', location = '/includes/js/rapid/TimeFormat.js' */
define("jira-agile/rapid/time-format",["jira/util/formatter","underscore","jira-agile/rapid/time-format-duration-units","jira-agile/rapid/time-format-displays"],function(t,r,e,o){"use strict";var a={};return a.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:o.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}},a.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:o.PRETTY,symbols:{week:"w",day:"{0}d",hour:"{0}h",minute:"{0}m"}},a.formatMinuteDuration=function(t){return a.formatDuration(t?6e4*t:0)},a.formatShortMinuteDuration=function(t){return a.formatShortDuration(t?6e4*t:0)},a.formatDuration=function(r){r||(r=0);var e=Math.floor(r/864e5),o=r-864e5*e,a=Math.floor(o/36e5);o-=36e5*a;var i=Math.floor(o/6e4),n="";return e>0&&(n+=e+" ",n+=e>1?AJS.format("days",e):AJS.format("day",e)),a>0&&(n.length>0&&(n+=" "),n+=a+" ",n+=a>1?AJS.format("hours",a):AJS.format("hour",a)),(r>0||0===n.length)&&(n.length>0&&(n+=" "),n+=i+" ",n+=0===i||i>1?AJS.format("minutes",i):AJS.format("minute",i)),n},a.formatShortDurationForTimeTrackingConfiguration=function(t,o){return r.isUndefined(o)&&(o={durationUnit:e.SECONDS}),a._formatShortDuration(t,r.extend({},a.timeTrackingConfigOpts,o))},a.formatShortDuration=function(t){return a._formatShortDuration(t,r.extend({},a.normalDisplayOpts,{durationUnit:e.MILLISECONDS}))},a.formatSensibleShortDuration=function(t){var o=a._formatShortDuration(t,r.extend({},a.normalDisplayOpts,{durationUnit:e.MILLISECONDS,dropMinutesIfLongerThanADay:!0}));return 0===o.length&&(o=a.getZeroMinutesShortFormat()),o},a.getZeroMinutesShortFormat=function(){return t.format("{0}m",0)},a._formatShortDuration=function(t,i){if(t||(t=0),0===t)return"0";var n=a.normalDisplayOpts;i=r.isUndefined(i)?{}:i,i=r.extend({},n,i);var u=void 0,m=void 0,l=void 0,s=void 0,f=void 0,d=6e4,h=60*d,y=i.hoursPerDay*h,c=i.daysPerWeek*y;i.durationUnit===e.SECONDS&&(t*=1e3),u=Math.floor(t/c),f=t%c,m=Math.floor(f/y),f%=y,l=Math.floor(f/h),f%=h,s=Math.floor(f/d),i.dropMinutesIfLongerThanADay&&m>0&&(s=0);var S=[];i.timeFormat===o.PRETTY?S=[{val:u,fmt:i.symbols.week},{val:m,fmt:i.symbols.day},{val:l,fmt:i.symbols.hour},{val:s,fmt:i.symbols.minute}]:i.timeFormat===o.DAYS?(m+=u*i.daysPerWeek,l+=s/60,S=[{val:m,fmt:i.symbols.day},{val:l,fmt:i.symbols.hour}]):i.timeFormat===o.HOURS?(m+=u*i.daysPerWeek,l=m*i.hoursPerDay+l+s/60,S=[{val:l,fmt:i.symbols.hour}]):i.timeFormat===o.MOST_SIGNIFICANT&&(S=u>0?[{val:GH.Util.roundToDecimalPlaces(t/c,1),fmt:i.symbols.week}]:m>0?[{val:GH.Util.roundToDecimalPlaces(t/y,1),fmt:i.symbols.day}]:l>0?[{val:GH.Util.roundToDecimalPlaces(t/h,1),fmt:i.symbols.hour}]:[{val:s<1?"":GH.Util.roundToDecimalPlaces(t/d,1),fmt:i.symbols.minute}]);var D=function(t){var e="";return r.each(t,function(t){if(t.val>0){e.length>0&&(e+=" ");var r=t.fmt;r.indexOf("{0}")<0&&(r="{0}"+r);var o=GH.NumberFormat.format(t.val);e+=AJS.format(r,o)}}),!e&&t.length&&(e=AJS.format(r.last(t).fmt,"< 1")),e};return D(S)},a}),AJS.namespace("GH.TimeFormat",null,require("jira-agile/rapid/time-format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-health-dashboard-item-resources', location = 'dashboarditem/sprinthealth/sprint-health-view.js' */
define("jira-dashboard-items/sprint-health-view",["jquery","underscore"],function(e,i){function t(e){this.id=e}var n=15;return t.prototype={templates:GH.tpl.dashboardItems.sprintHealth,setElement:function(e){this.element=e},renderConfigView:function(i,t){i.html(this.templates.configuration(t));var n=e("form",i),r=e("input.cancel",n),s=n.find("select[name=board-type]");this.boardPicker=s,this.prefix=t.prefix,n.on("submit",this.onSubmit.bind(this)),r.on("click",this.onCancel.bind(this)),this.boardPicker.bind("change",this.onBoardPickerChange.bind(this)),this.boardPicker.trigger("change"),AJS.$(this).trigger("refreshLayout")},renderDashboardItem:function(e,i){e.html(this.templates.render(i)),AJS.$(this).trigger("refreshLayout"),this.initializeDialogs(e,i.progress)},initializeDialogs:function(e,i){var t=e.find(".inlineToDoDialog"),n=this.prefix;this.renderInlineDialog(t,n+"todo-dialog","Issues To Do",i.todoMetric,i.todoPercentage),t=e.find(".inlineProgressDialog"),this.renderInlineDialog(t,n+"progress-dialog","Issues In Progress",i.inprogressMetric,i.inprogressPercentage),t=e.find(".inlineDoneDialog"),this.renderInlineDialog(t,n+"done-dialog","Issues Done",i.doneMetric,i.donePercentage)},renderInlineDialog:function(e,i,t,n,r){var s=this.templates.simpleInlineDialog({heading:t,metric:n,percentage:r,link:e.attr("href")});AJS.InlineDialog(e,i,function(e,i,t){return e.addClass("sprint-health-dashboard-item-dialog-decorator").html(s),t(),!1},{hideDelay:1e3,closeOnTriggerClick:!0})},showNoBoardsAvailableErrorMessage:function(){this._showErrorMessage("No boards are currently available.")},showRapidViewCannotBeFoundErrorMessage:function(){this._showErrorMessage("The requested board cannot be viewed because it either does not exist or you do not have permission to view it.")},showGadgetNotAllowedToRenderErrorMessage:function(){this._showErrorMessage("This gadget cannot be displayed on your dashboard. This could be due to a licensing problem or an application error. If you need this gadget, contact your administrator for assistance. Otherwise, you can remove it from your dashboard.")},showSprintNotActiveErrorMessage:function(){this._showErrorMessage("The selected sprint for this gadget is not currently active.")},_showErrorMessage:function(e){this.element.html(this.templates.errorRenderingConfiguration({message:e})),AJS.$(this).trigger("refreshLayout")},renderCurrentSprints:function(e){var t=this.element,n=t.find("form select[name=sprint-type]");n.empty(),n.append(this.templates.getOption({auto:!0})),i.each(e,function(e){n.append(this.templates.getOption({text:e.name,value:e.id}))},this)},onSubmit:function(i){i.preventDefault();var t=e(i.currentTarget),r=!0,s=t.find("select[name=board-type]").val(),o=t.find("input[name=refresh-interval]").prop("checked"),a=t.find("input[name=showAssignees]").prop("checked"),g=t.find("input[name=showRapidViewName]").prop("checked"),h=t.find("input[name=showSprintName]").prop("checked"),d=t.find("select[name=sprint-type]").val(),l={isConfigured:r,rapidViewId:s,refresh:1==o&&n,showAssignees:a,showRapidViewName:g,showSprintName:h,sprintId:d};AJS.$(this).trigger("submit",l)},onCancel:function(){AJS.$(this).trigger("cancel")},onBoardPickerChange:function(){AJS.$(this).trigger("boardChange",e(this.boardPicker).val())}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-health-dashboard-item-resources', location = 'dashboarditem/sprinthealth/sprint-health.js' */
define("jira-dashboard-items/sprint-health",["jquery","underscore","jira-dashboard-items/sprint-health-view"],function(e,t,r){function n(t,r){if(t===s||t===!1)return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/sprintquery/"+r});var n=e.Deferred();return n.resolve({sprints:[{id:t,state:"ACTIVE"}]}),n}function i(t,r){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/gadgets/sprints/health",data:{rapidViewId:r,sprintId:t}})}function o(t){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/xboard/config?rapidViewId="+t})}function a(){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview"})}var s="auto",d=function(e,t){this.API=e,this.options=t||{},this.sprintHealthView=new r(this.API.getGadgetId()),this.initialiseEventHandlers()};return d.prototype.render=function(r,a){function s(e){var r=t.findWhere(e.sprints,{state:"ACTIVE"});return r?r.id:null}a=a||{};var d=this;d.sprintHealthView.setElement(r);var h=a.rapidViewId,u=a.sprintId,p=a.isConfigured;return p&&h?(d.API.showLoadingBar(),d.API.initRefresh(a,d.render.bind(d,r,a)),void n(u,h).done(function(t){return(u=s(t))?void e.when(i(u,h),o(h)).done(function(e,t){return e.length>0&&t.length>0?(e=e[0],t=t[0].currentViewConfig,d._renderDashboardItem(r,a,e,t),void d.API.hideLoadingBar()):void d.sprintHealthView.showRapidViewCannotBeFoundErrorMessage()}).fail(function(e){403===e.status?d.sprintHealthView.showGadgetNotAllowedToRenderErrorMessage():d.sprintHealthView.showRapidViewCannotBeFoundErrorMessage(),d.API.hideLoadingBar()}):(d.sprintHealthView.showSprintNotActiveErrorMessage(),void d.API.hideLoadingBar())}).fail(function(e){403===e.status?d.sprintHealthView.showGadgetNotAllowedToRenderErrorMessage():d.sprintHealthView.showRapidViewCannotBeFoundErrorMessage(),d.API.hideLoadingBar()})):void d.sprintHealthView.showSprintNotActiveErrorMessage()},d.prototype._renderDashboardItem=function(e,r,n,i){function o(e){return n.progress.columns[e].value}function a(e,t){return 100*e/t}function s(e){return t.findWhere(n.sprintMetrics,{key:e}).value}function d(e){var r="%22",n=t.map(e,function(e){return r+e+r});return n.join(",")}var h=this,u={};t.each(n.issueMetrics,function(e){u[e.key]=e.value});var p={total:0};t.each(n.progress.columns,function(e){p.total+=e.value});var g=o(0);p.todoWidth=a(g,p.total),p.todo=g,p.todoMetric=g,p.todoPercentage=Math.round(p.todoWidth),g=o(1),p.inprogressWidth=a(g,p.total),p.inprogress=g,p.inprogressMetric=g,p.inprogressPercentage=Math.round(p.inprogressWidth),g=o(2),p.doneWidth=a(g,p.total),p.done=g,p.doneMetric=g,p.donePercentage=Math.round(p.doneWidth),n.timeBasedEstimation&&(p.todo=GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(p.todo),p.inprogress=GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(p.inprogress),p.done=GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(p.done));var c=s("duration_completion_percentage"),l=s("work_completion_percentage"),w=s("scope_change_percentage");w=parseInt(w,10);var f={showBoardName:r.showRapidViewName,boardName:i.name,boardId:i.id,boardStatistic:i.estimationStatistic.name,showSprintName:r.showSprintName,issueMetrics:u,sprintName:n.name,sprintId:n.id,highestPriority:n.highestPriority,assignees:n.assignees,showAssignees:r.showAssignees,progress:p,timeremaining:n.timeRemaining,durationComplete:c,workComplete:l,scopeChange:w,timeTrackingEnable:n.timeTrackingEnabled,noEstimateValues:n.noEstimateValues,flaggedField:n.flaggedField,todoStatuses:d(n.statusMap.notStarted),inProgressStatuses:d(n.statusMap.inProgress),doneStatuses:d(n.statusMap.done)};h.sprintHealthView.renderDashboardItem(e,f)},d.prototype.renderEdit=function(e,r){function n(e){return e=t.where(e.views,{sprintSupportEnabled:!0}),i(e)}function i(e){return t.map(e,function(e){return{text:e.name,value:e.id}})}r=r||{};var o=this;o.sprintHealthView.setElement(e),o.API.showLoadingBar(),a().done(function(t){if(0===t.views.length)return o.sprintHealthView.showNoBoardsAvailableErrorMessage(),void o.API.hideLoadingBar();var i=o.API.getGadgetId()+"-",a=n(t),s={},d={prefix:i,boardTypes:a,activeSprints:s,checkboxes:[{id:"showRapidViewName",labelText:"Show board name",isChecked:r.showRapidViewName},{id:"showSprintName",labelText:"Show sprint name",isChecked:r.showSprintName},{id:"showAssignees",labelText:"Show assignees",isChecked:r.showAssignees}],preferences:r};o.sprintHealthView.renderConfigView(e,d)}).fail(function(){o.sprintHealthView.showGadgetNotAllowedToRenderErrorMessage()}).always(function(){o.API.hideLoadingBar()})},d.prototype.initialiseEventHandlers=function(){var e=this,t=this.sprintHealthView;AJS.$(t).on("boardChange",function(t,r){e.updateSprintData(r)}),AJS.$(t).on("cancel",function(){e.API.closeEdit()}),AJS.$(t).on("submit",function(t,r){e.API.savePreferences(r)}),AJS.$(t).on("refreshLayout",function(){e.API.forceLayoutRefresh()}),AJS.$(t).on("hideLoadingBar",function(){e.API.hideLoadingBar()})},d.prototype.updateSprintData=function(e){var r=this;n(!1,e).done(function(e){e=t.where(e.sprints,{state:"ACTIVE"}),r.sprintHealthView.renderCurrentSprints(e)})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-health-dashboard-item-resources', location = 'dashboarditem/sprinthealth/sprint-health.soy' */
// This file was automatically generated from sprint-health.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dashboardItems.sprintHealth.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dashboardItems == 'undefined') { GH.tpl.dashboardItems = {}; }
if (typeof GH.tpl.dashboardItems.sprintHealth == 'undefined') { GH.tpl.dashboardItems.sprintHealth = {}; }


GH.tpl.dashboardItems.sprintHealth.wrapper = function(opt_data, opt_ignored) {
  return '<div class=\'sprint-health-dashboard-item\'></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.wrapper.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.wrapper';
}


GH.tpl.dashboardItems.sprintHealth.configuration = function(opt_data, opt_ignored) {
  var param5 = '' + GH.tpl.dashboardItems.sprintHealth.optionPicker({prefix: opt_data.prefix, id: 'board-type', content: 'Board', collection: opt_data.boardTypes, default: opt_data.preferences.rapidViewId});
  var checkboxList13 = opt_data.checkboxes;
  var checkboxListLen13 = checkboxList13.length;
  for (var checkboxIndex13 = 0; checkboxIndex13 < checkboxListLen13; checkboxIndex13++) {
    var checkboxData13 = checkboxList13[checkboxIndex13];
    param5 += aui.form.checkboxField({legendContent: '', fields: [checkboxData13]});
  }
  param5 += GH.tpl.dashboardItems.sprintHealth.optionPicker({prefix: opt_data.prefix, id: 'sprint-type', content: 'Sprint', collection: opt_data.activeSprints, default: opt_data.preferences.sprintId}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh});
  var output = '' + Atlassian.DashboardItem.Common.Templates.config({fields: param5, isConfigured: opt_data.preferences.isConfigured});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.configuration.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.configuration';
}


GH.tpl.dashboardItems.sprintHealth.optionPicker = function(opt_data, opt_ignored) {
  return '<div class="field-group">' + aui.form.label({forField: opt_data.prefix + opt_data.id, content: opt_data.content}) + aui.form.select({id: opt_data.prefix + opt_data.id, name: opt_data.id, value: opt_data['default'], options: opt_data.collection}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.optionPicker.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.optionPicker';
}


GH.tpl.dashboardItems.sprintHealth.render = function(opt_data, opt_ignored) {
  var output = '<div class=\'sprint-health-dashboard-item\'><div class="ag-header-region"><div class="ag-inner-area strip-bottom"><div class="ag-status-header aui-group aui-group-split ghx-fluid"><div class="ag-status-group aui-item"><h1>' + ((opt_data.showSprintName) ? '<span class="ag-name-sprint"><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.boardId) + '&useStoredSettings=true">' + soy.$$escapeHtml(opt_data.sprintName) + '</a></span>' : '') + ((opt_data.showSprintName && opt_data.showBoardName) ? ' - ' : '') + ((opt_data.showBoardName) ? '<span class="ag-name-board">' + soy.$$escapeHtml(opt_data.boardName) + '</span>' : '') + '</h1></div></div></div></div><div class="ag-inner-area"><div class="ag-progress-group"><div class="ag-name-lane"><h3>' + ((opt_data.noEstimateValues) ? '<strong>' + soy.$$escapeHtml('No estimated issues') + '</strong> (' + soy.$$escapeHtml(opt_data.boardStatistic) + ')' : '<strong>' + soy.$$escapeHtml('Overall sprint progress') + '</strong> (' + soy.$$escapeHtml(opt_data.boardStatistic) + ')') + '</h3><h3 class="ag-time-remaining ' + ((opt_data.showSprintName || opt_data.showBoardName) ? 'right' : '') + '">' + ((opt_data.timeremaining.days == 1) ? soy.$$escapeHtml(AJS.format('{0} day left',opt_data.timeremaining.days)) : soy.$$escapeHtml(AJS.format('{0} days left',opt_data.timeremaining.days))) + '</h3></div>' + ((! opt_data.noEstimateValues) ? '<ul class="ag-progress">' + GH.tpl.dashboardItems.sprintHealth.sprintHealthBar({class: 'ag-todo', width: opt_data.progress.todoWidth, link: '' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: 'status in (' + opt_data.todoStatuses + ') AND Sprint = ' + opt_data.sprintId}), dialogId: 'inlineToDoDialog', value: opt_data.progress.todo}) + GH.tpl.dashboardItems.sprintHealth.sprintHealthBar({class: 'ag-inprogress', width: opt_data.progress.inprogressWidth, link: '' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: 'status in (' + opt_data.inProgressStatuses + ') AND Sprint = ' + opt_data.sprintId}), dialogId: 'inlineProgressDialog', value: opt_data.progress.inprogress}) + GH.tpl.dashboardItems.sprintHealth.sprintHealthBar({class: 'ag-done', width: opt_data.progress.doneWidth, link: '' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: 'status in (' + opt_data.doneStatuses + ') AND Sprint = ' + opt_data.sprintId}), dialogId: 'inlineDoneDialog', value: opt_data.progress.done}) + '</ul>' : '') + '</div><div class="ag-meta-group">' + GH.tpl.dashboardItems.sprintHealth.agSection({link: soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.boardId) + '&view=reporting&chart=burndownChart&sprint=' + soy.$$escapeHtml(opt_data.sprintId), value: ' ' + ((opt_data.durationComplete < 100) ? soy.$$escapeHtml(opt_data.durationComplete) : '100') + ' ', label: 'Time elapsed'}) + ((! opt_data.noEstimateValues) ? GH.tpl.dashboardItems.sprintHealth.agSection({link: ' ' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.boardId) + '&view=reporting&chart=burndownChart&sprint=' + soy.$$escapeHtml(opt_data.sprintId) + ' ', value: ' ' + ((opt_data.workComplete < 100) ? soy.$$escapeHtml(opt_data.workComplete) : '100') + ' ', label: 'Work complete'}) : '') + ((! opt_data.timeTrackingEnabled) ? GH.tpl.dashboardItems.sprintHealth.agSection({link: soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.boardId) + '&view=reporting&chart=burndownChart&sprint=' + soy.$$escapeHtml(opt_data.sprintId), value: opt_data.scopeChange - 100, extraClasses: '' + ((opt_data.scopeChange == 100) ? 'ag-empty' : (opt_data.scopeChange - 100 > 0) ? 'ag-scope-increase' : ''), label: 'Scope change'}) : '') + GH.tpl.dashboardItems.sprintHealth.agSection({extraParentClasses: '' + ((! opt_data.issueMetrics.blockers || ! opt_data.highestPriority.id) ? ' ag-empty' : ''), link: '' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: 'priority=' + opt_data.highestPriority.id + ' AND Sprint=' + opt_data.sprintId}), value: ' ' + ((opt_data.issueMetrics.blockers) ? soy.$$escapeHtml(opt_data.issueMetrics.blockers) : '0') + ' ', label: opt_data.highestPriority.name, doNotDisplayPercent: true}) + GH.tpl.dashboardItems.sprintHealth.agSection({extraParentClasses: '' + ((! opt_data.issueMetrics.flagged) ? ' ag-empty' : ''), link: '' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: opt_data.flaggedField + '!=null AND Sprint=' + opt_data.sprintId}), value: ' ' + ((opt_data.issueMetrics.flagged) ? soy.$$escapeHtml(opt_data.issueMetrics.flagged) : '0') + ' ', label: 'Flagged', doNotDisplayPercent: true}) + '</div></div><div class="ag-inner-area strip-top strip-bottom">';
  if (opt_data.showAssignees && opt_data.assignees.length > 0) {
    output += '<div class="ag-name-lane add-bottom"><h3><strong>' + soy.$$escapeHtml('Assignees in Sprint') + '</strong></h3></div><div class="ag-meta-group strip-top"><div class="ag-meta-section left-align">';
    var assigneeList217 = opt_data.assignees;
    var assigneeListLen217 = assigneeList217.length;
    for (var assigneeIndex217 = 0; assigneeIndex217 < assigneeListLen217; assigneeIndex217++) {
      var assigneeData217 = assigneeList217[assigneeIndex217];
      output += '<a href="' + GH.tpl.dashboardItems.sprintHealth.issueNavLink({jql: 'assignee=%22' + assigneeData217.username + '%22 AND Sprint=' + opt_data.sprintId}) + '"><span class="ag-avatar"><img src="' + soy.$$escapeHtml(assigneeData217.avatarUrl) + '" alt="' + soy.$$escapeHtml(assigneeData217.name) + '" title="' + soy.$$escapeHtml(assigneeData217.name) + '" /></span></a>';
    }
    output += '</div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.render.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.render';
}


GH.tpl.dashboardItems.sprintHealth.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&jqlQuery=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.issueNavLink.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.issueNavLink';
}


GH.tpl.dashboardItems.sprintHealth.errorRenderingConfiguration = function(opt_data, opt_ignored) {
  return '<div class=\'sprint-health-dashboard-item\'><div class="ag-inner-area">' + aui.message.warning({titleContent: '', content: opt_data.message, closeable: 'false'}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.errorRenderingConfiguration.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.errorRenderingConfiguration';
}


GH.tpl.dashboardItems.sprintHealth.simpleInlineDialog = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.heading) + ' (' + soy.$$escapeHtml(opt_data.percentage) + '%)</h3><p><a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a></p>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.simpleInlineDialog.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.simpleInlineDialog';
}


GH.tpl.dashboardItems.sprintHealth.agSection = function(opt_data, opt_ignored) {
  return '<div class="ag-meta-section' + ((opt_data.extraParentClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraParentClasses) : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '"><div class="ag-metric-value ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml(opt_data.value) + ((opt_data.doNotDisplayPercent) ? '' : '<sup>%</sup>') + '</div><div class="ag-label ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml(opt_data.label) + '</div></a></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.agSection.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.agSection';
}


GH.tpl.dashboardItems.sprintHealth.sprintHealthBar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.width) ? '<li class="' + soy.$$escapeHtml(opt_data['class']) + '" style="width:' + soy.$$escapeHtml(opt_data.width) + '%"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="ag-status-info ' + soy.$$escapeHtml(opt_data.dialogId) + '"><b>' + soy.$$escapeHtml(opt_data.value) + '</b></a></li>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.sprintHealthBar.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.sprintHealthBar';
}


GH.tpl.dashboardItems.sprintHealth.getOption = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.auto) ? '<option value="' + soy.$$escapeHtml('auto') + '">' + soy.$$escapeHtml('Next Sprint Due (auto)') + '</option>' : '<option value="' + soy.$$escapeHtml(opt_data.value) + '">' + soy.$$escapeHtml(opt_data.text) + '</option>');
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintHealth.getOption.soyTemplateName = 'GH.tpl.dashboardItems.sprintHealth.getOption';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-days-remaining-dashboard-item-resources', location = 'dashboarditem/sprintdaysremaining/sprint-days-remaining-view.js' */
define("jira-dashboard-items/sprint-days-remaining-view",["jquery","underscore"],function(e,t){function r(e){this.id=e}var n=15;return r.prototype={templates:GH.tpl.dashboardItems.sprintDaysRemaining,setElement:function(e){this.element=e},renderConfigView:function(t,r){t.html(this.templates.configuration(r));var n=e("form",t),i=e("input.cancel",n),s=n.find("select[name=board-type]");this.boardPicker=s,this.prefix=r.prefix,n.on("submit",this.onSubmit.bind(this)),i.on("click",this.onCancel.bind(this)),this.boardPicker.bind("change",this.onBoardPickerChange.bind(this)),this.boardPicker.trigger("change"),e(this).trigger("refreshLayout")},renderDashboardItem:function(t,r){t.html(this.templates.render(r)),e(this).trigger("refreshLayout")},showNoBoardsAvailableErrorMessage:function(){this._showErrorMessage("No boards are currently available.")},showRapidViewCannotBeFoundErrorMessage:function(){this._showErrorMessage("The requested board cannot be viewed because it either does not exist or you do not have permission to view it.")},showGadgetNotAllowedToRenderErrorMessage:function(){this._showErrorMessage("This gadget cannot be displayed on your dashboard. This could be due to a licensing problem or an application error. If you need this gadget, contact your administrator for assistance. Otherwise, you can remove it from your dashboard.")},showSprintCannotBeFoundErrorMessage:function(){this._showErrorMessage("There are no active sprints")},showSprintNotActiveErrorMessage:function(){this._showErrorMessage("The selected sprint for this gadget is not currently active.")},_showErrorMessage:function(t){this.element.html(this.templates.errorRenderingConfiguration({message:t})),e(this).trigger("refreshLayout")},renderCurrentSprints:function(e){var r=this.element.find("form select[name=sprint-type]");r.empty(),r.append(this.templates.autoOption()),t.each(e,function(e){r.append(this.templates.option({text:e.name,value:e.id}))},this)},onSubmit:function(t){t.preventDefault();var r=e(t.currentTarget),i=!0,s=r.find("select[name=board-type]").val(),o=r.find("input[name=refresh-interval]").prop("checked"),a=r.find("input[name=showAssignees]").prop("checked"),h=r.find("input[name=showRapidViewName]").prop("checked"),d=r.find("input[name=showSprintName]").prop("checked"),g=r.find("select[name=sprint-type]").val();e(this).trigger("submit",{isConfigured:i,rapidViewId:s,refresh:1==o&&n,showAssignees:a,showRapidViewName:h,showSprintName:d,sprintId:g})},onCancel:function(){e(this).trigger("cancel")},onBoardPickerChange:function(){e(this).trigger("boardChange",this.boardPicker.val())}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-days-remaining-dashboard-item-resources', location = 'dashboarditem/sprintdaysremaining/sprint-days-remaining.soy' */
// This file was automatically generated from sprint-days-remaining.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dashboardItems.sprintDaysRemaining.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dashboardItems == 'undefined') { GH.tpl.dashboardItems = {}; }
if (typeof GH.tpl.dashboardItems.sprintDaysRemaining == 'undefined') { GH.tpl.dashboardItems.sprintDaysRemaining = {}; }


GH.tpl.dashboardItems.sprintDaysRemaining.wrapper = function(opt_data, opt_ignored) {
  return '<div class=\'sprint-days-remaining-dashboard-item\'></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.wrapper.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.wrapper';
}


GH.tpl.dashboardItems.sprintDaysRemaining.configuration = function(opt_data, opt_ignored) {
  var param5 = '' + GH.tpl.dashboardItems.sprintDaysRemaining.optionPicker({prefix: opt_data.prefix, id: 'board-type', content: 'Board', collection: opt_data.boardTypes, default: opt_data.preferences.rapidViewId});
  var checkboxList12 = opt_data.checkboxes;
  var checkboxListLen12 = checkboxList12.length;
  for (var checkboxIndex12 = 0; checkboxIndex12 < checkboxListLen12; checkboxIndex12++) {
    var checkboxData12 = checkboxList12[checkboxIndex12];
    param5 += aui.form.checkboxField({legendContent: '', fields: [checkboxData12]});
  }
  param5 += GH.tpl.dashboardItems.sprintDaysRemaining.optionPicker({prefix: opt_data.prefix, id: 'sprint-type', content: 'Sprint', collection: opt_data.activeSprints, default: opt_data.preferences.sprintId}) + Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix: opt_data.prefix, id: 'refresh-interval', value: opt_data.preferences.refresh});
  var output = '' + Atlassian.DashboardItem.Common.Templates.config({fields: param5, isConfigured: opt_data.preferences.isConfigured});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.configuration.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.configuration';
}


GH.tpl.dashboardItems.sprintDaysRemaining.optionPicker = function(opt_data, opt_ignored) {
  return '<div class="field-group">' + aui.form.label({forField: opt_data.prefix + opt_data.id, content: opt_data.content}) + aui.form.select({id: opt_data.prefix + opt_data.id, name: opt_data.id, value: opt_data['default'], options: opt_data.collection}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.optionPicker.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.optionPicker';
}


GH.tpl.dashboardItems.sprintDaysRemaining.render = function(opt_data, opt_ignored) {
  return '<div class=\'sprint-days-remaining-dashboard-item\'>' + GH.tpl.dashboardItems.sprintDaysRemaining.renderHeader(opt_data) + '<div class="ghx-remaining-wrap"><div id="ghx-remaining-content"><div class="ghx-remaining-box ' + ((opt_data.days > 0) ? 'ghx-remaining-green' : 'ghx-remaining-red') + '"><div class="ghx-remaining-value">' + soy.$$escapeHtml(opt_data.days) + '</div><div class="ghx-remaining-text">' + ((opt_data.days == 1) ? soy.$$filterNoAutoescape('\x3cstrong\x3eDay\x3c/strong\x3e Remaining') : soy.$$filterNoAutoescape('\x3cstrong\x3eDays\x3c/strong\x3e Remaining')) + '</div></div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.render.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.render';
}


GH.tpl.dashboardItems.sprintDaysRemaining.renderHeader = function(opt_data, opt_ignored) {
  return '' + ((opt_data.rapidViewName && opt_data.showRapidViewName) ? '<h2 class="gg-name"><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.preferences.rapidViewId) + '&useStoredSettings=true">' + soy.$$escapeHtml(opt_data.rapidViewName) + '</a></h2>' : '') + ((opt_data.sprintName && opt_data.showSprintName) ? '<h3 class="gg-subtitle"><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.preferences.rapidViewId) + '&sprint=' + soy.$$escapeHtml(opt_data.preferences.sprintId) + '&useStoredSettings=true">' + soy.$$escapeHtml(opt_data.sprintName) + '</a></h3>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.renderHeader.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.renderHeader';
}


GH.tpl.dashboardItems.sprintDaysRemaining.errorRenderingConfiguration = function(opt_data, opt_ignored) {
  return '<div class=\'sprint-days-remaining-dashboard-item\'><div class="ag-inner-area">' + aui.message.warning({titleContent: '', content: opt_data.message, closeable: false}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.errorRenderingConfiguration.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.errorRenderingConfiguration';
}


GH.tpl.dashboardItems.sprintDaysRemaining.option = function(opt_data, opt_ignored) {
  return '<option value="' + soy.$$escapeHtml(opt_data.value) + '">' + soy.$$escapeHtml(opt_data.text) + '</option>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.option.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.option';
}


GH.tpl.dashboardItems.sprintDaysRemaining.autoOption = function(opt_data, opt_ignored) {
  return '<option value="' + soy.$$escapeHtml('auto') + '">' + soy.$$escapeHtml('Next Sprint Due (auto)') + '</option>';
};
if (goog.DEBUG) {
  GH.tpl.dashboardItems.sprintDaysRemaining.autoOption.soyTemplateName = 'GH.tpl.dashboardItems.sprintDaysRemaining.autoOption';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-days-remaining-dashboard-item-resources', location = 'dashboarditem/sprintdaysremaining/sprint-days-remaining.js' */
define("jira-dashboard-items/sprint-days-remaining",["jquery","underscore","jira-dashboard-items/sprint-days-remaining-view"],function(e,n,i){function r(n,i){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/gadgets/sprints/health",data:{rapidViewId:i,sprintId:n}})}function t(n){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/xboard/config?rapidViewId="+n})}function a(n,i){if(n===s||n===!1)return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/sprintquery/"+i});var r=e.Deferred();return r.resolve({sprints:[{id:n,state:"ACTIVE"}]}),r}var s="auto",o=function(e,n){this.API=e,this.options=n||{},this.sprintDaysRemainingView=new i(this.API.getGadgetId()),this.initialiseEventHandlers()};return o.prototype.render=function(i,s){function o(e){var i=n.findWhere(e.sprints,{state:"ACTIVE"});return i?i.id:null}s=s||{};var d=this;d.sprintDaysRemainingView.setElement(i);var p=s.rapidViewId,h=s.sprintId,g=s.isConfigured;return g&&p?(d.API.showLoadingBar(),d.API.initRefresh(s,d.render.bind(d,i,s)),void a(h,p).done(function(n){return(h=o(n))?void e.when(r(h,p),t(p)).done(function(e,n){return 0===e.length||0===n.length?void d.sprintDaysRemainingView.showSprintCannotBeFoundErrorMessage():(e=e[0],n=n[0].currentViewConfig,void d._renderDashboardItem(i,s,e,n))}).fail(function(e){403===e.status?d.sprintDaysRemainingView.showGadgetNotAllowedToRenderErrorMessage():d.sprintDaysRemainingView.showRapidViewCannotBeFoundErrorMessage()}).always(function(){d.API.hideLoadingBar()}):(d.sprintDaysRemainingView.showSprintNotActiveErrorMessage(),void d.API.hideLoadingBar())}).fail(function(e){403===e.status?d.sprintDaysRemainingView.showGadgetNotAllowedToRenderErrorMessage():d.sprintDaysRemainingView.showRapidViewCannotBeFoundErrorMessage(),d.API.hideLoadingBar()})):(d.sprintDaysRemainingView.showSprintCannotBeFoundErrorMessage(),void d.API.hideLoadingBar())},o.prototype._renderDashboardItem=function(e,n,i,r){var t={rapidViewName:r.name,showRapidViewName:n.showRapidViewName,sprintName:i.name,showSprintName:n.showSprintName,days:i.timeRemaining.days,preferences:n};this.sprintDaysRemainingView.renderDashboardItem(e,t)},o.prototype.renderEdit=function(i,r){function t(e){return e=n.where(e.views,{sprintSupportEnabled:!0}),a(e)}function a(e){return n.map(e,function(e){return{text:e.name,value:e.id}})}r=r||{};var s=this;s.sprintDaysRemainingView.setElement(i),s.API.showLoadingBar(),e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview"}).done(function(e){if(0===e.length)return s.sprintDaysRemainingView.showNoBoardsAvailableErrorMessage(),void s.API.hideLoadingBar();var n=s.API.getGadgetId()+"-",a=t(e),o={},d={prefix:n,boardTypes:a,activeSprints:o,checkboxes:[{id:"showRapidViewName",labelText:"Show board name",isChecked:r.showRapidViewName},{id:"showSprintName",labelText:"Show sprint name",isChecked:r.showSprintName}],preferences:r};s.sprintDaysRemainingView.renderConfigView(i,d)}).fail(function(){s.sprintDaysRemainingView.showGadgetNotAllowedToRenderErrorMessage()}).always(function(){s.API.hideLoadingBar()})},o.prototype.updateSprintData=function(e){var i=this;a(!1,e).done(function(e){e=n.where(e.sprints,{state:"ACTIVE"}),i.sprintDaysRemainingView.renderCurrentSprints(e)}).fail(function(){i.sprintDaysRemainingView.showSprintNotActiveErrorMessage(),i.API.hideLoadingBar()})},o.prototype.initialiseEventHandlers=function(){var n=this,i=e(this.sprintDaysRemainingView);i.on("boardChange",function(e,i){n.updateSprintData(i)}),i.on("cancel",function(){n.API.closeEdit()}),i.on("submit",function(e,i){n.API.savePreferences(i)}),i.on("refreshLayout",function(){n.API.forceLayoutRefresh()}),i.on("hideLoadingBar",function(){n.API.hideLoadingBar()})},o});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard-skate', location = 'js/shims/skate-shim.js' */
define("dashboard/shims/skate",["atlassian/libs/skate-0.12.6"],function(skate){return skate});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard-prod', location = 'js/components/dashboard.js' */
define("dashboard/components/dashboard-layout",["dashboard/shims/skate"],function(skate){skate("dashboard-done",{type:skate.types.TAG,attached:function(elem){var ev=document.createEvent("CustomEvent");ev.initCustomEvent("gadgets-loaded",true,false,{});elem.dispatchEvent(ev)}});return skate("dashboard",{type:skate.types.TAG,attached:function(elem){},events:{"click .dashboard-tab-link":function(){AJS.trigger("analyticsEvent",{name:"gadgets.dashboard.tab.link.click"})},"gadgets-loaded":function(elem){AG.DashboardManager.setup({layouts:JSON.parse(elem.getAttribute("layouts")).layouts,params:JSON.parse(elem.getAttribute("params"))})}}})});;
;
/* module-key = 'com.atlassian.gadgets.dashboard:dashboard-prod', location = 'js/components-init.js' */
require(["dashboard/components/dashboard-layout"]);;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.dashboard:gadget-dashboard-resources', location = 'js/cookies.js' */
var goog=goog||{};goog.net=goog.net||{};goog.net.cookies=goog.net.cookies||{};goog.JsType_={UNDEFINED:"undefined"};goog.isDef=function(val){return typeof val!=goog.JsType_.UNDEFINED};goog.net.cookies.set=function(name,value,opt_maxAge,opt_path,opt_domain){if(/;=/g.test(name)){throw new Error('Invalid cookie name "'+name+'"')}if(/;/g.test(value)){throw new Error('Invalid cookie value "'+value+'"')}if(!goog.isDef(opt_maxAge)){opt_maxAge=-1}var domainStr=opt_domain?";domain="+opt_domain:"";var pathStr=opt_path?";path="+opt_path:"";var expiresStr;if(opt_maxAge<0){expiresStr=""}else{if(opt_maxAge==0){var pastDate=new Date(1970,1,1);expiresStr=";expires="+pastDate.toUTCString()}else{var futureDate=new Date((new Date).getTime()+opt_maxAge*1000);expiresStr=";expires="+futureDate.toUTCString()}}document.cookie=name+"="+value+domainStr+pathStr+expiresStr};goog.net.cookies.get=function(name,opt_default){var nameEq=name+"=";var cookie=String(document.cookie);for(var pos=-1;(pos=cookie.indexOf(nameEq,pos+1))>=0;){var i=pos;while(--i>=0){var ch=cookie.charAt(i);if(ch==";"){i=-1;break}}if(i==-1){var end=cookie.indexOf(";",pos);if(end<0){end=cookie.length}return cookie.substring(pos+nameEq.length,end)}}return opt_default};goog.net.cookies.remove=function(name,opt_path,opt_domain){var rv=goog.net.cookies.containsKey(name);goog.net.cookies.set(name,"",0,opt_path,opt_domain);return rv};goog.net.cookies.getKeyValues_=function(){var cookie=String(document.cookie);var parts=cookie.split(/\s*;\s*/);var keys=[],values=[],index,part;for(var i=0;part=parts[i];i++){index=part.indexOf("=");if(index==-1){keys.push("");values.push(part)}else{keys.push(part.substring(0,index));values.push(part.substring(index+1))}}return{keys:keys,values:values}};goog.net.cookies.getKeys=function(){return goog.net.cookies.getKeyValues_().keys};goog.net.cookies.getValues=function(){return goog.net.cookies.getKeyValues_().values};goog.net.cookies.isEmpty=function(){return document.cookie==""};goog.net.cookies.getCount=function(){var cookie=String(document.cookie);if(cookie==""){return 0}var parts=cookie.split(/\s*;\s*/);return parts.length};goog.net.cookies.containsKey=function(key){var sentinel={};return goog.net.cookies.get(key,sentinel)!==sentinel};goog.net.cookies.containsValue=function(value){var values=goog.net.cookies.getKeyValues_().values;for(var i=0;i<values.length;i++){if(values[i]==value){return true}}return false};goog.net.cookies.clear=function(){var keys=goog.net.cookies.getKeyValues_().keys;for(var i=keys.length-1;i>=0;i--){goog.net.cookies.remove(keys[i])}};goog.net.cookies.MAX_COOKIE_LENGTH=3950;;
;
/* module-key = 'com.atlassian.gadgets.dashboard:gadget-dashboard-resources', location = 'js/gadgets-dashboard.js' */
gadgets.callAsyncAndJoin=function(functions,continuation,opt_this){var pending=functions.length;var results=[];for(var i=0;i<functions.length;i++){var wrapper=function(index){functions[index].call(opt_this,function(result){results[index]=result;if(--pending==0){continuation(results)}})};wrapper(i)}};gadgets.IfrGadgetService.prototype.setTitle=function(title){jQuery("#"+this.f+"-chrome .dashboard-item-title").text(title)};gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}AG.Cookie.save(this.f+"-fh",height);jQuery(AG).trigger("AG.iframeResize",[element,height])};gadgets.IfrGadgetService.prototype.setUserPref=function(editToken,name,value){var nameValues=Array.prototype.slice.call(arguments,1);AJS.$("#"+this.f).trigger("setUserPref",nameValues)};;
;
/* module-key = 'com.atlassian.gadgets.dashboard:gadget-dashboard-resources', location = 'js/cookiebaseduserprefstore.js' */
gadgets.CookieBasedUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.CookieBasedUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.CookieBasedUserPrefStore.prototype.USER_PREFS_PREFIX="gadgetUserPrefs-";gadgets.CookieBasedUserPrefStore.prototype.getPrefs=function(gadget){var userPrefs={};var cookieName=this.USER_PREFS_PREFIX+gadget.id;var cookie=goog.net.cookies.get(cookieName);if(cookie){var pairs=cookie.split("&");for(var i=0;i<pairs.length;i++){var nameValue=pairs[i].split("=");var name=decodeURIComponent(nameValue[0]);var value=decodeURIComponent(nameValue[1]);userPrefs[name]=value}}return userPrefs};gadgets.CookieBasedUserPrefStore.prototype.savePrefs=function(gadget){var pairs=[];for(var name in gadget.getUserPrefs()){var value=gadget.getUserPref(name);var pair=encodeURIComponent(name)+"="+encodeURIComponent(value);pairs.push(pair)}var cookieName=this.USER_PREFS_PREFIX+gadget.id;var cookieValue=pairs.join("&");goog.net.cookies.set(cookieName,cookieValue)};gadgets.Container.prototype.userPrefStore=new gadgets.CookieBasedUserPrefStore();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:commons_common', location = 'frontend/common.js' */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664;window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=function(t,a,i){for(var c,u,s,f=0,l=[];f<t.length;f++)u=t[f],o[u]&&l.push(o[u][0]),o[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(r&&r(t,a,i);l.length;)l.shift()();if(i)for(f=0;f<i.length;f++)s=n(n.s=i[f]);return s};var t={},o={2:0};n.e=function(e){function r(){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];0!==n&&(n&&n[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var t=o[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var a=new Promise(function(n,r){t=o[e]=[n,r]});t[2]=a;var i=document.getElementsByTagName("head")[0];if({0:!0}[e])return WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e),a;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,n.nc&&c.setAttribute("nonce",n.nc),c.src=n.p+"bundle."+e+".js";var u=setTimeout(r,12e4);return c.onerror=c.onload=r,i.appendChild(c),a},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(n.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-90c9cffa-c720-4899-87a5-539200e4d8ea/")}([]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664([1],[function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var r=n(5),u=i(r),a=n(2),o=i(a),s=o.default,c=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),l=t.QUICK_SEARCH_INPUT_LOCATOR="#"+c,_=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=l+" ~ ."+_,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"Issues",url:(0,u.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"View all issues"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,u.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"View all projects"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function i(){return(0,c.default)(_.QUICK_SEARCH_SPINNER_LOCATOR_CLASS)}function r(){return(0,c.default)(_.QUICK_SEARCH_INPUT_LOCATOR)}function u(){return r().parent()}function a(){u().addClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spin()}function o(){u().removeClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spinStop()}Object.defineProperty(t,"__esModule",{value:!0}),t.spinStart=a,t.spinStop=o;var s=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(1),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),u=i(r),a=n(4),o=i(a),s=n(3),c=i(s);n(8);var l=n(6),_=n(1),d=n(10),f=i(d),C=n(11),S=o.default.once(function(){(0,l.spinStart)(),n.e(0).then(n.bind(null,13))});(0,u.default)(function(){if(f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)){c.default.send({name:"quicksearch.enabled"});var e=(0,u.default)(_.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+_.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",function(e){e.preventDefault()}),e.focus(S),e.is(":focus")&&S()}}),(0,u.default)(window).load(function(){f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)&&(0,C.showOnboardingTip)()})},function(e,t){},function(e,t){e.exports=void 0},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"<div><p>"+e+"</p></div>"}function u(){if(0!==(0,f.default)(S).length){var e={anchor:S,id:"qs-onboarding-tip",isSequence:!1,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{hide:function(){return c.default.send({name:"quicksearch.onboarding.tip.dissmised"})}},title:"Find your work faster",bodyHtml:r("Search through all your issues and projects, and have the most important work always at your fingertips. Start typing to search...")},t=new o.default(e);if(!t.isDismissed()){if(t.show(),!t.isVisible())return void c.default.send({name:"quicksearch.onboarding.tip.notshown"});c.default.send({name:"quicksearch.onboarding.tip.shown"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.showOnboardingTip=u;var a=n(12),o=i(a),s=n(3),c=i(s),l=n(2),_=i(l),d=n(0),f=i(d),C=_.default,S="#quicksearch-menu:visible"},function(e,t){e.exports=require("jira-help-tips/feature/help-tip")}],[7]);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"]"},"");return{init:o}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,o,n,r){"use strict";return t("aui-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function d(){document.activeElement===s.get(0)&&u.get(0).focusItem(0)}function i(){s.data("kbd-interacted",!1)}var u=r(document.getElementById(t.getAttribute("aria-controls"))),s=r(t),c=u.data("aui-dropdown2-ajax-key");s.on("keydown.aui-dropdown2-ajax",function(){s.data("kbd-interacted",!0),setTimeout(i,4)}),u.on("aui-dropdown2-show-after.aui-dropdown2-ajax",i),i(),u.on("aui-dropdown2-show.aui-dropdown2-ajax",function(){if(u.trigger("aui-dropdown2-show-before"),c){var t=new a,i=new a;setTimeout(function(){t.resolve(s.data("kbd-interacted"))},0),u.empty(),u.addClass("aui-dropdown2-loading"),s.attr("aria-busy","true"),e.makeRequest({url:n()+"/rest/api/1.0/menus/"+c,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){i.resolve(e)},error:i.reject}),r.when(t,i).done(function(e,a){u.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),e&&setTimeout(d,0)}).always(function(){s.attr("aria-busy","false"),u.removeClass("aui-dropdown2-loading"),u.trigger("aui-dropdown2-show-after")})}else u.trigger("aui-dropdown2-show-after")})},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e);a.off(".aui-dropdown2-ajax"),t.off(".aui-dropdown2-ajax")}})}),function(e){"use strict";e(document).on("aui-responsive-menu-item-created",".aui-header.aui-dropdown2-trigger-group",function(a){var t=a.originalEvent.detail;e(t.originalItem).find("> .aui-dropdown2-ajax").length>0&&e(t.newItem).find("> .aui-dropdown2-trigger").addClass("aui-dropdown2-ajax")})}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",["require"],function(a){var b=a("jira/moment");return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(a){function c(d){return d>64&&d<91?d-65:d>96&&d<123?d-71:d>47&&d<58?d+4:d===43?62:d===47?63:0}var b=function(f){var m=f.replace(/[^A-Za-z0-9\+\/]/g,""),g=m.length,d=g*3+1>>2,k=new Uint8Array(d);for(var j,h,i=0,e=0,l=0;l<g;l++){h=l&3;i|=c(m.charCodeAt(l))<<18-6*h;if(h===3||g-l===1){for(j=0;j<3&&e<d;j++,e++){k[e]=i>>>(16>>>j&24)&255}i=0}}return k};a.base64decode=b;a.decodeBase64DataUri=function(e){var g=";base64,",f=e.slice(0,e.indexOf(g))+g,d=e.substring(f.length);return b(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["require","exports"],function(b,c){var g=b("jira/jquery/deferred");var d=b("jquery");var k=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var a=b("dndattachment/ctrlv/time");var f=b("dndattachment/ctrlv/version");var j=b("jira/flag");var m=b("jira/util/navigator");c.isKeyPasteEvent=function(q,n){var o=86;var p=((n||"").indexOf("Mac")!==-1)||m.isMac();return q.which===o&&(p?q.metaKey:q.ctrlKey)};c.isImagePasteEvent=function(q){if(q&&q.clipboardData){var o=k.union(k.toArray(q.clipboardData.items),k.toArray(q.clipboardData.files));var p=o.some(function(r){return r.type.indexOf("image")!==-1});var n=o.some(function(r){return r.type.indexOf("rtf")!==-1});return p&&!n}};var h=function(o){if(!o.clipboardData||!o.clipboardData.types||!k.contains(o.clipboardData.types,"text/html")){return}var n=d(o.clipboardData.getData("text/html"));if(n.length===1&&n.children().length===0&&n[0].nodeName.toLowerCase()==="img"){return n[0].src}return null};c.getHtmlImagePaste=h;c.isHtmlImagePasteEvent=function(n){return h(n)!=null};c.isTextPasteEvent=function(n){return n.clipboardData.types&&(k.contains(n.clipboardData.types,"text/plain")||k.contains(n.clipboardData.types,"text/html"))};c.isContentEditable=function(n){return n.contentEditable=="true"||n.contentEditable==""||(n.contentEditable=="inherit"&&d(n).parents().is("[contenteditable=true]"))};c.isValidFileName=function(n){return !k(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(o){return n.indexOf(o)>-1})};c.getTextPasteContent=function(n){return n.clipboardData.types&&k.contains(n.clipboardData.types,"text/plain")&&n.clipboardData.getData("text/plain")||""};c.getTextContent=function(n){if(!n){return""}else{if(m.isIE()&&typeof n.innerText!=="undefined"){return n.innerText}else{return d(n).text()}}};c.normalizePasteEvent=function(n){if(n&&n.originalEvent&&n.originalEvent.clipboardData){n.clipboardData=n.originalEvent.clipboardData}if(n&&!n.clipboardData&&window.clipboardData){n.clipboardData={files:window.clipboardData.files,types:{contains:function(o){if(o=="text/plain"){return !!window.clipboardData.getData("Text")}}},getData:function(o){if(o=="text/plain"){return window.clipboardData.getData("Text")}}}}return n};c.browserIsSupported=function(n){var p=((n||"").indexOf("Mac")!==-1)||m.isMac();var o=m.isSafari();return !(p&&o)&&!(f.isIE8()||f.isIE9()||f.isIE10())};c.browserIsNativePaste=function(){return m.isChrome()||m.isSafari()};c.isWikiTextfield=function(n){return n.is(":input")&&n.hasClass("wiki-textfield")};var e=function(n){return n.is("input#summary")};var l=function(o,v,r,t){var q=d(v);if(!(c.isWikiTextfield(q)||e(q))||!o){return}if(!q.is(":focus")){q.one("focus",function(){var w=q[0];w.selectionStart=w.selectionEnd=r+o.length})}var s=q.val();var n=s.substring(0,r);var u=s.substring(t,s.length);var p=q.data("wikiEditor");if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.recordHistoryItem)){p.undoRedoEl.recordHistoryItem()}q.val(n+o+u);q.trigger("input");v.selectionStart=v.selectionEnd=r+o.length;if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.updateCurrent)){p.undoRedoEl.updateCurrent()}};c.insertToInput=l;c.isThumbnailsAllowed=function(){var n=d("#dnd-metadata-webpanel").data("thumbnails-allowed");var o=true;if(n!=null){o=!!n}return o};c.getMarkup=function(s){var q=["bmp","gif"];var r=["pjpeg","jpeg","jpg","png"];var p=s.split(".");var o=c.isThumbnailsAllowed();var n=p[p.length-1].toLowerCase();if(o&&k.contains(r,n)){return"!"+s+"|thumbnail!"}else{if(k.contains(r,n)||k.contains(q,n)){return"!"+s+"!"}else{return"[^"+s+"]"}}};c.insertWikiMarkup=function(s,p,q,r,n){var o=c.getMarkup(s,n);if(o){o=" "+o+" ";l(o,p,q,r)}};c.loadImage=function(p){var n=new g();var o=new Image();o.setAttribute("crossOrigin","anonymous");o.onload=function(){n.resolve(o)};o.onerror=n.reject.bind(n);o.src=p;if(o.width>0&&o.height>0){n.resolve(o)}return n};c.convertImageToBlob=function(p){var n=d("<canvas>").attr("width",p.width).attr("height",p.height)[0];n.getContext("2d").drawImage(p,0,0);try{if(n.mozGetAsFile){return n.mozGetAsFile("image/png")}if(n.toDataURL){return new Blob([i.decodeBase64DataUri(n.toDataURL("image/png"))],{type:"image/png"})}}catch(o){return null}};c.convertBlobToImage=function(n,p){var o=new Blob([n.slice()],{type:n.type});o.lastModifiedDate=new Date();o.name=p;return o};c.dropFileToElement=function(p,o){var r=p.name;if(!r){r=this.generateFileName();p.name=r+".png"}var q=d.Event("drop",{dataTransfer:{files:[p]}});var n=false;d(document).on("dropHandled.dropFileToElement",function(){n=true});o.trigger(q);d(document).off(".dropFileToElement");return n};c.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")};c.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()};c.showErrorMsg=function(o,n){j.showErrorMsg(o,n)};c.createBlobFromFile=function(n){var o=new Blob([n.slice()],{type:n.type});o.name=n.name;return o};c.dragEventContainsFiles=function(o){if(!o.dataTransfer||!o.dataTransfer.types){return true}var n=o.dataTransfer.types;if(m.isMozilla()){return k.contains(n,"application/x-moz-file")}else{return k.contains(n,"Files")}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/ie_version.js' */
define("dndattachment/ctrlv/version",["require","exports"],function(e,h){var i=e("jquery");var m=e("underscore");var n=e("jira/util/navigator");var g=document.documentElement.className.split(/\s+/);var c=n.isIE();var l=i.inArray("msie-gt-7",g)>-1;var k=i.inArray("msie-gt-8",g)>-1;var j=i.inArray("msie-gt-9",g)>-1;var b=i.inArray("msie-gt-10",g)>-1;var f=c&&l&&!k;var d=c&&k&&!j;var a=c&&j&&!b;h.isIE8=m.once(function(){return f});h.isIE9=m.once(function(){return d});h.isIE10=m.once(function(){return a})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",["require"],function(b){var a=b("wrm/data");var d="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";function c(e){return a.claim(e)}return{getWRM:function(e){return c(d+e)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["require"],function(d){var a=d("jira/lib/class");var c=d("underscore");var b=d("jira/jquery/deferred");var e=d("jquery");return a.extend({init:function(f){this._dataTransfer=f},getFiles:function(){var g=this._dataTransfer.files;var f=this._dataTransfer.items;if(f&&f.length>0){if(c.any(f,function(h){return !!h.webkitGetAsEntry})){return this.readEntries(f)}}if(g&&g.length>0){return this.readFiles(this._dataTransfer.files)}else{return new b().reject()}},readFiles:function(g){var f=new b();e.when.apply(window,c.map(g,function(i){var h=new b();var j=!i.name.match(/\.([a-z0-9]+)$/i);if(j&&(i.size<=8192)||i.size==8192||i.size==4096||i.size<=1024){this.readFileAsText(i).fail(function(){g=c(g).without(i)}).always(h.resolve.bind(h))}else{h.resolve()}return h}.bind(this))).always(function(){f.resolve(g)});return f},readFileAsText:function(h){var g=new b();var f=new FileReader();f.onload=function(){g.resolve(this.result)};f.onerror=function(){g.reject(this.error)};f.readAsText(h);return g},readEntries:function(g){var f=new b();g=c.filter(g,function(h){return h.kind==="file"});e.when.apply(window,c.map(g,function(h){return this.readEntry(h.webkitGetAsEntry(),h)}.bind(this))).then(function(){f.resolve(c.union.apply(c,arguments))},f.reject.bind(f));return f},readEntry:function(h,g){var f=new b();if(h.isFile){if(g&&g.getAsFile){f.resolve([g.getAsFile()])}else{h.file(function(i){f.resolve([i])})}}else{if(h.isDirectory){h.createReader().readEntries(function(i){var j=[];e.when.apply(window,c.map(i,function(k){return this.readEntry(k).then(function(l){return j.push.apply(j,l)})}.bind(this))).always(function(){f.resolve(j)})}.bind(this))}}return f}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){var h=1024;var c=h*h;var d=" kB";var g=" MB";function f(i){if(i>c){return e(i)}else{if(i>h){return a(i)}else{return b(i)}}}function e(j){var i=j/c;return i.toFixed(2)+g}function a(j){var i=Math.round(j/h);return i+d}function b(j){var i=j/h;return i.toFixed(1)+d}return{format:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["require","exports"],function(c,e){var i=c("jira/analytics");var j=c("jira/dialog/dialog");var k=c("jira/jquery/deferred");var n=c("jira/util/events");var m=c("dndattachment/util/events/types");var l=c("underscore");var f=c("jquery");var h=c("dndattachment/ctrlv/utility");var d=[];var a;var g=function(r,q){var p=k();var o=j.current;if(o&&o.$form){i.send({name:"attach.screenshot.html5.dialogPaste",data:{}});var t=h.createBlobFromFile(q.files[0]);if(h.dropFileToElement(t,o.$form)){p.resolve([q.files[0].name])}}else{var s=l.find(d,function(u){return u.isValid(r,q)});if(s){p=s.processFiles(q.files,a);if(q.successCallback){p.done(q.successCallback)}if(q.failureCallback){p.fail(q.failureCallback)}if(q.alwaysCallback){p.always(q.alwaysCallback)}}}p.done(function(v,u){if(!u&&q.isWikiTextfieldFocused){var w=q.wikiTextfield;l.each(v,function(x){h.insertWikiMarkup(x,w,w.selectionStart,w.selectionStart)});if(o&&q.isPaste){i.send({name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}})}if(!f(q.wikiTextfield).is(":focus")){setTimeout(function(){q.wikiTextfield.focus()},0)}}})};var b=function(s){if(s){var p=typeof s.isValid!=="undefined";var q=typeof s.processFiles!=="undefined";var o=typeof s.weight!=="undefined";var r=typeof s.name!=="undefined";return p&&q&&o&&r}return false};e.registerExecutor=function(q){var p=b(q);if(p){var o=l.reject(d,function(r){return r.name===q.name});o.push(q);d=l.sortBy(o,function(r){return -r.weight})}return p};e.unregisterExecutor=function(o){d=l.reject(d,function(p){return p.name===o.name})};e.initialize=function(){n.bind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.disable=function(){n.unbind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.setAttachmentDropZone=function(o){a=o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["require","exports"],function(b,a){a.name="Default attachment executor";a.weight=0;a.isValid=function(d,c){return true};a.processFiles=function(d,c){return c.uploadFiles(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(a){var b=function b(c){return c.split(/\//).pop()};a.basename=b;a.dirname=function(c){var d=b(c);return c.substring(0,c.length-d.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Attach Screenshot') + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form" data-attach-secure-token="' + soy.$$escapeHtml(opt_data.attachUserToken) + '" data-submit-secure-token="' + soy.$$escapeHtml(opt_data.submitUserToken) + '"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml('Take a screenshot:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3ePrtScn\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8963; Ctrl\x3c/kbd\x3e + \x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e + \x3ckbd\x3e3\x3c/kbd\x3e') + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml('Paste the image:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3eCtrl\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml('Your image will be pasted here') + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml('Attach Screenshot') + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml('File name') + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml('Required') + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml('A file name to be used as attached image name') + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml('Upload') + '</button><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["require","exports"],function(b,c){var k=b("jira/util/formatter");var e=b("wrm/context-path");var h=b("jira/jquery/deferred");var d=b("jquery");var m=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var l=b("dndattachment/ctrlv/utility");var g=b("jira/dialog/dialog");var j=b("jira/dialog/dialog-register");var a=b("jira/ajs/ajax/smart-ajax");var f=b("jira/attachment/inline-attach");c.getFileFromEvent=function(o){var n=new h();if(l.isImagePasteEvent(o)){n.resolve(m(o.clipboardData.items).filter(function(p){return p.type.indexOf("image")!==-1}).map(function(p){return p.getAsFile()})[0]||m(o.clipboardData.files).filter(function(p){return p.type.indexOf("image")!==-1})[0])}else{n.reject()}return n.promise()};c.REQUEST_TIMEOUT_MILLIS=5*60*1000;c.screenshotFileUpload={};c.screenshotFileUploadUri=null;c.$document=undefined;c.$window=undefined;c.$container=undefined;c.$fakeInput=undefined;c.uploadError=false;c.uploadErrorMsg="";c.progressView={hidden:false,progress:0,old:0,progressBarContainer:undefined,progressEl:undefined,container:undefined,options:undefined,staticProgress:undefined,initProgress:function(){this.container=this.buildContainer();this.progressEl=this.buildProgress();this.container.append(this.progressEl);this.options={showPercentage:false,height:"5px"};this.progressBarContainer=d("#attach-screenshot-progress-container");this.progressBarContainer.empty();this.progressBarContainer.append(this.container);this.staticProgress=this.container;this.hidden=true},finish:function(){this.value(100)},progressHandler:function(o){var n=Math.round(o.loaded*100/o.total);this.value(n)},value:function(n){if(n>100){n=100}else{if(n<0){n=0}}if(this.hidden){this.progressEl.show();this.hidden=false}if(this.old!==n){this.progressEl.progressBar(n,this.options);if(n>=100){this.progressEl.fadeOut()}this.old=n}},buildContainer:function(){return d("<div>").addClass("file-progress")},buildProgress:function(){return d("<div>").attr("id","attach-screenshot-upload-progress")}};c.dialogView={pasteCatcher:{},presenter:undefined,getMaxSize:function(){return d("#attach-max-size").text()},getFileSize:function(){if(d.isPlainObject(this.presenter.screenshotFileUpload)&&m.isEmpty(this.presenter.screenshotFileUpload)){return 0}return this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){d("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){d("#error-attach-screenshot-filename").remove()},displayErrors:function(n){if("compatibility" in n){l.showErrorMsg("",n.compatibility)}if("fileName" in n){l.showErrorMsg("",n.fileName)}if("fileUpload" in n){l.showErrorMsg("",n.fileUpload)}},appendBlobImage:function(n){var p=window.URL||window.webkitURL;var o=p.createObjectURL(n);this.presenter.screenshotFileUpload=n;this.createImage(o)},createImage:function(q){var o=new Image();o.onload=function(){};o.src=q;this.presenter.screenshotToUpload=o;var p=d(o);p.addClass("attach-screenshot-pasted-image");var n=d("#attach-screenshot-image-container");n.empty();n.append(p);this.presenter.$fakeInput.focus();m.defer(function(){c.imageCreatedHandler()})},checkInput:function(){var o,n=c.dialogView.pasteCatcher.childNodes[0];if(n){if("IMG"===n.tagName){if(n.src.indexOf("data:")===0){o=n.src}else{}}c.dialogView.pasteCatcher.innerHTML=""}if(!o){c.$fakeInput.focus()}return o},onPaste:function(n){c.dialogView.cleanFileErrors();c.dialogView.cleanGeneralErrors();if(l.isImagePasteEvent(n)){c.getFileFromEvent(n).then(function(o){this.appendBlobImage(o)}.bind(this))}else{setTimeout(function(){var o=this.checkInput();if(o){c.screenshotFileUpload=i.decodeBase64DataUri(o);c.dialogView.createImage(o)}}.bind(this),0)}},getFakeInput:function(){return d("#attach-screenshot-fake-input")},getContainer:function(){return d("#attach-screenshot-image-container")},getIssueKey:function(){return d("input[name='id']").val()},getDocument:function(){return d(document)},getWindow:function(){return d(window)},getFileNameInput:function(){return d("#attachscreenshotname")},hasPngExtension:function(o){var n=/\.png$/i;return n.test(o)},setFileToConvert:function(n){d("input[name='filetoconvert']").val(n)},buildPasteCatcher:function(){if(!document.getElementById("attach-screenshot-form")){return}var n=document.createElement("div");n.setAttribute("contenteditable","true");n.style.width=0;n.style.height=0;n.style.position="absolute";n.style.top="-5000px";document.getElementById("attach-screenshot-form").appendChild(n);return n},_getFormSubmits:function(){return d("#attach-screenshot-form").find("button.aui-button")},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return d("#attach-screenshot-form").length>0},initDialog:function(n){this.pasteCatcher={};this.presenter=n;this.pasteCatcher=this.buildPasteCatcher()}};c.initScreenshotPasteHandler=function(){var n=c.dialogView;c.screenshotFileUpload={};c.resetUploadErrors();c.dialogView.initDialog(c);c.$document=n.getDocument();c.$window=n.getWindow();c.$container=n.getContainer();c.$fakeInput=n.getFakeInput();c.bindOnce(c.$container,"click",c.setFocusOnClickHandler);c.bindOnce(c.$fakeInput,"focus",c.showFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"blur",c.hideFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"keydown",c.keyDownHandler);if(!l.browserIsSupported()){n.displayErrors({compatibility:k.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})}else{c.bindOnce(c.$window,"paste",c.pasteHandler)}};c.resetUploadErrors=function(){c.uploadError=false;c.uploadErrorMsg=undefined};c.setUploadError=function(n){c.uploadError=true;c.uploadErrorMsg=n};c.bindOnce=function(p,n,o){p.unbind(n,o);p.bind(n,o)};c.showFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.hideFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.setFocusOnClickHandler=function(){c.$fakeInput.focus()};c.pasteHandler=function(n){if(!c.dialogView.isEnabled()){return}n=l.normalizePasteEvent(n);c.dialogView.onPaste(n)};c.polyPasteHandler=function(o,n,p){if(!c.dialogView.isEnabled()){return}c.screenshotFileUpload={length:-1};c.screenshotFileUploadUri=n;c.dialogView.createImage(p)};c.keyDownHandler=function(n){if(l.isKeyPasteEvent(n)){if(c.dialogView.pasteCatcher.focus){c.dialogView.pasteCatcher.focus()}}};c.imageCreatedHandler=function(){c.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())};c.getMimeType=function(){return"image/png"};c.createData=function(){return c.screenshotFileUpload};c.clipboardDataIsEmpty=function(n){if(window.clipboardData!=null){return false}return !(n&&n.clipboardData&&n.clipboardData.types&&n.clipboardData.types.length>0)};c.validateFileSize=function(q,n,p){var n=n||c.dialogView.getFileSize();var p=p||c.dialogView.getMaxSize();if(n>p){var o=f.Text.fileSize(p,n);q.fileUpload=k.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",o[1],o[0])}};c.validateFormData=function(n,p){var o={};if(d.isPlainObject(n)&&m.isEmpty(n)){o.fileUpload="Please paste the image you wish to upload"}c.validateFileSize(o);if(c.uploadError){o.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."}if(""==p){o.fileName="You must specify a filename of the image."}if(!l.isValidFileName(p)){o.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"}return o};c.doAjaxUpload=function(n,u){c.dialogView.disable();var t={};c.validateFileSize(t);if(!m.isEmpty(t)){c.dialogView.displayErrors(t);c.dialogView.enable();return}var r=c.createData(),s=c.getMimeType(),p=d("#attach-screenshot-form").data("attach-secure-token"),o=d("#attach-screenshot-form").find("input[name='formToken']").attr("value");var q=e()+"/rest/internal/1.0/AttachTemporaryFile?size="+c.dialogView.getFileSize()+"&filename="+encodeURIComponent(u)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(p?("&secureToken="+encodeURIComponent(p)):"")+(o?("&formToken="+encodeURIComponent(o)):"");c.resetUploadErrors();c.executeAjaxUpload(r,q,s).progress(function(v){if(v=="init"){c.progressView.initProgress()}}).done(function(v){if(typeof v=="string"){v=JSON.parse(v)}c.dialogView.setFileToConvert(v.id)}).fail(function(x,A,z,v){var w;if(v.statusText=="abort"){w="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation."}else{if(v.hasData){var y=JSON.parse(v.data);if(y.errorMessage){w=y.errorMessage}else{w=a.buildSimpleErrorContent(v,{alert:false})}}}c.setUploadError(w);c.dialogView.displayErrors({fileUpload:w})}).always(function(){c.dialogView.enable();c.progressView.finish()}).progress(function(v){if(v!="init"){c.progressView.progressHandler(v)}})};c.executeAjaxUpload=function(p,o,r){var n=h();var q=a.makeRequest({type:"POST",url:o,contentType:r,processData:false,data:p,timeout:c.REQUEST_TIMEOUT_MILLIS,success:n.resolve.bind(n),error:n.reject.bind(n),xhr:function(){var s=d.ajaxSettings.xhr();n.notify("init");s.upload.addEventListener("progress",n.notify.bind(n));return s}});n.always(function(){d.ajaxSettings.xhr().removeEventListener("progress",c.progressView.progressHandler);d(j.attachScreenshotDialog).off("Dialog.hide",q.abort)});d(j.attachScreenshotDialog).one("Dialog.hide",q.abort);return n.promise()};c.show=function(){var n=new h();var o=d(".issueaction-attach-screenshot-html5");if(g.current!=null){return n.reject().promise()}if(o.length==0){return n.reject().promise()}m.defer(function(){o.trigger("click")});d(document).on("dialogContentReady",function(q,p){if(p===j.attachScreenshotDialog&&c.dialogView.isEnabled()){n.resolve(p)}else{n.reject()}});d(document).on("ajaxComplete.jira.screenshot.dialog",function(r,q,p){if(p.url.indexOf(o.attr("href"))>-1){setTimeout(function(){if(!n.state()==="resolved"){n.reject()}},1000)}});n.always(function(){d(document).off("ajaxComplete.jira.screenshot.dialog")});return n.promise()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["require","exports"],function(h,D){var d=h("jquery");var v=h("dndattachment/ctrlv/trace");var e=h("dndattachment/ctrlv/tracking");var r=h("dndattachment/ctrlv/utility");var g=h("dndattachment/ctrlv/html5");var B=h("dndattachment/ctrlv/base64decode");var f=h("jira/dialog/dialog");var o=h("jira/util/events");var x=h("dndattachment/util/events/types");var A=0;var m=1;var c=2;var y=3;var p=4;var t=5;var i=6;var w=7;var q=8;var n=9;function l(G,F){F.stateName=G;var E=function(){var H=F.apply(null,arguments);H.stateName=G;return H};E.stateName=G;return E}function b(F,E,G){return l(F,function(){var J=setTimeout(function(){a(n)},G);var I=E.apply(null,arguments);var H=function(M,L){var K=I(M,L);if(K){clearTimeout(J);return K}};H.stateName=F;return H})}var k=l("idle",function(){function E(F){if(d(F.target).is(":input:not(.wiki-textfield, #summary)")||r.isContentEditable(F.target)){return}return true}return function(G,F){if(G==A&&r.isKeyPasteEvent(F)){if(r.browserIsNativePaste()||!E(F)||!r.browserIsSupported()){return}e.trigger("attach.screenshot.html5.catchClipboard");return new u(F)}if(G==m){if(r.isImagePasteEvent(F)){e.trigger("attach.screenshot.html5.handlePaste");if(!E(F)){v("jira/attach-images-plugin/pasteIgnored");return}if(d(F.target).is(":input.wiki-textfield")){F.preventDefault()}return new s(F)}else{v("jira/attach-images-plugin/pasteIgnoredNotImage")}}}});var u=b("catchClipboard",function(G){var E=document.activeElement;G.selectionStart=G.target.selectionStart;G.selectionEnd=G.target.selectionEnd;var H=d('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");H.focus();if(d(E).is(":focusable:input,:aui-focusable:input")){setTimeout(function(){E.focus()})}function F(){H.remove()}return function(L,I){if(L==m){if(r.isImagePasteEvent(I)){F();I.target=E;return new s(I)}if(r.isHtmlImagePasteEvent(I)){F();I.target=E;return new z(I)}if(r.isTextPasteEvent(I)){F();var O=r.getTextPasteContent(I);r.insertToInput(O,G.target,G.selectionStart,G.selectionEnd);I.preventDefault();return new k()}}if(L==n){F();var K=H.find(">img");if(K.is(":only-child")){var M=K.attr("src");if(M.toLowerCase().indexOf("http")===0){return k()}else{var P=B.decodeBase64DataUri(M);var J=new Blob([P],{type:"image/png"});return new j(J,G)}}else{var N=r.getTextContent(H[0]);r.insertToInput(N,G.target,G.selectionStart,G.selectionEnd);return k()}}}});var z=l("imageLoading",function(E){var F=r.getHtmlImagePaste(E);if(!F){a(t)}else{r.loadImage(F).then(function(G){a(p,G)},a.bind(null,t))}return function(I,G){if(I==p){var H=r.convertImageToBlob(G);if(H){return new j(H,E)}else{return new k()}}if(I==n||I==t){return new k()}}});var s=b("fileLoading",function(E){g.getFileFromEvent(E).done(function(F){a(c,F)}).fail(function(){a(y)});return function(G,F){if(G==c){return new j(F,E)}else{if(G==y||G==n){return new k()}}}},1000);var j=l("attachImage",function(G,F){var H=F.target;var I=r.generateFileName()+".png";var E=r.convertBlobToImage(G,I);o.trigger(x.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[E],isWikiTextfieldFocused:r.isWikiTextfield(d(H)),wikiTextfield:H,isPaste:true,successCallback:function(){a(i)}});return function(K,J){return new k()}});var C=new k();function a(F,E){if(a.eventQueue){a.eventQueue.push({type:F,object:E});return}a.eventQueue=[{type:F,object:E}];while(a.eventQueue.length>0){var G=a.eventQueue.splice(0,1)[0];var H=C(G.type,G.object);if(H){C=H}}delete a.eventQueue}D._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:A,EVENT_WINDOW_PASTE:m,EVENT_FILE_LOADED:c,EVENT_FILE_LOAD_ERROR:y,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:t,EVENT_DIALOG_LOADED:i,EVENT_DIALOG_CLOSED:w,EVENT_DIALOG_CANCELED:q,EVENT_TIMEOUT:n},states:{StateIdle:k,StateCatchClipboard:u,StateImageLoading:z,StateFileLoading:s,StateAttachImage:j}}};D.initIssuePaste=function(){d(window).on("keydown",function(E){a(A,E)});d(window).on("paste",function(E){a(m,r.normalizePasteEvent(E))});o.bind("Dialog.hide",function(E,G,F){if(F){a(q,G)}else{a(w,G)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",["require"],function(b){var a=b("jira/util/logger");return a.trace});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["require","exports"],function(c,b){var a=c("jira/analytics");b.trigger=function(e,d){a.send({name:e,data:d||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["require","exports"],function(e,c){var d=e("jira/jquery/deferred");var g=e("jquery");var a=e("jira/util/events");var b=e("dndattachment/ctrlv/html5");var f=e("dndattachment/upload/handler");c.register=function(){var h={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(j,i){return !!i.isPaste},processFiles:function(k,j){var i=d();b.show().done(function(n){var m=g("#attach-screenshot-placeholder-message");var l=g.Event("paste");l.clipboardData={files:k};m.focus();setTimeout(function(){m.trigger(l)});a.bind("Dialog.hide",function(o,q,p){if(p){i.reject()}else{i.resolve([q.find("#attachscreenshotname").val()+".png"])}})});return i}};f.registerExecutor(h)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["require","exports"],function(b,d){var h=b("jira/jquery/deferred");var e=b("jquery");var k=b("underscore");var l=b("dndattachment/ctrlv/utility");var f=b("dndattachment/ctrlv/html5");var g=b("dndattachment/ctrlv/issue-paste");var j=b("dndattachment/ctrlv/tracking");var c=b("dndattachment/ctrlv/executor");var i=b("jira/dialog/dialog-register");var a=b("jira/dialog/form-dialog");d.init=function(){var m=a.extend({options:{}});window.JIRA.ScreenshotDialog=m;g.initIssuePaste();e(document).ready(function(){var o=h();o.resolve();i.attachScreenshotDialog=new m({id:"attach-screenshot-dialog",trigger:".issueaction-attach-screenshot-html5",isIssueDialog:true,onContentRefresh:function n(){this.$form.bind("before-submit",function p(q){var r=f.validateFormData(f.screenshotFileUpload,e.trim(f.dialogView.getFileNameInput().val()));if(f.dialogView.getFileSize()==0){q.preventDefault();return false}else{if(!k.isEmpty(r)){f.dialogView.displayErrors(r);q.preventDefault();return false}}return true})},delayShowUntil:function(){return o}});e(document).bind("dialogContentReady",function(q,p){if(p===i.attachScreenshotDialog&&document.getElementById("attach-screenshot-form")!==null){j.trigger("attach.screenshot.html5.contentReady");f.initScreenshotPasteHandler()}});e(document).ready(function(){e(document).on("click","#attach-screenshot-html5",function(){j.trigger("attach.screenshot.html5.display")})})});c.register()}});require(["dndattachment/ctrlv/initialize","jquery"],function(b,a){a(function(){b.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui/dialog2",function(){return AJS.dialog2});define("dndattachment/aui/escape-html",function(){return AJS.escapeHtml});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/dnd-template-wrapper.js' */
define("dndattachment/templates",function(){return window.JIRA.Templates.DnDAttachmentPlugin});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","jira/analytics","jira/util/events","dndattachment/util/events/types"],function(c,f,j,i){var e="issueaction-attach-file";var a=function(k){k.addClass(e);k.click()};var b=function(){var k=c('<input type="file" multiple />');k.change(function(l){j.trigger(i.ATTACHMENT_FOR_PAGE_RECEIVED,{files:k[0].files})});k.click()};var h=function(k){return !!k.data("issuekey")};var g=function(){c(document).on("click",".unified-attach-file",function(m){f.send({name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}});var k=c(m.target);if(k.hasClass(e)){return}m.preventDefault();var l=c(".issue-drop-zone").length;if(l&&!h(k)){b()}else{a(k)}})};var d=function(){g()};if(c.isReady){d()}else{c(d)}});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics","jira/util/data/meta"],function(a,t,c){"use strict";function i(a){var t=c.get("analytics-prefix");return t&&(a=t+a),a}function n(){a("[data-track-pageview]").each(function(c,n){t.send({name:i(a(n).data("track-pageview"))})})}a(document).on("click","[data-track-click]",function(){t.send({name:i(a(this).data("track-click"))})}),a(n)});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var e=jQuery,t=e(document);this.each(function(){var r=e(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var g={previewSize:48};g.preview=e("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:g.previewSize+"px",overflow:"hidden",width:g.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),g.preview.prependTo(i.previewElement),g.img=e('<img alt="Avatar Source"/>'),g.img.load(function(){g.image=e("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative"}),g.marker=e("<div/>").css({cursor:"move",position:"relative"}),g.dash=e("<div/>"),g.shadow=e("<div/>"),g.dash.add(g.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),g.image.append(g.shadow).append(g.dash).append(g.marker),r.append(g.image),g.marker.html("<div></div><div></div><div></div><div></div>"),e("div",g.marker).each(function(i){var t=e(this);t.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),t.css(["left","right","right","left"][i],"-6px"),t.css(["top","top","bottom","bottom"][i],"-6px"),t.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),t.mousedown(function(e){e.preventDefault(),e.stopPropagation(),g.dragging={x:e.pageX,y:e.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height,i:i+1},g.shadow.hide()})}),g.marker.add(g.image).mousedown(function(i){i.preventDefault(),g.dragging={x:i.pageX,y:i.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height},g.shadow.hide()}),t.mouseup(function(i){g.handleMouseUp(i)}),t.mousemove(function(i){g.dragging&&(g.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),g.imgwidth=g.img[0].naturalWidth,g.imgheight=g.img[0].naturalHeight,g.x=parseInt(e("#avatar-offsetX").val()),g.y=parseInt(e("#avatar-offsetY").val()),g.width=parseInt(e("#avatar-width").val()),g.height=g.width,g.image.css({width:g.imgwidth+"px",height:g.imgheight+"px"}),g.setMarker(),r.css({width:g.imgwidth+"px"}),g.preview.css({position:"static"}),e("p",r).remove(),r.trigger("AvatarImageLoaded"),g.adjustPreview()}),g.img.attr("src",a),g.preview.append(g.img),g.setMarker=function(){g.marker.css("border","dashed 1px #fff"),g.dash.css("border","solid 1px #000"),g.shadow.css("border","solid 1px #000"),g.marker.add(this.dash).css("left",this.x-1+"px"),g.marker.add(g.dash).css("top",g.y-1+"px"),g.shadow.css("border-left-width",g.x+"px"),g.shadow.css("border-right-width",g.imgwidth-g.x-g.width+"px"),g.shadow.css("border-top-width",g.y+"px"),g.shadow.css("border-bottom-width",g.imgheight-g.y-g.height+"px"),g.shadow.css("width",g.width+"px"),g.shadow.css("height",g.height+"px"),g.marker.add(g.dash).css("width",g.width+"px"),g.marker.add(g.dash).css("height",g.height+"px")},g.adjustPreview=function(){g.img.attr("width",g.imgwidth*g.previewSize/g.width),g.img.attr("height",g.imgheight*g.previewSize/g.height),g.img.css("margin-left","-"+g.x*g.previewSize/g.width+"px"),g.img.css("margin-top","-"+g.y*g.previewSize/g.height+"px"),g.preview.select()},g.handleMouseMove=function(i,e){if(g.dragging.nextExec=g.dragging.nextExec||0,0!=g.dragging.nextExec)return void g.dragging.nextExec--;g.dragging.nextExec=3;var t=i-g.dragging.x,r=e-g.dragging.y;if(this.dragging.i){(0,g.resizeHandlers[this.dragging.i-1])(t,r)}else g.x=g.dragging.ax+t,g.y=g.dragging.ay+r,g.x+g.width>g.imgwidth&&(g.x=g.imgwidth-g.width),g.y+g.height>g.imgheight&&(g.y=g.imgheight-g.height),g.x<0&&(g.x=0),g.y<0&&(g.y=0);g.setMarker(),g.adjustPreview()},g.handleMouseUp=function(i){e("#avatar-offsetX").val(g.x),e("#avatar-offsetY").val(g.y),e("#avatar-width").val(g.width),g.dragging=null,g.shadow.show()},g.originX=function(){return g.dragging.ax},g.originY=function(){return g.dragging.ay},g.originBottomX=function(){return g.dragging.ax+g.dragging.w},g.originBottomY=function(){return g.dragging.ay+g.dragging.h},g.originNw=function(){return{x:g.originX(),y:g.originY()}},g.originNe=function(){return{x:g.originBottomX(),y:g.originY()}},g.originSe=function(){return{x:g.originBottomX(),y:g.originBottomY()}},g.originSw=function(){return{x:g.originX(),y:g.originBottomY()}},g.nwHandler=function(i,e){var t=g.originSe(),r={x:g.originX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y-n<0&&(n=t.y),g.x=t.x-n,g.y=t.y-n,g.width=g.height=n},g.neHandler=function(i,e){var t=g.originSw(),r={x:g.originBottomX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y-n<0&&(n=t.y),g.y=t.y-n,g.width=g.height=n},g.seHandler=function(i,e){var t=g.originNw(),r={x:g.originBottomX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.width=g.height=n},g.swHandler=function(i,e){var t=g.originNe(),r={x:g.originX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.x=t.x-n,g.width=g.height=n},g.resizeHandlers=[g.nwHandler,g.neHandler,g.seHandler,g.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(t,e){t.getSizeObjectFromName=function(i){if("object"===(void 0===i?"undefined":_typeof(i)))return i;"string"==typeof i&&e.trim(i);return t.LARGE.param===i?t.LARGE:t.MEDIUM.param===i?t.MEDIUM:t.SMALL.param===i?t.SMALL:"xsmall"===i?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,a,n){var t={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new a.Form(new a.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new a.Timer(function(){!this.cancelled&&u.show()},this),f=new a.FormUpload({$input:d,url:o,params:n.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,t.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(a.Text.tr("upload.xsrf.timeout",l),t.getErrorTarget(c)):c.addError(a.Text.tr("upload.error.unknown",l),t.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new a.Form(new a.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new a.Timer(function(){d.show()}),l=new a.AjaxUpload({file:c,params:n.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,t.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,t.getErrorTarget(u)):u.addError(a.Text.tr("upload.error.unknown",c.name),t.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,n){a.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,n):this.uploadUsingIframeRemoting(e,r,n)}};return t});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,n,c,o,d,l,s){"use strict";s.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},s.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"Select a Project Avatar").appendTo(c),n=s.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){c.append(a),i(c)})}});r._focusFirstField=function(){}},s.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("Select a Project Avatar").appendTo(n),i=s.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){n.append(a),r(n)})}});t._focusFirstField=function(){}};var v=d.claim("jira.core:avatar-picker-data.data");s.createUserAvatarPickerDialog=function(t){if(v&&v.isEnabled)return void l(t.trigger).click(function(e){var t=o()+v.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("Select a User Avatar").appendTo(n),i=s.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){n.append(e),a(n)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml('Upload a new avatar') + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml('Delete this Avatar') + '">' + soy.$$escapeHtml('Delete this Avatar') + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml('Please select which part of the uploaded image you wish to use as the avatar.') + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml('Confirm') + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){"use strict";var i=window.timesOnce=window.timesOnce||{};n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(i,e){0==document.getElementById(i+"interval").value?n.switchToOnce(i,e):n.switchToMany(i,e)},n.switchToOnce=function(e,o){n.hideCronEdit(e+"runMany"),n.showCronEdit(e+"runOnce"),o&&(i[e]=!0)},n.switchToMany=function(e,o){n.hideCronEdit(e+"runOnce"),n.showCronEdit(e+"runMany"),o&&(i[e]=!1)},n.switchToDaysOfMonth=function(i){n.hideCronEdit(i+"daysOfWeek"),n.showCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.hideCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOnce(i,!1)},n.switchToDaysOfWeek=function(i){n.showCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToDaily=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToAdvanced=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.hideCronEdit(i+"runOnce"),n.hideCronEdit(i+"runMany"),n.hideCronEdit(i+"freqDiv"),n.showCronEdit(i+"advanced")},n.switchToOriginal=function(e){i[e]?n.switchToOnce(e,!1):n.switchToMany(e,!1)}}),function(){"use strict";var n=require("jira/util/cron");AJS.namespace("hideCronEdit",null,n.hideCronEdit),AJS.namespace("showCronEdit",null,n.showCronEdit),AJS.namespace("switchToOnce",null,n.switchToOnce),AJS.namespace("switchToMany",null,n.switchToMany),AJS.namespace("switchToDaysOfMonth",null,n.switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,n.switchToDaysOfWeek),AJS.namespace("switchToDaily",null,n.switchToDaily),AJS.namespace("switchToAdvanced",null,n.switchToAdvanced),AJS.namespace("switchToOriginal",null,n.switchToOriginal),AJS.namespace("toggleFrequencyControl",null,n.toggleFrequencyControl)}();;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(b,d){var c=AJS.dim;var a=AJS.undim;return{showLoadingIndicator:function(){c();b.showLoadingIndicator()},hideLoadingIndicator:function(e){a();b.hideLoadingIndicator();if(e){d.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(l,k,h,i,b){var f=function(){b.disable();i.showLoadingIndicator()};var c=function(){i.hideLoadingIndicator(true);b.enable()};var g;var a=false;l(document).on("simpleClick",".create-issue, .create-issue-type",function(o){o.preventDefault();if(!a){a=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(d.bind(undefined,o),function p(){c();a=false})}});var d=function(n){var m=require("quick-edit/init/create");m.initIssueDialog(n);b.enable();a=false};l(function(){g=document.getElementById("stqc_show");if(g){g.onclick=null}});var j=false;l(document).on("simpleClick",".issueaction-create-subtask",function(o){o.preventDefault();if(!j){j=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(e,function p(){c();j=false})}});var e=function(n){var m=require("quick-edit/init/create");m.initSubtaskDialog(n);b.enable();j=false}});;
;
/* module-key = 'jira.webresources:jira-page-atl-prefetch', location = '/includes/jira/page/prefetch.js' */
define("jira/page/atl/prefetch",["jira/util/data/meta","jira/data/local-storage","jira/ajs/dark-features","jquery","wrm/context-path"],function(e,t,r,n,i){"use strict";function a(e){n("<link />",{rel:"prefetch",href:e}).appendTo("head")}function s(e){var t=e.sections;if(t){var r=t.filter(function(e){return"issues_history_main"===e.id});if(r.length&&0!==r[0].items.length){return r[0].items[0].url}}}function c(e,t){for(var r;r=t.exec(e);){a(r[1].replace(/&amp;/g,"&"))}}function u(){try{t.setItem(g,d)}catch(e){}}function f(e){c(e,/<script.+?src="(.+?)".+?<\/script>/g),c(e,/<link.+?rel="stylesheet".+?href="(.+?)".+?>/g),u()}function o(){return!!r.isEnabled("jira.issue.prefetch")&&(1===n("#isNavigator").length?(u(),!1):e.get("issue-key")?(u(),!1):d!==t.getItem(g))}function l(e){var t=s(e);t&&h(t)}function h(e){n.get(e,f)}function p(){o()&&n.ajax({url:i()+"/rest/api/1.0/menus/find_link?inAdminMode=false",dataType:"json"}).done(l)}var g="jira.issue.prefetch.last.superbatch",d=function(){var e=new Date,t=e.getFullYear().toString()+e.getMonth().toString()+e.getDate().toString(),r=n("head > script").filter(function(e,t){return t.src.indexOf("/_super")>0});return(r.length>0?r[0].src:"empty")+t}();return{prefetchResourcesForUrl:h,prefetchViewIssueResources:p}});;
;
/* module-key = 'jira.webresources:init-jira-page-atl-prefetch', location = '/includes/jira/page/initPrefetch.js' */
require(["jira/page/atl/prefetch","jquery"],function(e,r){r(window).on("load",e.prefetchViewIssueResources.bind(e))});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm/context-path",function(){return AJS.contextPath});define("wrm/data",function(){var a=function(){};if(WRM){if(typeof WRM.data==="function"){a=WRM.data}else{if(WRM.data&&typeof WRM.data.claim==="function"){a=WRM.data.claim}}}return{claim:a}});define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-components-query-amd.js' */
define("hipchat/jira/query-component",function(){return JIRA.Components.Query});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-issues-amd.js' */
define("hipchat/jira/issues/searcher-collection",function(){return JIRA.Issues.SearcherCollection});define("hipchat/jira/issues/query-state-model",function(){return JIRA.Issues.QueryStateModel});define("hipchat/jira/issues/criteria-model",function(){return JIRA.Issues.CriteriaModel});define("hipchat/jira/issues/criteria-view",function(){return JIRA.Issues.CriteriaView});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/hipchat-scopes-provider-amd.js' */
define("hipchat/scopes-provider",function(){return HipChat.ScopesProvider});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.deprecated.behaviour.cookie', location = 'aui.chunk.40bf44a00a841276cf1f--db5bb1916915377e0224.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.deprecated.behaviour.cookie"],{"N/qQ":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("qHho"));r.default=t,e.exports=r.default},qHho:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.save=r.read=r.erase=void 0;var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("bPPT")),a=function(e){return e&&e.__esModule?e:{default:e}}(n("KloK"));var o="AJS.conglomerate.cookie",u=/(\\|^"|"$)/g,i=/\|\|+/g,c=/"/g,l=/[.*+?|^$()[\]{\\]/g;function f(e){return e.replace(l,"\\$&")}function s(e){var r=new RegExp("\\b"+f(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),n=document.cookie.match(r);return n&&function(e){return e.replace(u,"")}(n[1])}function p(e,r,n){var t=s(o);t=function(e,r,n){var t=new RegExp("(\\s|\\|)*\\b"+f(e)+"=[^|]*[|]*");if(n=(n=n||"").replace(t,"|"),""!==r){var a=e+"="+r;n.length+a.length<4020&&(n+="|"+a)}return n.replace(i,"|")}(e,r,t),function(e,r,n){var t,a="",o='"'+r.replace(c,'\\"')+'"';n&&((t=new Date).setTime(+t+24*n*60*60*1e3),a="; expires="+t.toGMTString()),document.cookie=e+"="+o+a+";path=/"}(o,t,n||365)}function d(e,r){var n=function(e,r){r=r||"";var n=new RegExp(f(e)+"=([^|]+)"),t=r.match(n);return t&&t[1]}(e,s(o));return null!=n?n:r}function v(e){p(e,"")}var h={erase:v,read:d,save:p};(0,a.default)("cookie",h),(0,a.default)("Cookie",h),t.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"}),r.erase=v,r.read=d,r.save=p}},[["N/qQ","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.a16cabd587","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20"]]]);
//# sourceMappingURL=aui.chunk.40bf44a00a841276cf1f--db5bb1916915377e0224.js.map;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
require(["jquery","jira/flag","jira/util/users/logged-in-user","wrm/context-path"],function(d,b,e,a){var c=AJS.Cookie;AJS.toInit(function(){var i="HIPCHAT_ADMIN_BANNER_DISMISS_2";var g;if(!h()&&e.isAdmin()&&!k()){d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(m){if(m.installationCheckResult.required||m.v1){g=f(m)}})}function f(o){var n=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!o.v2&&o.v1,reinstallationDiscoveryTitle:o.installationCheckResult.discoveryTitle,reinstallationDiscoveryText:o.installationCheckResult.discoveryText});var m=b.showWarningMsg(null,n);d(document).on("click","#remove-hipchat-v1-link",l);d(document).on("aui-flag-close",".aui-flag",j);return m}function h(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function j(m){if(d(m.target).find(".hipchat-update-banner").length>0){c.save(i,true)}}function k(){return c.read(i)=="true"}function l(m){m.preventDefault();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(n){if(g){g.hide()}b.showErrorMsg(null,AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",n.status))}).done(function(n){if(g){g.hide()}b.showSuccessMsg(null,"Integration has been removed successfully")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryTitle) + '</b><p>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryText) + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml('Update Now!') + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml('Remove Integration') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-dialog-init.js' */
require(["jquery","jira/loading/loading","wrm/require"],function(n,i,e){"use strict";function o(){t=!0,AJS.dim(),i.showLoadingIndicator()}function r(n){t=!1,n&&AJS.dim.$dim.css("transition","none"),AJS.undim(),n&&AJS.dim.$dim&&AJS.dim.$dim.css("transition",""),i.hideLoadingIndicator()}var t=!1;n(document).on("click",".jira-feedback-plugin",function(n){n.preventDefault(),t||(o(),e(["wr!com.atlassian.feedback.jira-feedback-plugin:button-resources"]).done(function(){require("jira/feedback/feedback-dialog").show().then(function(){return r(!0)},function(n){console.error("Something went wrong in an attempt to show the issue collector dialog",n),r(!1)})}).fail(function(n){console.error("Something went wrong when loading feedback plugin resources",n),r(!1)}))})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init', location = 'static/components/newsletter/initNewsletterSignup.js' */
define("jira/newsletter/init-signup",["wrm/data","wrm/require","require"],function(e,i,n){return function(){var r=e.claim("com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup");r&&r.showNewsletterTip&&i("wr!com.atlassian.jira.jira-header-plugin:newsletter-signup-tip").then(function(){n("jira/newsletter/signuptip").render(r)})}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init-init', location = 'static/components/newsletter/initInitNewsletterSignup.js' */
require(["jquery","jira/newsletter/init-signup"],function(i,n){i(function(){n()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(g){g.preventDefault();new a({id:"whereismycf-dialog",content:function f(i){var h=this;require(["jira/admin-helper/whereismycf/content-loader"],function(j){j.loadContentForView(h,i)})}}).show()});e(document).bind("showLayer",function(g,i,h){if(i=="inlineDialog"&&h.popup.attr("id")=="inline-dialog-field_picker_popup"){if(h.popup.find(".whereismycf-qfpicker-link").length==0){var f=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(h.popup.find(".qf-picker-header dl"));f.click(function(l){l.preventDefault();h.hide();var j=b.current;new a({id:"whereismycf-dialog",content:function k(n){var m=this;require(["jira/admin-helper/whereismycf/content-loader"],function(o){o.loadContentForEditAndCreate(m,j,n)})}}).show()})}}})}});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\'t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Don’t remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml('Assign to me') + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('Loading project templates') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('Import a project') + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('Create with shared configuration') + '</span> ' + soy.$$escapeHtml('Create with shared configuration') + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('Create sample data') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml('View Marketplace Workflows') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: 'Name', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: 'Key', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxKeyLength), helpTitle: 'What\x27s a project key?', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml('What\x27s a project key?') + '</b></p><ul><li>' + soy.$$escapeHtml('It prefixes each issue in the project') + '</li><li>' + soy.$$escapeHtml('It can be changed, but this is not a trivial task') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: 'Project Lead'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: 'Enter the username of the Project Lead.'});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format('Give me a {0} license so I can access this project.',opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format('({0} of {1} licenses now used)',opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format('We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.',opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('Select the existing project that you\x27d like to share configurations with.') + '<a class="help-lnk" title="' + soy.$$escapeHtml('What will be shared?') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('What will be shared?') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: 'Choose a project'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('What will be shared?') + '</strong></p><p>' + soy.$$escapeHtml('Configuration refers to the set of schemes used by a project') + '</p><ul><li>' + soy.$$escapeHtml('Permission Scheme') + '</li><li>' + soy.$$escapeHtml('Notification Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Security Scheme') + '</li><li>' + soy.$$escapeHtml('Workflow Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Screen Scheme') + '</li><li>' + soy.$$escapeHtml('Field Configuration Scheme') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(j,h){var k=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(j)();e.dialog.getPanel(k.id,0).html(g);e.dialog.gotoPage(k.id);var i=b.find(k.button,function(l){return l.item&&l.item.hasClass("pt-submit-button")});if(i){setTimeout(function(){i.item.focus()},0)}},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions();this.resizeTemplateWidths()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?","。"],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return d.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")},widthOfScrollbarForElement:function(k){var j=k.offsetWidth;var l=k.clientWidth;return j-l},widthOfDialogAvailableForTemplateList:function(){var j=this.widthOfScrollbarForElement(this.getTemplatesDialogContainer());return this.DIALOG_WIDTH-j},widthOfTemplateItem:function(){var j=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return j-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var j=this.getFirstTemplateItem().css("border-top-width");return parseInt(j,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(h.bind(function(j,k){e(k).css("width",this.widthOfTemplateItem())},this))}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).done(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact Jira");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact Jira")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a Jira project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Visualize work across your team with a board.', projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: 'Task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: 'Sub-task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/window.js' */
define('baseurl-checker/window', [], function() {
    return window;
});;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/baseurl-checker.js' */
define('baseurl-checker', [
    'jira/flag',
    'jira/util/formatter',
    'jira/util/data/meta',
    'jira/ajs/ajax/smart-ajax',
    'jira/analytics',
    'jira/libs/parse-uri',
    'wrm/context-path',
    'jquery',
    'baseurl-checker/window'
], function (flag, formatter, Meta, SmartAjax, analytics, parseUri, contextPathFunc, $, window) {
    'use strict';
    var $flagElement;
    var contextPath = contextPathFunc();

    var BaseUrl = {
        jiraRestPath: contextPath + "/rest/api/2/settings/baseUrl",

        isDisplayed: function () {
            return !!$('#base-url-banner').length;
        },

        performCheck: function () {
            if (this.isDisplayed()) {
                return;
            }
            var requestUrl = this.constructRequestUrl();
            var serverUrl = this.constructServerUrl();
            var baseUrl = parseUri(Meta.get('base-url'));

            var baseUrlErrorDisplayed = baseUrl.source !== requestUrl.source && this.showWrongBaseUrlFlag(baseUrl, requestUrl);
            if (!baseUrlErrorDisplayed && (serverUrl && serverUrl.source !== requestUrl.source)) {
                this.showWrongConfigFlag(requestUrl);
            }
        },

        showWrongBaseUrlFlag: function (baseUrl, requestUrl) {
            var title = "wrong.baseurl.title";
            var requestUrlLink = this.linkFor(requestUrl);
            var baseUrlLink = this.linkFor(baseUrl);
            var body = formatter.format("Jira\'\'s base URL is set to {0} but you are accessing Jira from {1}.",
                baseUrlLink,
                requestUrlLink
            ) + '<p>' + this.constructFlagLink('#', "Update Jira\'s base URL") + '</p>';
            var clickEvent = 'jira.base.url.plugin.banner.update';
            var closeEvent = 'no-match';
            var dismissalKey = 'com.atlassian.jira.baseurl';

            return this.showWarningFlag(title, body, clickEvent, closeEvent, dismissalKey, function (e) {
                e.preventDefault();
                BaseUrl.updateBaseUrl(requestUrl);
            });
        },

        showWrongConfigFlag: function (requestUrl) {
            var title = "Tomcat config is incorrect";
            var link = this.constructFlagLink('https://confluence.atlassian.com/x/LFsGO', "Troubleshoot");
            var body = "The Tomcat server.xml has an incorrect configuration:" + this.constructConfigProblems(requestUrl) + '<p>' + link + '</p>';
            var clickEvent = 'jira.base.url.plugin.banner.troubleshoot';
            var closeEvent = 'cant-check-proxy';
            var dismissalKey = 'com.atlassian.jira.proxyconfig';

            return this.showWarningFlag(title, body, clickEvent, closeEvent, dismissalKey);
        },

        showWarningFlag: function (title, body, clickEvent, closeEvent, dismissalKey, clickCallback) {
            if (this.isDisplayed()) {
                return false;
            }
            var flagElement = flag.showWarningMsg('', body, {dismissalKey: dismissalKey});
            if (!flagElement) {
                return false;
            }

            $flagElement = $(flagElement);

            $flagElement.find('#base-url-proxy-config-fix').click(function (e) {
                analytics.send({name: clickEvent});
                if (clickCallback) {
                    clickCallback(e);
                }
            });

            $flagElement.data('type', closeEvent);
            $flagElement.data('base-url-flag', true);
            $flagElement.data('openTime', Date.now());

            flagElement.addEventListener('aui-flag-close', BaseUrl.sendAnalyticsOnClose);

            analytics.send({
                name: 'jira.base.url.plugin.banner.open',
                data: {
                    type: $flagElement.data('type'),
                    openTime: $flagElement.data('openTime')
                }
            });
            return true;
        },

        sendAnalyticsOnClose: function (event) {
            var flagElement = event.target;
            var $flagElement = $(flagElement);

            if ($flagElement.data('base-url-flag') === false) {
                return;
            }

            analytics.send({
                name: 'jira.base.url.plugin.banner.close',
                data: {
                    type: $flagElement.data('type'),
                    flagOpenFor: Date.now() - $flagElement.data('openTime')
                }
            });

            flagElement.removeEventListener('aui-flag-close', BaseUrl.sendAnalyticsOnClose)
        },


        destroyBanner: function () {
            $flagElement.find('.aui-icon.icon-close').click();
        },

        updateBaseUrl: function (baseUrl) {
            SmartAjax.makeRequest({
                url: BaseUrl.jiraRestPath,
                type: "PUT",
                data: baseUrl.source,
                contentType: "application/json"
            }).done(function () {
                flag.showSuccessMsg('', formatter.format("Jira\'\'s base URL has been set to {0}.", BaseUrl.linkFor(baseUrl)));
                BaseUrl.destroyBanner();
            });
        },

        constructConfigProblems: function (requestUrl) {
            return '<p>' +
                this.constructConfigProblemItem('scheme', requestUrl.protocol) + '<br/>' +
                this.constructConfigProblemItem('proxyName', requestUrl.host) + '<br/>' +
                this.constructConfigProblemItem('proxyPort', BaseUrl.getPort(requestUrl)) +
                '</p>';
        },

        constructConfigProblemItem: function (subject, value) {
            return formatter.format("{0} should be {1}", '<strong>' + subject + '</strong>', '\'' + value + '\'');
        },

        constructFlagLink: function (href, linkText) {
            return '<a target="_blank" href="' + href + '"' + ' class="aui-button aui-button-link" id="base-url-proxy-config-fix">' + linkText + '</a>';
        },

        constructRequestUrl: function () {
            return parseUri(window.location.protocol + '//' + window.location.host + contextPath);
        },

        constructServerUrl: function () {
            var scheme = Meta.get('server-scheme');
            var serverPort = Meta.get('server-port');
            var port = ((scheme === 'https' && serverPort === '443') ||
                (scheme === 'http' && serverPort === '80')) ? '' : serverPort;
            return parseUri(scheme + '://' + Meta.get('server-name') +
                (port ? ':' + port : '') + contextPath);
        },

        linkFor: function (url) {
            return formatter.format('<a href="{0}">{0}</a>', url.source);
        },

        getPort: function(url){
            return url.port || (url.protocol === 'https' ? '443' : '80');
        }
    };


    return BaseUrl;
});
;
;
/* module-key = 'com.atlassian.jira.jira-baseurl-plugin:baseurl-lib', location = 'js/init-base-url-checker.js' */
require(['baseurl-checker', 'jquery'], function(BaseUrlProxyConfigCheck, $) {
    $(function () {
        BaseUrlProxyConfigCheck.performCheck();
    });
});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["jira/util/logger","underscore","jquery"],function(e,a,i){function t(e,i,t){if(a.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var r=0;a.isUndefined(i)||(this.params.action=i,r++,a.isUndefined(t)||(this.params.label=t,r++)),this.requiredArgumentNames=["action","label","value"].slice(r),this.useAsync=!0}return t.prototype.setAsync=function(e){return this.useAsync=e,this},t.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&e.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var t=a.clone(this.params),r=0;r<arguments.length&&!a.isUndefined(this.requiredArgumentNames[r]);r++)t[this.requiredArgumentNames[r]]=arguments[r];this._validateParams(t);var n="gh.analytics.async";i(document).trigger(n,t)},t.prototype._validateParams=function(e){var i=["category","action","label"];a.each(i,function(i){a.isUndefined(e[i])||a.isString(e[i])?a.isUndefined(e[i])&&(e[i]=""):e[i]=e[i].toString()}),a.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),a.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},t}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,a){"use strict";function e(){n(document).on(l,function(n,a){i(a)})}function i(n){var e={},i=n.category;a.isUndefined(n.action)||(i=i+"."+n.action),a.isUndefined(n.label)||(e.label=n.label),a.isUndefined(n.value)||(e.value=n.value),AJS.trigger("analytics",{name:i,data:e})}GH.AnalyticsEnabled=!0;var l="gh.analytics.async";e();var t={};return t.isEnabled=function(){return GH.AnalyticsEnabled},t.setEnabled=function(n){return GH.AnalyticsEnabled=n},t}),AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'includes/js/gh-globalissueoperations.js' */
define("jira-agile/gh-globalissueoperations",["jira/dialog/form-dialog","jira/dialog/dialog-register","jquery"],function(r,i,e){var a=require("jira-agile/rapid/analytics-tracker"),o=new a("gh.issueaction.gotorapidboard").setAsync(!1),n=r.extend({_performRedirect:function(r){o.trigger("direct"),window.location.href=r}}),t=new n({id:"gh-rapidboard-dialog",trigger:".issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return i.getDefaultAjaxOptions.apply(this,arguments)}}),s=function(r,i){var a="",o=e(r);return o.hasClass("js-rapidboard-operation-sprint")?a="sprint.":o.hasClass("js-rapidboard-operation-issue")&&(a="issue."),a+=i};return{init:function(){e(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();var i=s(r.currentTarget,"open");o.trigger(i),t.show()}),e(document).on("simpleClick",".js-select-rapidboard",function(r){var i=s(r.currentTarget,"chosen");o.trigger(i)})}}}),require("jira-agile/gh-globalissueoperations").init();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/initFieldPickers.js' */
!function(e){function n(n){e(".js-epic-picker",n).each(function(){var n=e(this),i=new JIRA.EpicPicker({element:n});e(document).trigger(JIRA.EpicPicker.READY_EVENT,i)})}function i(n){e(".js-sprint-picker",n).each(function(){var n=e(this),i=new JIRA.SprintPicker({element:n});e(document).trigger(JIRA.SprintPicker.READY_EVENT,i)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,c,t){t!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(n(c),i(c))})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicPicker.js' */
JIRA.EpicPicker=AJS.SingleSelect.extend({init:function(e){function r(e){var r=!p();return{searchQuery:e,projectKey:AJS.$(g).attr("data-project-key"),maxResults:100,hideDone:r}}function t(e,r,t,i){e=AJS.escapeHTML(String(e)),r=AJS.escapeHTML(String(r)),i=AJS.escapeHTML(String(i));var n=i.toUpperCase(),o=e.toUpperCase(),a=r.toUpperCase();n=(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1");var c,s=new RegExp("("+n+")","gi"),l=o.search(s);l>-1&&(c=e.slice(l,l+i.length),e=e.replace(c,"<em>"+c+"</em>")),l=a.search(s),l>-1&&(c=r.slice(l,l+i.length),r=r.replace(c,"<em>"+c+"</em>"));var p=t?" &#8226; "+"Done":"";return e+" - <span class='epic-menu-metadata'>("+r+p+")</span>"}function i(e){if(!e||!e.epicLists||0===e.total)return[];for(var r=[],t=d.getQueryVal(),i=0,a=0;a<e.epicLists.length;a++){var c=e.epicLists[a],s=c.epicNames,l=o(a+1,c.listDescriptor);s.length>0&&(_.each(s,function(e){l.addItem(n(e,t))}),r.push(l)),i+=s.length}if(i>0){var h=new AJS.GroupDescriptor({weight:0,showLabel:!1,items:[new AJS.ItemDescriptor({label:t,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><h5>"+AJS.format("Showing {0} of {1} matching epics",i,e.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(p()?" checked":"")+">"+"Show done epics"+"</label></li>"})]});r.unshift(h)}return r}function n(e,r){var i=e.key,n=e.name,o=e.isDone,a=t(n,i,o,r);return new AJS.ItemDescriptor({value:"key:"+i,fieldText:n,label:a,html:a,allowDuplicate:!1,highlighted:!0})}function o(e,r){return new AJS.GroupDescriptor({weight:e,label:r,replace:!0})}function a(e,r,t){var i=AJS.$(g);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function c(e){var r="",t=!1;return e&&e.length>0&&(r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",e),t=!0),{isError:t,message:r}}function s(e){var r,t;u.apply(d,[e]),e=e||AJS.$.trim(d.$field.val()),t=d.model.getDescriptor(e),!t&&d.$container.hasClass("aui-ss-editing")&&(r=c(e),r.isError?(d.options.errorMessage=r.message,d.showErrorMessage(e)):d.hideErrorMessage())}function l(){d._super(e),u=d.handleFreeInput,d.handleFreeInput=s;var r=require("jira/ajs/layer/inline-layer");d.dropdownController.bind(r.EVENTS.show,function(e,r){r.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h),r.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h)})}function p(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function h(e){e.preventDefault();var r=!p();try{localStorage.setItem("gh.epicpicker.showdone",r)}catch(e){}return d.$field.click(),!1}var u,g=e.element,d=this,m=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:m()+"/rest/greenhopper/1.0/epics",query:!0,data:r,formatResponse:i,error:a}});var f=this.setSelection;this.setSelection=function(e,r){e.properties.customItem||f.apply(this,arguments)},l()}}),JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(e){function n(e){var n=f.apply(this,arguments);return n.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties)),n}function t(e){var n,t=this.getSelectedDescriptor();e||t||p(null),o(),this.hideErrorMessage(),n=t?i(t):r(e),n.message&&(this.options.errorMessage=n.message,h.apply(this,arguments),this.$errorMessage.addClass("inline-edit-error")),n.needsScopeChangeWarning&&s()}function r(e){var n=null,t=!1;return e&&e.length>0?v?(n=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",e),v===m.ACTIVE&&(t=!0)):n=AJS.format("{0} is not a valid sprint name.",e):v===m.ACTIVE&&(t=!0),{message:n,needsScopeChangeWarning:t}}function i(e){var n=!1;return v===m.ACTIVE?n=!!u()||I!=e.properties.value:v===m.FUTURE?e.properties.stateKey===m.ACTIVE&&(n=!0):v||e.properties.stateKey===m.ACTIVE&&(n=!0),{message:null,needsScopeChangeWarning:n}}function s(){if(!S){u()||(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."})));var e=J.$container.closest(".inline-edit-fields");e.size()>0?u()?(S=AJS.$('<div class="ghx-estimate-scope-warning"></div>'),S.text("Sprint scope will be affected by this action."),e.find(".field-group").append(S)):e.closest(".editable-field").append(S):(u()&&(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."}))),J.$container.closest(".field-group").append(S))}S.show()}function o(){S&&(S.remove(),S=null)}function a(e){if(!e.suggestions&&!e.allMatches)return[];var n=new AJS.GroupDescriptor({weight:0,label:"Suggestions"}),t=new AJS.GroupDescriptor({weight:1,label:"All sprints"});return _.each(l(e.suggestions),function(e){n.addItem(g(e,!0))}),_.each(l(e.allMatches),function(e){t.addItem(g(e,!1))}),[n,t]}function g(e,n){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1,isSuggestion:n})}function l(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}function p(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:I,updated:e?e.properties.value:null}})}function d(){if(J._super(e),f=J.listController._renders.suggestion,h=J.showErrorMessage,J.listController._renders.suggestion=n,J.showErrorMessage=t,u()){var r=J.$container.closest(".inline-edit-fields"),i=r.size()>0;if(i){var s=w.parent().find("input");s.on("focus",function(){J.showErrorMessage()})}}w.bind("selected",function(e,n,t){u()&&i||t.showErrorMessage(t.getQueryVal()),p(n),J.showErrorMessage()}),J.suggestionsHandler=new x(J.options,J.model)}function c(e,n,t){var r=AJS.$(w);r.siblings(".ghx-error").remove(),r.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function u(){return!(!GH||!GH.DetailsObjectFactory)}var f,h,S,m={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},A=10,w=e.element,v=w.data("saved-state"),I=w.data("saved-id"),J=this,x=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,n){return e=this._super(e,n),0===n.length&&e[e.length-1].footerText("Start typing for sprints."),e}}),E=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:A,ajaxOptions:{url:E()+"/rest/greenhopper/1.0/sprint/picker",query:!0,formatResponse:a,error:c}}),d()}}),JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active sprint') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future sprint') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active sprint in {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future sprint in {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.js' */
JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){function n(e){var t=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,s)}),n=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,s)});return[t,n]}function s(e){e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new AJS.ItemDescriptor({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}AJS.$(".js-sprint-checkboxmultiselect",t).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1},query:!0,formatResponse:n},suggestionsHandler:GH.SprintSuggestHandler})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml('Closed') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed \xb7 {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Started on {0}',opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed on {0}',opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintSuggestHandler.js' */
define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){var t=function(e){_.each(e,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL"),e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t),e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)})};return e.extend({formatSuggestions:function(e,r){var s=this.model.getDisplayableSelectedDescriptors();t(s);var i=function(e){var t;for(t in s)if(s[t].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var t=_.filter(e.properties.items,i);return e.properties.items=t,e}),this._super(e,r)}})}),AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(e){function t(e){return 0!==e.indexOf("project")?"":n(e).trim()}function n(e){function t(e){var t=e.match(/\bproject\s*=\s*(\S+)/i);return t?t[1]:null}function n(e){var t=e.match(/\bproject\s+in\s+\((.*?)\)/i);return t?t[1]:null}return t(e)||n(e)}var i=e("jquery"),r=e("underscore");JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n){var s=i("#jql",this).val();n.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:t(s),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]})),!e||!e.epicLists||0===e.total)return t;for(var n=0;n<e.epicLists.length;n++){var i=e.epicLists[n],s=i.epicNames,c=new AJS.GroupDescriptor({label:i.listDescriptor,weight:n});s.length>0&&(r.each(s,function(e){c.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))}),t.push(c))}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){var i=this.model.getDisplayableSelectedDescriptors(),t=function(e){var r;for(r in i)if(i[r].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var r=_.filter(e.properties.items,t);return e.properties.items=r,e}),this._super(e,r)}})}),AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimise the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,s,o,t,a,i,n,r,u){var c={},d=require("wrm/context-path");return c.findSelectedIssueId=function(){var e;return i&&i.getSelectedIssueId&&(e=i.getSelectedIssueId()),!e&&a&&a.getIssueId&&(e=a.getIssueId()),e},c.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=d();s&&(e=s+e),window.location.href=e},c.followLink=function(e){var s=r(e);s.length>0&&("a"===s[0].nodeName.toLowerCase()||"link"===s[0].nodeName.toLowerCase())&&(s.click(),window.location.href=s.attr("href"))},c.sendToTop=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},c.sendToBottom=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},c.closeDialogAndPopMessage=function(){i.isNavigator()?u.reloadViaWindowLocation():(n&&n.current&&n.current.hide(),window.GH?(GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage(),window.Boards&&window.Boards.refreshAll()):i&&t&&t.flashIssueRow&&t.flashIssueRow())},c.handleRankSuccess=function(e,s,o){c.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),c.closeDialogAndPopMessage()},c.storeSuccessMessage=function(e,s,t){var a=o;try{a.setItem("selectedIssueId",e),a.setItem("selectedIssueKey",s),a.setItem("selectedIssueMsg",t)}catch(e){}},c}),require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(e,s){e(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToTop("Action",t)}),e(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToBottom("Action",t)})}),AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('Log in \x26 approve') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-warning warning">' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a,o={},d={},t={};o=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(o,i,e),d=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(d),t=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(t,i,e,d),a=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(o,t)});;